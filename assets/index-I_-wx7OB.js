var ww=Object.defineProperty;var Tw=(t,e,r)=>e in t?ww(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var F=(t,e,r)=>Tw(t,typeof e!="symbol"?e+"":e,r);function Ew(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const f of o.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&n(f)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function $d(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fh={exports:{}},ml={},hh={exports:{}},Bt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a_;function Sw(){if(a_)return Bt;a_=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),T=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),x=Symbol.iterator;function M(X){return X===null||typeof X!="object"?null:(X=x&&X[x]||X["@@iterator"],typeof X=="function"?X:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,j={};function G(X,te,ke){this.props=X,this.context=te,this.refs=j,this.updater=ke||U}G.prototype.isReactComponent={},G.prototype.setState=function(X,te){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,te,"setState")},G.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function re(){}re.prototype=G.prototype;function se(X,te,ke){this.props=X,this.context=te,this.refs=j,this.updater=ke||U}var ce=se.prototype=new re;ce.constructor=se,W(ce,G.prototype),ce.isPureReactComponent=!0;var we=Array.isArray,be=Object.prototype.hasOwnProperty,Pe={current:null},Xe={key:!0,ref:!0,__self:!0,__source:!0};function nt(X,te,ke){var Ve,je={},ot=null,Ye=null;if(te!=null)for(Ve in te.ref!==void 0&&(Ye=te.ref),te.key!==void 0&&(ot=""+te.key),te)be.call(te,Ve)&&!Xe.hasOwnProperty(Ve)&&(je[Ve]=te[Ve]);var Ke=arguments.length-2;if(Ke===1)je.children=ke;else if(1<Ke){for(var et=Array(Ke),At=0;At<Ke;At++)et[At]=arguments[At+2];je.children=et}if(X&&X.defaultProps)for(Ve in Ke=X.defaultProps,Ke)je[Ve]===void 0&&(je[Ve]=Ke[Ve]);return{$$typeof:t,type:X,key:ot,ref:Ye,props:je,_owner:Pe.current}}function Ue(X,te){return{$$typeof:t,type:X.type,key:te,ref:X.ref,props:X.props,_owner:X._owner}}function Je(X){return typeof X=="object"&&X!==null&&X.$$typeof===t}function it(X){var te={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(ke){return te[ke]})}var mt=/\/+/g;function _t(X,te){return typeof X=="object"&&X!==null&&X.key!=null?it(""+X.key):te.toString(36)}function ct(X,te,ke,Ve,je){var ot=typeof X;(ot==="undefined"||ot==="boolean")&&(X=null);var Ye=!1;if(X===null)Ye=!0;else switch(ot){case"string":case"number":Ye=!0;break;case"object":switch(X.$$typeof){case t:case e:Ye=!0}}if(Ye)return Ye=X,je=je(Ye),X=Ve===""?"."+_t(Ye,0):Ve,we(je)?(ke="",X!=null&&(ke=X.replace(mt,"$&/")+"/"),ct(je,te,ke,"",function(At){return At})):je!=null&&(Je(je)&&(je=Ue(je,ke+(!je.key||Ye&&Ye.key===je.key?"":(""+je.key).replace(mt,"$&/")+"/")+X)),te.push(je)),1;if(Ye=0,Ve=Ve===""?".":Ve+":",we(X))for(var Ke=0;Ke<X.length;Ke++){ot=X[Ke];var et=Ve+_t(ot,Ke);Ye+=ct(ot,te,ke,et,je)}else if(et=M(X),typeof et=="function")for(X=et.call(X),Ke=0;!(ot=X.next()).done;)ot=ot.value,et=Ve+_t(ot,Ke++),Ye+=ct(ot,te,ke,et,je);else if(ot==="object")throw te=String(X),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.");return Ye}function Vt(X,te,ke){if(X==null)return X;var Ve=[],je=0;return ct(X,Ve,"","",function(ot){return te.call(ke,ot,je++)}),Ve}function q(X){if(X._status===-1){var te=X._result;te=te(),te.then(function(ke){(X._status===0||X._status===-1)&&(X._status=1,X._result=ke)},function(ke){(X._status===0||X._status===-1)&&(X._status=2,X._result=ke)}),X._status===-1&&(X._status=0,X._result=te)}if(X._status===1)return X._result.default;throw X._result}var ae={current:null},Q={transition:null},de={ReactCurrentDispatcher:ae,ReactCurrentBatchConfig:Q,ReactCurrentOwner:Pe};function ue(){throw Error("act(...) is not supported in production builds of React.")}return Bt.Children={map:Vt,forEach:function(X,te,ke){Vt(X,function(){te.apply(this,arguments)},ke)},count:function(X){var te=0;return Vt(X,function(){te++}),te},toArray:function(X){return Vt(X,function(te){return te})||[]},only:function(X){if(!Je(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},Bt.Component=G,Bt.Fragment=r,Bt.Profiler=i,Bt.PureComponent=se,Bt.StrictMode=n,Bt.Suspense=y,Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=de,Bt.act=ue,Bt.cloneElement=function(X,te,ke){if(X==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+X+".");var Ve=W({},X.props),je=X.key,ot=X.ref,Ye=X._owner;if(te!=null){if(te.ref!==void 0&&(ot=te.ref,Ye=Pe.current),te.key!==void 0&&(je=""+te.key),X.type&&X.type.defaultProps)var Ke=X.type.defaultProps;for(et in te)be.call(te,et)&&!Xe.hasOwnProperty(et)&&(Ve[et]=te[et]===void 0&&Ke!==void 0?Ke[et]:te[et])}var et=arguments.length-2;if(et===1)Ve.children=ke;else if(1<et){Ke=Array(et);for(var At=0;At<et;At++)Ke[At]=arguments[At+2];Ve.children=Ke}return{$$typeof:t,type:X.type,key:je,ref:ot,props:Ve,_owner:Ye}},Bt.createContext=function(X){return X={$$typeof:f,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},X.Provider={$$typeof:o,_context:X},X.Consumer=X},Bt.createElement=nt,Bt.createFactory=function(X){var te=nt.bind(null,X);return te.type=X,te},Bt.createRef=function(){return{current:null}},Bt.forwardRef=function(X){return{$$typeof:p,render:X}},Bt.isValidElement=Je,Bt.lazy=function(X){return{$$typeof:R,_payload:{_status:-1,_result:X},_init:q}},Bt.memo=function(X,te){return{$$typeof:T,type:X,compare:te===void 0?null:te}},Bt.startTransition=function(X){var te=Q.transition;Q.transition={};try{X()}finally{Q.transition=te}},Bt.unstable_act=ue,Bt.useCallback=function(X,te){return ae.current.useCallback(X,te)},Bt.useContext=function(X){return ae.current.useContext(X)},Bt.useDebugValue=function(){},Bt.useDeferredValue=function(X){return ae.current.useDeferredValue(X)},Bt.useEffect=function(X,te){return ae.current.useEffect(X,te)},Bt.useId=function(){return ae.current.useId()},Bt.useImperativeHandle=function(X,te,ke){return ae.current.useImperativeHandle(X,te,ke)},Bt.useInsertionEffect=function(X,te){return ae.current.useInsertionEffect(X,te)},Bt.useLayoutEffect=function(X,te){return ae.current.useLayoutEffect(X,te)},Bt.useMemo=function(X,te){return ae.current.useMemo(X,te)},Bt.useReducer=function(X,te,ke){return ae.current.useReducer(X,te,ke)},Bt.useRef=function(X){return ae.current.useRef(X)},Bt.useState=function(X){return ae.current.useState(X)},Bt.useSyncExternalStore=function(X,te,ke){return ae.current.useSyncExternalStore(X,te,ke)},Bt.useTransition=function(){return ae.current.useTransition()},Bt.version="18.3.1",Bt}var A_;function Qd(){return A_||(A_=1,hh.exports=Sw()),hh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l_;function bw(){if(l_)return ml;l_=1;var t=Qd(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function f(p,y,T){var R,x={},M=null,U=null;T!==void 0&&(M=""+T),y.key!==void 0&&(M=""+y.key),y.ref!==void 0&&(U=y.ref);for(R in y)n.call(y,R)&&!o.hasOwnProperty(R)&&(x[R]=y[R]);if(p&&p.defaultProps)for(R in y=p.defaultProps,y)x[R]===void 0&&(x[R]=y[R]);return{$$typeof:e,type:p,key:M,ref:U,props:x,_owner:i.current}}return ml.Fragment=r,ml.jsx=f,ml.jsxs=f,ml}var u_;function Cw(){return u_||(u_=1,fh.exports=bw()),fh.exports}var Fi=Cw(),ye=Qd(),dc={},dh={exports:{}},En={},gh={exports:{}},ph={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c_;function Rw(){return c_||(c_=1,function(t){function e(Q,de){var ue=Q.length;Q.push(de);e:for(;0<ue;){var X=ue-1>>>1,te=Q[X];if(0<i(te,de))Q[X]=de,Q[ue]=te,ue=X;else break e}}function r(Q){return Q.length===0?null:Q[0]}function n(Q){if(Q.length===0)return null;var de=Q[0],ue=Q.pop();if(ue!==de){Q[0]=ue;e:for(var X=0,te=Q.length,ke=te>>>1;X<ke;){var Ve=2*(X+1)-1,je=Q[Ve],ot=Ve+1,Ye=Q[ot];if(0>i(je,ue))ot<te&&0>i(Ye,je)?(Q[X]=Ye,Q[ot]=ue,X=ot):(Q[X]=je,Q[Ve]=ue,X=Ve);else if(ot<te&&0>i(Ye,ue))Q[X]=Ye,Q[ot]=ue,X=ot;else break e}}return de}function i(Q,de){var ue=Q.sortIndex-de.sortIndex;return ue!==0?ue:Q.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var f=Date,p=f.now();t.unstable_now=function(){return f.now()-p}}var y=[],T=[],R=1,x=null,M=3,U=!1,W=!1,j=!1,G=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ce(Q){for(var de=r(T);de!==null;){if(de.callback===null)n(T);else if(de.startTime<=Q)n(T),de.sortIndex=de.expirationTime,e(y,de);else break;de=r(T)}}function we(Q){if(j=!1,ce(Q),!W)if(r(y)!==null)W=!0,q(be);else{var de=r(T);de!==null&&ae(we,de.startTime-Q)}}function be(Q,de){W=!1,j&&(j=!1,re(nt),nt=-1),U=!0;var ue=M;try{for(ce(de),x=r(y);x!==null&&(!(x.expirationTime>de)||Q&&!it());){var X=x.callback;if(typeof X=="function"){x.callback=null,M=x.priorityLevel;var te=X(x.expirationTime<=de);de=t.unstable_now(),typeof te=="function"?x.callback=te:x===r(y)&&n(y),ce(de)}else n(y);x=r(y)}if(x!==null)var ke=!0;else{var Ve=r(T);Ve!==null&&ae(we,Ve.startTime-de),ke=!1}return ke}finally{x=null,M=ue,U=!1}}var Pe=!1,Xe=null,nt=-1,Ue=5,Je=-1;function it(){return!(t.unstable_now()-Je<Ue)}function mt(){if(Xe!==null){var Q=t.unstable_now();Je=Q;var de=!0;try{de=Xe(!0,Q)}finally{de?_t():(Pe=!1,Xe=null)}}else Pe=!1}var _t;if(typeof se=="function")_t=function(){se(mt)};else if(typeof MessageChannel<"u"){var ct=new MessageChannel,Vt=ct.port2;ct.port1.onmessage=mt,_t=function(){Vt.postMessage(null)}}else _t=function(){G(mt,0)};function q(Q){Xe=Q,Pe||(Pe=!0,_t())}function ae(Q,de){nt=G(function(){Q(t.unstable_now())},de)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Q){Q.callback=null},t.unstable_continueExecution=function(){W||U||(W=!0,q(be))},t.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ue=0<Q?Math.floor(1e3/Q):5},t.unstable_getCurrentPriorityLevel=function(){return M},t.unstable_getFirstCallbackNode=function(){return r(y)},t.unstable_next=function(Q){switch(M){case 1:case 2:case 3:var de=3;break;default:de=M}var ue=M;M=de;try{return Q()}finally{M=ue}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Q,de){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ue=M;M=Q;try{return de()}finally{M=ue}},t.unstable_scheduleCallback=function(Q,de,ue){var X=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?X+ue:X):ue=X,Q){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=ue+te,Q={id:R++,callback:de,priorityLevel:Q,startTime:ue,expirationTime:te,sortIndex:-1},ue>X?(Q.sortIndex=ue,e(T,Q),r(y)===null&&Q===r(T)&&(j?(re(nt),nt=-1):j=!0,ae(we,ue-X))):(Q.sortIndex=te,e(y,Q),W||U||(W=!0,q(be))),Q},t.unstable_shouldYield=it,t.unstable_wrapCallback=function(Q){var de=M;return function(){var ue=M;M=de;try{return Q.apply(this,arguments)}finally{M=ue}}}}(ph)),ph}var f_;function Pw(){return f_||(f_=1,gh.exports=Rw()),gh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h_;function kw(){if(h_)return En;h_=1;var t=Qd(),e=Pw();function r(s){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+s,g=1;g<arguments.length;g++)l+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function o(s,l){f(s,l),f(s+"Capture",l)}function f(s,l){for(i[s]=l,s=0;s<l.length;s++)n.add(l[s])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,T=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,R={},x={};function M(s){return y.call(x,s)?!0:y.call(R,s)?!1:T.test(s)?x[s]=!0:(R[s]=!0,!1)}function U(s,l,g,v){if(g!==null&&g.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return v?!1:g!==null?!g.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function W(s,l,g,v){if(l===null||typeof l>"u"||U(s,l,g,v))return!0;if(v)return!1;if(g!==null)switch(g.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function j(s,l,g,v,E,P,O){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=v,this.attributeNamespace=E,this.mustUseProperty=g,this.propertyName=s,this.type=l,this.sanitizeURL=P,this.removeEmptyString=O}var G={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){G[s]=new j(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var l=s[0];G[l]=new j(l,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){G[s]=new j(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){G[s]=new j(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){G[s]=new j(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){G[s]=new j(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){G[s]=new j(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){G[s]=new j(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){G[s]=new j(s,5,!1,s.toLowerCase(),null,!1,!1)});var re=/[\-:]([a-z])/g;function se(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var l=s.replace(re,se);G[l]=new j(l,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var l=s.replace(re,se);G[l]=new j(l,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var l=s.replace(re,se);G[l]=new j(l,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){G[s]=new j(s,1,!1,s.toLowerCase(),null,!1,!1)}),G.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){G[s]=new j(s,1,!1,s.toLowerCase(),null,!0,!0)});function ce(s,l,g,v){var E=G.hasOwnProperty(l)?G[l]:null;(E!==null?E.type!==0:v||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(W(l,g,E,v)&&(g=null),v||E===null?M(l)&&(g===null?s.removeAttribute(l):s.setAttribute(l,""+g)):E.mustUseProperty?s[E.propertyName]=g===null?E.type===3?!1:"":g:(l=E.attributeName,v=E.attributeNamespace,g===null?s.removeAttribute(l):(E=E.type,g=E===3||E===4&&g===!0?"":""+g,v?s.setAttributeNS(v,l,g):s.setAttribute(l,g))))}var we=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,be=Symbol.for("react.element"),Pe=Symbol.for("react.portal"),Xe=Symbol.for("react.fragment"),nt=Symbol.for("react.strict_mode"),Ue=Symbol.for("react.profiler"),Je=Symbol.for("react.provider"),it=Symbol.for("react.context"),mt=Symbol.for("react.forward_ref"),_t=Symbol.for("react.suspense"),ct=Symbol.for("react.suspense_list"),Vt=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),ae=Symbol.for("react.offscreen"),Q=Symbol.iterator;function de(s){return s===null||typeof s!="object"?null:(s=Q&&s[Q]||s["@@iterator"],typeof s=="function"?s:null)}var ue=Object.assign,X;function te(s){if(X===void 0)try{throw Error()}catch(g){var l=g.stack.trim().match(/\n( *(at )?)/);X=l&&l[1]||""}return`
`+X+s}var ke=!1;function Ve(s,l){if(!s||ke)return"";ke=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(Ee){var v=Ee}Reflect.construct(s,[],l)}else{try{l.call()}catch(Ee){v=Ee}s.call(l.prototype)}else{try{throw Error()}catch(Ee){v=Ee}s()}}catch(Ee){if(Ee&&v&&typeof Ee.stack=="string"){for(var E=Ee.stack.split(`
`),P=v.stack.split(`
`),O=E.length-1,Y=P.length-1;1<=O&&0<=Y&&E[O]!==P[Y];)Y--;for(;1<=O&&0<=Y;O--,Y--)if(E[O]!==P[Y]){if(O!==1||Y!==1)do if(O--,Y--,0>Y||E[O]!==P[Y]){var ee=`
`+E[O].replace(" at new "," at ");return s.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",s.displayName)),ee}while(1<=O&&0<=Y);break}}}finally{ke=!1,Error.prepareStackTrace=g}return(s=s?s.displayName||s.name:"")?te(s):""}function je(s){switch(s.tag){case 5:return te(s.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return s=Ve(s.type,!1),s;case 11:return s=Ve(s.type.render,!1),s;case 1:return s=Ve(s.type,!0),s;default:return""}}function ot(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case Xe:return"Fragment";case Pe:return"Portal";case Ue:return"Profiler";case nt:return"StrictMode";case _t:return"Suspense";case ct:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case it:return(s.displayName||"Context")+".Consumer";case Je:return(s._context.displayName||"Context")+".Provider";case mt:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Vt:return l=s.displayName||null,l!==null?l:ot(s.type)||"Memo";case q:l=s._payload,s=s._init;try{return ot(s(l))}catch{}}return null}function Ye(s){var l=s.type;switch(s.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=l.render,s=s.displayName||s.name||"",l.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ot(l);case 8:return l===nt?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Ke(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function et(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function At(s){var l=et(s)?"checked":"value",g=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),v=""+s[l];if(!s.hasOwnProperty(l)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var E=g.get,P=g.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return E.call(this)},set:function(O){v=""+O,P.call(this,O)}}),Object.defineProperty(s,l,{enumerable:g.enumerable}),{getValue:function(){return v},setValue:function(O){v=""+O},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Hr(s){s._valueTracker||(s._valueTracker=At(s))}function Jr(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var g=l.getValue(),v="";return s&&(v=et(s)?s.checked?"true":"false":s.value),s=v,s!==g?(l.setValue(s),!0):!1}function un(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function pn(s,l){var g=l.checked;return ue({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??s._wrapperState.initialChecked})}function Ft(s,l){var g=l.defaultValue==null?"":l.defaultValue,v=l.checked!=null?l.checked:l.defaultChecked;g=Ke(l.value!=null?l.value:g),s._wrapperState={initialChecked:v,initialValue:g,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Pt(s,l){l=l.checked,l!=null&&ce(s,"checked",l,!1)}function xr(s,l){Pt(s,l);var g=Ke(l.value),v=l.type;if(g!=null)v==="number"?(g===0&&s.value===""||s.value!=g)&&(s.value=""+g):s.value!==""+g&&(s.value=""+g);else if(v==="submit"||v==="reset"){s.removeAttribute("value");return}l.hasOwnProperty("value")?as(s,l.type,g):l.hasOwnProperty("defaultValue")&&as(s,l.type,Ke(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(s.defaultChecked=!!l.defaultChecked)}function Zn(s,l,g){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var v=l.type;if(!(v!=="submit"&&v!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+s._wrapperState.initialValue,g||l===s.value||(s.value=l),s.defaultValue=l}g=s.name,g!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,g!==""&&(s.name=g)}function as(s,l,g){(l!=="number"||un(s.ownerDocument)!==s)&&(g==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+g&&(s.defaultValue=""+g))}var Nn=Array.isArray;function Kt(s,l,g,v){if(s=s.options,l){l={};for(var E=0;E<g.length;E++)l["$"+g[E]]=!0;for(g=0;g<s.length;g++)E=l.hasOwnProperty("$"+s[g].value),s[g].selected!==E&&(s[g].selected=E),E&&v&&(s[g].defaultSelected=!0)}else{for(g=""+Ke(g),l=null,E=0;E<s.length;E++){if(s[E].value===g){s[E].selected=!0,v&&(s[E].defaultSelected=!0);return}l!==null||s[E].disabled||(l=s[E])}l!==null&&(l.selected=!0)}}function Xi(s,l){if(l.dangerouslySetInnerHTML!=null)throw Error(r(91));return ue({},l,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function to(s,l){var g=l.value;if(g==null){if(g=l.children,l=l.defaultValue,g!=null){if(l!=null)throw Error(r(92));if(Nn(g)){if(1<g.length)throw Error(r(93));g=g[0]}l=g}l==null&&(l=""),g=l}s._wrapperState={initialValue:Ke(g)}}function qn(s,l){var g=Ke(l.value),v=Ke(l.defaultValue);g!=null&&(g=""+g,g!==s.value&&(s.value=g),l.defaultValue==null&&s.defaultValue!==g&&(s.defaultValue=g)),v!=null&&(s.defaultValue=""+v)}function As(s){var l=s.textContent;l===s._wrapperState.initialValue&&l!==""&&l!==null&&(s.value=l)}function ha(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ls(s,l){return s==null||s==="http://www.w3.org/1999/xhtml"?ha(l):s==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var gi,us=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,g,v,E){MSApp.execUnsafeLocalFunction(function(){return s(l,g,v,E)})}:s}(function(s,l){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=l;else{for(gi=gi||document.createElement("div"),gi.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=gi.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;l.firstChild;)s.appendChild(l.firstChild)}});function pi(s,l){if(l){var g=s.firstChild;if(g&&g===s.lastChild&&g.nodeType===3){g.nodeValue=l;return}}s.textContent=l}var On={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cs=["Webkit","ms","Moz","O"];Object.keys(On).forEach(function(s){cs.forEach(function(l){l=l+s.charAt(0).toUpperCase()+s.substring(1),On[l]=On[s]})});function da(s,l,g){return l==null||typeof l=="boolean"||l===""?"":g||typeof l!="number"||l===0||On.hasOwnProperty(s)&&On[s]?(""+l).trim():l+"px"}function ga(s,l){s=s.style;for(var g in l)if(l.hasOwnProperty(g)){var v=g.indexOf("--")===0,E=da(g,l[g],v);g==="float"&&(g="cssFloat"),v?s.setProperty(g,E):s[g]=E}}var bA=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fs(s,l){if(l){if(bA[s]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(r(137,s));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(r(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(r(61))}if(l.style!=null&&typeof l.style!="object")throw Error(r(62))}}function ro(s,l){if(s.indexOf("-")===-1)return typeof l.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _i=null;function no(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var $i=null,Gn=null,Jn=null;function Oe(s){if(s=Cn(s)){if(typeof $i!="function")throw Error(r(280));var l=s.stateNode;l&&(l=Er(l),$i(s.stateNode,s.type,l))}}function pa(s){Gn?Jn?Jn.push(s):Jn=[s]:Gn=s}function io(){if(Gn){var s=Gn,l=Jn;if(Jn=Gn=null,Oe(s),l)for(s=0;s<l.length;s++)Oe(l[s])}}function _a(s,l){return s(l)}function so(){}var Qi=!1;function oo(s,l,g){if(Qi)return s(l,g);Qi=!0;try{return _a(s,l,g)}finally{Qi=!1,(Gn!==null||Jn!==null)&&(so(),io())}}function mi(s,l){var g=s.stateNode;if(g===null)return null;var v=Er(g);if(v===null)return null;g=v[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(s=s.type,v=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!v;break e;default:s=!1}if(s)return null;if(g&&typeof g!="function")throw Error(r(231,l,typeof g));return g}var ei=!1;if(p)try{var Dn={};Object.defineProperty(Dn,"passive",{get:function(){ei=!0}}),window.addEventListener("test",Dn,Dn),window.removeEventListener("test",Dn,Dn)}catch{ei=!1}function ao(s,l,g,v,E,P,O,Y,ee){var Ee=Array.prototype.slice.call(arguments,3);try{l.apply(g,Ee)}catch(De){this.onError(De)}}var en=!1,he=null,Re=!1,He=null,ft={onError:function(s){en=!0,he=s}};function u(s,l,g,v,E,P,O,Y,ee){en=!1,he=null,ao.apply(ft,arguments)}function B(s,l,g,v,E,P,O,Y,ee){if(u.apply(this,arguments),en){if(en){var Ee=he;en=!1,he=null}else throw Error(r(198));Re||(Re=!0,He=Ee)}}function Mt(s){var l=s,g=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,l.flags&4098&&(g=l.return),s=l.return;while(s)}return l.tag===3?g:null}function jt(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function sr(s){if(Mt(s)!==s)throw Error(r(188))}function yt(s){var l=s.alternate;if(!l){if(l=Mt(s),l===null)throw Error(r(188));return l!==s?null:s}for(var g=s,v=l;;){var E=g.return;if(E===null)break;var P=E.alternate;if(P===null){if(v=E.return,v!==null){g=v;continue}break}if(E.child===P.child){for(P=E.child;P;){if(P===g)return sr(E),s;if(P===v)return sr(E),l;P=P.sibling}throw Error(r(188))}if(g.return!==v.return)g=E,v=P;else{for(var O=!1,Y=E.child;Y;){if(Y===g){O=!0,g=E,v=P;break}if(Y===v){O=!0,v=E,g=P;break}Y=Y.sibling}if(!O){for(Y=P.child;Y;){if(Y===g){O=!0,g=P,v=E;break}if(Y===v){O=!0,v=P,g=E;break}Y=Y.sibling}if(!O)throw Error(r(189))}}if(g.alternate!==v)throw Error(r(190))}if(g.tag!==3)throw Error(r(188));return g.stateNode.current===g?s:l}function Nt(s){return s=yt(s),s!==null?jr(s):null}function jr(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var l=jr(s);if(l!==null)return l;s=s.sibling}return null}var Ut=e.unstable_scheduleCallback,vt=e.unstable_cancelCallback,tn=e.unstable_shouldYield,hs=e.unstable_requestPaint,qt=e.unstable_now,Dr=e.unstable_getCurrentPriorityLevel,ur=e.unstable_ImmediatePriority,Ir=e.unstable_UserBlockingPriority,or=e.unstable_NormalPriority,ti=e.unstable_LowPriority,cn=e.unstable_IdlePriority,pr=null,lt=null;function z(s){if(lt&&typeof lt.onCommitFiberRoot=="function")try{lt.onCommitFiberRoot(pr,s,void 0,(s.current.flags&128)===128)}catch{}}var qe=Math.clz32?Math.clz32:Ao,rn=Math.log,ds=Math.LN2;function Ao(s){return s>>>=0,s===0?32:31-(rn(s)/ds|0)|0}var yi=64,vi=4194304;function L(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function ri(s,l){var g=s.pendingLanes;if(g===0)return 0;var v=0,E=s.suspendedLanes,P=s.pingedLanes,O=g&268435455;if(O!==0){var Y=O&~E;Y!==0?v=L(Y):(P&=O,P!==0&&(v=L(P)))}else O=g&~E,O!==0?v=L(O):P!==0&&(v=L(P));if(v===0)return 0;if(l!==0&&l!==v&&!(l&E)&&(E=v&-v,P=l&-l,E>=P||E===16&&(P&4194240)!==0))return l;if(v&4&&(v|=g&16),l=s.entangledLanes,l!==0)for(s=s.entanglements,l&=v;0<l;)g=31-qe(l),E=1<<g,v|=s[g],l&=~E;return v}function In(s,l){switch(s){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CA(s,l){for(var g=s.suspendedLanes,v=s.pingedLanes,E=s.expirationTimes,P=s.pendingLanes;0<P;){var O=31-qe(P),Y=1<<O,ee=E[O];ee===-1?(!(Y&g)||Y&v)&&(E[O]=In(Y,l)):ee<=l&&(s.expiredLanes|=Y),P&=~Y}}function gs(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function ps(){var s=yi;return yi<<=1,!(yi&4194240)&&(yi=64),s}function _s(s){for(var l=[],g=0;31>g;g++)l.push(s);return l}function wi(s,l,g){s.pendingLanes|=l,l!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,l=31-qe(l),s[l]=g}function ma(s,l){var g=s.pendingLanes&~l;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=l,s.mutableReadLanes&=l,s.entangledLanes&=l,l=s.entanglements;var v=s.eventTimes;for(s=s.expirationTimes;0<g;){var E=31-qe(g),P=1<<E;l[E]=0,v[E]=-1,s[E]=-1,g&=~P}}function D(s,l){var g=s.entangledLanes|=l;for(s=s.entanglements;g;){var v=31-qe(g),E=1<<v;E&l|s[v]&l&&(s[v]|=l),g&=~E}}var I=0;function K(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var ve,Me,Qe,Ot,cr,fr=!1,_r=[],kt=null,Fn=null,ni=null,lo=new Map,uo=new Map,Ti=[],su="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ya(s,l){switch(s){case"focusin":case"focusout":kt=null;break;case"dragenter":case"dragleave":Fn=null;break;case"mouseover":case"mouseout":ni=null;break;case"pointerover":case"pointerout":lo.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":uo.delete(l.pointerId)}}function Yi(s,l,g,v,E,P){return s===null||s.nativeEvent!==P?(s={blockedOn:l,domEventName:g,eventSystemFlags:v,nativeEvent:P,targetContainers:[E]},l!==null&&(l=Cn(l),l!==null&&Me(l)),s):(s.eventSystemFlags|=v,l=s.targetContainers,E!==null&&l.indexOf(E)===-1&&l.push(E),s)}function Qf(s,l,g,v,E){switch(l){case"focusin":return kt=Yi(kt,s,l,g,v,E),!0;case"dragenter":return Fn=Yi(Fn,s,l,g,v,E),!0;case"mouseover":return ni=Yi(ni,s,l,g,v,E),!0;case"pointerover":var P=E.pointerId;return lo.set(P,Yi(lo.get(P)||null,s,l,g,v,E)),!0;case"gotpointercapture":return P=E.pointerId,uo.set(P,Yi(uo.get(P)||null,s,l,g,v,E)),!0}return!1}function ou(s){var l=ii(s.target);if(l!==null){var g=Mt(l);if(g!==null){if(l=g.tag,l===13){if(l=jt(g),l!==null){s.blockedOn=l,cr(s.priority,function(){Qe(g)});return}}else if(l===3&&g.stateNode.current.memoizedState.isDehydrated){s.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}s.blockedOn=null}function co(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var g=ys(s.domEventName,s.eventSystemFlags,l[0],s.nativeEvent);if(g===null){g=s.nativeEvent;var v=new g.constructor(g.type,g);_i=v,g.target.dispatchEvent(v),_i=null}else return l=Cn(g),l!==null&&Me(l),s.blockedOn=g,!1;l.shift()}return!0}function RA(s,l,g){co(s)&&g.delete(l)}function au(){fr=!1,kt!==null&&co(kt)&&(kt=null),Fn!==null&&co(Fn)&&(Fn=null),ni!==null&&co(ni)&&(ni=null),lo.forEach(RA),uo.forEach(RA)}function fo(s,l){s.blockedOn===l&&(s.blockedOn=null,fr||(fr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,au)))}function ho(s){function l(E){return fo(E,s)}if(0<_r.length){fo(_r[0],s);for(var g=1;g<_r.length;g++){var v=_r[g];v.blockedOn===s&&(v.blockedOn=null)}}for(kt!==null&&fo(kt,s),Fn!==null&&fo(Fn,s),ni!==null&&fo(ni,s),lo.forEach(l),uo.forEach(l),g=0;g<Ti.length;g++)v=Ti[g],v.blockedOn===s&&(v.blockedOn=null);for(;0<Ti.length&&(g=Ti[0],g.blockedOn===null);)ou(g),g.blockedOn===null&&Ti.shift()}var ms=we.ReactCurrentBatchConfig,wr=!0;function Ki(s,l,g,v){var E=I,P=ms.transition;ms.transition=null;try{I=1,go(s,l,g,v)}finally{I=E,ms.transition=P}}function Wr(s,l,g,v){var E=I,P=ms.transition;ms.transition=null;try{I=4,go(s,l,g,v)}finally{I=E,ms.transition=P}}function go(s,l,g,v){if(wr){var E=ys(s,l,g,v);if(E===null)JA(s,l,v,po,g),ya(s,v);else if(Qf(E,s,l,g,v))v.stopPropagation();else if(ya(s,v),l&4&&-1<su.indexOf(s)){for(;E!==null;){var P=Cn(E);if(P!==null&&ve(P),P=ys(s,l,g,v),P===null&&JA(s,l,v,po,g),P===E)break;E=P}E!==null&&v.stopPropagation()}else JA(s,l,v,null,g)}}var po=null;function ys(s,l,g,v){if(po=null,s=no(v),s=ii(s),s!==null)if(l=Mt(s),l===null)s=null;else if(g=l.tag,g===13){if(s=jt(l),s!==null)return s;s=null}else if(g===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null);return po=s,null}function Au(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dr()){case ur:return 1;case Ir:return 4;case or:case ti:return 16;case cn:return 536870912;default:return 16}default:return 16}}var Ei=null,PA=null,_o=null;function mo(){if(_o)return _o;var s,l=PA,g=l.length,v,E="value"in Ei?Ei.value:Ei.textContent,P=E.length;for(s=0;s<g&&l[s]===E[s];s++);var O=g-s;for(v=1;v<=O&&l[g-v]===E[P-v];v++);return _o=E.slice(s,1<v?1-v:void 0)}function Ln(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function yo(){return!0}function kA(){return!1}function Fr(s){function l(g,v,E,P,O){this._reactName=g,this._targetInst=E,this.type=v,this.nativeEvent=P,this.target=O,this.currentTarget=null;for(var Y in s)s.hasOwnProperty(Y)&&(g=s[Y],this[Y]=g?g(P):P[Y]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?yo:kA,this.isPropagationStopped=kA,this}return ue(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=yo)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=yo)},persist:function(){},isPersistent:yo}),l}var _n={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Un=Fr(_n),vs=ue({},_n,{view:0,detail:0}),lu=Fr(vs),vo,xA,wo,To=ue({},vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wa,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==wo&&(wo&&s.type==="mousemove"?(vo=s.screenX-wo.screenX,xA=s.screenY-wo.screenY):xA=vo=0,wo=s),vo)},movementY:function(s){return"movementY"in s?s.movementY:xA}}),uu=Fr(To),Yf=ue({},To,{dataTransfer:0}),Kf=Fr(Yf),Zf=ue({},vs,{relatedTarget:0}),MA=Fr(Zf),qf=ue({},_n,{animationName:0,elapsedTime:0,pseudoElement:0}),Gf=Fr(qf),Jf=ue({},_n,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),va=Fr(Jf),e0=ue({},_n,{data:0}),cu=Fr(e0),t0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Eo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},r0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NA(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=r0[s])?!!l[s]:!1}function wa(){return NA}var ws=ue({},vs,{key:function(s){if(s.key){var l=t0[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Ln(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Eo[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wa,charCode:function(s){return s.type==="keypress"?Ln(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ln(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),n0=Fr(ws),OA=ue({},To,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),DA=Fr(OA),i0=ue({},vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wa}),fu=Fr(i0),IA=ue({},_n,{propertyName:0,elapsedTime:0,pseudoElement:0}),FA=Fr(IA),Ta=ue({},To,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Gt=Fr(Ta),s0=[9,13,27,32],LA=p&&"CompositionEvent"in window,So=null;p&&"documentMode"in document&&(So=document.documentMode);var o0=p&&"TextEvent"in window&&!So,hu=p&&(!LA||So&&8<So&&11>=So),du=" ",gu=!1;function Xr(s,l){switch(s){case"keyup":return s0.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ea(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var mn=!1;function a0(s,l){switch(s){case"compositionend":return Ea(l);case"keypress":return l.which!==32?null:(gu=!0,du);case"textInput":return s=l.data,s===du&&gu?null:s;default:return null}}function UA(s,l){if(mn)return s==="compositionend"||!LA&&Xr(s,l)?(s=mo(),_o=PA=Ei=null,mn=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return hu&&l.locale!=="ko"?null:l.data;default:return null}}var A0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fn(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!A0[s.type]:l==="textarea"}function BA(s,l,g,v){pa(v),l=Do(l,"onChange"),0<l.length&&(g=new Un("onChange","change",null,g,v),s.push({event:g,listeners:l}))}var Zi=null,Bn=null;function bo(s){Mu(s,0)}function Si(s){var l=bs(s);if(Jr(l))return s}function l0(s,l){if(s==="change")return l}var VA=!1;if(p){var zA;if(p){var Co="oninput"in document;if(!Co){var pu=document.createElement("div");pu.setAttribute("oninput","return;"),Co=typeof pu.oninput=="function"}zA=Co}else zA=!1;VA=zA&&(!document.documentMode||9<document.documentMode)}function _u(){Zi&&(Zi.detachEvent("onpropertychange",HA),Bn=Zi=null)}function HA(s){if(s.propertyName==="value"&&Si(Bn)){var l=[];BA(l,Bn,s,no(s)),oo(bo,l)}}function mu(s,l,g){s==="focusin"?(_u(),Zi=l,Bn=g,Zi.attachEvent("onpropertychange",HA)):s==="focusout"&&_u()}function Ro(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Si(Bn)}function Ts(s,l){if(s==="click")return Si(l)}function u0(s,l){if(s==="input"||s==="change")return Si(l)}function Po(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var bn=typeof Object.is=="function"?Object.is:Po;function ko(s,l){if(bn(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var g=Object.keys(s),v=Object.keys(l);if(g.length!==v.length)return!1;for(v=0;v<g.length;v++){var E=g[v];if(!y.call(l,E)||!bn(s[E],l[E]))return!1}return!0}function yu(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function vu(s,l){var g=yu(s);s=0;for(var v;g;){if(g.nodeType===3){if(v=s+g.textContent.length,s<=l&&v>=l)return{node:g,offset:l-s};s=v}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=yu(g)}}function wu(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?wu(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function Tu(){for(var s=window,l=un();l instanceof s.HTMLIFrameElement;){try{var g=typeof l.contentWindow.location.href=="string"}catch{g=!1}if(g)s=l.contentWindow;else break;l=un(s.document)}return l}function jA(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}function WA(s){var l=Tu(),g=s.focusedElem,v=s.selectionRange;if(l!==g&&g&&g.ownerDocument&&wu(g.ownerDocument.documentElement,g)){if(v!==null&&jA(g)){if(l=v.start,s=v.end,s===void 0&&(s=l),"selectionStart"in g)g.selectionStart=l,g.selectionEnd=Math.min(s,g.value.length);else if(s=(l=g.ownerDocument||document)&&l.defaultView||window,s.getSelection){s=s.getSelection();var E=g.textContent.length,P=Math.min(v.start,E);v=v.end===void 0?P:Math.min(v.end,E),!s.extend&&P>v&&(E=v,v=P,P=E),E=vu(g,P);var O=vu(g,v);E&&O&&(s.rangeCount!==1||s.anchorNode!==E.node||s.anchorOffset!==E.offset||s.focusNode!==O.node||s.focusOffset!==O.offset)&&(l=l.createRange(),l.setStart(E.node,E.offset),s.removeAllRanges(),P>v?(s.addRange(l),s.extend(O.node,O.offset)):(l.setEnd(O.node,O.offset),s.addRange(l)))}}for(l=[],s=g;s=s.parentNode;)s.nodeType===1&&l.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<l.length;g++)s=l[g],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Eu=p&&"documentMode"in document&&11>=document.documentMode,bi=null,XA=null,xo=null,$A=!1;function Su(s,l,g){var v=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;$A||bi==null||bi!==un(v)||(v=bi,"selectionStart"in v&&jA(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),xo&&ko(xo,v)||(xo=v,v=Do(XA,"onSelect"),0<v.length&&(l=new Un("onSelect","select",null,l,g),s.push({event:l,listeners:v}),l.target=bi)))}function Sa(s,l){var g={};return g[s.toLowerCase()]=l.toLowerCase(),g["Webkit"+s]="webkit"+l,g["Moz"+s]="moz"+l,g}var Es={animationend:Sa("Animation","AnimationEnd"),animationiteration:Sa("Animation","AnimationIteration"),animationstart:Sa("Animation","AnimationStart"),transitionend:Sa("Transition","TransitionEnd")},QA={},YA={};p&&(YA=document.createElement("div").style,"AnimationEvent"in window||(delete Es.animationend.animation,delete Es.animationiteration.animation,delete Es.animationstart.animation),"TransitionEvent"in window||delete Es.transitionend.transition);function ba(s){if(QA[s])return QA[s];if(!Es[s])return s;var l=Es[s],g;for(g in l)if(l.hasOwnProperty(g)&&g in YA)return QA[s]=l[g];return s}var KA=ba("animationend"),Vn=ba("animationiteration"),ZA=ba("animationstart"),bu=ba("transitionend"),Cu=new Map,Ru="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ci(s,l){Cu.set(s,l),o(l,[s])}for(var qA=0;qA<Ru.length;qA++){var zn=Ru[qA],Pu=zn.toLowerCase(),ku=zn[0].toUpperCase()+zn.slice(1);Ci(Pu,"on"+ku)}Ci(KA,"onAnimationEnd"),Ci(Vn,"onAnimationIteration"),Ci(ZA,"onAnimationStart"),Ci("dblclick","onDoubleClick"),Ci("focusin","onFocus"),Ci("focusout","onBlur"),Ci(bu,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),c0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mo));function xu(s,l,g){var v=s.type||"unknown-event";s.currentTarget=g,B(v,l,void 0,s),s.currentTarget=null}function Mu(s,l){l=(l&4)!==0;for(var g=0;g<s.length;g++){var v=s[g],E=v.event;v=v.listeners;e:{var P=void 0;if(l)for(var O=v.length-1;0<=O;O--){var Y=v[O],ee=Y.instance,Ee=Y.currentTarget;if(Y=Y.listener,ee!==P&&E.isPropagationStopped())break e;xu(E,Y,Ee),P=ee}else for(O=0;O<v.length;O++){if(Y=v[O],ee=Y.instance,Ee=Y.currentTarget,Y=Y.listener,ee!==P&&E.isPropagationStopped())break e;xu(E,Y,Ee),P=ee}}}if(Re)throw s=He,Re=!1,He=null,s}function nr(s,l){var g=l[Dt];g===void 0&&(g=l[Dt]=new Set);var v=s+"__bubble";g.has(v)||(Nu(l,s,2,!1),g.add(v))}function GA(s,l,g){var v=0;l&&(v|=4),Nu(g,s,v,l)}var Ca="_reactListening"+Math.random().toString(36).slice(2);function No(s){if(!s[Ca]){s[Ca]=!0,n.forEach(function(g){g!=="selectionchange"&&(c0.has(g)||GA(g,!1,s),GA(g,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Ca]||(l[Ca]=!0,GA("selectionchange",!1,l))}}function Nu(s,l,g,v){switch(Au(l)){case 1:var E=Ki;break;case 4:E=Wr;break;default:E=go}g=E.bind(null,l,g,s),E=void 0,!ei||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(E=!0),v?E!==void 0?s.addEventListener(l,g,{capture:!0,passive:E}):s.addEventListener(l,g,!0):E!==void 0?s.addEventListener(l,g,{passive:E}):s.addEventListener(l,g,!1)}function JA(s,l,g,v,E){var P=v;if(!(l&1)&&!(l&2)&&v!==null)e:for(;;){if(v===null)return;var O=v.tag;if(O===3||O===4){var Y=v.stateNode.containerInfo;if(Y===E||Y.nodeType===8&&Y.parentNode===E)break;if(O===4)for(O=v.return;O!==null;){var ee=O.tag;if((ee===3||ee===4)&&(ee=O.stateNode.containerInfo,ee===E||ee.nodeType===8&&ee.parentNode===E))return;O=O.return}for(;Y!==null;){if(O=ii(Y),O===null)return;if(ee=O.tag,ee===5||ee===6){v=P=O;continue e}Y=Y.parentNode}}v=v.return}oo(function(){var Ee=P,De=no(g),Fe=[];e:{var Ne=Cu.get(s);if(Ne!==void 0){var Ze=Un,tt=s;switch(s){case"keypress":if(Ln(g)===0)break e;case"keydown":case"keyup":Ze=n0;break;case"focusin":tt="focus",Ze=MA;break;case"focusout":tt="blur",Ze=MA;break;case"beforeblur":case"afterblur":Ze=MA;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ze=uu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ze=Kf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ze=fu;break;case KA:case Vn:case ZA:Ze=Gf;break;case bu:Ze=FA;break;case"scroll":Ze=lu;break;case"wheel":Ze=Gt;break;case"copy":case"cut":case"paste":Ze=va;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ze=DA}var st=(l&4)!==0,Sr=!st&&s==="scroll",ge=st?Ne!==null?Ne+"Capture":null:Ne;st=[];for(var ie=Ee,me;ie!==null;){me=ie;var ze=me.stateNode;if(me.tag===5&&ze!==null&&(me=ze,ge!==null&&(ze=mi(ie,ge),ze!=null&&st.push(Oo(ie,ze,me)))),Sr)break;ie=ie.return}0<st.length&&(Ne=new Ze(Ne,tt,null,g,De),Fe.push({event:Ne,listeners:st}))}}if(!(l&7)){e:{if(Ne=s==="mouseover"||s==="pointerover",Ze=s==="mouseout"||s==="pointerout",Ne&&g!==_i&&(tt=g.relatedTarget||g.fromElement)&&(ii(tt)||tt[Cr]))break e;if((Ze||Ne)&&(Ne=De.window===De?De:(Ne=De.ownerDocument)?Ne.defaultView||Ne.parentWindow:window,Ze?(tt=g.relatedTarget||g.toElement,Ze=Ee,tt=tt?ii(tt):null,tt!==null&&(Sr=Mt(tt),tt!==Sr||tt.tag!==5&&tt.tag!==6)&&(tt=null)):(Ze=null,tt=Ee),Ze!==tt)){if(st=uu,ze="onMouseLeave",ge="onMouseEnter",ie="mouse",(s==="pointerout"||s==="pointerover")&&(st=DA,ze="onPointerLeave",ge="onPointerEnter",ie="pointer"),Sr=Ze==null?Ne:bs(Ze),me=tt==null?Ne:bs(tt),Ne=new st(ze,ie+"leave",Ze,g,De),Ne.target=Sr,Ne.relatedTarget=me,ze=null,ii(De)===Ee&&(st=new st(ge,ie+"enter",tt,g,De),st.target=me,st.relatedTarget=Sr,ze=st),Sr=ze,Ze&&tt)t:{for(st=Ze,ge=tt,ie=0,me=st;me;me=qi(me))ie++;for(me=0,ze=ge;ze;ze=qi(ze))me++;for(;0<ie-me;)st=qi(st),ie--;for(;0<me-ie;)ge=qi(ge),me--;for(;ie--;){if(st===ge||ge!==null&&st===ge.alternate)break t;st=qi(st),ge=qi(ge)}st=null}else st=null;Ze!==null&&hr(Fe,Ne,Ze,st,!1),tt!==null&&Sr!==null&&hr(Fe,Sr,tt,st,!0)}}e:{if(Ne=Ee?bs(Ee):window,Ze=Ne.nodeName&&Ne.nodeName.toLowerCase(),Ze==="select"||Ze==="input"&&Ne.type==="file")var at=l0;else if(fn(Ne))if(VA)at=u0;else{at=Ro;var gt=mu}else(Ze=Ne.nodeName)&&Ze.toLowerCase()==="input"&&(Ne.type==="checkbox"||Ne.type==="radio")&&(at=Ts);if(at&&(at=at(s,Ee))){BA(Fe,at,g,De);break e}gt&&gt(s,Ne,Ee),s==="focusout"&&(gt=Ne._wrapperState)&&gt.controlled&&Ne.type==="number"&&as(Ne,"number",Ne.value)}switch(gt=Ee?bs(Ee):window,s){case"focusin":(fn(gt)||gt.contentEditable==="true")&&(bi=gt,XA=Ee,xo=null);break;case"focusout":xo=XA=bi=null;break;case"mousedown":$A=!0;break;case"contextmenu":case"mouseup":case"dragend":$A=!1,Su(Fe,g,De);break;case"selectionchange":if(Eu)break;case"keydown":case"keyup":Su(Fe,g,De)}var pt;if(LA)e:{switch(s){case"compositionstart":var bt="onCompositionStart";break e;case"compositionend":bt="onCompositionEnd";break e;case"compositionupdate":bt="onCompositionUpdate";break e}bt=void 0}else mn?Xr(s,g)&&(bt="onCompositionEnd"):s==="keydown"&&g.keyCode===229&&(bt="onCompositionStart");bt&&(hu&&g.locale!=="ko"&&(mn||bt!=="onCompositionStart"?bt==="onCompositionEnd"&&mn&&(pt=mo()):(Ei=De,PA="value"in Ei?Ei.value:Ei.textContent,mn=!0)),gt=Do(Ee,bt),0<gt.length&&(bt=new cu(bt,s,null,g,De),Fe.push({event:bt,listeners:gt}),pt?bt.data=pt:(pt=Ea(g),pt!==null&&(bt.data=pt)))),(pt=o0?a0(s,g):UA(s,g))&&(Ee=Do(Ee,"onBeforeInput"),0<Ee.length&&(De=new cu("onBeforeInput","beforeinput",null,g,De),Fe.push({event:De,listeners:Ee}),De.data=pt))}Mu(Fe,l)})}function Oo(s,l,g){return{instance:s,listener:l,currentTarget:g}}function Do(s,l){for(var g=l+"Capture",v=[];s!==null;){var E=s,P=E.stateNode;E.tag===5&&P!==null&&(E=P,P=mi(s,g),P!=null&&v.unshift(Oo(s,P,E)),P=mi(s,l),P!=null&&v.push(Oo(s,P,E))),s=s.return}return v}function qi(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function hr(s,l,g,v,E){for(var P=l._reactName,O=[];g!==null&&g!==v;){var Y=g,ee=Y.alternate,Ee=Y.stateNode;if(ee!==null&&ee===v)break;Y.tag===5&&Ee!==null&&(Y=Ee,E?(ee=mi(g,P),ee!=null&&O.unshift(Oo(g,ee,Y))):E||(ee=mi(g,P),ee!=null&&O.push(Oo(g,ee,Y)))),g=g.return}O.length!==0&&s.push({event:l,listeners:O})}var f0=/\r\n?/g,h0=/\u0000|\uFFFD/g;function Ss(s){return(typeof s=="string"?s:""+s).replace(f0,`
`).replace(h0,"")}function $r(s,l,g){if(l=Ss(l),Ss(s)!==l&&g)throw Error(r(425))}function Ra(){}var el=null,tl=null;function Pa(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var ka=typeof setTimeout=="function"?setTimeout:void 0,Ou=typeof clearTimeout=="function"?clearTimeout:void 0,rl=typeof Promise=="function"?Promise:void 0,d0=typeof queueMicrotask=="function"?queueMicrotask:typeof rl<"u"?function(s){return rl.resolve(null).then(s).catch(g0)}:ka;function g0(s){setTimeout(function(){throw s})}function nl(s,l){var g=l,v=0;do{var E=g.nextSibling;if(s.removeChild(g),E&&E.nodeType===8)if(g=E.data,g==="/$"){if(v===0){s.removeChild(E),ho(l);return}v--}else g!=="$"&&g!=="$?"&&g!=="$!"||v++;g=E}while(g);ho(l)}function Ri(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return s}function Du(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var g=s.data;if(g==="$"||g==="$!"||g==="$?"){if(l===0)return s;l--}else g==="/$"&&l++}s=s.previousSibling}return null}var hn=Math.random().toString(36).slice(2),Tr="__reactFiber$"+hn,ht="__reactProps$"+hn,Cr="__reactContainer$"+hn,Dt="__reactEvents$"+hn,Lr="__reactListeners$"+hn,Iu="__reactHandles$"+hn;function ii(s){var l=s[Tr];if(l)return l;for(var g=s.parentNode;g;){if(l=g[Cr]||g[Tr]){if(g=l.alternate,l.child!==null||g!==null&&g.child!==null)for(s=Du(s);s!==null;){if(g=s[Tr])return g;s=Du(s)}return l}s=g,g=s.parentNode}return null}function Cn(s){return s=s[Tr]||s[Cr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function bs(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(r(33))}function Er(s){return s[ht]||null}var Cs=[],Rn=-1;function si(s){return{current:s}}function Ce(s){0>Rn||(s.current=Cs[Rn],Cs[Rn]=null,Rn--)}function xe(s,l){Rn++,Cs[Rn]=s.current,s.current=l}var oi={},Rr=si(oi),Mr=si(!1),Hn=oi;function yn(s,l){var g=s.type.contextTypes;if(!g)return oi;var v=s.stateNode;if(v&&v.__reactInternalMemoizedUnmaskedChildContext===l)return v.__reactInternalMemoizedMaskedChildContext;var E={},P;for(P in g)E[P]=l[P];return v&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=l,s.__reactInternalMemoizedMaskedChildContext=E),E}function Qr(s){return s=s.childContextTypes,s!=null}function Pn(){Ce(Mr),Ce(Rr)}function A(s,l,g){if(Rr.current!==oi)throw Error(r(168));xe(Rr,l),xe(Mr,g)}function a(s,l,g){var v=s.stateNode;if(l=l.childContextTypes,typeof v.getChildContext!="function")return g;v=v.getChildContext();for(var E in v)if(!(E in l))throw Error(r(108,Ye(s)||"Unknown",E));return ue({},g,v)}function c(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||oi,Hn=Rr.current,xe(Rr,s),xe(Mr,Mr.current),!0}function h(s,l,g){var v=s.stateNode;if(!v)throw Error(r(169));g?(s=a(s,l,Hn),v.__reactInternalMemoizedMergedChildContext=s,Ce(Mr),Ce(Rr),xe(Rr,s)):Ce(Mr),xe(Mr,g)}var d=null,_=!1,m=!1;function w(s){d===null?d=[s]:d.push(s)}function S(s){_=!0,w(s)}function k(){if(!m&&d!==null){m=!0;var s=0,l=I;try{var g=d;for(I=1;s<g.length;s++){var v=g[s];do v=v(!0);while(v!==null)}d=null,_=!1}catch(E){throw d!==null&&(d=d.slice(s+1)),Ut(ur,k),E}finally{I=l,m=!1}}return null}var N=[],V=0,Z=null,J=0,$=[],ne=0,Se=null,Te=1,fe="";function _e(s,l){N[V++]=J,N[V++]=Z,Z=s,J=l}function le(s,l,g){$[ne++]=Te,$[ne++]=fe,$[ne++]=Se,Se=s;var v=Te;s=fe;var E=32-qe(v)-1;v&=~(1<<E),g+=1;var P=32-qe(l)+E;if(30<P){var O=E-E%5;P=(v&(1<<O)-1).toString(32),v>>=O,E-=O,Te=1<<32-qe(l)+E|g<<E|v,fe=P+s}else Te=1<<P|g<<E|v,fe=s}function We(s){s.return!==null&&(_e(s,1),le(s,1,0))}function $e(s){for(;s===Z;)Z=N[--V],N[V]=null,J=N[--V],N[V]=null;for(;s===Se;)Se=$[--ne],$[ne]=null,fe=$[--ne],$[ne]=null,Te=$[--ne],$[ne]=null}var Ie=null,Le=null,ut=!1,Et=null;function zt(s,l){var g=$n(5,null,null,0);g.elementType="DELETED",g.stateNode=l,g.return=s,l=s.deletions,l===null?(s.deletions=[g],s.flags|=16):l.push(g)}function xt(s,l){switch(s.tag){case 5:var g=s.type;return l=l.nodeType!==1||g.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(s.stateNode=l,Ie=s,Le=Ri(l.firstChild),!0):!1;case 6:return l=s.pendingProps===""||l.nodeType!==3?null:l,l!==null?(s.stateNode=l,Ie=s,Le=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(g=Se!==null?{id:Te,overflow:fe}:null,s.memoizedState={dehydrated:l,treeContext:g,retryLane:1073741824},g=$n(18,null,null,0),g.stateNode=l,g.return=s,s.child=g,Ie=s,Le=null,!0):!1;default:return!1}}function wt(s){return(s.mode&1)!==0&&(s.flags&128)===0}function St(s){if(ut){var l=Le;if(l){var g=l;if(!xt(s,l)){if(wt(s))throw Error(r(418));l=Ri(g.nextSibling);var v=Ie;l&&xt(s,l)?zt(v,g):(s.flags=s.flags&-4097|2,ut=!1,Ie=s)}}else{if(wt(s))throw Error(r(418));s.flags=s.flags&-4097|2,ut=!1,Ie=s}}}function Xt(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Ie=s}function dt(s){if(s!==Ie)return!1;if(!ut)return Xt(s),ut=!0,!1;var l;if((l=s.tag!==3)&&!(l=s.tag!==5)&&(l=s.type,l=l!=="head"&&l!=="body"&&!Pa(s.type,s.memoizedProps)),l&&(l=Le)){if(wt(s))throw Yt(),Error(r(418));for(;l;)zt(s,l),l=Ri(l.nextSibling)}if(Xt(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8){var g=s.data;if(g==="/$"){if(l===0){Le=Ri(s.nextSibling);break e}l--}else g!=="$"&&g!=="$!"&&g!=="$?"||l++}s=s.nextSibling}Le=null}}else Le=Ie?Ri(s.stateNode.nextSibling):null;return!0}function Yt(){for(var s=Le;s;)s=Ri(s.nextSibling)}function mr(){Le=Ie=null,ut=!1}function xa(s){Et===null?Et=[s]:Et.push(s)}var Hv=we.ReactCurrentBatchConfig;function il(s,l,g){if(s=g.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(r(309));var v=g.stateNode}if(!v)throw Error(r(147,s));var E=v,P=""+s;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===P?l.ref:(l=function(O){var Y=E.refs;O===null?delete Y[P]:Y[P]=O},l._stringRef=P,l)}if(typeof s!="string")throw Error(r(284));if(!g._owner)throw Error(r(290,s))}return s}function Fu(s,l){throw s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s))}function Ug(s){var l=s._init;return l(s._payload)}function Bg(s){function l(ge,ie){if(s){var me=ge.deletions;me===null?(ge.deletions=[ie],ge.flags|=16):me.push(ie)}}function g(ge,ie){if(!s)return null;for(;ie!==null;)l(ge,ie),ie=ie.sibling;return null}function v(ge,ie){for(ge=new Map;ie!==null;)ie.key!==null?ge.set(ie.key,ie):ge.set(ie.index,ie),ie=ie.sibling;return ge}function E(ge,ie){return ge=Ds(ge,ie),ge.index=0,ge.sibling=null,ge}function P(ge,ie,me){return ge.index=me,s?(me=ge.alternate,me!==null?(me=me.index,me<ie?(ge.flags|=2,ie):me):(ge.flags|=2,ie)):(ge.flags|=1048576,ie)}function O(ge){return s&&ge.alternate===null&&(ge.flags|=2),ge}function Y(ge,ie,me,ze){return ie===null||ie.tag!==6?(ie=oh(me,ge.mode,ze),ie.return=ge,ie):(ie=E(ie,me),ie.return=ge,ie)}function ee(ge,ie,me,ze){var at=me.type;return at===Xe?De(ge,ie,me.props.children,ze,me.key):ie!==null&&(ie.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===q&&Ug(at)===ie.type)?(ze=E(ie,me.props),ze.ref=il(ge,ie,me),ze.return=ge,ze):(ze=oc(me.type,me.key,me.props,null,ge.mode,ze),ze.ref=il(ge,ie,me),ze.return=ge,ze)}function Ee(ge,ie,me,ze){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==me.containerInfo||ie.stateNode.implementation!==me.implementation?(ie=ah(me,ge.mode,ze),ie.return=ge,ie):(ie=E(ie,me.children||[]),ie.return=ge,ie)}function De(ge,ie,me,ze,at){return ie===null||ie.tag!==7?(ie=Ho(me,ge.mode,ze,at),ie.return=ge,ie):(ie=E(ie,me),ie.return=ge,ie)}function Fe(ge,ie,me){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return ie=oh(""+ie,ge.mode,me),ie.return=ge,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case be:return me=oc(ie.type,ie.key,ie.props,null,ge.mode,me),me.ref=il(ge,null,ie),me.return=ge,me;case Pe:return ie=ah(ie,ge.mode,me),ie.return=ge,ie;case q:var ze=ie._init;return Fe(ge,ze(ie._payload),me)}if(Nn(ie)||de(ie))return ie=Ho(ie,ge.mode,me,null),ie.return=ge,ie;Fu(ge,ie)}return null}function Ne(ge,ie,me,ze){var at=ie!==null?ie.key:null;if(typeof me=="string"&&me!==""||typeof me=="number")return at!==null?null:Y(ge,ie,""+me,ze);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case be:return me.key===at?ee(ge,ie,me,ze):null;case Pe:return me.key===at?Ee(ge,ie,me,ze):null;case q:return at=me._init,Ne(ge,ie,at(me._payload),ze)}if(Nn(me)||de(me))return at!==null?null:De(ge,ie,me,ze,null);Fu(ge,me)}return null}function Ze(ge,ie,me,ze,at){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return ge=ge.get(me)||null,Y(ie,ge,""+ze,at);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case be:return ge=ge.get(ze.key===null?me:ze.key)||null,ee(ie,ge,ze,at);case Pe:return ge=ge.get(ze.key===null?me:ze.key)||null,Ee(ie,ge,ze,at);case q:var gt=ze._init;return Ze(ge,ie,me,gt(ze._payload),at)}if(Nn(ze)||de(ze))return ge=ge.get(me)||null,De(ie,ge,ze,at,null);Fu(ie,ze)}return null}function tt(ge,ie,me,ze){for(var at=null,gt=null,pt=ie,bt=ie=0,Vr=null;pt!==null&&bt<me.length;bt++){pt.index>bt?(Vr=pt,pt=null):Vr=pt.sibling;var $t=Ne(ge,pt,me[bt],ze);if($t===null){pt===null&&(pt=Vr);break}s&&pt&&$t.alternate===null&&l(ge,pt),ie=P($t,ie,bt),gt===null?at=$t:gt.sibling=$t,gt=$t,pt=Vr}if(bt===me.length)return g(ge,pt),ut&&_e(ge,bt),at;if(pt===null){for(;bt<me.length;bt++)pt=Fe(ge,me[bt],ze),pt!==null&&(ie=P(pt,ie,bt),gt===null?at=pt:gt.sibling=pt,gt=pt);return ut&&_e(ge,bt),at}for(pt=v(ge,pt);bt<me.length;bt++)Vr=Ze(pt,ge,bt,me[bt],ze),Vr!==null&&(s&&Vr.alternate!==null&&pt.delete(Vr.key===null?bt:Vr.key),ie=P(Vr,ie,bt),gt===null?at=Vr:gt.sibling=Vr,gt=Vr);return s&&pt.forEach(function(Is){return l(ge,Is)}),ut&&_e(ge,bt),at}function st(ge,ie,me,ze){var at=de(me);if(typeof at!="function")throw Error(r(150));if(me=at.call(me),me==null)throw Error(r(151));for(var gt=at=null,pt=ie,bt=ie=0,Vr=null,$t=me.next();pt!==null&&!$t.done;bt++,$t=me.next()){pt.index>bt?(Vr=pt,pt=null):Vr=pt.sibling;var Is=Ne(ge,pt,$t.value,ze);if(Is===null){pt===null&&(pt=Vr);break}s&&pt&&Is.alternate===null&&l(ge,pt),ie=P(Is,ie,bt),gt===null?at=Is:gt.sibling=Is,gt=Is,pt=Vr}if($t.done)return g(ge,pt),ut&&_e(ge,bt),at;if(pt===null){for(;!$t.done;bt++,$t=me.next())$t=Fe(ge,$t.value,ze),$t!==null&&(ie=P($t,ie,bt),gt===null?at=$t:gt.sibling=$t,gt=$t);return ut&&_e(ge,bt),at}for(pt=v(ge,pt);!$t.done;bt++,$t=me.next())$t=Ze(pt,ge,bt,$t.value,ze),$t!==null&&(s&&$t.alternate!==null&&pt.delete($t.key===null?bt:$t.key),ie=P($t,ie,bt),gt===null?at=$t:gt.sibling=$t,gt=$t);return s&&pt.forEach(function(vw){return l(ge,vw)}),ut&&_e(ge,bt),at}function Sr(ge,ie,me,ze){if(typeof me=="object"&&me!==null&&me.type===Xe&&me.key===null&&(me=me.props.children),typeof me=="object"&&me!==null){switch(me.$$typeof){case be:e:{for(var at=me.key,gt=ie;gt!==null;){if(gt.key===at){if(at=me.type,at===Xe){if(gt.tag===7){g(ge,gt.sibling),ie=E(gt,me.props.children),ie.return=ge,ge=ie;break e}}else if(gt.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===q&&Ug(at)===gt.type){g(ge,gt.sibling),ie=E(gt,me.props),ie.ref=il(ge,gt,me),ie.return=ge,ge=ie;break e}g(ge,gt);break}else l(ge,gt);gt=gt.sibling}me.type===Xe?(ie=Ho(me.props.children,ge.mode,ze,me.key),ie.return=ge,ge=ie):(ze=oc(me.type,me.key,me.props,null,ge.mode,ze),ze.ref=il(ge,ie,me),ze.return=ge,ge=ze)}return O(ge);case Pe:e:{for(gt=me.key;ie!==null;){if(ie.key===gt)if(ie.tag===4&&ie.stateNode.containerInfo===me.containerInfo&&ie.stateNode.implementation===me.implementation){g(ge,ie.sibling),ie=E(ie,me.children||[]),ie.return=ge,ge=ie;break e}else{g(ge,ie);break}else l(ge,ie);ie=ie.sibling}ie=ah(me,ge.mode,ze),ie.return=ge,ge=ie}return O(ge);case q:return gt=me._init,Sr(ge,ie,gt(me._payload),ze)}if(Nn(me))return tt(ge,ie,me,ze);if(de(me))return st(ge,ie,me,ze);Fu(ge,me)}return typeof me=="string"&&me!==""||typeof me=="number"?(me=""+me,ie!==null&&ie.tag===6?(g(ge,ie.sibling),ie=E(ie,me),ie.return=ge,ge=ie):(g(ge,ie),ie=oh(me,ge.mode,ze),ie.return=ge,ge=ie),O(ge)):g(ge,ie)}return Sr}var Ma=Bg(!0),Vg=Bg(!1),Lu=si(null),Uu=null,Na=null,p0=null;function _0(){p0=Na=Uu=null}function m0(s){var l=Lu.current;Ce(Lu),s._currentValue=l}function y0(s,l,g){for(;s!==null;){var v=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,v!==null&&(v.childLanes|=l)):v!==null&&(v.childLanes&l)!==l&&(v.childLanes|=l),s===g)break;s=s.return}}function Oa(s,l){Uu=s,p0=Na=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&l&&(vn=!0),s.firstContext=null)}function jn(s){var l=s._currentValue;if(p0!==s)if(s={context:s,memoizedValue:l,next:null},Na===null){if(Uu===null)throw Error(r(308));Na=s,Uu.dependencies={lanes:0,firstContext:s}}else Na=Na.next=s;return l}var Io=null;function v0(s){Io===null?Io=[s]:Io.push(s)}function zg(s,l,g,v){var E=l.interleaved;return E===null?(g.next=g,v0(l)):(g.next=E.next,E.next=g),l.interleaved=g,Gi(s,v)}function Gi(s,l){s.lanes|=l;var g=s.alternate;for(g!==null&&(g.lanes|=l),g=s,s=s.return;s!==null;)s.childLanes|=l,g=s.alternate,g!==null&&(g.childLanes|=l),g=s,s=s.return;return g.tag===3?g.stateNode:null}var Rs=!1;function w0(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hg(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Ji(s,l){return{eventTime:s,lane:l,tag:0,payload:null,callback:null,next:null}}function Ps(s,l,g){var v=s.updateQueue;if(v===null)return null;if(v=v.shared,Wt&2){var E=v.pending;return E===null?l.next=l:(l.next=E.next,E.next=l),v.pending=l,Gi(s,g)}return E=v.interleaved,E===null?(l.next=l,v0(v)):(l.next=E.next,E.next=l),v.interleaved=l,Gi(s,g)}function Bu(s,l,g){if(l=l.updateQueue,l!==null&&(l=l.shared,(g&4194240)!==0)){var v=l.lanes;v&=s.pendingLanes,g|=v,l.lanes=g,D(s,g)}}function jg(s,l){var g=s.updateQueue,v=s.alternate;if(v!==null&&(v=v.updateQueue,g===v)){var E=null,P=null;if(g=g.firstBaseUpdate,g!==null){do{var O={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};P===null?E=P=O:P=P.next=O,g=g.next}while(g!==null);P===null?E=P=l:P=P.next=l}else E=P=l;g={baseState:v.baseState,firstBaseUpdate:E,lastBaseUpdate:P,shared:v.shared,effects:v.effects},s.updateQueue=g;return}s=g.lastBaseUpdate,s===null?g.firstBaseUpdate=l:s.next=l,g.lastBaseUpdate=l}function Vu(s,l,g,v){var E=s.updateQueue;Rs=!1;var P=E.firstBaseUpdate,O=E.lastBaseUpdate,Y=E.shared.pending;if(Y!==null){E.shared.pending=null;var ee=Y,Ee=ee.next;ee.next=null,O===null?P=Ee:O.next=Ee,O=ee;var De=s.alternate;De!==null&&(De=De.updateQueue,Y=De.lastBaseUpdate,Y!==O&&(Y===null?De.firstBaseUpdate=Ee:Y.next=Ee,De.lastBaseUpdate=ee))}if(P!==null){var Fe=E.baseState;O=0,De=Ee=ee=null,Y=P;do{var Ne=Y.lane,Ze=Y.eventTime;if((v&Ne)===Ne){De!==null&&(De=De.next={eventTime:Ze,lane:0,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null});e:{var tt=s,st=Y;switch(Ne=l,Ze=g,st.tag){case 1:if(tt=st.payload,typeof tt=="function"){Fe=tt.call(Ze,Fe,Ne);break e}Fe=tt;break e;case 3:tt.flags=tt.flags&-65537|128;case 0:if(tt=st.payload,Ne=typeof tt=="function"?tt.call(Ze,Fe,Ne):tt,Ne==null)break e;Fe=ue({},Fe,Ne);break e;case 2:Rs=!0}}Y.callback!==null&&Y.lane!==0&&(s.flags|=64,Ne=E.effects,Ne===null?E.effects=[Y]:Ne.push(Y))}else Ze={eventTime:Ze,lane:Ne,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},De===null?(Ee=De=Ze,ee=Fe):De=De.next=Ze,O|=Ne;if(Y=Y.next,Y===null){if(Y=E.shared.pending,Y===null)break;Ne=Y,Y=Ne.next,Ne.next=null,E.lastBaseUpdate=Ne,E.shared.pending=null}}while(!0);if(De===null&&(ee=Fe),E.baseState=ee,E.firstBaseUpdate=Ee,E.lastBaseUpdate=De,l=E.shared.interleaved,l!==null){E=l;do O|=E.lane,E=E.next;while(E!==l)}else P===null&&(E.shared.lanes=0);Uo|=O,s.lanes=O,s.memoizedState=Fe}}function Wg(s,l,g){if(s=l.effects,l.effects=null,s!==null)for(l=0;l<s.length;l++){var v=s[l],E=v.callback;if(E!==null){if(v.callback=null,v=g,typeof E!="function")throw Error(r(191,E));E.call(v)}}}var sl={},Pi=si(sl),ol=si(sl),al=si(sl);function Fo(s){if(s===sl)throw Error(r(174));return s}function T0(s,l){switch(xe(al,l),xe(ol,s),xe(Pi,sl),s=l.nodeType,s){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:ls(null,"");break;default:s=s===8?l.parentNode:l,l=s.namespaceURI||null,s=s.tagName,l=ls(l,s)}Ce(Pi),xe(Pi,l)}function Da(){Ce(Pi),Ce(ol),Ce(al)}function Xg(s){Fo(al.current);var l=Fo(Pi.current),g=ls(l,s.type);l!==g&&(xe(ol,s),xe(Pi,g))}function E0(s){ol.current===s&&(Ce(Pi),Ce(ol))}var dr=si(0);function zu(s){for(var l=s;l!==null;){if(l.tag===13){var g=l.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if(l.flags&128)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var S0=[];function b0(){for(var s=0;s<S0.length;s++)S0[s]._workInProgressVersionPrimary=null;S0.length=0}var Hu=we.ReactCurrentDispatcher,C0=we.ReactCurrentBatchConfig,Lo=0,gr=null,Nr=null,Ur=null,ju=!1,Al=!1,ll=0,jv=0;function nn(){throw Error(r(321))}function R0(s,l){if(l===null)return!1;for(var g=0;g<l.length&&g<s.length;g++)if(!bn(s[g],l[g]))return!1;return!0}function P0(s,l,g,v,E,P){if(Lo=P,gr=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Hu.current=s===null||s.memoizedState===null?Qv:Yv,s=g(v,E),Al){P=0;do{if(Al=!1,ll=0,25<=P)throw Error(r(301));P+=1,Ur=Nr=null,l.updateQueue=null,Hu.current=Kv,s=g(v,E)}while(Al)}if(Hu.current=$u,l=Nr!==null&&Nr.next!==null,Lo=0,Ur=Nr=gr=null,ju=!1,l)throw Error(r(300));return s}function k0(){var s=ll!==0;return ll=0,s}function ki(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ur===null?gr.memoizedState=Ur=s:Ur=Ur.next=s,Ur}function Wn(){if(Nr===null){var s=gr.alternate;s=s!==null?s.memoizedState:null}else s=Nr.next;var l=Ur===null?gr.memoizedState:Ur.next;if(l!==null)Ur=l,Nr=s;else{if(s===null)throw Error(r(310));Nr=s,s={memoizedState:Nr.memoizedState,baseState:Nr.baseState,baseQueue:Nr.baseQueue,queue:Nr.queue,next:null},Ur===null?gr.memoizedState=Ur=s:Ur=Ur.next=s}return Ur}function ul(s,l){return typeof l=="function"?l(s):l}function x0(s){var l=Wn(),g=l.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=s;var v=Nr,E=v.baseQueue,P=g.pending;if(P!==null){if(E!==null){var O=E.next;E.next=P.next,P.next=O}v.baseQueue=E=P,g.pending=null}if(E!==null){P=E.next,v=v.baseState;var Y=O=null,ee=null,Ee=P;do{var De=Ee.lane;if((Lo&De)===De)ee!==null&&(ee=ee.next={lane:0,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null}),v=Ee.hasEagerState?Ee.eagerState:s(v,Ee.action);else{var Fe={lane:De,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null};ee===null?(Y=ee=Fe,O=v):ee=ee.next=Fe,gr.lanes|=De,Uo|=De}Ee=Ee.next}while(Ee!==null&&Ee!==P);ee===null?O=v:ee.next=Y,bn(v,l.memoizedState)||(vn=!0),l.memoizedState=v,l.baseState=O,l.baseQueue=ee,g.lastRenderedState=v}if(s=g.interleaved,s!==null){E=s;do P=E.lane,gr.lanes|=P,Uo|=P,E=E.next;while(E!==s)}else E===null&&(g.lanes=0);return[l.memoizedState,g.dispatch]}function M0(s){var l=Wn(),g=l.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=s;var v=g.dispatch,E=g.pending,P=l.memoizedState;if(E!==null){g.pending=null;var O=E=E.next;do P=s(P,O.action),O=O.next;while(O!==E);bn(P,l.memoizedState)||(vn=!0),l.memoizedState=P,l.baseQueue===null&&(l.baseState=P),g.lastRenderedState=P}return[P,v]}function $g(){}function Qg(s,l){var g=gr,v=Wn(),E=l(),P=!bn(v.memoizedState,E);if(P&&(v.memoizedState=E,vn=!0),v=v.queue,N0(Zg.bind(null,g,v,s),[s]),v.getSnapshot!==l||P||Ur!==null&&Ur.memoizedState.tag&1){if(g.flags|=2048,cl(9,Kg.bind(null,g,v,E,l),void 0,null),Br===null)throw Error(r(349));Lo&30||Yg(g,l,E)}return E}function Yg(s,l,g){s.flags|=16384,s={getSnapshot:l,value:g},l=gr.updateQueue,l===null?(l={lastEffect:null,stores:null},gr.updateQueue=l,l.stores=[s]):(g=l.stores,g===null?l.stores=[s]:g.push(s))}function Kg(s,l,g,v){l.value=g,l.getSnapshot=v,qg(l)&&Gg(s)}function Zg(s,l,g){return g(function(){qg(l)&&Gg(s)})}function qg(s){var l=s.getSnapshot;s=s.value;try{var g=l();return!bn(s,g)}catch{return!0}}function Gg(s){var l=Gi(s,1);l!==null&&ui(l,s,1,-1)}function Jg(s){var l=ki();return typeof s=="function"&&(s=s()),l.memoizedState=l.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ul,lastRenderedState:s},l.queue=s,s=s.dispatch=$v.bind(null,gr,s),[l.memoizedState,s]}function cl(s,l,g,v){return s={tag:s,create:l,destroy:g,deps:v,next:null},l=gr.updateQueue,l===null?(l={lastEffect:null,stores:null},gr.updateQueue=l,l.lastEffect=s.next=s):(g=l.lastEffect,g===null?l.lastEffect=s.next=s:(v=g.next,g.next=s,s.next=v,l.lastEffect=s)),s}function ep(){return Wn().memoizedState}function Wu(s,l,g,v){var E=ki();gr.flags|=s,E.memoizedState=cl(1|l,g,void 0,v===void 0?null:v)}function Xu(s,l,g,v){var E=Wn();v=v===void 0?null:v;var P=void 0;if(Nr!==null){var O=Nr.memoizedState;if(P=O.destroy,v!==null&&R0(v,O.deps)){E.memoizedState=cl(l,g,P,v);return}}gr.flags|=s,E.memoizedState=cl(1|l,g,P,v)}function tp(s,l){return Wu(8390656,8,s,l)}function N0(s,l){return Xu(2048,8,s,l)}function rp(s,l){return Xu(4,2,s,l)}function np(s,l){return Xu(4,4,s,l)}function ip(s,l){if(typeof l=="function")return s=s(),l(s),function(){l(null)};if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function sp(s,l,g){return g=g!=null?g.concat([s]):null,Xu(4,4,ip.bind(null,l,s),g)}function O0(){}function op(s,l){var g=Wn();l=l===void 0?null:l;var v=g.memoizedState;return v!==null&&l!==null&&R0(l,v[1])?v[0]:(g.memoizedState=[s,l],s)}function ap(s,l){var g=Wn();l=l===void 0?null:l;var v=g.memoizedState;return v!==null&&l!==null&&R0(l,v[1])?v[0]:(s=s(),g.memoizedState=[s,l],s)}function Ap(s,l,g){return Lo&21?(bn(g,l)||(g=ps(),gr.lanes|=g,Uo|=g,s.baseState=!0),l):(s.baseState&&(s.baseState=!1,vn=!0),s.memoizedState=g)}function Wv(s,l){var g=I;I=g!==0&&4>g?g:4,s(!0);var v=C0.transition;C0.transition={};try{s(!1),l()}finally{I=g,C0.transition=v}}function lp(){return Wn().memoizedState}function Xv(s,l,g){var v=Ns(s);if(g={lane:v,action:g,hasEagerState:!1,eagerState:null,next:null},up(s))cp(l,g);else if(g=zg(s,l,g,v),g!==null){var E=gn();ui(g,s,v,E),fp(g,l,v)}}function $v(s,l,g){var v=Ns(s),E={lane:v,action:g,hasEagerState:!1,eagerState:null,next:null};if(up(s))cp(l,E);else{var P=s.alternate;if(s.lanes===0&&(P===null||P.lanes===0)&&(P=l.lastRenderedReducer,P!==null))try{var O=l.lastRenderedState,Y=P(O,g);if(E.hasEagerState=!0,E.eagerState=Y,bn(Y,O)){var ee=l.interleaved;ee===null?(E.next=E,v0(l)):(E.next=ee.next,ee.next=E),l.interleaved=E;return}}catch{}finally{}g=zg(s,l,E,v),g!==null&&(E=gn(),ui(g,s,v,E),fp(g,l,v))}}function up(s){var l=s.alternate;return s===gr||l!==null&&l===gr}function cp(s,l){Al=ju=!0;var g=s.pending;g===null?l.next=l:(l.next=g.next,g.next=l),s.pending=l}function fp(s,l,g){if(g&4194240){var v=l.lanes;v&=s.pendingLanes,g|=v,l.lanes=g,D(s,g)}}var $u={readContext:jn,useCallback:nn,useContext:nn,useEffect:nn,useImperativeHandle:nn,useInsertionEffect:nn,useLayoutEffect:nn,useMemo:nn,useReducer:nn,useRef:nn,useState:nn,useDebugValue:nn,useDeferredValue:nn,useTransition:nn,useMutableSource:nn,useSyncExternalStore:nn,useId:nn,unstable_isNewReconciler:!1},Qv={readContext:jn,useCallback:function(s,l){return ki().memoizedState=[s,l===void 0?null:l],s},useContext:jn,useEffect:tp,useImperativeHandle:function(s,l,g){return g=g!=null?g.concat([s]):null,Wu(4194308,4,ip.bind(null,l,s),g)},useLayoutEffect:function(s,l){return Wu(4194308,4,s,l)},useInsertionEffect:function(s,l){return Wu(4,2,s,l)},useMemo:function(s,l){var g=ki();return l=l===void 0?null:l,s=s(),g.memoizedState=[s,l],s},useReducer:function(s,l,g){var v=ki();return l=g!==void 0?g(l):l,v.memoizedState=v.baseState=l,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:l},v.queue=s,s=s.dispatch=Xv.bind(null,gr,s),[v.memoizedState,s]},useRef:function(s){var l=ki();return s={current:s},l.memoizedState=s},useState:Jg,useDebugValue:O0,useDeferredValue:function(s){return ki().memoizedState=s},useTransition:function(){var s=Jg(!1),l=s[0];return s=Wv.bind(null,s[1]),ki().memoizedState=s,[l,s]},useMutableSource:function(){},useSyncExternalStore:function(s,l,g){var v=gr,E=ki();if(ut){if(g===void 0)throw Error(r(407));g=g()}else{if(g=l(),Br===null)throw Error(r(349));Lo&30||Yg(v,l,g)}E.memoizedState=g;var P={value:g,getSnapshot:l};return E.queue=P,tp(Zg.bind(null,v,P,s),[s]),v.flags|=2048,cl(9,Kg.bind(null,v,P,g,l),void 0,null),g},useId:function(){var s=ki(),l=Br.identifierPrefix;if(ut){var g=fe,v=Te;g=(v&~(1<<32-qe(v)-1)).toString(32)+g,l=":"+l+"R"+g,g=ll++,0<g&&(l+="H"+g.toString(32)),l+=":"}else g=jv++,l=":"+l+"r"+g.toString(32)+":";return s.memoizedState=l},unstable_isNewReconciler:!1},Yv={readContext:jn,useCallback:op,useContext:jn,useEffect:N0,useImperativeHandle:sp,useInsertionEffect:rp,useLayoutEffect:np,useMemo:ap,useReducer:x0,useRef:ep,useState:function(){return x0(ul)},useDebugValue:O0,useDeferredValue:function(s){var l=Wn();return Ap(l,Nr.memoizedState,s)},useTransition:function(){var s=x0(ul)[0],l=Wn().memoizedState;return[s,l]},useMutableSource:$g,useSyncExternalStore:Qg,useId:lp,unstable_isNewReconciler:!1},Kv={readContext:jn,useCallback:op,useContext:jn,useEffect:N0,useImperativeHandle:sp,useInsertionEffect:rp,useLayoutEffect:np,useMemo:ap,useReducer:M0,useRef:ep,useState:function(){return M0(ul)},useDebugValue:O0,useDeferredValue:function(s){var l=Wn();return Nr===null?l.memoizedState=s:Ap(l,Nr.memoizedState,s)},useTransition:function(){var s=M0(ul)[0],l=Wn().memoizedState;return[s,l]},useMutableSource:$g,useSyncExternalStore:Qg,useId:lp,unstable_isNewReconciler:!1};function ai(s,l){if(s&&s.defaultProps){l=ue({},l),s=s.defaultProps;for(var g in s)l[g]===void 0&&(l[g]=s[g]);return l}return l}function D0(s,l,g,v){l=s.memoizedState,g=g(v,l),g=g==null?l:ue({},l,g),s.memoizedState=g,s.lanes===0&&(s.updateQueue.baseState=g)}var Qu={isMounted:function(s){return(s=s._reactInternals)?Mt(s)===s:!1},enqueueSetState:function(s,l,g){s=s._reactInternals;var v=gn(),E=Ns(s),P=Ji(v,E);P.payload=l,g!=null&&(P.callback=g),l=Ps(s,P,E),l!==null&&(ui(l,s,E,v),Bu(l,s,E))},enqueueReplaceState:function(s,l,g){s=s._reactInternals;var v=gn(),E=Ns(s),P=Ji(v,E);P.tag=1,P.payload=l,g!=null&&(P.callback=g),l=Ps(s,P,E),l!==null&&(ui(l,s,E,v),Bu(l,s,E))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var g=gn(),v=Ns(s),E=Ji(g,v);E.tag=2,l!=null&&(E.callback=l),l=Ps(s,E,v),l!==null&&(ui(l,s,v,g),Bu(l,s,v))}};function hp(s,l,g,v,E,P,O){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(v,P,O):l.prototype&&l.prototype.isPureReactComponent?!ko(g,v)||!ko(E,P):!0}function dp(s,l,g){var v=!1,E=oi,P=l.contextType;return typeof P=="object"&&P!==null?P=jn(P):(E=Qr(l)?Hn:Rr.current,v=l.contextTypes,P=(v=v!=null)?yn(s,E):oi),l=new l(g,P),s.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Qu,s.stateNode=l,l._reactInternals=s,v&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=E,s.__reactInternalMemoizedMaskedChildContext=P),l}function gp(s,l,g,v){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(g,v),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(g,v),l.state!==s&&Qu.enqueueReplaceState(l,l.state,null)}function I0(s,l,g,v){var E=s.stateNode;E.props=g,E.state=s.memoizedState,E.refs={},w0(s);var P=l.contextType;typeof P=="object"&&P!==null?E.context=jn(P):(P=Qr(l)?Hn:Rr.current,E.context=yn(s,P)),E.state=s.memoizedState,P=l.getDerivedStateFromProps,typeof P=="function"&&(D0(s,l,P,g),E.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(l=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),l!==E.state&&Qu.enqueueReplaceState(E,E.state,null),Vu(s,g,E,v),E.state=s.memoizedState),typeof E.componentDidMount=="function"&&(s.flags|=4194308)}function Ia(s,l){try{var g="",v=l;do g+=je(v),v=v.return;while(v);var E=g}catch(P){E=`
Error generating stack: `+P.message+`
`+P.stack}return{value:s,source:l,stack:E,digest:null}}function F0(s,l,g){return{value:s,source:null,stack:g??null,digest:l??null}}function L0(s,l){try{console.error(l.value)}catch(g){setTimeout(function(){throw g})}}var Zv=typeof WeakMap=="function"?WeakMap:Map;function pp(s,l,g){g=Ji(-1,g),g.tag=3,g.payload={element:null};var v=l.value;return g.callback=function(){ec||(ec=!0,G0=v),L0(s,l)},g}function _p(s,l,g){g=Ji(-1,g),g.tag=3;var v=s.type.getDerivedStateFromError;if(typeof v=="function"){var E=l.value;g.payload=function(){return v(E)},g.callback=function(){L0(s,l)}}var P=s.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(g.callback=function(){L0(s,l),typeof v!="function"&&(xs===null?xs=new Set([this]):xs.add(this));var O=l.stack;this.componentDidCatch(l.value,{componentStack:O!==null?O:""})}),g}function mp(s,l,g){var v=s.pingCache;if(v===null){v=s.pingCache=new Zv;var E=new Set;v.set(l,E)}else E=v.get(l),E===void 0&&(E=new Set,v.set(l,E));E.has(g)||(E.add(g),s=uw.bind(null,s,l,g),l.then(s,s))}function yp(s){do{var l;if((l=s.tag===13)&&(l=s.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return s;s=s.return}while(s!==null);return null}function vp(s,l,g,v,E){return s.mode&1?(s.flags|=65536,s.lanes=E,s):(s===l?s.flags|=65536:(s.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(l=Ji(-1,1),l.tag=2,Ps(g,l,1))),g.lanes|=1),s)}var qv=we.ReactCurrentOwner,vn=!1;function dn(s,l,g,v){l.child=s===null?Vg(l,null,g,v):Ma(l,s.child,g,v)}function wp(s,l,g,v,E){g=g.render;var P=l.ref;return Oa(l,E),v=P0(s,l,g,v,P,E),g=k0(),s!==null&&!vn?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~E,es(s,l,E)):(ut&&g&&We(l),l.flags|=1,dn(s,l,v,E),l.child)}function Tp(s,l,g,v,E){if(s===null){var P=g.type;return typeof P=="function"&&!sh(P)&&P.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(l.tag=15,l.type=P,Ep(s,l,P,v,E)):(s=oc(g.type,null,v,l,l.mode,E),s.ref=l.ref,s.return=l,l.child=s)}if(P=s.child,!(s.lanes&E)){var O=P.memoizedProps;if(g=g.compare,g=g!==null?g:ko,g(O,v)&&s.ref===l.ref)return es(s,l,E)}return l.flags|=1,s=Ds(P,v),s.ref=l.ref,s.return=l,l.child=s}function Ep(s,l,g,v,E){if(s!==null){var P=s.memoizedProps;if(ko(P,v)&&s.ref===l.ref)if(vn=!1,l.pendingProps=v=P,(s.lanes&E)!==0)s.flags&131072&&(vn=!0);else return l.lanes=s.lanes,es(s,l,E)}return U0(s,l,g,v,E)}function Sp(s,l,g){var v=l.pendingProps,E=v.children,P=s!==null?s.memoizedState:null;if(v.mode==="hidden")if(!(l.mode&1))l.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(La,kn),kn|=g;else{if(!(g&1073741824))return s=P!==null?P.baseLanes|g:g,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:s,cachePool:null,transitions:null},l.updateQueue=null,xe(La,kn),kn|=s,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},v=P!==null?P.baseLanes:g,xe(La,kn),kn|=v}else P!==null?(v=P.baseLanes|g,l.memoizedState=null):v=g,xe(La,kn),kn|=v;return dn(s,l,E,g),l.child}function bp(s,l){var g=l.ref;(s===null&&g!==null||s!==null&&s.ref!==g)&&(l.flags|=512,l.flags|=2097152)}function U0(s,l,g,v,E){var P=Qr(g)?Hn:Rr.current;return P=yn(l,P),Oa(l,E),g=P0(s,l,g,v,P,E),v=k0(),s!==null&&!vn?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~E,es(s,l,E)):(ut&&v&&We(l),l.flags|=1,dn(s,l,g,E),l.child)}function Cp(s,l,g,v,E){if(Qr(g)){var P=!0;c(l)}else P=!1;if(Oa(l,E),l.stateNode===null)Ku(s,l),dp(l,g,v),I0(l,g,v,E),v=!0;else if(s===null){var O=l.stateNode,Y=l.memoizedProps;O.props=Y;var ee=O.context,Ee=g.contextType;typeof Ee=="object"&&Ee!==null?Ee=jn(Ee):(Ee=Qr(g)?Hn:Rr.current,Ee=yn(l,Ee));var De=g.getDerivedStateFromProps,Fe=typeof De=="function"||typeof O.getSnapshotBeforeUpdate=="function";Fe||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(Y!==v||ee!==Ee)&&gp(l,O,v,Ee),Rs=!1;var Ne=l.memoizedState;O.state=Ne,Vu(l,v,O,E),ee=l.memoizedState,Y!==v||Ne!==ee||Mr.current||Rs?(typeof De=="function"&&(D0(l,g,De,v),ee=l.memoizedState),(Y=Rs||hp(l,g,Y,v,Ne,ee,Ee))?(Fe||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(l.flags|=4194308)):(typeof O.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=v,l.memoizedState=ee),O.props=v,O.state=ee,O.context=Ee,v=Y):(typeof O.componentDidMount=="function"&&(l.flags|=4194308),v=!1)}else{O=l.stateNode,Hg(s,l),Y=l.memoizedProps,Ee=l.type===l.elementType?Y:ai(l.type,Y),O.props=Ee,Fe=l.pendingProps,Ne=O.context,ee=g.contextType,typeof ee=="object"&&ee!==null?ee=jn(ee):(ee=Qr(g)?Hn:Rr.current,ee=yn(l,ee));var Ze=g.getDerivedStateFromProps;(De=typeof Ze=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(Y!==Fe||Ne!==ee)&&gp(l,O,v,ee),Rs=!1,Ne=l.memoizedState,O.state=Ne,Vu(l,v,O,E);var tt=l.memoizedState;Y!==Fe||Ne!==tt||Mr.current||Rs?(typeof Ze=="function"&&(D0(l,g,Ze,v),tt=l.memoizedState),(Ee=Rs||hp(l,g,Ee,v,Ne,tt,ee)||!1)?(De||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(v,tt,ee),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(v,tt,ee)),typeof O.componentDidUpdate=="function"&&(l.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof O.componentDidUpdate!="function"||Y===s.memoizedProps&&Ne===s.memoizedState||(l.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||Y===s.memoizedProps&&Ne===s.memoizedState||(l.flags|=1024),l.memoizedProps=v,l.memoizedState=tt),O.props=v,O.state=tt,O.context=ee,v=Ee):(typeof O.componentDidUpdate!="function"||Y===s.memoizedProps&&Ne===s.memoizedState||(l.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||Y===s.memoizedProps&&Ne===s.memoizedState||(l.flags|=1024),v=!1)}return B0(s,l,g,v,P,E)}function B0(s,l,g,v,E,P){bp(s,l);var O=(l.flags&128)!==0;if(!v&&!O)return E&&h(l,g,!1),es(s,l,P);v=l.stateNode,qv.current=l;var Y=O&&typeof g.getDerivedStateFromError!="function"?null:v.render();return l.flags|=1,s!==null&&O?(l.child=Ma(l,s.child,null,P),l.child=Ma(l,null,Y,P)):dn(s,l,Y,P),l.memoizedState=v.state,E&&h(l,g,!0),l.child}function Rp(s){var l=s.stateNode;l.pendingContext?A(s,l.pendingContext,l.pendingContext!==l.context):l.context&&A(s,l.context,!1),T0(s,l.containerInfo)}function Pp(s,l,g,v,E){return mr(),xa(E),l.flags|=256,dn(s,l,g,v),l.child}var V0={dehydrated:null,treeContext:null,retryLane:0};function z0(s){return{baseLanes:s,cachePool:null,transitions:null}}function kp(s,l,g){var v=l.pendingProps,E=dr.current,P=!1,O=(l.flags&128)!==0,Y;if((Y=O)||(Y=s!==null&&s.memoizedState===null?!1:(E&2)!==0),Y?(P=!0,l.flags&=-129):(s===null||s.memoizedState!==null)&&(E|=1),xe(dr,E&1),s===null)return St(l),s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(l.mode&1?s.data==="$!"?l.lanes=8:l.lanes=1073741824:l.lanes=1,null):(O=v.children,s=v.fallback,P?(v=l.mode,P=l.child,O={mode:"hidden",children:O},!(v&1)&&P!==null?(P.childLanes=0,P.pendingProps=O):P=ac(O,v,0,null),s=Ho(s,v,g,null),P.return=l,s.return=l,P.sibling=s,l.child=P,l.child.memoizedState=z0(g),l.memoizedState=V0,s):H0(l,O));if(E=s.memoizedState,E!==null&&(Y=E.dehydrated,Y!==null))return Gv(s,l,O,v,Y,E,g);if(P){P=v.fallback,O=l.mode,E=s.child,Y=E.sibling;var ee={mode:"hidden",children:v.children};return!(O&1)&&l.child!==E?(v=l.child,v.childLanes=0,v.pendingProps=ee,l.deletions=null):(v=Ds(E,ee),v.subtreeFlags=E.subtreeFlags&14680064),Y!==null?P=Ds(Y,P):(P=Ho(P,O,g,null),P.flags|=2),P.return=l,v.return=l,v.sibling=P,l.child=v,v=P,P=l.child,O=s.child.memoizedState,O=O===null?z0(g):{baseLanes:O.baseLanes|g,cachePool:null,transitions:O.transitions},P.memoizedState=O,P.childLanes=s.childLanes&~g,l.memoizedState=V0,v}return P=s.child,s=P.sibling,v=Ds(P,{mode:"visible",children:v.children}),!(l.mode&1)&&(v.lanes=g),v.return=l,v.sibling=null,s!==null&&(g=l.deletions,g===null?(l.deletions=[s],l.flags|=16):g.push(s)),l.child=v,l.memoizedState=null,v}function H0(s,l){return l=ac({mode:"visible",children:l},s.mode,0,null),l.return=s,s.child=l}function Yu(s,l,g,v){return v!==null&&xa(v),Ma(l,s.child,null,g),s=H0(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function Gv(s,l,g,v,E,P,O){if(g)return l.flags&256?(l.flags&=-257,v=F0(Error(r(422))),Yu(s,l,O,v)):l.memoizedState!==null?(l.child=s.child,l.flags|=128,null):(P=v.fallback,E=l.mode,v=ac({mode:"visible",children:v.children},E,0,null),P=Ho(P,E,O,null),P.flags|=2,v.return=l,P.return=l,v.sibling=P,l.child=v,l.mode&1&&Ma(l,s.child,null,O),l.child.memoizedState=z0(O),l.memoizedState=V0,P);if(!(l.mode&1))return Yu(s,l,O,null);if(E.data==="$!"){if(v=E.nextSibling&&E.nextSibling.dataset,v)var Y=v.dgst;return v=Y,P=Error(r(419)),v=F0(P,v,void 0),Yu(s,l,O,v)}if(Y=(O&s.childLanes)!==0,vn||Y){if(v=Br,v!==null){switch(O&-O){case 4:E=2;break;case 16:E=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:E=32;break;case 536870912:E=268435456;break;default:E=0}E=E&(v.suspendedLanes|O)?0:E,E!==0&&E!==P.retryLane&&(P.retryLane=E,Gi(s,E),ui(v,s,E,-1))}return ih(),v=F0(Error(r(421))),Yu(s,l,O,v)}return E.data==="$?"?(l.flags|=128,l.child=s.child,l=cw.bind(null,s),E._reactRetry=l,null):(s=P.treeContext,Le=Ri(E.nextSibling),Ie=l,ut=!0,Et=null,s!==null&&($[ne++]=Te,$[ne++]=fe,$[ne++]=Se,Te=s.id,fe=s.overflow,Se=l),l=H0(l,v.children),l.flags|=4096,l)}function xp(s,l,g){s.lanes|=l;var v=s.alternate;v!==null&&(v.lanes|=l),y0(s.return,l,g)}function j0(s,l,g,v,E){var P=s.memoizedState;P===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:v,tail:g,tailMode:E}:(P.isBackwards=l,P.rendering=null,P.renderingStartTime=0,P.last=v,P.tail=g,P.tailMode=E)}function Mp(s,l,g){var v=l.pendingProps,E=v.revealOrder,P=v.tail;if(dn(s,l,v.children,g),v=dr.current,v&2)v=v&1|2,l.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&xp(s,g,l);else if(s.tag===19)xp(s,g,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}v&=1}if(xe(dr,v),!(l.mode&1))l.memoizedState=null;else switch(E){case"forwards":for(g=l.child,E=null;g!==null;)s=g.alternate,s!==null&&zu(s)===null&&(E=g),g=g.sibling;g=E,g===null?(E=l.child,l.child=null):(E=g.sibling,g.sibling=null),j0(l,!1,E,g,P);break;case"backwards":for(g=null,E=l.child,l.child=null;E!==null;){if(s=E.alternate,s!==null&&zu(s)===null){l.child=E;break}s=E.sibling,E.sibling=g,g=E,E=s}j0(l,!0,g,null,P);break;case"together":j0(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Ku(s,l){!(l.mode&1)&&s!==null&&(s.alternate=null,l.alternate=null,l.flags|=2)}function es(s,l,g){if(s!==null&&(l.dependencies=s.dependencies),Uo|=l.lanes,!(g&l.childLanes))return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,g=Ds(s,s.pendingProps),l.child=g,g.return=l;s.sibling!==null;)s=s.sibling,g=g.sibling=Ds(s,s.pendingProps),g.return=l;g.sibling=null}return l.child}function Jv(s,l,g){switch(l.tag){case 3:Rp(l),mr();break;case 5:Xg(l);break;case 1:Qr(l.type)&&c(l);break;case 4:T0(l,l.stateNode.containerInfo);break;case 10:var v=l.type._context,E=l.memoizedProps.value;xe(Lu,v._currentValue),v._currentValue=E;break;case 13:if(v=l.memoizedState,v!==null)return v.dehydrated!==null?(xe(dr,dr.current&1),l.flags|=128,null):g&l.child.childLanes?kp(s,l,g):(xe(dr,dr.current&1),s=es(s,l,g),s!==null?s.sibling:null);xe(dr,dr.current&1);break;case 19:if(v=(g&l.childLanes)!==0,s.flags&128){if(v)return Mp(s,l,g);l.flags|=128}if(E=l.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),xe(dr,dr.current),v)break;return null;case 22:case 23:return l.lanes=0,Sp(s,l,g)}return es(s,l,g)}var Np,W0,Op,Dp;Np=function(s,l){for(var g=l.child;g!==null;){if(g.tag===5||g.tag===6)s.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===l)break;for(;g.sibling===null;){if(g.return===null||g.return===l)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},W0=function(){},Op=function(s,l,g,v){var E=s.memoizedProps;if(E!==v){s=l.stateNode,Fo(Pi.current);var P=null;switch(g){case"input":E=pn(s,E),v=pn(s,v),P=[];break;case"select":E=ue({},E,{value:void 0}),v=ue({},v,{value:void 0}),P=[];break;case"textarea":E=Xi(s,E),v=Xi(s,v),P=[];break;default:typeof E.onClick!="function"&&typeof v.onClick=="function"&&(s.onclick=Ra)}fs(g,v);var O;g=null;for(Ee in E)if(!v.hasOwnProperty(Ee)&&E.hasOwnProperty(Ee)&&E[Ee]!=null)if(Ee==="style"){var Y=E[Ee];for(O in Y)Y.hasOwnProperty(O)&&(g||(g={}),g[O]="")}else Ee!=="dangerouslySetInnerHTML"&&Ee!=="children"&&Ee!=="suppressContentEditableWarning"&&Ee!=="suppressHydrationWarning"&&Ee!=="autoFocus"&&(i.hasOwnProperty(Ee)?P||(P=[]):(P=P||[]).push(Ee,null));for(Ee in v){var ee=v[Ee];if(Y=E!=null?E[Ee]:void 0,v.hasOwnProperty(Ee)&&ee!==Y&&(ee!=null||Y!=null))if(Ee==="style")if(Y){for(O in Y)!Y.hasOwnProperty(O)||ee&&ee.hasOwnProperty(O)||(g||(g={}),g[O]="");for(O in ee)ee.hasOwnProperty(O)&&Y[O]!==ee[O]&&(g||(g={}),g[O]=ee[O])}else g||(P||(P=[]),P.push(Ee,g)),g=ee;else Ee==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,Y=Y?Y.__html:void 0,ee!=null&&Y!==ee&&(P=P||[]).push(Ee,ee)):Ee==="children"?typeof ee!="string"&&typeof ee!="number"||(P=P||[]).push(Ee,""+ee):Ee!=="suppressContentEditableWarning"&&Ee!=="suppressHydrationWarning"&&(i.hasOwnProperty(Ee)?(ee!=null&&Ee==="onScroll"&&nr("scroll",s),P||Y===ee||(P=[])):(P=P||[]).push(Ee,ee))}g&&(P=P||[]).push("style",g);var Ee=P;(l.updateQueue=Ee)&&(l.flags|=4)}},Dp=function(s,l,g,v){g!==v&&(l.flags|=4)};function fl(s,l){if(!ut)switch(s.tailMode){case"hidden":l=s.tail;for(var g=null;l!==null;)l.alternate!==null&&(g=l),l=l.sibling;g===null?s.tail=null:g.sibling=null;break;case"collapsed":g=s.tail;for(var v=null;g!==null;)g.alternate!==null&&(v=g),g=g.sibling;v===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:v.sibling=null}}function sn(s){var l=s.alternate!==null&&s.alternate.child===s.child,g=0,v=0;if(l)for(var E=s.child;E!==null;)g|=E.lanes|E.childLanes,v|=E.subtreeFlags&14680064,v|=E.flags&14680064,E.return=s,E=E.sibling;else for(E=s.child;E!==null;)g|=E.lanes|E.childLanes,v|=E.subtreeFlags,v|=E.flags,E.return=s,E=E.sibling;return s.subtreeFlags|=v,s.childLanes=g,l}function ew(s,l,g){var v=l.pendingProps;switch($e(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(l),null;case 1:return Qr(l.type)&&Pn(),sn(l),null;case 3:return v=l.stateNode,Da(),Ce(Mr),Ce(Rr),b0(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(s===null||s.child===null)&&(dt(l)?l.flags|=4:s===null||s.memoizedState.isDehydrated&&!(l.flags&256)||(l.flags|=1024,Et!==null&&(th(Et),Et=null))),W0(s,l),sn(l),null;case 5:E0(l);var E=Fo(al.current);if(g=l.type,s!==null&&l.stateNode!=null)Op(s,l,g,v,E),s.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!v){if(l.stateNode===null)throw Error(r(166));return sn(l),null}if(s=Fo(Pi.current),dt(l)){v=l.stateNode,g=l.type;var P=l.memoizedProps;switch(v[Tr]=l,v[ht]=P,s=(l.mode&1)!==0,g){case"dialog":nr("cancel",v),nr("close",v);break;case"iframe":case"object":case"embed":nr("load",v);break;case"video":case"audio":for(E=0;E<Mo.length;E++)nr(Mo[E],v);break;case"source":nr("error",v);break;case"img":case"image":case"link":nr("error",v),nr("load",v);break;case"details":nr("toggle",v);break;case"input":Ft(v,P),nr("invalid",v);break;case"select":v._wrapperState={wasMultiple:!!P.multiple},nr("invalid",v);break;case"textarea":to(v,P),nr("invalid",v)}fs(g,P),E=null;for(var O in P)if(P.hasOwnProperty(O)){var Y=P[O];O==="children"?typeof Y=="string"?v.textContent!==Y&&(P.suppressHydrationWarning!==!0&&$r(v.textContent,Y,s),E=["children",Y]):typeof Y=="number"&&v.textContent!==""+Y&&(P.suppressHydrationWarning!==!0&&$r(v.textContent,Y,s),E=["children",""+Y]):i.hasOwnProperty(O)&&Y!=null&&O==="onScroll"&&nr("scroll",v)}switch(g){case"input":Hr(v),Zn(v,P,!0);break;case"textarea":Hr(v),As(v);break;case"select":case"option":break;default:typeof P.onClick=="function"&&(v.onclick=Ra)}v=E,l.updateQueue=v,v!==null&&(l.flags|=4)}else{O=E.nodeType===9?E:E.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=ha(g)),s==="http://www.w3.org/1999/xhtml"?g==="script"?(s=O.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof v.is=="string"?s=O.createElement(g,{is:v.is}):(s=O.createElement(g),g==="select"&&(O=s,v.multiple?O.multiple=!0:v.size&&(O.size=v.size))):s=O.createElementNS(s,g),s[Tr]=l,s[ht]=v,Np(s,l,!1,!1),l.stateNode=s;e:{switch(O=ro(g,v),g){case"dialog":nr("cancel",s),nr("close",s),E=v;break;case"iframe":case"object":case"embed":nr("load",s),E=v;break;case"video":case"audio":for(E=0;E<Mo.length;E++)nr(Mo[E],s);E=v;break;case"source":nr("error",s),E=v;break;case"img":case"image":case"link":nr("error",s),nr("load",s),E=v;break;case"details":nr("toggle",s),E=v;break;case"input":Ft(s,v),E=pn(s,v),nr("invalid",s);break;case"option":E=v;break;case"select":s._wrapperState={wasMultiple:!!v.multiple},E=ue({},v,{value:void 0}),nr("invalid",s);break;case"textarea":to(s,v),E=Xi(s,v),nr("invalid",s);break;default:E=v}fs(g,E),Y=E;for(P in Y)if(Y.hasOwnProperty(P)){var ee=Y[P];P==="style"?ga(s,ee):P==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,ee!=null&&us(s,ee)):P==="children"?typeof ee=="string"?(g!=="textarea"||ee!=="")&&pi(s,ee):typeof ee=="number"&&pi(s,""+ee):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(i.hasOwnProperty(P)?ee!=null&&P==="onScroll"&&nr("scroll",s):ee!=null&&ce(s,P,ee,O))}switch(g){case"input":Hr(s),Zn(s,v,!1);break;case"textarea":Hr(s),As(s);break;case"option":v.value!=null&&s.setAttribute("value",""+Ke(v.value));break;case"select":s.multiple=!!v.multiple,P=v.value,P!=null?Kt(s,!!v.multiple,P,!1):v.defaultValue!=null&&Kt(s,!!v.multiple,v.defaultValue,!0);break;default:typeof E.onClick=="function"&&(s.onclick=Ra)}switch(g){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}}v&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return sn(l),null;case 6:if(s&&l.stateNode!=null)Dp(s,l,s.memoizedProps,v);else{if(typeof v!="string"&&l.stateNode===null)throw Error(r(166));if(g=Fo(al.current),Fo(Pi.current),dt(l)){if(v=l.stateNode,g=l.memoizedProps,v[Tr]=l,(P=v.nodeValue!==g)&&(s=Ie,s!==null))switch(s.tag){case 3:$r(v.nodeValue,g,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&$r(v.nodeValue,g,(s.mode&1)!==0)}P&&(l.flags|=4)}else v=(g.nodeType===9?g:g.ownerDocument).createTextNode(v),v[Tr]=l,l.stateNode=v}return sn(l),null;case 13:if(Ce(dr),v=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(ut&&Le!==null&&l.mode&1&&!(l.flags&128))Yt(),mr(),l.flags|=98560,P=!1;else if(P=dt(l),v!==null&&v.dehydrated!==null){if(s===null){if(!P)throw Error(r(318));if(P=l.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(r(317));P[Tr]=l}else mr(),!(l.flags&128)&&(l.memoizedState=null),l.flags|=4;sn(l),P=!1}else Et!==null&&(th(Et),Et=null),P=!0;if(!P)return l.flags&65536?l:null}return l.flags&128?(l.lanes=g,l):(v=v!==null,v!==(s!==null&&s.memoizedState!==null)&&v&&(l.child.flags|=8192,l.mode&1&&(s===null||dr.current&1?Or===0&&(Or=3):ih())),l.updateQueue!==null&&(l.flags|=4),sn(l),null);case 4:return Da(),W0(s,l),s===null&&No(l.stateNode.containerInfo),sn(l),null;case 10:return m0(l.type._context),sn(l),null;case 17:return Qr(l.type)&&Pn(),sn(l),null;case 19:if(Ce(dr),P=l.memoizedState,P===null)return sn(l),null;if(v=(l.flags&128)!==0,O=P.rendering,O===null)if(v)fl(P,!1);else{if(Or!==0||s!==null&&s.flags&128)for(s=l.child;s!==null;){if(O=zu(s),O!==null){for(l.flags|=128,fl(P,!1),v=O.updateQueue,v!==null&&(l.updateQueue=v,l.flags|=4),l.subtreeFlags=0,v=g,g=l.child;g!==null;)P=g,s=v,P.flags&=14680066,O=P.alternate,O===null?(P.childLanes=0,P.lanes=s,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=O.childLanes,P.lanes=O.lanes,P.child=O.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=O.memoizedProps,P.memoizedState=O.memoizedState,P.updateQueue=O.updateQueue,P.type=O.type,s=O.dependencies,P.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),g=g.sibling;return xe(dr,dr.current&1|2),l.child}s=s.sibling}P.tail!==null&&qt()>Ua&&(l.flags|=128,v=!0,fl(P,!1),l.lanes=4194304)}else{if(!v)if(s=zu(O),s!==null){if(l.flags|=128,v=!0,g=s.updateQueue,g!==null&&(l.updateQueue=g,l.flags|=4),fl(P,!0),P.tail===null&&P.tailMode==="hidden"&&!O.alternate&&!ut)return sn(l),null}else 2*qt()-P.renderingStartTime>Ua&&g!==1073741824&&(l.flags|=128,v=!0,fl(P,!1),l.lanes=4194304);P.isBackwards?(O.sibling=l.child,l.child=O):(g=P.last,g!==null?g.sibling=O:l.child=O,P.last=O)}return P.tail!==null?(l=P.tail,P.rendering=l,P.tail=l.sibling,P.renderingStartTime=qt(),l.sibling=null,g=dr.current,xe(dr,v?g&1|2:g&1),l):(sn(l),null);case 22:case 23:return nh(),v=l.memoizedState!==null,s!==null&&s.memoizedState!==null!==v&&(l.flags|=8192),v&&l.mode&1?kn&1073741824&&(sn(l),l.subtreeFlags&6&&(l.flags|=8192)):sn(l),null;case 24:return null;case 25:return null}throw Error(r(156,l.tag))}function tw(s,l){switch($e(l),l.tag){case 1:return Qr(l.type)&&Pn(),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return Da(),Ce(Mr),Ce(Rr),b0(),s=l.flags,s&65536&&!(s&128)?(l.flags=s&-65537|128,l):null;case 5:return E0(l),null;case 13:if(Ce(dr),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));mr()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return Ce(dr),null;case 4:return Da(),null;case 10:return m0(l.type._context),null;case 22:case 23:return nh(),null;case 24:return null;default:return null}}var Zu=!1,on=!1,rw=typeof WeakSet=="function"?WeakSet:Set,Ge=null;function Fa(s,l){var g=s.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(v){yr(s,l,v)}else g.current=null}function X0(s,l,g){try{g()}catch(v){yr(s,l,v)}}var Ip=!1;function nw(s,l){if(el=wr,s=Tu(),jA(s)){if("selectionStart"in s)var g={start:s.selectionStart,end:s.selectionEnd};else e:{g=(g=s.ownerDocument)&&g.defaultView||window;var v=g.getSelection&&g.getSelection();if(v&&v.rangeCount!==0){g=v.anchorNode;var E=v.anchorOffset,P=v.focusNode;v=v.focusOffset;try{g.nodeType,P.nodeType}catch{g=null;break e}var O=0,Y=-1,ee=-1,Ee=0,De=0,Fe=s,Ne=null;t:for(;;){for(var Ze;Fe!==g||E!==0&&Fe.nodeType!==3||(Y=O+E),Fe!==P||v!==0&&Fe.nodeType!==3||(ee=O+v),Fe.nodeType===3&&(O+=Fe.nodeValue.length),(Ze=Fe.firstChild)!==null;)Ne=Fe,Fe=Ze;for(;;){if(Fe===s)break t;if(Ne===g&&++Ee===E&&(Y=O),Ne===P&&++De===v&&(ee=O),(Ze=Fe.nextSibling)!==null)break;Fe=Ne,Ne=Fe.parentNode}Fe=Ze}g=Y===-1||ee===-1?null:{start:Y,end:ee}}else g=null}g=g||{start:0,end:0}}else g=null;for(tl={focusedElem:s,selectionRange:g},wr=!1,Ge=l;Ge!==null;)if(l=Ge,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,Ge=s;else for(;Ge!==null;){l=Ge;try{var tt=l.alternate;if(l.flags&1024)switch(l.tag){case 0:case 11:case 15:break;case 1:if(tt!==null){var st=tt.memoizedProps,Sr=tt.memoizedState,ge=l.stateNode,ie=ge.getSnapshotBeforeUpdate(l.elementType===l.type?st:ai(l.type,st),Sr);ge.__reactInternalSnapshotBeforeUpdate=ie}break;case 3:var me=l.stateNode.containerInfo;me.nodeType===1?me.textContent="":me.nodeType===9&&me.documentElement&&me.removeChild(me.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(ze){yr(l,l.return,ze)}if(s=l.sibling,s!==null){s.return=l.return,Ge=s;break}Ge=l.return}return tt=Ip,Ip=!1,tt}function hl(s,l,g){var v=l.updateQueue;if(v=v!==null?v.lastEffect:null,v!==null){var E=v=v.next;do{if((E.tag&s)===s){var P=E.destroy;E.destroy=void 0,P!==void 0&&X0(l,g,P)}E=E.next}while(E!==v)}}function qu(s,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var g=l=l.next;do{if((g.tag&s)===s){var v=g.create;g.destroy=v()}g=g.next}while(g!==l)}}function $0(s){var l=s.ref;if(l!==null){var g=s.stateNode;switch(s.tag){case 5:s=g;break;default:s=g}typeof l=="function"?l(s):l.current=s}}function Fp(s){var l=s.alternate;l!==null&&(s.alternate=null,Fp(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&(delete l[Tr],delete l[ht],delete l[Dt],delete l[Lr],delete l[Iu])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Lp(s){return s.tag===5||s.tag===3||s.tag===4}function Up(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Lp(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Q0(s,l,g){var v=s.tag;if(v===5||v===6)s=s.stateNode,l?g.nodeType===8?g.parentNode.insertBefore(s,l):g.insertBefore(s,l):(g.nodeType===8?(l=g.parentNode,l.insertBefore(s,g)):(l=g,l.appendChild(s)),g=g._reactRootContainer,g!=null||l.onclick!==null||(l.onclick=Ra));else if(v!==4&&(s=s.child,s!==null))for(Q0(s,l,g),s=s.sibling;s!==null;)Q0(s,l,g),s=s.sibling}function Y0(s,l,g){var v=s.tag;if(v===5||v===6)s=s.stateNode,l?g.insertBefore(s,l):g.appendChild(s);else if(v!==4&&(s=s.child,s!==null))for(Y0(s,l,g),s=s.sibling;s!==null;)Y0(s,l,g),s=s.sibling}var Yr=null,Ai=!1;function ks(s,l,g){for(g=g.child;g!==null;)Bp(s,l,g),g=g.sibling}function Bp(s,l,g){if(lt&&typeof lt.onCommitFiberUnmount=="function")try{lt.onCommitFiberUnmount(pr,g)}catch{}switch(g.tag){case 5:on||Fa(g,l);case 6:var v=Yr,E=Ai;Yr=null,ks(s,l,g),Yr=v,Ai=E,Yr!==null&&(Ai?(s=Yr,g=g.stateNode,s.nodeType===8?s.parentNode.removeChild(g):s.removeChild(g)):Yr.removeChild(g.stateNode));break;case 18:Yr!==null&&(Ai?(s=Yr,g=g.stateNode,s.nodeType===8?nl(s.parentNode,g):s.nodeType===1&&nl(s,g),ho(s)):nl(Yr,g.stateNode));break;case 4:v=Yr,E=Ai,Yr=g.stateNode.containerInfo,Ai=!0,ks(s,l,g),Yr=v,Ai=E;break;case 0:case 11:case 14:case 15:if(!on&&(v=g.updateQueue,v!==null&&(v=v.lastEffect,v!==null))){E=v=v.next;do{var P=E,O=P.destroy;P=P.tag,O!==void 0&&(P&2||P&4)&&X0(g,l,O),E=E.next}while(E!==v)}ks(s,l,g);break;case 1:if(!on&&(Fa(g,l),v=g.stateNode,typeof v.componentWillUnmount=="function"))try{v.props=g.memoizedProps,v.state=g.memoizedState,v.componentWillUnmount()}catch(Y){yr(g,l,Y)}ks(s,l,g);break;case 21:ks(s,l,g);break;case 22:g.mode&1?(on=(v=on)||g.memoizedState!==null,ks(s,l,g),on=v):ks(s,l,g);break;default:ks(s,l,g)}}function Vp(s){var l=s.updateQueue;if(l!==null){s.updateQueue=null;var g=s.stateNode;g===null&&(g=s.stateNode=new rw),l.forEach(function(v){var E=fw.bind(null,s,v);g.has(v)||(g.add(v),v.then(E,E))})}}function li(s,l){var g=l.deletions;if(g!==null)for(var v=0;v<g.length;v++){var E=g[v];try{var P=s,O=l,Y=O;e:for(;Y!==null;){switch(Y.tag){case 5:Yr=Y.stateNode,Ai=!1;break e;case 3:Yr=Y.stateNode.containerInfo,Ai=!0;break e;case 4:Yr=Y.stateNode.containerInfo,Ai=!0;break e}Y=Y.return}if(Yr===null)throw Error(r(160));Bp(P,O,E),Yr=null,Ai=!1;var ee=E.alternate;ee!==null&&(ee.return=null),E.return=null}catch(Ee){yr(E,l,Ee)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)zp(l,s),l=l.sibling}function zp(s,l){var g=s.alternate,v=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(li(l,s),xi(s),v&4){try{hl(3,s,s.return),qu(3,s)}catch(st){yr(s,s.return,st)}try{hl(5,s,s.return)}catch(st){yr(s,s.return,st)}}break;case 1:li(l,s),xi(s),v&512&&g!==null&&Fa(g,g.return);break;case 5:if(li(l,s),xi(s),v&512&&g!==null&&Fa(g,g.return),s.flags&32){var E=s.stateNode;try{pi(E,"")}catch(st){yr(s,s.return,st)}}if(v&4&&(E=s.stateNode,E!=null)){var P=s.memoizedProps,O=g!==null?g.memoizedProps:P,Y=s.type,ee=s.updateQueue;if(s.updateQueue=null,ee!==null)try{Y==="input"&&P.type==="radio"&&P.name!=null&&Pt(E,P),ro(Y,O);var Ee=ro(Y,P);for(O=0;O<ee.length;O+=2){var De=ee[O],Fe=ee[O+1];De==="style"?ga(E,Fe):De==="dangerouslySetInnerHTML"?us(E,Fe):De==="children"?pi(E,Fe):ce(E,De,Fe,Ee)}switch(Y){case"input":xr(E,P);break;case"textarea":qn(E,P);break;case"select":var Ne=E._wrapperState.wasMultiple;E._wrapperState.wasMultiple=!!P.multiple;var Ze=P.value;Ze!=null?Kt(E,!!P.multiple,Ze,!1):Ne!==!!P.multiple&&(P.defaultValue!=null?Kt(E,!!P.multiple,P.defaultValue,!0):Kt(E,!!P.multiple,P.multiple?[]:"",!1))}E[ht]=P}catch(st){yr(s,s.return,st)}}break;case 6:if(li(l,s),xi(s),v&4){if(s.stateNode===null)throw Error(r(162));E=s.stateNode,P=s.memoizedProps;try{E.nodeValue=P}catch(st){yr(s,s.return,st)}}break;case 3:if(li(l,s),xi(s),v&4&&g!==null&&g.memoizedState.isDehydrated)try{ho(l.containerInfo)}catch(st){yr(s,s.return,st)}break;case 4:li(l,s),xi(s);break;case 13:li(l,s),xi(s),E=s.child,E.flags&8192&&(P=E.memoizedState!==null,E.stateNode.isHidden=P,!P||E.alternate!==null&&E.alternate.memoizedState!==null||(q0=qt())),v&4&&Vp(s);break;case 22:if(De=g!==null&&g.memoizedState!==null,s.mode&1?(on=(Ee=on)||De,li(l,s),on=Ee):li(l,s),xi(s),v&8192){if(Ee=s.memoizedState!==null,(s.stateNode.isHidden=Ee)&&!De&&s.mode&1)for(Ge=s,De=s.child;De!==null;){for(Fe=Ge=De;Ge!==null;){switch(Ne=Ge,Ze=Ne.child,Ne.tag){case 0:case 11:case 14:case 15:hl(4,Ne,Ne.return);break;case 1:Fa(Ne,Ne.return);var tt=Ne.stateNode;if(typeof tt.componentWillUnmount=="function"){v=Ne,g=Ne.return;try{l=v,tt.props=l.memoizedProps,tt.state=l.memoizedState,tt.componentWillUnmount()}catch(st){yr(v,g,st)}}break;case 5:Fa(Ne,Ne.return);break;case 22:if(Ne.memoizedState!==null){Wp(Fe);continue}}Ze!==null?(Ze.return=Ne,Ge=Ze):Wp(Fe)}De=De.sibling}e:for(De=null,Fe=s;;){if(Fe.tag===5){if(De===null){De=Fe;try{E=Fe.stateNode,Ee?(P=E.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none"):(Y=Fe.stateNode,ee=Fe.memoizedProps.style,O=ee!=null&&ee.hasOwnProperty("display")?ee.display:null,Y.style.display=da("display",O))}catch(st){yr(s,s.return,st)}}}else if(Fe.tag===6){if(De===null)try{Fe.stateNode.nodeValue=Ee?"":Fe.memoizedProps}catch(st){yr(s,s.return,st)}}else if((Fe.tag!==22&&Fe.tag!==23||Fe.memoizedState===null||Fe===s)&&Fe.child!==null){Fe.child.return=Fe,Fe=Fe.child;continue}if(Fe===s)break e;for(;Fe.sibling===null;){if(Fe.return===null||Fe.return===s)break e;De===Fe&&(De=null),Fe=Fe.return}De===Fe&&(De=null),Fe.sibling.return=Fe.return,Fe=Fe.sibling}}break;case 19:li(l,s),xi(s),v&4&&Vp(s);break;case 21:break;default:li(l,s),xi(s)}}function xi(s){var l=s.flags;if(l&2){try{e:{for(var g=s.return;g!==null;){if(Lp(g)){var v=g;break e}g=g.return}throw Error(r(160))}switch(v.tag){case 5:var E=v.stateNode;v.flags&32&&(pi(E,""),v.flags&=-33);var P=Up(s);Y0(s,P,E);break;case 3:case 4:var O=v.stateNode.containerInfo,Y=Up(s);Q0(s,Y,O);break;default:throw Error(r(161))}}catch(ee){yr(s,s.return,ee)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function iw(s,l,g){Ge=s,Hp(s)}function Hp(s,l,g){for(var v=(s.mode&1)!==0;Ge!==null;){var E=Ge,P=E.child;if(E.tag===22&&v){var O=E.memoizedState!==null||Zu;if(!O){var Y=E.alternate,ee=Y!==null&&Y.memoizedState!==null||on;Y=Zu;var Ee=on;if(Zu=O,(on=ee)&&!Ee)for(Ge=E;Ge!==null;)O=Ge,ee=O.child,O.tag===22&&O.memoizedState!==null?Xp(E):ee!==null?(ee.return=O,Ge=ee):Xp(E);for(;P!==null;)Ge=P,Hp(P),P=P.sibling;Ge=E,Zu=Y,on=Ee}jp(s)}else E.subtreeFlags&8772&&P!==null?(P.return=E,Ge=P):jp(s)}}function jp(s){for(;Ge!==null;){var l=Ge;if(l.flags&8772){var g=l.alternate;try{if(l.flags&8772)switch(l.tag){case 0:case 11:case 15:on||qu(5,l);break;case 1:var v=l.stateNode;if(l.flags&4&&!on)if(g===null)v.componentDidMount();else{var E=l.elementType===l.type?g.memoizedProps:ai(l.type,g.memoizedProps);v.componentDidUpdate(E,g.memoizedState,v.__reactInternalSnapshotBeforeUpdate)}var P=l.updateQueue;P!==null&&Wg(l,P,v);break;case 3:var O=l.updateQueue;if(O!==null){if(g=null,l.child!==null)switch(l.child.tag){case 5:g=l.child.stateNode;break;case 1:g=l.child.stateNode}Wg(l,O,g)}break;case 5:var Y=l.stateNode;if(g===null&&l.flags&4){g=Y;var ee=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":ee.autoFocus&&g.focus();break;case"img":ee.src&&(g.src=ee.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var Ee=l.alternate;if(Ee!==null){var De=Ee.memoizedState;if(De!==null){var Fe=De.dehydrated;Fe!==null&&ho(Fe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}on||l.flags&512&&$0(l)}catch(Ne){yr(l,l.return,Ne)}}if(l===s){Ge=null;break}if(g=l.sibling,g!==null){g.return=l.return,Ge=g;break}Ge=l.return}}function Wp(s){for(;Ge!==null;){var l=Ge;if(l===s){Ge=null;break}var g=l.sibling;if(g!==null){g.return=l.return,Ge=g;break}Ge=l.return}}function Xp(s){for(;Ge!==null;){var l=Ge;try{switch(l.tag){case 0:case 11:case 15:var g=l.return;try{qu(4,l)}catch(ee){yr(l,g,ee)}break;case 1:var v=l.stateNode;if(typeof v.componentDidMount=="function"){var E=l.return;try{v.componentDidMount()}catch(ee){yr(l,E,ee)}}var P=l.return;try{$0(l)}catch(ee){yr(l,P,ee)}break;case 5:var O=l.return;try{$0(l)}catch(ee){yr(l,O,ee)}}}catch(ee){yr(l,l.return,ee)}if(l===s){Ge=null;break}var Y=l.sibling;if(Y!==null){Y.return=l.return,Ge=Y;break}Ge=l.return}}var sw=Math.ceil,Gu=we.ReactCurrentDispatcher,K0=we.ReactCurrentOwner,Xn=we.ReactCurrentBatchConfig,Wt=0,Br=null,Pr=null,Kr=0,kn=0,La=si(0),Or=0,dl=null,Uo=0,Ju=0,Z0=0,gl=null,wn=null,q0=0,Ua=1/0,ts=null,ec=!1,G0=null,xs=null,tc=!1,Ms=null,rc=0,pl=0,J0=null,nc=-1,ic=0;function gn(){return Wt&6?qt():nc!==-1?nc:nc=qt()}function Ns(s){return s.mode&1?Wt&2&&Kr!==0?Kr&-Kr:Hv.transition!==null?(ic===0&&(ic=ps()),ic):(s=I,s!==0||(s=window.event,s=s===void 0?16:Au(s.type)),s):1}function ui(s,l,g,v){if(50<pl)throw pl=0,J0=null,Error(r(185));wi(s,g,v),(!(Wt&2)||s!==Br)&&(s===Br&&(!(Wt&2)&&(Ju|=g),Or===4&&Os(s,Kr)),Tn(s,v),g===1&&Wt===0&&!(l.mode&1)&&(Ua=qt()+500,_&&k()))}function Tn(s,l){var g=s.callbackNode;CA(s,l);var v=ri(s,s===Br?Kr:0);if(v===0)g!==null&&vt(g),s.callbackNode=null,s.callbackPriority=0;else if(l=v&-v,s.callbackPriority!==l){if(g!=null&&vt(g),l===1)s.tag===0?S(Qp.bind(null,s)):w(Qp.bind(null,s)),d0(function(){!(Wt&6)&&k()}),g=null;else{switch(K(v)){case 1:g=ur;break;case 4:g=Ir;break;case 16:g=or;break;case 536870912:g=cn;break;default:g=or}g=t_(g,$p.bind(null,s))}s.callbackPriority=l,s.callbackNode=g}}function $p(s,l){if(nc=-1,ic=0,Wt&6)throw Error(r(327));var g=s.callbackNode;if(Ba()&&s.callbackNode!==g)return null;var v=ri(s,s===Br?Kr:0);if(v===0)return null;if(v&30||v&s.expiredLanes||l)l=sc(s,v);else{l=v;var E=Wt;Wt|=2;var P=Kp();(Br!==s||Kr!==l)&&(ts=null,Ua=qt()+500,Vo(s,l));do try{Aw();break}catch(Y){Yp(s,Y)}while(!0);_0(),Gu.current=P,Wt=E,Pr!==null?l=0:(Br=null,Kr=0,l=Or)}if(l!==0){if(l===2&&(E=gs(s),E!==0&&(v=E,l=eh(s,E))),l===1)throw g=dl,Vo(s,0),Os(s,v),Tn(s,qt()),g;if(l===6)Os(s,v);else{if(E=s.current.alternate,!(v&30)&&!ow(E)&&(l=sc(s,v),l===2&&(P=gs(s),P!==0&&(v=P,l=eh(s,P))),l===1))throw g=dl,Vo(s,0),Os(s,v),Tn(s,qt()),g;switch(s.finishedWork=E,s.finishedLanes=v,l){case 0:case 1:throw Error(r(345));case 2:zo(s,wn,ts);break;case 3:if(Os(s,v),(v&130023424)===v&&(l=q0+500-qt(),10<l)){if(ri(s,0)!==0)break;if(E=s.suspendedLanes,(E&v)!==v){gn(),s.pingedLanes|=s.suspendedLanes&E;break}s.timeoutHandle=ka(zo.bind(null,s,wn,ts),l);break}zo(s,wn,ts);break;case 4:if(Os(s,v),(v&4194240)===v)break;for(l=s.eventTimes,E=-1;0<v;){var O=31-qe(v);P=1<<O,O=l[O],O>E&&(E=O),v&=~P}if(v=E,v=qt()-v,v=(120>v?120:480>v?480:1080>v?1080:1920>v?1920:3e3>v?3e3:4320>v?4320:1960*sw(v/1960))-v,10<v){s.timeoutHandle=ka(zo.bind(null,s,wn,ts),v);break}zo(s,wn,ts);break;case 5:zo(s,wn,ts);break;default:throw Error(r(329))}}}return Tn(s,qt()),s.callbackNode===g?$p.bind(null,s):null}function eh(s,l){var g=gl;return s.current.memoizedState.isDehydrated&&(Vo(s,l).flags|=256),s=sc(s,l),s!==2&&(l=wn,wn=g,l!==null&&th(l)),s}function th(s){wn===null?wn=s:wn.push.apply(wn,s)}function ow(s){for(var l=s;;){if(l.flags&16384){var g=l.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var v=0;v<g.length;v++){var E=g[v],P=E.getSnapshot;E=E.value;try{if(!bn(P(),E))return!1}catch{return!1}}}if(g=l.child,l.subtreeFlags&16384&&g!==null)g.return=l,l=g;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Os(s,l){for(l&=~Z0,l&=~Ju,s.suspendedLanes|=l,s.pingedLanes&=~l,s=s.expirationTimes;0<l;){var g=31-qe(l),v=1<<g;s[g]=-1,l&=~v}}function Qp(s){if(Wt&6)throw Error(r(327));Ba();var l=ri(s,0);if(!(l&1))return Tn(s,qt()),null;var g=sc(s,l);if(s.tag!==0&&g===2){var v=gs(s);v!==0&&(l=v,g=eh(s,v))}if(g===1)throw g=dl,Vo(s,0),Os(s,l),Tn(s,qt()),g;if(g===6)throw Error(r(345));return s.finishedWork=s.current.alternate,s.finishedLanes=l,zo(s,wn,ts),Tn(s,qt()),null}function rh(s,l){var g=Wt;Wt|=1;try{return s(l)}finally{Wt=g,Wt===0&&(Ua=qt()+500,_&&k())}}function Bo(s){Ms!==null&&Ms.tag===0&&!(Wt&6)&&Ba();var l=Wt;Wt|=1;var g=Xn.transition,v=I;try{if(Xn.transition=null,I=1,s)return s()}finally{I=v,Xn.transition=g,Wt=l,!(Wt&6)&&k()}}function nh(){kn=La.current,Ce(La)}function Vo(s,l){s.finishedWork=null,s.finishedLanes=0;var g=s.timeoutHandle;if(g!==-1&&(s.timeoutHandle=-1,Ou(g)),Pr!==null)for(g=Pr.return;g!==null;){var v=g;switch($e(v),v.tag){case 1:v=v.type.childContextTypes,v!=null&&Pn();break;case 3:Da(),Ce(Mr),Ce(Rr),b0();break;case 5:E0(v);break;case 4:Da();break;case 13:Ce(dr);break;case 19:Ce(dr);break;case 10:m0(v.type._context);break;case 22:case 23:nh()}g=g.return}if(Br=s,Pr=s=Ds(s.current,null),Kr=kn=l,Or=0,dl=null,Z0=Ju=Uo=0,wn=gl=null,Io!==null){for(l=0;l<Io.length;l++)if(g=Io[l],v=g.interleaved,v!==null){g.interleaved=null;var E=v.next,P=g.pending;if(P!==null){var O=P.next;P.next=E,v.next=O}g.pending=v}Io=null}return s}function Yp(s,l){do{var g=Pr;try{if(_0(),Hu.current=$u,ju){for(var v=gr.memoizedState;v!==null;){var E=v.queue;E!==null&&(E.pending=null),v=v.next}ju=!1}if(Lo=0,Ur=Nr=gr=null,Al=!1,ll=0,K0.current=null,g===null||g.return===null){Or=1,dl=l,Pr=null;break}e:{var P=s,O=g.return,Y=g,ee=l;if(l=Kr,Y.flags|=32768,ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var Ee=ee,De=Y,Fe=De.tag;if(!(De.mode&1)&&(Fe===0||Fe===11||Fe===15)){var Ne=De.alternate;Ne?(De.updateQueue=Ne.updateQueue,De.memoizedState=Ne.memoizedState,De.lanes=Ne.lanes):(De.updateQueue=null,De.memoizedState=null)}var Ze=yp(O);if(Ze!==null){Ze.flags&=-257,vp(Ze,O,Y,P,l),Ze.mode&1&&mp(P,Ee,l),l=Ze,ee=Ee;var tt=l.updateQueue;if(tt===null){var st=new Set;st.add(ee),l.updateQueue=st}else tt.add(ee);break e}else{if(!(l&1)){mp(P,Ee,l),ih();break e}ee=Error(r(426))}}else if(ut&&Y.mode&1){var Sr=yp(O);if(Sr!==null){!(Sr.flags&65536)&&(Sr.flags|=256),vp(Sr,O,Y,P,l),xa(Ia(ee,Y));break e}}P=ee=Ia(ee,Y),Or!==4&&(Or=2),gl===null?gl=[P]:gl.push(P),P=O;do{switch(P.tag){case 3:P.flags|=65536,l&=-l,P.lanes|=l;var ge=pp(P,ee,l);jg(P,ge);break e;case 1:Y=ee;var ie=P.type,me=P.stateNode;if(!(P.flags&128)&&(typeof ie.getDerivedStateFromError=="function"||me!==null&&typeof me.componentDidCatch=="function"&&(xs===null||!xs.has(me)))){P.flags|=65536,l&=-l,P.lanes|=l;var ze=_p(P,Y,l);jg(P,ze);break e}}P=P.return}while(P!==null)}qp(g)}catch(at){l=at,Pr===g&&g!==null&&(Pr=g=g.return);continue}break}while(!0)}function Kp(){var s=Gu.current;return Gu.current=$u,s===null?$u:s}function ih(){(Or===0||Or===3||Or===2)&&(Or=4),Br===null||!(Uo&268435455)&&!(Ju&268435455)||Os(Br,Kr)}function sc(s,l){var g=Wt;Wt|=2;var v=Kp();(Br!==s||Kr!==l)&&(ts=null,Vo(s,l));do try{aw();break}catch(E){Yp(s,E)}while(!0);if(_0(),Wt=g,Gu.current=v,Pr!==null)throw Error(r(261));return Br=null,Kr=0,Or}function aw(){for(;Pr!==null;)Zp(Pr)}function Aw(){for(;Pr!==null&&!tn();)Zp(Pr)}function Zp(s){var l=e_(s.alternate,s,kn);s.memoizedProps=s.pendingProps,l===null?qp(s):Pr=l,K0.current=null}function qp(s){var l=s;do{var g=l.alternate;if(s=l.return,l.flags&32768){if(g=tw(g,l),g!==null){g.flags&=32767,Pr=g;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Or=6,Pr=null;return}}else if(g=ew(g,l,kn),g!==null){Pr=g;return}if(l=l.sibling,l!==null){Pr=l;return}Pr=l=s}while(l!==null);Or===0&&(Or=5)}function zo(s,l,g){var v=I,E=Xn.transition;try{Xn.transition=null,I=1,lw(s,l,g,v)}finally{Xn.transition=E,I=v}return null}function lw(s,l,g,v){do Ba();while(Ms!==null);if(Wt&6)throw Error(r(327));g=s.finishedWork;var E=s.finishedLanes;if(g===null)return null;if(s.finishedWork=null,s.finishedLanes=0,g===s.current)throw Error(r(177));s.callbackNode=null,s.callbackPriority=0;var P=g.lanes|g.childLanes;if(ma(s,P),s===Br&&(Pr=Br=null,Kr=0),!(g.subtreeFlags&2064)&&!(g.flags&2064)||tc||(tc=!0,t_(or,function(){return Ba(),null})),P=(g.flags&15990)!==0,g.subtreeFlags&15990||P){P=Xn.transition,Xn.transition=null;var O=I;I=1;var Y=Wt;Wt|=4,K0.current=null,nw(s,g),zp(g,s),WA(tl),wr=!!el,tl=el=null,s.current=g,iw(g),hs(),Wt=Y,I=O,Xn.transition=P}else s.current=g;if(tc&&(tc=!1,Ms=s,rc=E),P=s.pendingLanes,P===0&&(xs=null),z(g.stateNode),Tn(s,qt()),l!==null)for(v=s.onRecoverableError,g=0;g<l.length;g++)E=l[g],v(E.value,{componentStack:E.stack,digest:E.digest});if(ec)throw ec=!1,s=G0,G0=null,s;return rc&1&&s.tag!==0&&Ba(),P=s.pendingLanes,P&1?s===J0?pl++:(pl=0,J0=s):pl=0,k(),null}function Ba(){if(Ms!==null){var s=K(rc),l=Xn.transition,g=I;try{if(Xn.transition=null,I=16>s?16:s,Ms===null)var v=!1;else{if(s=Ms,Ms=null,rc=0,Wt&6)throw Error(r(331));var E=Wt;for(Wt|=4,Ge=s.current;Ge!==null;){var P=Ge,O=P.child;if(Ge.flags&16){var Y=P.deletions;if(Y!==null){for(var ee=0;ee<Y.length;ee++){var Ee=Y[ee];for(Ge=Ee;Ge!==null;){var De=Ge;switch(De.tag){case 0:case 11:case 15:hl(8,De,P)}var Fe=De.child;if(Fe!==null)Fe.return=De,Ge=Fe;else for(;Ge!==null;){De=Ge;var Ne=De.sibling,Ze=De.return;if(Fp(De),De===Ee){Ge=null;break}if(Ne!==null){Ne.return=Ze,Ge=Ne;break}Ge=Ze}}}var tt=P.alternate;if(tt!==null){var st=tt.child;if(st!==null){tt.child=null;do{var Sr=st.sibling;st.sibling=null,st=Sr}while(st!==null)}}Ge=P}}if(P.subtreeFlags&2064&&O!==null)O.return=P,Ge=O;else e:for(;Ge!==null;){if(P=Ge,P.flags&2048)switch(P.tag){case 0:case 11:case 15:hl(9,P,P.return)}var ge=P.sibling;if(ge!==null){ge.return=P.return,Ge=ge;break e}Ge=P.return}}var ie=s.current;for(Ge=ie;Ge!==null;){O=Ge;var me=O.child;if(O.subtreeFlags&2064&&me!==null)me.return=O,Ge=me;else e:for(O=ie;Ge!==null;){if(Y=Ge,Y.flags&2048)try{switch(Y.tag){case 0:case 11:case 15:qu(9,Y)}}catch(at){yr(Y,Y.return,at)}if(Y===O){Ge=null;break e}var ze=Y.sibling;if(ze!==null){ze.return=Y.return,Ge=ze;break e}Ge=Y.return}}if(Wt=E,k(),lt&&typeof lt.onPostCommitFiberRoot=="function")try{lt.onPostCommitFiberRoot(pr,s)}catch{}v=!0}return v}finally{I=g,Xn.transition=l}}return!1}function Gp(s,l,g){l=Ia(g,l),l=pp(s,l,1),s=Ps(s,l,1),l=gn(),s!==null&&(wi(s,1,l),Tn(s,l))}function yr(s,l,g){if(s.tag===3)Gp(s,s,g);else for(;l!==null;){if(l.tag===3){Gp(l,s,g);break}else if(l.tag===1){var v=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(xs===null||!xs.has(v))){s=Ia(g,s),s=_p(l,s,1),l=Ps(l,s,1),s=gn(),l!==null&&(wi(l,1,s),Tn(l,s));break}}l=l.return}}function uw(s,l,g){var v=s.pingCache;v!==null&&v.delete(l),l=gn(),s.pingedLanes|=s.suspendedLanes&g,Br===s&&(Kr&g)===g&&(Or===4||Or===3&&(Kr&130023424)===Kr&&500>qt()-q0?Vo(s,0):Z0|=g),Tn(s,l)}function Jp(s,l){l===0&&(s.mode&1?(l=vi,vi<<=1,!(vi&130023424)&&(vi=4194304)):l=1);var g=gn();s=Gi(s,l),s!==null&&(wi(s,l,g),Tn(s,g))}function cw(s){var l=s.memoizedState,g=0;l!==null&&(g=l.retryLane),Jp(s,g)}function fw(s,l){var g=0;switch(s.tag){case 13:var v=s.stateNode,E=s.memoizedState;E!==null&&(g=E.retryLane);break;case 19:v=s.stateNode;break;default:throw Error(r(314))}v!==null&&v.delete(l),Jp(s,g)}var e_;e_=function(s,l,g){if(s!==null)if(s.memoizedProps!==l.pendingProps||Mr.current)vn=!0;else{if(!(s.lanes&g)&&!(l.flags&128))return vn=!1,Jv(s,l,g);vn=!!(s.flags&131072)}else vn=!1,ut&&l.flags&1048576&&le(l,J,l.index);switch(l.lanes=0,l.tag){case 2:var v=l.type;Ku(s,l),s=l.pendingProps;var E=yn(l,Rr.current);Oa(l,g),E=P0(null,l,v,s,E,g);var P=k0();return l.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Qr(v)?(P=!0,c(l)):P=!1,l.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,w0(l),E.updater=Qu,l.stateNode=E,E._reactInternals=l,I0(l,v,s,g),l=B0(null,l,v,!0,P,g)):(l.tag=0,ut&&P&&We(l),dn(null,l,E,g),l=l.child),l;case 16:v=l.elementType;e:{switch(Ku(s,l),s=l.pendingProps,E=v._init,v=E(v._payload),l.type=v,E=l.tag=dw(v),s=ai(v,s),E){case 0:l=U0(null,l,v,s,g);break e;case 1:l=Cp(null,l,v,s,g);break e;case 11:l=wp(null,l,v,s,g);break e;case 14:l=Tp(null,l,v,ai(v.type,s),g);break e}throw Error(r(306,v,""))}return l;case 0:return v=l.type,E=l.pendingProps,E=l.elementType===v?E:ai(v,E),U0(s,l,v,E,g);case 1:return v=l.type,E=l.pendingProps,E=l.elementType===v?E:ai(v,E),Cp(s,l,v,E,g);case 3:e:{if(Rp(l),s===null)throw Error(r(387));v=l.pendingProps,P=l.memoizedState,E=P.element,Hg(s,l),Vu(l,v,null,g);var O=l.memoizedState;if(v=O.element,P.isDehydrated)if(P={element:v,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},l.updateQueue.baseState=P,l.memoizedState=P,l.flags&256){E=Ia(Error(r(423)),l),l=Pp(s,l,v,g,E);break e}else if(v!==E){E=Ia(Error(r(424)),l),l=Pp(s,l,v,g,E);break e}else for(Le=Ri(l.stateNode.containerInfo.firstChild),Ie=l,ut=!0,Et=null,g=Vg(l,null,v,g),l.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(mr(),v===E){l=es(s,l,g);break e}dn(s,l,v,g)}l=l.child}return l;case 5:return Xg(l),s===null&&St(l),v=l.type,E=l.pendingProps,P=s!==null?s.memoizedProps:null,O=E.children,Pa(v,E)?O=null:P!==null&&Pa(v,P)&&(l.flags|=32),bp(s,l),dn(s,l,O,g),l.child;case 6:return s===null&&St(l),null;case 13:return kp(s,l,g);case 4:return T0(l,l.stateNode.containerInfo),v=l.pendingProps,s===null?l.child=Ma(l,null,v,g):dn(s,l,v,g),l.child;case 11:return v=l.type,E=l.pendingProps,E=l.elementType===v?E:ai(v,E),wp(s,l,v,E,g);case 7:return dn(s,l,l.pendingProps,g),l.child;case 8:return dn(s,l,l.pendingProps.children,g),l.child;case 12:return dn(s,l,l.pendingProps.children,g),l.child;case 10:e:{if(v=l.type._context,E=l.pendingProps,P=l.memoizedProps,O=E.value,xe(Lu,v._currentValue),v._currentValue=O,P!==null)if(bn(P.value,O)){if(P.children===E.children&&!Mr.current){l=es(s,l,g);break e}}else for(P=l.child,P!==null&&(P.return=l);P!==null;){var Y=P.dependencies;if(Y!==null){O=P.child;for(var ee=Y.firstContext;ee!==null;){if(ee.context===v){if(P.tag===1){ee=Ji(-1,g&-g),ee.tag=2;var Ee=P.updateQueue;if(Ee!==null){Ee=Ee.shared;var De=Ee.pending;De===null?ee.next=ee:(ee.next=De.next,De.next=ee),Ee.pending=ee}}P.lanes|=g,ee=P.alternate,ee!==null&&(ee.lanes|=g),y0(P.return,g,l),Y.lanes|=g;break}ee=ee.next}}else if(P.tag===10)O=P.type===l.type?null:P.child;else if(P.tag===18){if(O=P.return,O===null)throw Error(r(341));O.lanes|=g,Y=O.alternate,Y!==null&&(Y.lanes|=g),y0(O,g,l),O=P.sibling}else O=P.child;if(O!==null)O.return=P;else for(O=P;O!==null;){if(O===l){O=null;break}if(P=O.sibling,P!==null){P.return=O.return,O=P;break}O=O.return}P=O}dn(s,l,E.children,g),l=l.child}return l;case 9:return E=l.type,v=l.pendingProps.children,Oa(l,g),E=jn(E),v=v(E),l.flags|=1,dn(s,l,v,g),l.child;case 14:return v=l.type,E=ai(v,l.pendingProps),E=ai(v.type,E),Tp(s,l,v,E,g);case 15:return Ep(s,l,l.type,l.pendingProps,g);case 17:return v=l.type,E=l.pendingProps,E=l.elementType===v?E:ai(v,E),Ku(s,l),l.tag=1,Qr(v)?(s=!0,c(l)):s=!1,Oa(l,g),dp(l,v,E),I0(l,v,E,g),B0(null,l,v,!0,s,g);case 19:return Mp(s,l,g);case 22:return Sp(s,l,g)}throw Error(r(156,l.tag))};function t_(s,l){return Ut(s,l)}function hw(s,l,g,v){this.tag=s,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $n(s,l,g,v){return new hw(s,l,g,v)}function sh(s){return s=s.prototype,!(!s||!s.isReactComponent)}function dw(s){if(typeof s=="function")return sh(s)?1:0;if(s!=null){if(s=s.$$typeof,s===mt)return 11;if(s===Vt)return 14}return 2}function Ds(s,l){var g=s.alternate;return g===null?(g=$n(s.tag,l,s.key,s.mode),g.elementType=s.elementType,g.type=s.type,g.stateNode=s.stateNode,g.alternate=s,s.alternate=g):(g.pendingProps=l,g.type=s.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=s.flags&14680064,g.childLanes=s.childLanes,g.lanes=s.lanes,g.child=s.child,g.memoizedProps=s.memoizedProps,g.memoizedState=s.memoizedState,g.updateQueue=s.updateQueue,l=s.dependencies,g.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},g.sibling=s.sibling,g.index=s.index,g.ref=s.ref,g}function oc(s,l,g,v,E,P){var O=2;if(v=s,typeof s=="function")sh(s)&&(O=1);else if(typeof s=="string")O=5;else e:switch(s){case Xe:return Ho(g.children,E,P,l);case nt:O=8,E|=8;break;case Ue:return s=$n(12,g,l,E|2),s.elementType=Ue,s.lanes=P,s;case _t:return s=$n(13,g,l,E),s.elementType=_t,s.lanes=P,s;case ct:return s=$n(19,g,l,E),s.elementType=ct,s.lanes=P,s;case ae:return ac(g,E,P,l);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Je:O=10;break e;case it:O=9;break e;case mt:O=11;break e;case Vt:O=14;break e;case q:O=16,v=null;break e}throw Error(r(130,s==null?s:typeof s,""))}return l=$n(O,g,l,E),l.elementType=s,l.type=v,l.lanes=P,l}function Ho(s,l,g,v){return s=$n(7,s,v,l),s.lanes=g,s}function ac(s,l,g,v){return s=$n(22,s,v,l),s.elementType=ae,s.lanes=g,s.stateNode={isHidden:!1},s}function oh(s,l,g){return s=$n(6,s,null,l),s.lanes=g,s}function ah(s,l,g){return l=$n(4,s.children!==null?s.children:[],s.key,l),l.lanes=g,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}function gw(s,l,g,v,E){this.tag=l,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_s(0),this.expirationTimes=_s(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_s(0),this.identifierPrefix=v,this.onRecoverableError=E,this.mutableSourceEagerHydrationData=null}function Ah(s,l,g,v,E,P,O,Y,ee){return s=new gw(s,l,g,Y,ee),l===1?(l=1,P===!0&&(l|=8)):l=0,P=$n(3,null,null,l),s.current=P,P.stateNode=s,P.memoizedState={element:v,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},w0(P),s}function pw(s,l,g){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pe,key:v==null?null:""+v,children:s,containerInfo:l,implementation:g}}function r_(s){if(!s)return oi;s=s._reactInternals;e:{if(Mt(s)!==s||s.tag!==1)throw Error(r(170));var l=s;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Qr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(r(171))}if(s.tag===1){var g=s.type;if(Qr(g))return a(s,g,l)}return l}function n_(s,l,g,v,E,P,O,Y,ee){return s=Ah(g,v,!0,s,E,P,O,Y,ee),s.context=r_(null),g=s.current,v=gn(),E=Ns(g),P=Ji(v,E),P.callback=l??null,Ps(g,P,E),s.current.lanes=E,wi(s,E,v),Tn(s,v),s}function Ac(s,l,g,v){var E=l.current,P=gn(),O=Ns(E);return g=r_(g),l.context===null?l.context=g:l.pendingContext=g,l=Ji(P,O),l.payload={element:s},v=v===void 0?null:v,v!==null&&(l.callback=v),s=Ps(E,l,O),s!==null&&(ui(s,E,O,P),Bu(s,E,O)),O}function lc(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function i_(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var g=s.retryLane;s.retryLane=g!==0&&g<l?g:l}}function lh(s,l){i_(s,l),(s=s.alternate)&&i_(s,l)}var s_=typeof reportError=="function"?reportError:function(s){console.error(s)};function uh(s){this._internalRoot=s}uc.prototype.render=uh.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));Ac(s,l,null,null)},uc.prototype.unmount=uh.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;Bo(function(){Ac(null,s,null,null)}),l[Cr]=null}};function uc(s){this._internalRoot=s}uc.prototype.unstable_scheduleHydration=function(s){if(s){var l=Ot();s={blockedOn:null,target:s,priority:l};for(var g=0;g<Ti.length&&l!==0&&l<Ti[g].priority;g++);Ti.splice(g,0,s),g===0&&ou(s)}};function ch(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function cc(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function o_(){}function _w(s,l,g,v,E){if(E){if(typeof v=="function"){var P=v;v=function(){var Ee=lc(O);P.call(Ee)}}var O=n_(l,v,s,0,null,!1,!1,"",o_);return s._reactRootContainer=O,s[Cr]=O.current,No(s.nodeType===8?s.parentNode:s),Bo(),O}for(;E=s.lastChild;)s.removeChild(E);if(typeof v=="function"){var Y=v;v=function(){var Ee=lc(ee);Y.call(Ee)}}var ee=Ah(s,0,!1,null,null,!1,!1,"",o_);return s._reactRootContainer=ee,s[Cr]=ee.current,No(s.nodeType===8?s.parentNode:s),Bo(function(){Ac(l,ee,g,v)}),ee}function fc(s,l,g,v,E){var P=g._reactRootContainer;if(P){var O=P;if(typeof E=="function"){var Y=E;E=function(){var ee=lc(O);Y.call(ee)}}Ac(l,O,s,E)}else O=_w(g,l,s,E,v);return lc(O)}ve=function(s){switch(s.tag){case 3:var l=s.stateNode;if(l.current.memoizedState.isDehydrated){var g=L(l.pendingLanes);g!==0&&(D(l,g|1),Tn(l,qt()),!(Wt&6)&&(Ua=qt()+500,k()))}break;case 13:Bo(function(){var v=Gi(s,1);if(v!==null){var E=gn();ui(v,s,1,E)}}),lh(s,1)}},Me=function(s){if(s.tag===13){var l=Gi(s,134217728);if(l!==null){var g=gn();ui(l,s,134217728,g)}lh(s,134217728)}},Qe=function(s){if(s.tag===13){var l=Ns(s),g=Gi(s,l);if(g!==null){var v=gn();ui(g,s,l,v)}lh(s,l)}},Ot=function(){return I},cr=function(s,l){var g=I;try{return I=s,l()}finally{I=g}},$i=function(s,l,g){switch(l){case"input":if(xr(s,g),l=g.name,g.type==="radio"&&l!=null){for(g=s;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<g.length;l++){var v=g[l];if(v!==s&&v.form===s.form){var E=Er(v);if(!E)throw Error(r(90));Jr(v),xr(v,E)}}}break;case"textarea":qn(s,g);break;case"select":l=g.value,l!=null&&Kt(s,!!g.multiple,l,!1)}},_a=rh,so=Bo;var mw={usingClientEntryPoint:!1,Events:[Cn,bs,Er,pa,io,rh]},_l={findFiberByHostInstance:ii,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yw={bundleType:_l.bundleType,version:_l.version,rendererPackageName:_l.rendererPackageName,rendererConfig:_l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:we.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Nt(s),s===null?null:s.stateNode},findFiberByHostInstance:_l.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hc.isDisabled&&hc.supportsFiber)try{pr=hc.inject(yw),lt=hc}catch{}}return En.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mw,En.createPortal=function(s,l){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ch(l))throw Error(r(200));return pw(s,l,null,g)},En.createRoot=function(s,l){if(!ch(s))throw Error(r(299));var g=!1,v="",E=s_;return l!=null&&(l.unstable_strictMode===!0&&(g=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onRecoverableError!==void 0&&(E=l.onRecoverableError)),l=Ah(s,1,!1,null,null,g,!1,v,E),s[Cr]=l.current,No(s.nodeType===8?s.parentNode:s),new uh(l)},En.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=Nt(l),s=s===null?null:s.stateNode,s},En.flushSync=function(s){return Bo(s)},En.hydrate=function(s,l,g){if(!cc(l))throw Error(r(200));return fc(null,s,l,!0,g)},En.hydrateRoot=function(s,l,g){if(!ch(s))throw Error(r(405));var v=g!=null&&g.hydratedSources||null,E=!1,P="",O=s_;if(g!=null&&(g.unstable_strictMode===!0&&(E=!0),g.identifierPrefix!==void 0&&(P=g.identifierPrefix),g.onRecoverableError!==void 0&&(O=g.onRecoverableError)),l=n_(l,null,s,1,g??null,E,!1,P,O),s[Cr]=l.current,No(s),v)for(s=0;s<v.length;s++)g=v[s],E=g._getVersion,E=E(g._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[g,E]:l.mutableSourceEagerHydrationData.push(g,E);return new uc(l)},En.render=function(s,l,g){if(!cc(l))throw Error(r(200));return fc(null,s,l,!1,g)},En.unmountComponentAtNode=function(s){if(!cc(s))throw Error(r(40));return s._reactRootContainer?(Bo(function(){fc(null,null,s,!1,function(){s._reactRootContainer=null,s[Cr]=null})}),!0):!1},En.unstable_batchedUpdates=rh,En.unstable_renderSubtreeIntoContainer=function(s,l,g,v){if(!cc(g))throw Error(r(200));if(s==null||s._reactInternals===void 0)throw Error(r(38));return fc(s,l,g,!1,v)},En.version="18.3.1-next-f1338f8080-20240426",En}var d_;function Gm(){if(d_)return dh.exports;d_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),dh.exports=kw(),dh.exports}var g_;function xw(){if(g_)return dc;g_=1;var t=Gm();return dc.createRoot=t.createRoot,dc.hydrateRoot=t.hydrateRoot,dc}var Mw=xw(),Ks={NONE:"none",PRIMARY:"primary",SUCCESS:"success",WARNING:"warning",DANGER:"danger"},Zt="bp5";typeof BLUEPRINT_NAMESPACE<"u"?Zt=BLUEPRINT_NAMESPACE:typeof REACT_APP_BLUEPRINT_NAMESPACE<"u"&&(Zt=REACT_APP_BLUEPRINT_NAMESPACE);var Yd="".concat(Zt,"-active"),Kd="".concat(Zt,"-disabled"),Bc="".concat(Zt,"-fill"),Nw="".concat(Zt,"-inline"),Ow="".concat(Zt,"-interactive"),Vc="".concat(Zt,"-large"),Dw="".concat(Zt,"-minimal"),Iw="".concat(Zt,"-round"),Fw="".concat(Zt,"-vertical");zi(Ks.PRIMARY);zi(Ks.SUCCESS);zi(Ks.WARNING);zi(Ks.DANGER);var Lw="".concat(Zt,"-text-muted"),Uw="".concat(Zt,"-text-overflow-ellipsis"),Jm="".concat(Zt,"-input"),Bw="".concat(Jm,"-ghost"),Vw="".concat(Zt,"-resizable-input-span"),zw="".concat(Zt,"-label"),Hw="".concat(Zt,"-form-group"),jw="".concat(Zt,"-form-content"),Ww="".concat(Zt,"-form-helper-text"),Xw="".concat(Zt,"-form-group-sub-label"),ta="".concat(Zt,"-slider"),$w="".concat(ta,"-axis"),e1="".concat(ta,"-handle"),t1="".concat(ta,"-label"),Qw="".concat(ta,"-track"),Yw="".concat(ta,"-progress"),Kw="".concat(Zt,"-start"),Zw="".concat(Zt,"-end"),r1="".concat(Zt,"-tag"),qw="".concat(r1,"-remove"),Zd="".concat(Zt,"-tag-input"),Gw="".concat(Zd,"-icon"),Jw="".concat(Zd,"-values"),qd="".concat(Zt,"-icon"),e3="".concat(qd,"-standard"),t3="".concat(qd,"-large");function r3(t){if(t!=null)return t.indexOf("".concat(Zt,"-icon-"))===0?t:"".concat(Zt,"-icon-").concat(t)}function zi(t){if(!(t==null||t===Ks.NONE))return"".concat(Zt,"-intent-").concat(t.toLowerCase())}var td=function(t,e){return td=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},td(t,e)};function wA(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");td(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Ht=function(){return Ht=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Ht.apply(this,arguments)};function TA(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Ka(t,e,r,n){function i(o){return o instanceof r?o:new r(function(f){f(o)})}return new(r||(r=Promise))(function(o,f){function p(R){try{T(n.next(R))}catch(x){f(x)}}function y(R){try{T(n.throw(R))}catch(x){f(x)}}function T(R){R.done?o(R.value):i(R.value).then(p,y)}T((n=n.apply(t,e||[])).next())})}function Za(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(T){return function(R){return y([T,R])}}function y(T){if(n)throw new TypeError("Generator is already executing.");for(;f&&(f=0,T[0]&&(r=0)),r;)try{if(n=1,i&&(o=T[0]&2?i.return:T[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,T[1])).done)return o;switch(i=0,o&&(T=[T[0]&2,o.value]),T[0]){case 0:case 1:o=T;break;case 4:return r.label++,{value:T[1],done:!1};case 5:r.label++,i=T[1],T=[0];continue;case 7:T=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(T[0]===6||T[0]===2)){r=0;continue}if(T[0]===3&&(!o||T[1]>o[0]&&T[1]<o[3])){r.label=T[1];break}if(T[0]===6&&r.label<o[1]){r.label=o[1],o=T;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(T);break}o[2]&&r.ops.pop(),r.trys.pop();continue}T=e.call(t,r)}catch(R){T=[6,R],i=0}finally{n=o=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}}function p_(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}function n3(t,e,r){return r===void 0&&(r=function(n,i){return n===i}),t==null&&e==null?!0:t==null||e==null||t.length!==e.length?!1:t.every(function(n,i){return r(n,e[i])})}function i3(){return typeof window<"u"&&window.document!=null}function s3(t,e){var r,n=(r=t==null?void 0:t.getRootNode(e))!==null&&r!==void 0?r:document,i=n.activeElement;return i instanceof HTMLElement?i:null}function zc(t){return typeof t=="function"}var oa="[Blueprint]",o3=oa+" clamp: max cannot be less than min",a3=oa+" <Slider> stepSize must be greater than zero.",A3=oa+" <Slider> labelStepSize must be greater than zero.",l3=oa+" <Slider> min prop must be a finite number.",u3=oa+" <Slider> max prop must be a finite number.",c3=oa+" <MultiSlider> children must be <SliderHandle>s or <SliderTrackStop>s",f3=oa+" <MultiSlider> labelStepSize and labelValues prop are mutually exclusive, with labelStepSize taking priority.";function __(t){return typeof NODE_ENV<"u"&&NODE_ENV===t}function h3(t,e,r){return r===void 0&&(r=1e-5),Math.abs(t-e)<=r}function Gd(t,e,r){if(t==null)return t;if(r<e)throw new Error(o3);return Math.min(Math.max(t,e),r)}function n1(t){if(!isFinite(t))return 0;for(var e=1,r=0;Math.round(t*e)/e!==t;)e*=10,r++;return r}function i1(t,e){return e===void 0&&(e=!1),t==null||t===""||t===!1||!e&&Array.isArray(t)&&(t.length===0||t.every(function(r){return i1(r,!0)}))}function s1(t,e){return t!=null&&t.type!=null&&t.type.displayName!=null&&t.type.displayName===e.displayName}function m_(t){return t.key==="Enter"||t.key===" "}var d3=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"];function g3(t){return d3.includes(t.key)}function o1(t,e,r){if(e.includes(t.key))return-1;if(r.includes(t.key))return 1}function p3(t){return t!=null&&typeof t!="function"}function _3(t){return typeof t=="function"}function Hc(t,e){p3(t)?t.current=e:_3(t)&&t(e)}function a1(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(r){t.forEach(function(n){Hc(n,r)})}}function y_(t,e,r){return function(n){t[e]=n,Hc(r,n)}}var Zl=function(t){wA(e,t);function e(r){var n=t.call(this,r)||this;return n.timeoutIds=[],n.requestIds=[],n.clearTimeouts=function(){if(n.timeoutIds.length>0){for(var i=0,o=n.timeoutIds;i<o.length;i++){var f=o[i];window.clearTimeout(f)}n.timeoutIds=[]}},n.cancelAnimationFrames=function(){if(n.requestIds.length>0){for(var i=0,o=n.requestIds;i<o.length;i++){var f=o[i];window.cancelAnimationFrame(f)}n.requestIds=[]}},__("production")||n.validateProps(n.props),n}return e.prototype.componentDidUpdate=function(r,n,i){__("production")||this.validateProps(this.props)},e.prototype.componentWillUnmount=function(){this.clearTimeouts(),this.cancelAnimationFrames()},e.prototype.requestAnimationFrame=function(r){var n=window.requestAnimationFrame(r);return this.requestIds.push(n),function(){return window.cancelAnimationFrame(n)}},e.prototype.setTimeout=function(r,n){var i=window.setTimeout(r,n);return this.timeoutIds.push(i),function(){return window.clearTimeout(i)}},e.prototype.validateProps=function(r){},e}(ye.PureComponent),di="Blueprint5",v_=["active","alignText","asyncControl","containerRef","current","elementRef","ellipsizeText","fill","icon","iconSize","inputClassName","inputRef","intent","inline","large","loading","leftElement","leftIcon","minimal","onRemove","outlined","panel","panelClassName","popoverProps","rightElement","rightIcon","round","selectedValue","size","small","tagName","text","textClassName"];function rd(t,e,r){return e===void 0&&(e=v_),r===void 0&&(r=!1),r&&(e=e.concat(v_)),e.reduce(function(n,i){return i.indexOf("-")!==-1||n.hasOwnProperty(i)&&delete n[i],n},Ht({},t))}var _h={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var w_;function m3(){return w_||(w_=1,function(t){(function(){var e={}.hasOwnProperty;function r(){for(var o="",f=0;f<arguments.length;f++){var p=arguments[f];p&&(o=i(o,n(p)))}return o}function n(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return r.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var f="";for(var p in o)e.call(o,p)&&o[p]&&(f=i(f,p));return f}function i(o,f){return f?o?o+" "+f:o+f:o}t.exports?(r.default=r,t.exports=r):window.classNames=r})()}(_h)),_h.exports}var y3=m3();const Sn=$d(y3);var v3={defaultTabIndex:void 0,disabledTabIndex:-1};function w3(t,e,r,n){n===void 0&&(n=v3);var i=n.defaultTabIndex,o=n.disabledTabIndex,f=e.active,p=e.onClick,y=e.onFocus,T=e.onKeyDown,R=e.onKeyUp,x=e.onBlur,M=e.tabIndex,U=M===void 0?i:M,W=ye.useState(),j=W[0],G=W[1],re=ye.useState(!1),se=re[0],ce=re[1],we=ye.useRef(null),be=ye.useCallback(function(Ue){se&&ce(!1),x==null||x(Ue)},[se,x]),Pe=ye.useCallback(function(Ue){m_(Ue)&&(Ue.preventDefault(),Ue.key!==j&&ce(!0)),G(Ue.key),T==null||T(Ue)},[j,T]),Xe=ye.useCallback(function(Ue){var Je;m_(Ue)&&(ce(!1),(Je=we.current)===null||Je===void 0||Je.click()),G(void 0),R==null||R(Ue)},[R,we]),nt=t&&(f||se);return[nt,{onBlur:be,onClick:t?p:void 0,onFocus:t?y:void 0,onKeyDown:Pe,onKeyUp:Xe,ref:a1(we,r),tabIndex:t?U:o}]}function T3(t){return t.toLowerCase()}var E3=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],S3=/[^A-Z0-9]+/gi;function A1(t,e){e===void 0&&(e={});for(var r=e.splitRegexp,n=r===void 0?E3:r,i=e.stripRegexp,o=i===void 0?S3:i,f=e.transform,p=f===void 0?T3:f,y=e.delimiter,T=y===void 0?" ":y,R=T_(T_(t,n,"$1\0$2"),o,"\0"),x=0,M=R.length;R.charAt(x)==="\0";)x++;for(;R.charAt(M-1)==="\0";)M--;return R.slice(x,M).split("\0").map(p).join(T)}function T_(t,e,r){return e instanceof RegExp?t.replace(e,r):e.reduce(function(n,i){return n.replace(i,r)},t)}function b3(t,e){var r=t.charAt(0),n=t.substr(1).toLowerCase();return e>0&&r>="0"&&r<="9"?"_"+r+n:""+r.toUpperCase()+n}function C3(t,e){return e===void 0&&(e={}),A1(t,Ht({delimiter:"",transform:b3},e))}function R3(t,e){return e===void 0&&(e={}),A1(t,Ht({delimiter:"."},e))}function P3(t,e){return e===void 0&&(e={}),R3(t,Ht({delimiter:"_"},e))}var ar;(function(t){t[t.STANDARD=16]="STANDARD",t[t.LARGE=20]="LARGE"})(ar||(ar={}));const k3="modulepreload",x3=function(t){return"/"+t},E_={},nd=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),p=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));i=Promise.allSettled(r.map(y=>{if(y=x3(y),y in E_)return;E_[y]=!0;const T=y.endsWith(".css"),R=T?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${R}`))return;const x=document.createElement("link");if(x.rel=T?"stylesheet":k3,T||(x.as="script"),x.crossOrigin="",x.href=y,p&&x.setAttribute("nonce",p),document.head.appendChild(x),T)return new Promise((M,U)=>{x.addEventListener("load",M),x.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${y}`)))})}))}function o(f){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=f,window.dispatchEvent(p),!p.defaultPrevented)throw f}return i.then(f=>{for(const p of f||[])p.status==="rejected"&&o(p.reason);return e().catch(o)})};var C,b;(function(t){t.AddClip="add-clip",t.AddColumnLeft="add-column-left",t.AddColumnRight="add-column-right",t.AddLocation="add-location",t.AddRowBottom="add-row-bottom",t.AddRowTop="add-row-top",t.AddToArtifact="add-to-artifact",t.AddToFolder="add-to-folder",t.Add="add",t.AimpointsTarget="aimpoints-target",t.Airplane="airplane",t.AlignCenter="align-center",t.AlignJustify="align-justify",t.AlignLeft="align-left",t.AlignRight="align-right",t.AlignmentBottom="alignment-bottom",t.AlignmentHorizontalCenter="alignment-horizontal-center",t.AlignmentLeft="alignment-left",t.AlignmentRight="alignment-right",t.AlignmentTop="alignment-top",t.AlignmentVerticalCenter="alignment-vertical-center",t.Ammunition="ammunition",t.Anchor="anchor",t.Annotation="annotation",t.Antenna="antenna",t.AppHeader="app-header",t.Application="application",t.Applications="applications",t.Archive="archive",t.AreaOfInterest="area-of-interest",t.ArrayBoolean="array-boolean",t.ArrayDate="array-date",t.ArrayFloatingPoint="array-floating-point",t.ArrayNumeric="array-numeric",t.ArrayString="array-string",t.ArrayTimestamp="array-timestamp",t.Array="array",t.ArrowBottomLeft="arrow-bottom-left",t.ArrowBottomRight="arrow-bottom-right",t.ArrowDown="arrow-down",t.ArrowLeft="arrow-left",t.ArrowRight="arrow-right",t.ArrowTopLeft="arrow-top-left",t.ArrowTopRight="arrow-top-right",t.ArrowUp="arrow-up",t.ArrowsArc="arrows-arc",t.ArrowsHorizontal="arrows-horizontal",t.ArrowsVertical="arrows-vertical",t.Asterisk="asterisk",t.At="at",t.AutomaticUpdates="automatic-updates",t.Axle="axle",t.Backlink="backlink",t.BackwardTen="backward-ten",t.Badge="badge",t.BanCircle="ban-circle",t.BankAccount="bank-account",t.Barcode="barcode",t.BinaryNumber="binary-number",t.Blank="blank",t.BlockPromote="block-promote",t.BlockedPerson="blocked-person",t.Bold="bold",t.Book="book",t.Bookmark="bookmark",t.Box="box",t.Briefcase="briefcase",t.BringData="bring-data",t.BringForward="bring-forward",t.BritishPound="british-pound",t.Bug="bug",t.Buggy="buggy",t.Build="build",t.Bullseye="bullseye",t.Calculator="calculator",t.Calendar="calendar",t.Camera="camera",t.CaretDown="caret-down",t.CaretLeft="caret-left",t.CaretRight="caret-right",t.CaretUp="caret-up",t.CargoShip="cargo-ship",t.CellTower="cell-tower",t.Changes="changes",t.Chart="chart",t.Chat="chat",t.ChevronBackward="chevron-backward",t.ChevronDown="chevron-down",t.ChevronForward="chevron-forward",t.ChevronLeft="chevron-left",t.ChevronRight="chevron-right",t.ChevronUp="chevron-up",t.CircleArrowDown="circle-arrow-down",t.CircleArrowLeft="circle-arrow-left",t.CircleArrowRight="circle-arrow-right",t.CircleArrowUp="circle-arrow-up",t.Circle="circle",t.Citation="citation",t.Clean="clean",t.Clip="clip",t.ClipboardFile="clipboard-file",t.Clipboard="clipboard",t.CloudDownload="cloud-download",t.CloudServer="cloud-server",t.CloudTick="cloud-tick",t.CloudUpload="cloud-upload",t.Cloud="cloud",t.CodeBlock="code-block",t.Code="code",t.Cog="cog",t.CollapseAll="collapse-all",t.ColorFill="color-fill",t.ColumnLayout="column-layout",t.Comment="comment",t.Comparison="comparison",t.Compass="compass",t.Compressed="compressed",t.Confirm="confirm",t.Console="console",t.Contrast="contrast",t.Control="control",t.CreditCard="credit-card",t.Crop="crop",t.CrossCircle="cross-circle",t.Cross="cross",t.Crown="crown",t.CssStyle="css-style",t.CubeAdd="cube-add",t.CubeEdit="cube-edit",t.CubeRemove="cube-remove",t.Cube="cube",t.Cubes="cubes",t.CurlyBraces="curly-braces",t.CurvedRangeChart="curved-range-chart",t.Cut="cut",t.Cycle="cycle",t.Dashboard="dashboard",t.DataConnection="data-connection",t.DataLineage="data-lineage",t.DataSearch="data-search",t.DataSync="data-sync",t.Database="database",t.Delete="delete",t.Delta="delta",t.DeriveColumn="derive-column",t.Desktop="desktop",t.Detection="detection",t.Diagnosis="diagnosis",t.DiagramTree="diagram-tree",t.DirectionLeft="direction-left",t.DirectionRight="direction-right",t.Disable="disable",t.Divide="divide",t.DocumentOpen="document-open",t.DocumentShare="document-share",t.Document="document",t.Dollar="dollar",t.Dot="dot",t.DoubleCaretHorizontal="double-caret-horizontal",t.DoubleCaretVertical="double-caret-vertical",t.DoubleChevronDown="double-chevron-down",t.DoubleChevronLeft="double-chevron-left",t.DoubleChevronRight="double-chevron-right",t.DoubleChevronUp="double-chevron-up",t.DoughnutChart="doughnut-chart",t.Download="download",t.DragHandleHorizontal="drag-handle-horizontal",t.DragHandleVertical="drag-handle-vertical",t.Draw="draw",t.DrawerLeftFilled="drawer-left-filled",t.DrawerLeft="drawer-left",t.DrawerRightFilled="drawer-right-filled",t.DrawerRight="drawer-right",t.DriveTime="drive-time",t.Duplicate="duplicate",t.Edit="edit",t.Eject="eject",t.Emoji="emoji",t.Endnote="endnote",t.Endorsed="endorsed",t.Envelope="envelope",t.Equals="equals",t.Eraser="eraser",t.Error="error",t.Euro="euro",t.Excavator="excavator",t.Exchange="exchange",t.ExcludeRow="exclude-row",t.ExpandAll="expand-all",t.Explain="explain",t.Export="export",t.EyeOff="eye-off",t.EyeOn="eye-on",t.EyeOpen="eye-open",t.FastBackward="fast-backward",t.FastForward="fast-forward",t.FeedSubscribed="feed-subscribed",t.Feed="feed",t.FighterJet="fighter-jet",t.Film="film",t.FilterKeep="filter-keep",t.FilterList="filter-list",t.FilterOpen="filter-open",t.FilterRemove="filter-remove",t.FilterSortAsc="filter-sort-asc",t.FilterSortDesc="filter-sort-desc",t.Filter="filter",t.Flag="flag",t.Flame="flame",t.Flash="flash",t.FloatingPoint="floating-point",t.FloppyDisk="floppy-disk",t.FlowBranch="flow-branch",t.FlowEnd="flow-end",t.FlowLinear="flow-linear",t.FlowReviewBranch="flow-review-branch",t.FlowReview="flow-review",t.Flows="flows",t.FolderClose="folder-close",t.FolderNew="folder-new",t.FolderOpen="folder-open",t.FolderSharedOpen="folder-shared-open",t.FolderShared="folder-shared",t.Follower="follower",t.Following="following",t.Font="font",t.Fork="fork",t.Form="form",t.ForwardTen="forward-ten",t.Fuel="fuel",t.FullCircle="full-circle",t.FullStackedChart="full-stacked-chart",t.Fullscreen="fullscreen",t.Function="function",t.GanttChart="gantt-chart",t.Generate="generate",t.Geofence="geofence",t.Geolocation="geolocation",t.Geosearch="geosearch",t.Geotime="geotime",t.GitBranch="git-branch",t.GitCommit="git-commit",t.GitMerge="git-merge",t.GitNewBranch="git-new-branch",t.GitPull="git-pull",t.GitPush="git-push",t.GitRepo="git-repo",t.Glass="glass",t.GlobeNetworkAdd="globe-network-add",t.GlobeNetwork="globe-network",t.Globe="globe",t.GraphRemove="graph-remove",t.Graph="graph",t.GreaterThanOrEqualTo="greater-than-or-equal-to",t.GreaterThan="greater-than",t.GridView="grid-view",t.Grid="grid",t.GroupItem="group-item",t.GroupObjects="group-objects",t.GroupedBarChart="grouped-bar-chart",t.HandDown="hand-down",t.HandLeft="hand-left",t.HandRight="hand-right",t.HandUp="hand-up",t.Hand="hand",t.Hat="hat",t.HeaderOne="header-one",t.HeaderThree="header-three",t.HeaderTwo="header-two",t.Header="header",t.Headset="headset",t.HeartBroken="heart-broken",t.Heart="heart",t.HeatGrid="heat-grid",t.Heatmap="heatmap",t.Helicopter="helicopter",t.Help="help",t.HelperManagement="helper-management",t.Hexagon="hexagon",t.HighPriority="high-priority",t.HighVoltagePole="high-voltage-pole",t.Highlight="highlight",t.History="history",t.Home="home",t.HorizontalBarChartAsc="horizontal-bar-chart-asc",t.HorizontalBarChartDesc="horizontal-bar-chart-desc",t.HorizontalBarChart="horizontal-bar-chart",t.HorizontalDistribution="horizontal-distribution",t.HorizontalInbetween="horizontal-inbetween",t.Hurricane="hurricane",t.IdNumber="id-number",t.ImageRotateLeft="image-rotate-left",t.ImageRotateRight="image-rotate-right",t.Import="import",t.InboxFiltered="inbox-filtered",t.InboxGeo="inbox-geo",t.InboxSearch="inbox-search",t.InboxUpdate="inbox-update",t.Inbox="inbox",t.InfoSign="info-sign",t.Inheritance="inheritance",t.InheritedGroup="inherited-group",t.InnerJoin="inner-join",t.Input="input",t.Insert="insert",t.Intelligence="intelligence",t.Intersection="intersection",t.IpAddress="ip-address",t.IssueClosed="issue-closed",t.IssueNew="issue-new",t.Issue="issue",t.Italic="italic",t.JoinTable="join-table",t.KeyBackspace="key-backspace",t.KeyCommand="key-command",t.KeyControl="key-control",t.KeyDelete="key-delete",t.KeyEnter="key-enter",t.KeyEscape="key-escape",t.KeyOption="key-option",t.KeyShift="key-shift",t.KeyTab="key-tab",t.Key="key",t.KnownVehicle="known-vehicle",t.LabTest="lab-test",t.Label="label",t.LayerOutline="layer-outline",t.Layer="layer",t.Layers="layers",t.LayoutAuto="layout-auto",t.LayoutBalloon="layout-balloon",t.LayoutBottomRowThreeTiles="layout-bottom-row-three-tiles",t.LayoutBottomRowTwoTiles="layout-bottom-row-two-tiles",t.LayoutCircle="layout-circle",t.LayoutGrid="layout-grid",t.LayoutGroupBy="layout-group-by",t.LayoutHierarchy="layout-hierarchy",t.LayoutLeftColumnThreeTiles="layout-left-column-three-tiles",t.LayoutLeftColumnTwoTiles="layout-left-column-two-tiles",t.LayoutLinear="layout-linear",t.LayoutRightColumnThreeTiles="layout-right-column-three-tiles",t.LayoutRightColumnTwoTiles="layout-right-column-two-tiles",t.LayoutSkewGrid="layout-skew-grid",t.LayoutSortedClusters="layout-sorted-clusters",t.LayoutThreeColumns="layout-three-columns",t.LayoutThreeRows="layout-three-rows",t.LayoutTopRowThreeTiles="layout-top-row-three-tiles",t.LayoutTopRowTwoTiles="layout-top-row-two-tiles",t.LayoutTwoColumns="layout-two-columns",t.LayoutTwoRows="layout-two-rows",t.Layout="layout",t.Learning="learning",t.LeftJoin="left-join",t.LengthenText="lengthen-text",t.LessThanOrEqualTo="less-than-or-equal-to",t.LessThan="less-than",t.Lifesaver="lifesaver",t.Lightbulb="lightbulb",t.Lightning="lightning",t.Link="link",t.LinkedSquares="linked-squares",t.ListColumns="list-columns",t.ListDetailView="list-detail-view",t.List="list",t.Locate="locate",t.Lock="lock",t.Locomotive="locomotive",t.LogIn="log-in",t.LogOut="log-out",t.LowVoltagePole="low-voltage-pole",t.Manual="manual",t.ManuallyEnteredData="manually-entered-data",t.ManyToMany="many-to-many",t.ManyToOne="many-to-one",t.MapCreate="map-create",t.MapMarker="map-marker",t.Map="map",t.Maximize="maximize",t.Media="media",t.MenuClosed="menu-closed",t.MenuOpen="menu-open",t.Menu="menu",t.MergeColumns="merge-columns",t.MergeLinks="merge-links",t.Microphone="microphone",t.Minimize="minimize",t.Minus="minus",t.MobilePhone="mobile-phone",t.MobileVideo="mobile-video",t.ModalFilled="modal-filled",t.Modal="modal",t.Model="model",t.Moon="moon",t.More="more",t.Mountain="mountain",t.Move="move",t.Mugshot="mugshot",t.MultiSelect="multi-select",t.Music="music",t.Nest="nest",t.NewDrawing="new-drawing",t.NewGridItem="new-grid-item",t.NewLayer="new-layer",t.NewLayers="new-layers",t.NewLink="new-link",t.NewObject="new-object",t.NewPerson="new-person",t.NewPrescription="new-prescription",t.NewShield="new-shield",t.NewTextBox="new-text-box",t.Ninja="ninja",t.NotEqualTo="not-equal-to",t.NotificationsSnooze="notifications-snooze",t.NotificationsUpdated="notifications-updated",t.Notifications="notifications",t.NumberedList="numbered-list",t.Numerical="numerical",t.ObjectView="object-view",t.Office="office",t.Offline="offline",t.OilField="oil-field",t.OneColumn="one-column",t.OneToMany="one-to-many",t.OneToOne="one-to-one",t.OpenApplication="open-application",t.Outdated="outdated",t.Output="output",t.Package="package",t.PageLayout="page-layout",t.PanelStats="panel-stats",t.PanelTable="panel-table",t.Panel="panel",t.Paperclip="paperclip",t.Paragraph="paragraph",t.PasteVariable="paste-variable",t.PathSearch="path-search",t.Path="path",t.Pause="pause",t.People="people",t.Percentage="percentage",t.Person="person",t.PhoneCall="phone-call",t.PhoneForward="phone-forward",t.Phone="phone",t.PieChart="pie-chart",t.Pill="pill",t.Pin="pin",t.PivotTable="pivot-table",t.Pivot="pivot",t.Play="play",t.Playbook="playbook",t.Plus="plus",t.PolygonFilter="polygon-filter",t.Power="power",t.PredictiveAnalysis="predictive-analysis",t.Prescription="prescription",t.Presentation="presentation",t.Print="print",t.Projects="projects",t.Properties="properties",t.Property="property",t.PublishFunction="publish-function",t.Pulse="pulse",t.Rain="rain",t.Random="random",t.RangeRing="range-ring",t.Record="record",t.RectHeight="rect-height",t.RectWidth="rect-width",t.Rectangle="rectangle",t.Redo="redo",t.Refresh="refresh",t.Regex="regex",t.RegressionChart="regression-chart",t.RemoveColumnLeft="remove-column-left",t.RemoveColumnRight="remove-column-right",t.RemoveColumn="remove-column",t.RemoveRowBottom="remove-row-bottom",t.RemoveRowTop="remove-row-top",t.Remove="remove",t.Repeat="repeat",t.Reset="reset",t.Resolve="resolve",t.Rig="rig",t.RightJoin="right-join",t.Ring="ring",t.RocketSlant="rocket-slant",t.Rocket="rocket",t.RotateCcw="rotate-ccw",t.RotateCw="rotate-cw",t.RotateDocument="rotate-document",t.RotatePage="rotate-page",t.Route="route",t.Satellite="satellite",t.Saved="saved",t.ScatterPlot="scatter-plot",t.SearchAround="search-around",t.SearchTemplate="search-template",t.SearchText="search-text",t.Search="search",t.SegmentedControl="segmented-control",t.Select="select",t.Selection="selection",t.SendBackward="send-backward",t.SendMessage="send-message",t.SendToGraph="send-to-graph",t.SendToMap="send-to-map",t.SendTo="send-to",t.Sensor="sensor",t.SeriesAdd="series-add",t.SeriesConfiguration="series-configuration",t.SeriesDerived="series-derived",t.SeriesFiltered="series-filtered",t.SeriesSearch="series-search",t.ServerInstall="server-install",t.Server="server",t.Settings="settings",t.Shapes="shapes",t.Share="share",t.SharedFilter="shared-filter",t.Shield="shield",t.Ship="ship",t.Shop="shop",t.ShoppingCart="shopping-cart",t.ShortenText="shorten-text",t.SignalSearch="signal-search",t.SimCard="sim-card",t.Slash="slash",t.SmallCross="small-cross",t.SmallInfoSign="small-info-sign",t.SmallMinus="small-minus",t.SmallPlus="small-plus",t.SmallSquare="small-square",t.SmallTick="small-tick",t.Snowflake="snowflake",t.SoccerBall="soccer-ball",t.SocialMedia="social-media",t.SortAlphabeticalDesc="sort-alphabetical-desc",t.SortAlphabetical="sort-alphabetical",t.SortAsc="sort-asc",t.SortDesc="sort-desc",t.SortNumericalDesc="sort-numerical-desc",t.SortNumerical="sort-numerical",t.Sort="sort",t.SpellCheck="spell-check",t.SplitColumns="split-columns",t.SportsStadium="sports-stadium",t.Square="square",t.StackedChart="stacked-chart",t.StadiumGeometry="stadium-geometry",t.StarEmpty="star-empty",t.Star="star",t.StepBackward="step-backward",t.StepChart="step-chart",t.StepForward="step-forward",t.Stop="stop",t.Stopwatch="stopwatch",t.Strikethrough="strikethrough",t.Style="style",t.Subscript="subscript",t.Superscript="superscript",t.SwapHorizontal="swap-horizontal",t.SwapVertical="swap-vertical",t.Switch="switch",t.SymbolCircle="symbol-circle",t.SymbolCross="symbol-cross",t.SymbolDiamond="symbol-diamond",t.SymbolRectangle="symbol-rectangle",t.SymbolSquare="symbol-square",t.SymbolTriangleDown="symbol-triangle-down",t.SymbolTriangleUp="symbol-triangle-up",t.Syringe="syringe",t.TableSync="table-sync",t.TagAdd="tag-add",t.TagPromote="tag-promote",t.TagRefresh="tag-refresh",t.TagUndo="tag-undo",t.Tag="tag",t.Tags="tags",t.TakeAction="take-action",t.Tank="tank",t.Target="target",t.Taxi="taxi",t.Team="team",t.Temperature="temperature",t.TextHighlight="text-highlight",t.ThAdd="th-add",t.ThDerived="th-derived",t.ThDisconnect="th-disconnect",t.ThFiltered="th-filtered",t.ThListAdd="th-list-add",t.ThList="th-list",t.ThVirtualAdd="th-virtual-add",t.ThVirtual="th-virtual",t.Th="th",t.ThirdParty="third-party",t.ThumbsDown="thumbs-down",t.ThumbsUp="thumbs-up",t.TickCircle="tick-circle",t.Tick="tick",t.Time="time",t.TimelineAreaChart="timeline-area-chart",t.TimelineBarChart="timeline-bar-chart",t.TimelineEvents="timeline-events",t.TimelineLineChart="timeline-line-chart",t.Tint="tint",t.Torch="torch",t.Tractor="tractor",t.Train="train",t.Translate="translate",t.Trash="trash",t.Tree="tree",t.TrendingDown="trending-down",t.TrendingUp="trending-up",t.Trophy="trophy",t.Truck="truck",t.TwoColumns="two-columns",t.Unarchive="unarchive",t.Underline="underline",t.Undo="undo",t.UngroupObjects="ungroup-objects",t.UnknownVehicle="unknown-vehicle",t.Unlink="unlink",t.Unlock="unlock",t.Unpin="unpin",t.Unresolve="unresolve",t.Updated="updated",t.Upload="upload",t.User="user",t.Variable="variable",t.Vector="vector",t.VerticalBarChartAsc="vertical-bar-chart-asc",t.VerticalBarChartDesc="vertical-bar-chart-desc",t.VerticalDistribution="vertical-distribution",t.VerticalInbetween="vertical-inbetween",t.Video="video",t.Virus="virus",t.VolumeDown="volume-down",t.VolumeOff="volume-off",t.VolumeUp="volume-up",t.Walk="walk",t.WarningSign="warning-sign",t.WaterfallChart="waterfall-chart",t.Waves="waves",t.WidgetButton="widget-button",t.WidgetFooter="widget-footer",t.WidgetHeader="widget-header",t.Widget="widget",t.Wind="wind",t.WrenchRedo="wrench-redo",t.WrenchSnooze="wrench-snooze",t.WrenchTime="wrench-time",t.Wrench="wrench",t.ZoomIn="zoom-in",t.ZoomOut="zoom-out",t.ZoomToFit="zoom-to-fit"})(b||(b={}));C={},C[b.AddClip]="61697",C[b.AddColumnLeft]="61698",C[b.AddColumnRight]="61699",C[b.AddLocation]="61700",C[b.AddRowBottom]="61701",C[b.AddRowTop]="61702",C[b.AddToArtifact]="61703",C[b.AddToFolder]="61704",C[b.Add]="61705",C[b.AimpointsTarget]="62261",C[b.Airplane]="61706",C[b.AlignCenter]="61707",C[b.AlignJustify]="61708",C[b.AlignLeft]="61709",C[b.AlignRight]="61710",C[b.AlignmentBottom]="61711",C[b.AlignmentHorizontalCenter]="61712",C[b.AlignmentLeft]="61713",C[b.AlignmentRight]="61714",C[b.AlignmentTop]="61715",C[b.AlignmentVerticalCenter]="61716",C[b.Ammunition]="62274",C[b.Anchor]="62256",C[b.Annotation]="61717",C[b.Antenna]="61718",C[b.AppHeader]="61719",C[b.Application]="61720",C[b.Applications]="61721",C[b.Archive]="61722",C[b.AreaOfInterest]="61723",C[b.ArrayBoolean]="61724",C[b.ArrayDate]="61725",C[b.ArrayFloatingPoint]="62253",C[b.ArrayNumeric]="61726",C[b.ArrayString]="61727",C[b.ArrayTimestamp]="61728",C[b.Array]="61729",C[b.ArrowBottomLeft]="61730",C[b.ArrowBottomRight]="61731",C[b.ArrowDown]="61732",C[b.ArrowLeft]="61733",C[b.ArrowRight]="61734",C[b.ArrowTopLeft]="61735",C[b.ArrowTopRight]="61736",C[b.ArrowUp]="61737",C[b.ArrowsArc]="62343",C[b.ArrowsHorizontal]="61738",C[b.ArrowsVertical]="61739",C[b.Asterisk]="61740",C[b.At]="62257",C[b.AutomaticUpdates]="61741",C[b.Axle]="62264",C[b.Backlink]="61742",C[b.BackwardTen]="62300",C[b.Badge]="61743",C[b.BanCircle]="61744",C[b.BankAccount]="61745",C[b.Barcode]="61746",C[b.BinaryNumber]="62295",C[b.Blank]="61747",C[b.BlockPromote]="62322",C[b.BlockedPerson]="61748",C[b.Bold]="61749",C[b.Book]="61750",C[b.Bookmark]="61751",C[b.Box]="61752",C[b.Briefcase]="61753",C[b.BringData]="61754",C[b.BringForward]="62292",C[b.BritishPound]="62342",C[b.Bug]="62254",C[b.Buggy]="61755",C[b.Build]="61756",C[b.Bullseye]="62297",C[b.Calculator]="61757",C[b.Calendar]="61758",C[b.Camera]="61759",C[b.CaretDown]="61760",C[b.CaretLeft]="61761",C[b.CaretRight]="61762",C[b.CaretUp]="61763",C[b.CargoShip]="61764",C[b.CellTower]="61765",C[b.Changes]="61766",C[b.Chart]="61767",C[b.Chat]="61768",C[b.ChevronBackward]="61769",C[b.ChevronDown]="61770",C[b.ChevronForward]="61771",C[b.ChevronLeft]="61772",C[b.ChevronRight]="61773",C[b.ChevronUp]="61774",C[b.CircleArrowDown]="61775",C[b.CircleArrowLeft]="61776",C[b.CircleArrowRight]="61777",C[b.CircleArrowUp]="61778",C[b.Circle]="61779",C[b.Citation]="61780",C[b.Clean]="61781",C[b.Clip]="61782",C[b.ClipboardFile]="62299",C[b.Clipboard]="61783",C[b.CloudDownload]="61784",C[b.CloudServer]="62298",C[b.CloudTick]="62286",C[b.CloudUpload]="61785",C[b.Cloud]="61786",C[b.CodeBlock]="61787",C[b.Code]="61788",C[b.Cog]="61789",C[b.CollapseAll]="61790",C[b.ColorFill]="62248",C[b.ColumnLayout]="61791",C[b.Comment]="61792",C[b.Comparison]="61793",C[b.Compass]="61794",C[b.Compressed]="61795",C[b.Confirm]="61796",C[b.Console]="61797",C[b.Contrast]="61798",C[b.Control]="61799",C[b.CreditCard]="61800",C[b.Crop]="62291",C[b.CrossCircle]="62262",C[b.Cross]="61801",C[b.Crown]="61802",C[b.CssStyle]="62315",C[b.CubeAdd]="61803",C[b.CubeEdit]="62339",C[b.CubeRemove]="61804",C[b.Cube]="61805",C[b.Cubes]="62323",C[b.CurlyBraces]="62296",C[b.CurvedRangeChart]="61806",C[b.Cut]="61807",C[b.Cycle]="61808",C[b.Dashboard]="61809",C[b.DataConnection]="61810",C[b.DataLineage]="61811",C[b.DataSearch]="62319",C[b.DataSync]="62316",C[b.Database]="61812",C[b.Delete]="61813",C[b.Delta]="61814",C[b.DeriveColumn]="61815",C[b.Desktop]="61816",C[b.Detection]="62273",C[b.Diagnosis]="61817",C[b.DiagramTree]="61818",C[b.DirectionLeft]="61819",C[b.DirectionRight]="61820",C[b.Disable]="61821",C[b.Divide]="62247",C[b.DocumentOpen]="61822",C[b.DocumentShare]="61823",C[b.Document]="61824",C[b.Dollar]="61825",C[b.Dot]="61826",C[b.DoubleCaretHorizontal]="61827",C[b.DoubleCaretVertical]="61828",C[b.DoubleChevronDown]="61829",C[b.DoubleChevronLeft]="61830",C[b.DoubleChevronRight]="61831",C[b.DoubleChevronUp]="61832",C[b.DoughnutChart]="61833",C[b.Download]="61834",C[b.DragHandleHorizontal]="61835",C[b.DragHandleVertical]="61836",C[b.Draw]="61837",C[b.DrawerLeftFilled]="61838",C[b.DrawerLeft]="61839",C[b.DrawerRightFilled]="61840",C[b.DrawerRight]="61841",C[b.DriveTime]="61842",C[b.Duplicate]="61843",C[b.Edit]="61844",C[b.Eject]="61845",C[b.Emoji]="61846",C[b.Endnote]="62294",C[b.Endorsed]="61847",C[b.Envelope]="61848",C[b.Equals]="61849",C[b.Eraser]="61850",C[b.Error]="61851",C[b.Euro]="61852",C[b.Excavator]="62317",C[b.Exchange]="61853",C[b.ExcludeRow]="61854",C[b.ExpandAll]="61855",C[b.Explain]="62285",C[b.Export]="61856",C[b.EyeOff]="61857",C[b.EyeOn]="61858",C[b.EyeOpen]="61859",C[b.FastBackward]="61860",C[b.FastForward]="61861",C[b.FeedSubscribed]="61862",C[b.Feed]="61863",C[b.FighterJet]="62340",C[b.Film]="61864",C[b.FilterKeep]="61865",C[b.FilterList]="61866",C[b.FilterOpen]="61867",C[b.FilterRemove]="61868",C[b.FilterSortAsc]="62350",C[b.FilterSortDesc]="62351",C[b.Filter]="61869",C[b.Flag]="61870",C[b.Flame]="61871",C[b.Flash]="61872",C[b.FloatingPoint]="62252",C[b.FloppyDisk]="61873",C[b.FlowBranch]="61874",C[b.FlowEnd]="61875",C[b.FlowLinear]="61876",C[b.FlowReviewBranch]="61877",C[b.FlowReview]="61878",C[b.Flows]="61879",C[b.FolderClose]="61880",C[b.FolderNew]="61881",C[b.FolderOpen]="61882",C[b.FolderSharedOpen]="61883",C[b.FolderShared]="61884",C[b.Follower]="61885",C[b.Following]="61886",C[b.Font]="61887",C[b.Fork]="61888",C[b.Form]="61889",C[b.ForwardTen]="62301",C[b.Fuel]="62243",C[b.FullCircle]="61890",C[b.FullStackedChart]="61891",C[b.Fullscreen]="61892",C[b.Function]="61893",C[b.GanttChart]="61894",C[b.Generate]="62284",C[b.Geofence]="61895",C[b.Geolocation]="61896",C[b.Geosearch]="61897",C[b.Geotime]="62276",C[b.GitBranch]="61898",C[b.GitCommit]="61899",C[b.GitMerge]="61900",C[b.GitNewBranch]="61901",C[b.GitPull]="61902",C[b.GitPush]="61903",C[b.GitRepo]="61904",C[b.Glass]="61905",C[b.GlobeNetworkAdd]="62338",C[b.GlobeNetwork]="61906",C[b.Globe]="61907",C[b.GraphRemove]="61908",C[b.Graph]="61909",C[b.GreaterThanOrEqualTo]="61910",C[b.GreaterThan]="61911",C[b.GridView]="61912",C[b.Grid]="61913",C[b.GroupItem]="62282",C[b.GroupObjects]="61914",C[b.GroupedBarChart]="61915",C[b.HandDown]="61916",C[b.HandLeft]="61917",C[b.HandRight]="61918",C[b.HandUp]="61919",C[b.Hand]="61920",C[b.Hat]="61921",C[b.HeaderOne]="61922",C[b.HeaderThree]="61923",C[b.HeaderTwo]="61924",C[b.Header]="61925",C[b.Headset]="61926",C[b.HeartBroken]="61927",C[b.Heart]="61928",C[b.HeatGrid]="61929",C[b.Heatmap]="61930",C[b.Helicopter]="61931",C[b.Help]="61932",C[b.HelperManagement]="61933",C[b.Hexagon]="62324",C[b.HighPriority]="61934",C[b.HighVoltagePole]="62259",C[b.Highlight]="61935",C[b.History]="61936",C[b.Home]="61937",C[b.HorizontalBarChartAsc]="61938",C[b.HorizontalBarChartDesc]="61939",C[b.HorizontalBarChart]="61940",C[b.HorizontalDistribution]="61941",C[b.HorizontalInbetween]="62249",C[b.Hurricane]="61942",C[b.IdNumber]="61943",C[b.ImageRotateLeft]="61944",C[b.ImageRotateRight]="61945",C[b.Import]="61946",C[b.InboxFiltered]="61947",C[b.InboxGeo]="61948",C[b.InboxSearch]="61949",C[b.InboxUpdate]="61950",C[b.Inbox]="61951",C[b.InfoSign]="61952",C[b.Inheritance]="61953",C[b.InheritedGroup]="61954",C[b.InnerJoin]="61955",C[b.Input]="62283",C[b.Insert]="61956",C[b.Intelligence]="62263",C[b.Intersection]="61957",C[b.IpAddress]="61958",C[b.IssueClosed]="61959",C[b.IssueNew]="61960",C[b.Issue]="61961",C[b.Italic]="61962",C[b.JoinTable]="61963",C[b.KeyBackspace]="61964",C[b.KeyCommand]="61965",C[b.KeyControl]="61966",C[b.KeyDelete]="61967",C[b.KeyEnter]="61968",C[b.KeyEscape]="61969",C[b.KeyOption]="61970",C[b.KeyShift]="61971",C[b.KeyTab]="61972",C[b.Key]="61973",C[b.KnownVehicle]="61974",C[b.LabTest]="61975",C[b.Label]="61976",C[b.LayerOutline]="61977",C[b.Layer]="61978",C[b.Layers]="61979",C[b.LayoutAuto]="61980",C[b.LayoutBalloon]="61981",C[b.LayoutBottomRowThreeTiles]="62308",C[b.LayoutBottomRowTwoTiles]="62307",C[b.LayoutCircle]="61982",C[b.LayoutGrid]="61983",C[b.LayoutGroupBy]="61984",C[b.LayoutHierarchy]="61985",C[b.LayoutLeftColumnThreeTiles]="62310",C[b.LayoutLeftColumnTwoTiles]="62309",C[b.LayoutLinear]="61986",C[b.LayoutRightColumnThreeTiles]="62312",C[b.LayoutRightColumnTwoTiles]="62311",C[b.LayoutSkewGrid]="61987",C[b.LayoutSortedClusters]="61988",C[b.LayoutThreeColumns]="62305",C[b.LayoutThreeRows]="62306",C[b.LayoutTopRowThreeTiles]="62314",C[b.LayoutTopRowTwoTiles]="62313",C[b.LayoutTwoColumns]="62303",C[b.LayoutTwoRows]="62304",C[b.Layout]="61989",C[b.Learning]="61990",C[b.LeftJoin]="61991",C[b.LengthenText]="62270",C[b.LessThanOrEqualTo]="61992",C[b.LessThan]="61993",C[b.Lifesaver]="61994",C[b.Lightbulb]="61995",C[b.Lightning]="61996",C[b.Link]="61997",C[b.LinkedSquares]="62341",C[b.ListColumns]="61998",C[b.ListDetailView]="61999",C[b.List]="62000",C[b.Locate]="62001",C[b.Lock]="62002",C[b.Locomotive]="62267",C[b.LogIn]="62003",C[b.LogOut]="62004",C[b.LowVoltagePole]="62258",C[b.Manual]="62005",C[b.ManuallyEnteredData]="62006",C[b.ManyToMany]="62007",C[b.ManyToOne]="62008",C[b.MapCreate]="62009",C[b.MapMarker]="62010",C[b.Map]="62011",C[b.Maximize]="62012",C[b.Media]="62013",C[b.MenuClosed]="62014",C[b.MenuOpen]="62015",C[b.Menu]="62016",C[b.MergeColumns]="62017",C[b.MergeLinks]="62018",C[b.Microphone]="62275",C[b.Minimize]="62019",C[b.Minus]="62020",C[b.MobilePhone]="62021",C[b.MobileVideo]="62022",C[b.ModalFilled]="62023",C[b.Modal]="62024",C[b.Model]="62269",C[b.Moon]="62025",C[b.More]="62026",C[b.Mountain]="62027",C[b.Move]="62028",C[b.Mugshot]="62029",C[b.MultiSelect]="62030",C[b.Music]="62031",C[b.Nest]="62032",C[b.NewDrawing]="62033",C[b.NewGridItem]="62034",C[b.NewLayer]="62035",C[b.NewLayers]="62036",C[b.NewLink]="62037",C[b.NewObject]="62038",C[b.NewPerson]="62039",C[b.NewPrescription]="62040",C[b.NewShield]="62281",C[b.NewTextBox]="62041",C[b.Ninja]="62042",C[b.NotEqualTo]="62043",C[b.NotificationsSnooze]="62044",C[b.NotificationsUpdated]="62045",C[b.Notifications]="62046",C[b.NumberedList]="62047",C[b.Numerical]="62048",C[b.ObjectView]="62352",C[b.Office]="62049",C[b.Offline]="62050",C[b.OilField]="62051",C[b.OneColumn]="62052",C[b.OneToMany]="62053",C[b.OneToOne]="62054",C[b.OpenApplication]="62251",C[b.Outdated]="62055",C[b.Output]="62320",C[b.Package]="62325",C[b.PageLayout]="62056",C[b.PanelStats]="62057",C[b.PanelTable]="62058",C[b.Panel]="62337",C[b.Paperclip]="62059",C[b.Paragraph]="62060",C[b.PasteVariable]="62278",C[b.PathSearch]="62061",C[b.Path]="62062",C[b.Pause]="62063",C[b.People]="62064",C[b.Percentage]="62065",C[b.Person]="62066",C[b.PhoneCall]="62279",C[b.PhoneForward]="62280",C[b.Phone]="62067",C[b.PieChart]="62068",C[b.Pill]="62326",C[b.Pin]="62069",C[b.PivotTable]="62070",C[b.Pivot]="62071",C[b.Play]="62072",C[b.Playbook]="62244",C[b.Plus]="62073",C[b.PolygonFilter]="62074",C[b.Power]="62075",C[b.PredictiveAnalysis]="62076",C[b.Prescription]="62077",C[b.Presentation]="62078",C[b.Print]="62079",C[b.Projects]="62080",C[b.Properties]="62081",C[b.Property]="62082",C[b.PublishFunction]="62083",C[b.Pulse]="62084",C[b.Rain]="62085",C[b.Random]="62086",C[b.RangeRing]="62321",C[b.Record]="62087",C[b.RectHeight]="62245",C[b.RectWidth]="62246",C[b.Rectangle]="62241",C[b.Redo]="62088",C[b.Refresh]="62089",C[b.Regex]="62255",C[b.RegressionChart]="62090",C[b.RemoveColumnLeft]="62091",C[b.RemoveColumnRight]="62092",C[b.RemoveColumn]="62093",C[b.RemoveRowBottom]="62094",C[b.RemoveRowTop]="62095",C[b.Remove]="62096",C[b.Repeat]="62097",C[b.Reset]="62098",C[b.Resolve]="62099",C[b.Rig]="62100",C[b.RightJoin]="62101",C[b.Ring]="62102",C[b.RocketSlant]="62103",C[b.Rocket]="62104",C[b.RotateCcw]="62345",C[b.RotateCw]="62344",C[b.RotateDocument]="62105",C[b.RotatePage]="62106",C[b.Route]="62107",C[b.Satellite]="62108",C[b.Saved]="62109",C[b.ScatterPlot]="62110",C[b.SearchAround]="62111",C[b.SearchTemplate]="62112",C[b.SearchText]="62113",C[b.Search]="62114",C[b.SegmentedControl]="62115",C[b.Select]="62116",C[b.Selection]="62117",C[b.SendBackward]="62293",C[b.SendMessage]="62118",C[b.SendToGraph]="62119",C[b.SendToMap]="62120",C[b.SendTo]="62121",C[b.Sensor]="62268",C[b.SeriesAdd]="62122",C[b.SeriesConfiguration]="62123",C[b.SeriesDerived]="62124",C[b.SeriesFiltered]="62125",C[b.SeriesSearch]="62126",C[b.ServerInstall]="62327",C[b.Server]="62328",C[b.Settings]="62127",C[b.Shapes]="62128",C[b.Share]="62129",C[b.SharedFilter]="62130",C[b.Shield]="62131",C[b.Ship]="62132",C[b.Shop]="62133",C[b.ShoppingCart]="62134",C[b.ShortenText]="62271",C[b.SignalSearch]="62135",C[b.SimCard]="62136",C[b.Slash]="62137",C[b.SmallCross]="62138",C[b.SmallInfoSign]="62260",C[b.SmallMinus]="62139",C[b.SmallPlus]="62140",C[b.SmallSquare]="62141",C[b.SmallTick]="62142",C[b.Snowflake]="62143",C[b.SoccerBall]="62288",C[b.SocialMedia]="62144",C[b.SortAlphabeticalDesc]="62145",C[b.SortAlphabetical]="62146",C[b.SortAsc]="62147",C[b.SortDesc]="62148",C[b.SortNumericalDesc]="62149",C[b.SortNumerical]="62150",C[b.Sort]="62151",C[b.SpellCheck]="62272",C[b.SplitColumns]="62152",C[b.SportsStadium]="62289",C[b.Square]="62153",C[b.StackedChart]="62154",C[b.StadiumGeometry]="62155",C[b.StarEmpty]="62156",C[b.Star]="62157",C[b.StepBackward]="62158",C[b.StepChart]="62159",C[b.StepForward]="62160",C[b.Stop]="62161",C[b.Stopwatch]="62162",C[b.Strikethrough]="62163",C[b.Style]="62164",C[b.Subscript]="62265",C[b.Superscript]="62266",C[b.SwapHorizontal]="62165",C[b.SwapVertical]="62166",C[b.Switch]="62167",C[b.SymbolCircle]="62168",C[b.SymbolCross]="62169",C[b.SymbolDiamond]="62170",C[b.SymbolRectangle]="62242",C[b.SymbolSquare]="62171",C[b.SymbolTriangleDown]="62172",C[b.SymbolTriangleUp]="62173",C[b.Syringe]="62174",C[b.TableSync]="62318",C[b.TagAdd]="62329",C[b.TagPromote]="62330",C[b.TagRefresh]="62331",C[b.TagUndo]="62332",C[b.Tag]="62175",C[b.Tags]="62333",C[b.TakeAction]="62176",C[b.Tank]="62177",C[b.Target]="62178",C[b.Taxi]="62179",C[b.Team]="62290",C[b.Temperature]="62180",C[b.TextHighlight]="62181",C[b.ThAdd]="62346",C[b.ThDerived]="62182",C[b.ThDisconnect]="62183",C[b.ThFiltered]="62184",C[b.ThListAdd]="62347",C[b.ThList]="62185",C[b.ThVirtualAdd]="62349",C[b.ThVirtual]="62348",C[b.Th]="62186",C[b.ThirdParty]="62187",C[b.ThumbsDown]="62188",C[b.ThumbsUp]="62189",C[b.TickCircle]="62190",C[b.Tick]="62191",C[b.Time]="62192",C[b.TimelineAreaChart]="62193",C[b.TimelineBarChart]="62194",C[b.TimelineEvents]="62195",C[b.TimelineLineChart]="62196",C[b.Tint]="62197",C[b.Torch]="62198",C[b.Tractor]="62199",C[b.Train]="62200",C[b.Translate]="62201",C[b.Trash]="62202",C[b.Tree]="62203",C[b.TrendingDown]="62204",C[b.TrendingUp]="62205",C[b.Trophy]="62287",C[b.Truck]="62206",C[b.TwoColumns]="62207",C[b.Unarchive]="62208",C[b.Underline]="62209",C[b.Undo]="62210",C[b.UngroupObjects]="62211",C[b.UnknownVehicle]="62212",C[b.Unlink]="62277",C[b.Unlock]="62213",C[b.Unpin]="62214",C[b.Unresolve]="62215",C[b.Updated]="62216",C[b.Upload]="62217",C[b.User]="62218",C[b.Variable]="62219",C[b.Vector]="62302",C[b.VerticalBarChartAsc]="62220",C[b.VerticalBarChartDesc]="62221",C[b.VerticalDistribution]="62222",C[b.VerticalInbetween]="62250",C[b.Video]="62223",C[b.Virus]="62224",C[b.VolumeDown]="62225",C[b.VolumeOff]="62226",C[b.VolumeUp]="62227",C[b.Walk]="62228",C[b.WarningSign]="62229",C[b.WaterfallChart]="62230",C[b.Waves]="62231",C[b.WidgetButton]="62232",C[b.WidgetFooter]="62233",C[b.WidgetHeader]="62234",C[b.Widget]="62235",C[b.Wind]="62236",C[b.WrenchRedo]="62334",C[b.WrenchSnooze]="62335",C[b.WrenchTime]="62336",C[b.Wrench]="62237",C[b.ZoomIn]="62238",C[b.ZoomOut]="62239",C[b.ZoomToFit]="62240";var l1={},u1={};for(var mh=0,S_=Object.values(b);mh<S_.length;mh++){var gc=S_[mh];l1[C3(gc)]=gc,u1[P3(gc).toUpperCase()]=gc}var c1=Ht(Ht({},l1),u1),M3=new Set(Object.values(c1));function N3(t){return typeof NODE_ENV<"u"&&NODE_ENV===t}function O3(t,e){return Ka(this,void 0,void 0,function(){var r,n,i;return Za(this,function(o){switch(o.label){case 0:return r=N3("development")&&typeof performance<"u",r&&(n=performance.now(),console.info("Started '".concat(t,"'..."))),[4,e()];case 1:return o.sent(),r&&(i=Math.round(performance.now()-n),console.info("Finished '".concat(t,"' in ").concat(i,"ms"))),[2]}})})}function D3(t){return Ka(this,void 0,void 0,function(){var e,r;return Za(this,function(n){switch(n.label){case 0:return e=t.loader,r=e===void 0?Qa.defaultLoader:e,typeof r!="function"?[3,1]:[2,r];case 1:return r!=="all"?[3,3]:[4,nd(()=>import("./allPathsLoader-DpXKZqlt.js"),[])];case 2:return[2,n.sent().allPathsLoader];case 3:return[4,nd(()=>import("./splitPathsBySizeLoader-COPLlkee.js"),[])];case 4:return[2,n.sent().splitPathsBySizeLoader]}})})}var Rl=function(){function t(){this.defaultLoader="split-by-size",this.loadedIconPaths16=new Map,this.loadedIconPaths20=new Map}return t.setLoaderOptions=function(e){e.loader!==void 0&&(Qa.defaultLoader=e.loader)},t.load=function(e,r,n){return Ka(this,void 0,void 0,function(){var i=this;return Za(this,function(o){switch(o.label){case 0:return Array.isArray(e)||(e=[e]),[4,Promise.all(e.map(function(f){return i.loadImpl(f,r,n)}))];case 1:return o.sent(),[2]}})})},t.loadAll=function(e){return Ka(this,void 0,void 0,function(){var r,n=this;return Za(this,function(i){return r=Object.values(c1),O3("[Blueprint] loading all icons",function(){return Ka(n,void 0,void 0,function(){return Za(this,function(o){switch(o.label){case 0:return[4,Promise.all([this.load(r,ar.STANDARD,e),this.load(r,ar.LARGE,e)])];case 1:return o.sent(),[2]}})})}),[2]})})},t.getPaths=function(e,r){if(this.isValidIconName(e)){var n=r<ar.LARGE?Qa.loadedIconPaths16:Qa.loadedIconPaths20;return n.get(e)}},t.loadImpl=function(e,r,n){return n===void 0&&(n={}),Ka(this,void 0,void 0,function(){var i,o,f,p,y;return Za(this,function(T){switch(T.label){case 0:return this.isValidIconName(e)?(i=r<ar.LARGE?Qa.loadedIconPaths16:Qa.loadedIconPaths20,i.has(e)?[2]:[4,D3(n)]):(console.error("[Blueprint] Unknown icon '".concat(e,"'")),[2]);case 1:o=T.sent(),T.label=2;case 2:return T.trys.push([2,4,,5]),f=r<ar.LARGE?ar.STANDARD:ar.LARGE,[4,o(e,f)];case 3:return p=T.sent(),i.set(e,p),[3,5];case 4:return y=T.sent(),console.error("[Blueprint] Unable to load ".concat(r,"px icon '").concat(e,"'"),y),[3,5];case 5:return[2]}})})},t.isValidIconName=function(e){return M3.has(e)},t}(),Qa=new Rl,I3="bp5",b_="".concat(I3,"-icon"),C_=new Map;function F3(t){var e,r=(e=C_.get(t))!==null&&e!==void 0?e:0;return C_.set(t,r+1),"".concat(t,"-").concat(r)}var Jd=ye.forwardRef(function(t,e){var r=t.children,n=t.className,i=t.color,o=t.htmlTitle,f=t.iconName,p=t.size,y=p===void 0?ar.STANDARD:p,T=t.svgProps,R=t.tagName,x=R===void 0?"span":R,M=t.title,U=TA(t,["children","className","color","htmlTitle","iconName","size","svgProps","tagName","title"]),W=y>=ar.LARGE,j=W?ar.LARGE:ar.STANDARD,G="0 0 ".concat(j," ").concat(j),re=F3("iconTitle"),se=Ht({fill:i,height:y,role:"img",viewBox:G,width:y},T);return x===null?ye.createElement("svg",Ht({"aria-labelledby":M?re:void 0,"data-icon":f,ref:e},se,U,{className:Sn(n,T==null?void 0:T.className)}),M&&ye.createElement("title",{id:re},M),r):ye.createElement(x,Ht(Ht({"aria-hidden":M?void 0:!0},U),{className:Sn(b_,"".concat(b_,"-").concat(f),n),ref:e,title:o}),ye.createElement("svg",Ht({"data-icon":f},se,{className:T==null?void 0:T.className}),M&&ye.createElement("title",null,M),r))});Jd.displayName="Blueprint5.SVGIconContainer";var eg=ye.forwardRef(function(t,e){var r=t.size>=ar.LARGE,n=r?ar.LARGE:ar.STANDARD,i="".concat(-1*n/.05/2),o={transformOrigin:"center"};return ye.createElement(Jd,Ht({iconName:"small-cross",ref:e},t),ye.createElement("path",{d:r?"M228.2 200L294 265.8C297.8 269.4 300 274.4 300 280C300 291 291 300 280 300C274.4000000000001 300 269.4000000000001 297.8 265.8 294.2L200 228.2L134.2 294.2C130.6 297.8 125.6 300 120 300C109 300 100 291 100 280C100 274.4 102.2 269.4 105.8 265.8L171.8 200L106 134.2000000000001C102.2 130.6 100 125.6 100 120C100 109 109 100 120 100C125.6 100 130.6 102.2 134.2 105.8L200 171.8L265.8 106C269.4000000000001 102.2 274.4000000000001 100 280 100C291 100 300 109 300 120C300 125.6 297.8 130.6 294.2000000000001 134.2000000000001L228.2 200z":"M188.2 160L234 205.8C237.8 209.4 240 214.4 240 220C240 231 231 240 220 240C214.4 240 209.4 237.8 205.8 234.2L160 188.2L114.2 234.2C110.6 237.8 105.6 240 100 240C89 240 80 231 80 220C80 214.4 82.2 209.4 85.8 205.8L131.8 160L86 114.2C82.2 110.6 80 105.6 80 100C80 89 89 80 100 80C105.6 80 110.6 82.2 114.2 85.8L160 131.8L205.8 86C209.4 82.2 214.4 80 220 80C231 80 240 89 240 100C240 105.6 237.8 110.6 234.2 114.2L188.2 160z",fillRule:"evenodd",transform:"scale(0.05, -0.05) translate(".concat(i,", ").concat(i,")"),style:o}))});eg.defaultProps={size:ar.STANDARD};eg.displayName="Blueprint5.Icon.SmallCross";var zl=ye.forwardRef(function(t,e){var r,n,i=t.autoLoad,o=t.className,f=t.color,p=t.icon,y=t.intent,T=t.tagName,R=t.svgProps,x=t.title,M=t.htmlTitle,U=TA(t,["autoLoad","className","color","icon","intent","tagName","svgProps","title","htmlTitle"]),W=(n=(r=t.iconSize)!==null&&r!==void 0?r:t.size)!==null&&n!==void 0?n:ar.STANDARD,j=ye.useState(function(){return typeof p=="string"?Rl.getPaths(p,W):void 0}),G=j[0],re=j[1];if(ye.useEffect(function(){var we=!1;if(typeof p=="string"){var be=Rl.getPaths(p,W);be!==void 0?re(be):i?Rl.load(p,W).then(function(){we||re(Rl.getPaths(p,W))}).catch(function(Pe){console.error("[Blueprint] Icon '".concat(p,"' (").concat(W,"px) could not be loaded."),Pe)}):console.error("[Blueprint] Icon '".concat(p,"' (").concat(W,"px) is not loaded yet and autoLoad={false}, did you call Icons.load('").concat(p,"', ").concat(W,")?"))}return function(){we=!0}},[i,p,W]),p==null||typeof p=="boolean")return null;if(typeof p!="string")return p;if(G==null){var se=W===ar.STANDARD?e3:W===ar.LARGE?t3:void 0;return ye.createElement(T||"span",Ht(Ht({"aria-hidden":x?void 0:!0},rd(U)),{className:Sn(qd,se,r3(p),zi(y),o),"data-icon":p,ref:e,title:M}))}else{var ce=G.map(function(we,be){return ye.createElement("path",{d:we,key:be,fillRule:"evenodd"})});return ye.createElement(Jd,Ht({children:ce,className:Sn(zi(y),o),color:f,htmlTitle:M,iconName:p,ref:e,size:W,svgProps:R,tagName:T,title:x},rd(U)))}});zl.defaultProps={autoLoad:!0,tagName:"span"};zl.displayName="".concat(di,".Icon");var L3=i3()?ye.useLayoutEffect:ye.useEffect,tg=ye.forwardRef(function(t,e){var r,n=t.children,i=t.tagName,o=i===void 0?"div":i,f=t.title,p=t.className,y=t.ellipsize,T=TA(t,["children","tagName","title","className","ellipsize"]),R=ye.useRef(),x=ye.useMemo(function(){return a1(R,e)},[e]),M=ye.useState(""),U=M[0],W=M[1],j=ye.useState(),G=j[0],re=j[1];return L3(function(){var se;((se=R.current)===null||se===void 0?void 0:se.textContent)!=null&&(re(y&&R.current.scrollWidth>R.current.clientWidth),W(R.current.textContent))},[R,n,y]),ye.createElement(o,Ht(Ht({},T),{className:Sn((r={},r[Uw]=y,r),p),ref:x,title:f??(G?U:void 0)}),n)});tg.defaultProps={ellipsize:!1};tg.displayName="".concat(di,".Text");var f1=Gm(),R_=function(t){wA(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(){var r=this.props,n=r.children,i=r.contentClassName,o=r.helperText,f=r.label,p=r.labelFor,y=r.labelInfo,T=r.style,R=r.subLabel;return ye.createElement("div",{className:this.getClassName(),style:T},f&&ye.createElement("label",{className:zw,htmlFor:p},f," ",ye.createElement("span",{className:Lw},y)),R&&ye.createElement("div",{className:Xw},R),ye.createElement("div",{className:Sn(jw,i)},n,o&&ye.createElement("div",{className:Ww},o)))},e.prototype.getClassName=function(){var r,n=this.props,i=n.className,o=n.disabled,f=n.fill,p=n.inline,y=n.intent;return Sn(Hw,zi(y),(r={},r[Kd]=o,r[Bc]=f,r[Nw]=p,r),i)},e.displayName="".concat(di,".FormGroup"),e}(Zl),P_={FULL:"full",START:"start",END:"end"},h1={LOCK:"lock",PUSH:"push",NONE:"none"};function Oc(t){return"".concat((t*100).toFixed(2),"%")}function k_(t,e,r,n){for(var i=e<r?1:-1,o=e;o!==r+i;o+=i)t[o]=n}function U3(t,e){if(t.length!==0){for(var r=t[0],n=e(r),i=1;i<t.length;i++){var o=t[i],f=e(o);f<n&&(r=o,n=f)}return r}}var B3=["max","min","stepSize","tickSize","value"],V3=function(t){wA(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.state={isMoving:!1},r.handleElement=null,r.refHandlers={handle:function(n){return r.handleElement=n}},r.beginHandleMovement=function(n){document.addEventListener("mousemove",r.handleHandleMovement),document.addEventListener("mouseup",r.endHandleMovement),r.setState({isMoving:!0}),r.changeValue(r.clientToValue(r.mouseEventClientOffset(n)))},r.beginHandleTouchMovement=function(n){document.addEventListener("touchmove",r.handleHandleTouchMovement),document.addEventListener("touchend",r.endHandleTouchMovement),document.addEventListener("touchcancel",r.endHandleTouchMovement),r.setState({isMoving:!0}),r.changeValue(r.clientToValue(r.touchEventClientOffset(n)))},r.getStyleProperties=function(){if(r.handleElement==null)return{};var n=r.props,i=n.min,o=i===void 0?0:i,f=n.tickSizeRatio,p=n.value,y=n.vertical,T=r.getHandleMidpointAndOffset(r.handleElement,!0).handleMidpoint,R=(p-o)*f,x="calc(".concat(Oc(R)," - ").concat(T,"px)");return y?{bottom:x}:{left:x}},r.endHandleMovement=function(n){r.handleMoveEndedAt(r.mouseEventClientOffset(n))},r.endHandleTouchMovement=function(n){r.handleMoveEndedAt(r.touchEventClientOffset(n))},r.handleMoveEndedAt=function(n){var i,o;r.removeDocumentEventListeners(),r.setState({isMoving:!1});var f=r.changeValue(r.clientToValue(n));(o=(i=r.props).onRelease)===null||o===void 0||o.call(i,f)},r.handleHandleMovement=function(n){r.handleMovedTo(r.mouseEventClientOffset(n))},r.handleHandleTouchMovement=function(n){r.handleMovedTo(r.touchEventClientOffset(n))},r.handleMovedTo=function(n){r.state.isMoving&&!r.props.disabled&&r.changeValue(r.clientToValue(n))},r.handleKeyDown=function(n){var i=r.props,o=i.stepSize,f=i.value,p=o1(n,["ArrowLeft","ArrowDown"],["ArrowRight","ArrowUp"]);p!==void 0&&(r.changeValue(f+o*p),n.preventDefault())},r.handleKeyUp=function(n){var i,o;g3(n)&&((o=(i=r.props).onRelease)===null||o===void 0||o.call(i,r.props.value))},r}return e.prototype.componentDidMount=function(){this.forceUpdate()},e.prototype.render=function(){var r,n=this.props,i=n.className,o=n.disabled,f=n.label,p=n.min,y=n.max,T=n.value,R=n.vertical,x=n.htmlProps,M=this.state.isMoving;return ye.createElement("span",Ht({role:"slider",tabIndex:0},x,{className:Sn(e1,(r={},r[Yd]=M,r),i),onKeyDown:o?void 0:this.handleKeyDown,onKeyUp:o?void 0:this.handleKeyUp,onMouseDown:o?void 0:this.beginHandleMovement,onTouchStart:o?void 0:this.beginHandleTouchMovement,ref:this.refHandlers.handle,style:this.getStyleProperties(),"aria-valuemin":p,"aria-valuemax":y,"aria-valuenow":T,"aria-disabled":o,"aria-orientation":R?"vertical":"horizontal"}),f==null?null:ye.createElement("span",{className:t1},f))},e.prototype.componentWillUnmount=function(){this.removeDocumentEventListeners()},e.prototype.clientToValue=function(r){var n=this.props,i=n.stepSize,o=n.tickSize,f=n.value,p=n.vertical;if(this.handleElement==null)return f;var y=p?window.innerHeight-r:r,T=this.getHandleElementCenterPixel(this.handleElement),R=y-T;return isNaN(R)?f:f+Math.round(R/(o*i))*i},e.prototype.mouseEventClientOffset=function(r){return this.props.vertical?r.clientY:r.clientX},e.prototype.touchEventClientOffset=function(r){var n=r.changedTouches[0];return this.props.vertical?n.clientY:n.clientX},e.prototype.validateProps=function(r){for(var n=0,i=B3;n<i.length;n++){var o=i[n];if(typeof r[o]!="number")throw new Error("[Blueprint] <Handle> requires number value for ".concat(o," prop"))}},e.prototype.changeValue=function(r,n){return n===void 0&&(n=this.props.onChange),r=this.clamp(r),!isNaN(r)&&this.props.value!==r&&(n==null||n(r)),r},e.prototype.clamp=function(r){return Gd(r,this.props.min,this.props.max)},e.prototype.getHandleElementCenterPixel=function(r){var n=this.getHandleMidpointAndOffset(r),i=n.handleMidpoint,o=n.handleOffset;return o+i},e.prototype.getHandleMidpointAndOffset=function(r,n){if(n===void 0&&(n=!1),r==null)return{handleMidpoint:0,handleOffset:0};var i=this.props.vertical,o=r.getBoundingClientRect();o.width=r.offsetWidth,o.height=r.offsetHeight;var f=i?n?"width":"height":n?"height":"width",p=i?window.innerHeight-(o.top+o[f]):o.left;return{handleMidpoint:o[f]/2,handleOffset:p}},e.prototype.removeDocumentEventListeners=function(){document.removeEventListener("mousemove",this.handleHandleMovement),document.removeEventListener("mouseup",this.endHandleMovement),document.removeEventListener("touchmove",this.handleHandleTouchMovement),document.removeEventListener("touchend",this.endHandleTouchMovement),document.removeEventListener("touchcancel",this.endHandleTouchMovement)},e.displayName="".concat(di,".SliderHandle"),e}(Zl),d1=function(){return null};d1.displayName="".concat(di,".MultiSliderHandle");var qa=function(t){wA(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.state={labelPrecision:z3(r.props),tickSize:0,tickSizeRatio:0},r.handleElements=[],r.trackElement=null,r.addHandleRef=function(n){n!=null&&r.handleElements.push(n)},r.maybeHandleTrackClick=function(n){if(r.canHandleTrackEvent(n)){var i=r.nearestHandleForValue(r.handleElements,function(o){return o.mouseEventClientOffset(n)});i&&i.beginHandleMovement(n)}},r.maybeHandleTrackTouch=function(n){if(r.canHandleTrackEvent(n)){var i=r.nearestHandleForValue(r.handleElements,function(o){return o.touchEventClientOffset(n)});i&&i.beginHandleTouchMovement(n)}},r.canHandleTrackEvent=function(n){var i=n.target;return!r.props.disabled&&i.closest(".".concat(e1))==null},r.getHandlerForIndex=function(n,i){return function(o){i==null||i(r.getNewHandleValues(o,n))}},r.handleChange=function(n){var i,o,f=jo(r.props),p=f.map(function(y){return y.value});n3(n,p)||((o=(i=r.props).onChange)===null||o===void 0||o.call(i,n),f.forEach(function(y,T){var R;p[T]!==n[T]&&((R=y.onChange)===null||R===void 0||R.call(y,n[T]))}))},r.handleRelease=function(n){var i,o,f=jo(r.props);(o=(i=r.props).onRelease)===null||o===void 0||o.call(i,n),f.forEach(function(p,y){var T;(T=p.onRelease)===null||T===void 0||T.call(p,n[y])})},r}return e.getDerivedStateFromProps=function(r){return{labelPrecision:e.getLabelPrecision(r)}},e.getLabelPrecision=function(r){var n=r.labelPrecision,i=r.stepSize;return n??n1(i)},e.prototype.getSnapshotBeforeUpdate=function(r){var n=jo(r),i=jo(this.props);return i.length!==n.length&&(this.handleElements=[]),null},e.prototype.render=function(){var r,n=this,i=Sn(ta,(r={},r[Kd]=this.props.disabled,r["".concat(ta,"-unlabeled")]=this.props.labelRenderer===!1,r[Fw]=this.props.vertical,r),this.props.className);return ye.createElement("div",{className:i,onMouseDown:this.maybeHandleTrackClick,onTouchStart:this.maybeHandleTrackTouch},ye.createElement("div",{className:Qw,ref:function(o){return n.trackElement=o}},this.renderTracks()),ye.createElement("div",{className:$w},this.renderLabels()),this.renderHandles())},e.prototype.componentDidMount=function(){this.updateTickSize()},e.prototype.componentDidUpdate=function(r,n){t.prototype.componentDidUpdate.call(this,r,n),this.updateTickSize()},e.prototype.validateProps=function(r){if(r.stepSize<=0)throw new Error(a3);if(r.labelStepSize!==void 0&&r.labelValues!==void 0)throw new Error(f3);if(r.labelStepSize!==void 0&&r.labelStepSize<=0)throw new Error(A3);if(r.min!==void 0&&!isFinite(r.min))throw new Error(l3);if(r.max!==void 0&&!isFinite(r.max))throw new Error(u3);var n=!1;if(ye.Children.forEach(r.children,function(i){i&&!s1(i,e.Handle)&&(n=!0)}),n)throw new Error(c3)},e.prototype.formatLabel=function(r,n){n===void 0&&(n=!1);var i=this.props.labelRenderer;if(i!==!1)return zc(i)?i(r,{isHandleTooltip:n}):r.toFixed(this.state.labelPrecision)},e.prototype.renderLabels=function(){var r=this;if(this.props.labelRenderer===!1)return null;var n=this.getLabelValues(),i=this.props,o=i.max,f=i.min,p=n.map(function(y,T){var R=Oc((y-f)/(o-f)),x=r.props.vertical?{bottom:R}:{left:R};return ye.createElement("div",{className:t1,key:T,style:x},r.formatLabel(y))});return p},e.prototype.renderTracks=function(){var r=g1(this.props);r.push({value:this.props.max});for(var n={value:this.props.min},i=[],o=0;o<r.length;o++){var f=r[o];i.push(this.renderTrackFill(o,n,f)),n=f}return i},e.prototype.renderTrackFill=function(r,n,i){var o=[this.getOffsetRatio(n.value),this.getOffsetRatio(i.value)].sort(function(U,W){return U-W}),f=o[0],p=o[1],y=Oc(f),T=Oc(1-p),R=this.props.vertical?{bottom:y,top:T,left:0}:{left:y,right:T,top:0},x=Ht(Ht({},R),n.trackStyleAfter||i.trackStyleBefore||{}),M=Sn(Yw,zi(this.getTrackIntent(n,i)));return ye.createElement("div",{key:"track-".concat(r),className:M,style:x})},e.prototype.renderHandles=function(){var r=this,n=this.props,i=n.disabled,o=n.max,f=n.min,p=n.stepSize,y=n.vertical,T=jo(this.props);return T.length===0?null:T.map(function(R,x){var M,U=R.value,W=R.type,j=R.className,G=R.htmlProps;return ye.createElement(V3,{htmlProps:G,className:Sn((M={},M[Kw]=W===P_.START,M[Zw]=W===P_.END,M),j),disabled:i,key:"".concat(x,"-").concat(T.length),label:r.formatLabel(U,!0),max:o,min:f,onChange:r.getHandlerForIndex(x,r.handleChange),onRelease:r.getHandlerForIndex(x,r.handleRelease),ref:r.addHandleRef,stepSize:p,tickSize:r.state.tickSize,tickSizeRatio:r.state.tickSizeRatio,value:U,vertical:y})})},e.prototype.nearestHandleForValue=function(r,n){return U3(r,function(i){var o=n(i),f=i.clientToValue(o),p=i.props.value;return Math.abs(f-p)})},e.prototype.getNewHandleValues=function(r,n){var i=jo(this.props),o=i.map(function(R){return R.value}),f=o.slice();f[n]=r,f.sort(function(R,x){return R-x});var p=f.indexOf(r),y=this.findFirstLockedHandleIndex(n,p);if(y===-1)k_(f,n,p,r);else{var T=o[y];return k_(o,n,y,T),o}return f},e.prototype.findFirstLockedHandleIndex=function(r,n){for(var i=r<n?1:-1,o=jo(this.props),f=r+i;f!==n+i;f+=i)if(o[f].interactionKind!==h1.PUSH)return f;return-1},e.prototype.getLabelValues=function(){var r=this.props,n=r.labelStepSize,i=r.labelValues,o=r.min,f=r.max,p=[];if(i!==void 0)p=i.slice();else for(var y=o;y<f||h3(y,f);y+=n??1)p.push(y);return p},e.prototype.getOffsetRatio=function(r){return Gd((r-this.props.min)*this.state.tickSizeRatio,0,1)},e.prototype.getTrackIntent=function(r,n){return this.props.showTrackFill?r.intentAfter!==void 0?r.intentAfter:n!==void 0&&n.intentBefore!==void 0?n.intentBefore:this.props.defaultTrackIntent:Ks.NONE},e.prototype.updateTickSize=function(){if(this.trackElement!=null){var r=this.props.vertical?this.trackElement.clientHeight:this.trackElement.clientWidth,n=1/(this.props.max-this.props.min),i=r*n;this.setState({tickSize:i,tickSizeRatio:n})}},e.defaultSliderProps={disabled:!1,max:10,min:0,showTrackFill:!0,stepSize:1,vertical:!1},e.defaultProps=Ht(Ht({},e.defaultSliderProps),{defaultTrackIntent:Ks.NONE}),e.displayName="".concat(di,".MultiSlider"),e.Handle=d1,e}(Zl);function z3(t){var e=t.labelPrecision,r=t.stepSize,n=r===void 0?qa.defaultSliderProps.stepSize:r;return e??n1(n)}function jo(t){return g1(t,function(e){return e.interactionKind!==h1.NONE})}function g1(t,e){var r=t.children;e===void 0&&(e=function(){return!0});var n=ye.Children.map(r,function(o){return s1(o,qa.Handle)&&e(o.props)?o.props:null}),i=n??[];return i=i.filter(function(o){return o!==null}),i.sort(function(o,f){return o.value-f.value}),i}var H3=function(t){wA(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(){var r=this.props,n=r.initialValue,i=r.intent,o=r.value,f=r.onChange,p=r.onRelease,y=r.handleHtmlProps,T=TA(r,["initialValue","intent","value","onChange","onRelease","handleHtmlProps"]);return ye.createElement(qa,Ht({},T),ye.createElement(qa.Handle,{value:o,intentAfter:o<n?i:void 0,intentBefore:o>n?i:void 0,onChange:f,onRelease:p,htmlProps:y}),ye.createElement(qa.Handle,{value:n,interactionKind:"none"}))},e.defaultProps=Ht(Ht({},qa.defaultSliderProps),{initialValue:0,intent:Ks.PRIMARY,value:0}),e.displayName="".concat(di,".Slider"),e}(Zl),p1=function(t){var e=t.className,r=t.large,n=t.onRemove,i=t.tabIndex,o=r||(e==null?void 0:e.includes(Vc)),f=ye.useCallback(function(p){n==null||n(p,t)},[n,t]);return ye.createElement("button",{"aria-label":"Remove tag",type:"button",className:qw,onClick:f,tabIndex:i},ye.createElement(eg,{size:o?ar.LARGE:ar.STANDARD}))};p1.displayName="".concat(di,".TagRemoveButton");var rg=ye.forwardRef(function(t,e){var r,n=t.children,i=t.className,o=t.fill,f=t.icon,p=t.intent,y=t.interactive,T=t.large,R=t.minimal,x=t.multiline,M=t.onRemove,U=t.rightIcon,W=t.round;t.tabIndex;var j=t.htmlTitle,G=TA(t,["children","className","fill","icon","intent","interactive","large","minimal","multiline","onRemove","rightIcon","round","tabIndex","htmlTitle"]),re=zc(M),se=y??G.onClick!=null,ce=w3(se,t,e,{defaultTabIndex:0,disabledTabIndex:void 0}),we=ce[0],be=ce[1],Pe=Sn(r1,zi(p),(r={},r[Yd]=we,r[Bc]=o,r[Ow]=se,r[Vc]=T,r[Dw]=R,r[Iw]=W,r),i);return ye.createElement("span",Ht({},rd(G),be,{className:Pe}),ye.createElement(zl,{icon:f}),!i1(n)&&ye.createElement(tg,{className:Bc,ellipsize:!x,tagName:"span",title:j},n),ye.createElement(zl,{icon:U}),re&&ye.createElement(p1,Ht({},t)))});rg.defaultProps={active:!1,fill:!1,large:!1,minimal:!1,round:!1};rg.displayName="".concat(di,".Tag");var _1=ye.forwardRef(function(e,r){var n=ye.useState(""),i=n[0],o=n[1],f=ye.useState(0),p=f[0],y=f[1],T=ye.useRef(null);ye.useEffect(function(){T.current!=null&&y(T.current.offsetWidth)},[i]);var R=e.onChange,x=e.style,M=TA(e,["onChange","style"]),U=function(W){var j,G;R==null||R(W),o((G=(j=W==null?void 0:W.target)===null||j===void 0?void 0:j.value)!==null&&G!==void 0?G:"")};return ye.createElement(ye.Fragment,null,ye.createElement("span",{ref:T,className:Vw,"aria-hidden":!0},i.replace(/ /g," ")),ye.createElement("input",Ht({},M,{type:"text",style:Ht(Ht({},x),{width:p}),onChange:U,ref:r})))});_1.displayName="".concat(di,".ResizableInput");var Fs=-1,j3=function(t){wA(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.state={activeIndex:Fs,inputValue:r.props.inputValue||"",isInputFocused:!1},r.inputElement=null,r.handleRef=y_(r,"inputElement",r.props.inputRef),r.addTags=function(n,i){i===void 0&&(i="default");var o=r.props,f=o.inputValue,p=o.onAdd,y=o.onChange,T=o.values,R=r.getValues(n),x=(p==null?void 0:p(R,i))!==!1&&f===void 0;zc(y)&&(x=y(p_(p_([],T,!0),R,!0))!==!1&&x),x&&r.setState({inputValue:""})},r.maybeRenderTag=function(n,i){if(!n)return null;var o=r.props,f=o.large,p=o.tagProps,y=zc(p)?p(n,i):p;return ye.createElement(rg,Ht({active:i===r.state.activeIndex,"data-tag-index":i,key:n+"__"+i,large:f,onRemove:r.props.disabled?void 0:r.handleRemoveTag},y),n)},r.handleContainerClick=function(){var n;(n=r.inputElement)===null||n===void 0||n.focus()},r.handleContainerBlur=function(n){var i=n.currentTarget;r.requestAnimationFrame(function(){var o=i.contains(s3(r.inputElement));o||(r.props.addOnBlur&&r.state.inputValue!==void 0&&r.state.inputValue.length>0&&r.addTags(r.state.inputValue,"blur"),r.setState({activeIndex:Fs,isInputFocused:!1}))})},r.handleInputFocus=function(n){var i,o;r.setState({isInputFocused:!0}),(o=(i=r.props.inputProps)===null||i===void 0?void 0:i.onFocus)===null||o===void 0||o.call(i,n)},r.handleInputChange=function(n){var i,o,f,p;r.setState({activeIndex:Fs,inputValue:n.currentTarget.value}),(o=(i=r.props).onInputChange)===null||o===void 0||o.call(i,n),(p=(f=r.props.inputProps)===null||f===void 0?void 0:f.onChange)===null||p===void 0||p.call(f,n)},r.handleInputKeyDown=function(n){var i=n.currentTarget,o=i.selectionEnd,f=i.value,p=r.state.activeIndex,y=p;if(n.key==="Enter"&&!n.nativeEvent.isComposing&&f.length>0)r.addTags(f,"default");else if(o===0&&r.props.values.length>0){var T=o1(n,["ArrowLeft"],["ArrowRight"]);if(T!==void 0){var R=r.getNextActiveIndex(T);R!==p&&(n.stopPropagation(),y=R,r.setState({activeIndex:R}))}else n.key==="Backspace"?r.handleBackspaceToRemove(n):n.key==="Delete"&&r.handleDeleteToRemove(n)}r.invokeKeyPressCallback("onKeyDown",n,y)},r.handleInputKeyUp=function(n){r.invokeKeyPressCallback("onKeyUp",n,r.state.activeIndex)},r.handleInputPaste=function(n){var i=r.props.separator,o=n.clipboardData.getData("text");!r.props.addOnPaste||o.length===0||i===!1||o.split(i).length===1||(n.preventDefault(),r.addTags(o,"paste"))},r.handleRemoveTag=function(n){var i=+n.currentTarget.parentElement.getAttribute("data-tag-index");r.removeIndexFromValues(i)},r}return e.getDerivedStateFromProps=function(r,n){return r.inputValue!==n.prevInputValueProp?{inputValue:r.inputValue,prevInputValueProp:r.inputValue}:null},e.prototype.render=function(){var r,n=this.props,i=n.autoResize,o=n.className,f=n.disabled,p=n.fill,y=n.inputProps,T=n.intent,R=n.large,x=n.leftIcon,M=n.placeholder,U=n.values,W=Sn(Jm,Zd,(r={},r[Yd]=this.state.isInputFocused,r[Kd]=f,r[Bc]=p,r[Vc]=R,r),zi(T),o),j=W.indexOf(Vc)>Fs,G=U.some(function(ce){return!!ce}),re=M==null||G?y==null?void 0:y.placeholder:M,se=Ht(Ht({value:this.state.inputValue},y),{className:Sn(Bw,y==null?void 0:y.className),disabled:f,onChange:this.handleInputChange,onFocus:this.handleInputFocus,onKeyDown:this.handleInputKeyDown,onKeyUp:this.handleInputKeyUp,onPaste:this.handleInputPaste,placeholder:re,ref:this.handleRef});return ye.createElement("div",{className:W,onBlur:this.handleContainerBlur,onClick:this.handleContainerClick},ye.createElement(zl,{className:Gw,icon:x,size:j?ar.LARGE:ar.STANDARD}),ye.createElement("div",{className:Jw},U.map(this.maybeRenderTag),this.props.children,i?ye.createElement(_1,Ht({},se)):ye.createElement("input",Ht({},se))),this.props.rightElement)},e.prototype.componentDidUpdate=function(r){r.inputRef!==this.props.inputRef&&(Hc(r.inputRef,null),this.handleRef=y_(this,"inputElement",this.props.inputRef),Hc(this.props.inputRef,this.inputElement))},e.prototype.getNextActiveIndex=function(r){var n=this.state.activeIndex;return n===Fs?r<0?this.findNextIndex(this.props.values.length,-1):Fs:this.findNextIndex(n,r)},e.prototype.findNextIndex=function(r,n){for(var i=this.props.values,o=r+n;o>0&&o<i.length&&!i[o];)o+=n;return Gd(o,0,i.length)},e.prototype.getValues=function(r){var n=this.props.separator;return(n===!1?[r]:r.split(n)).map(function(i){return i.trim()}).filter(function(i){return i.length>0})},e.prototype.handleBackspaceToRemove=function(r){var n=this.state.activeIndex;this.setState({activeIndex:this.getNextActiveIndex(-1)}),this.isValidIndex(n)&&(r.stopPropagation(),this.removeIndexFromValues(n))},e.prototype.handleDeleteToRemove=function(r){var n=this.state.activeIndex;this.isValidIndex(n)&&(r.stopPropagation(),this.removeIndexFromValues(n))},e.prototype.removeIndexFromValues=function(r){var n=this.props,i=n.onChange,o=n.onRemove,f=n.values;o==null||o(f[r],r),i==null||i(f.filter(function(p,y){return y!==r}))},e.prototype.invokeKeyPressCallback=function(r,n,i){var o,f,p,y;(f=(o=this.props)[r])===null||f===void 0||f.call(o,n,i===Fs?void 0:i),(y=(p=this.props.inputProps)[r])===null||y===void 0||y.call(p,n)},e.prototype.isValidIndex=function(r){return r!==Fs&&r<this.props.values.length},e.displayName="".concat(di,".TagInput"),e.defaultProps={addOnBlur:!1,addOnPaste:!0,autoResize:!1,inputProps:{},separator:/[,\n\r]/,tagProps:{}},e}(Zl);function jc(t,e){if(!t)throw new Error(e||"loader assertion failed.")}const ng=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),x_=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);x_&&parseFloat(x_[1]);const pc=globalThis,Va=globalThis.process||{},W3=globalThis.navigator||{};function m1(t){var n,i;if(typeof window<"u"&&((n=window.process)==null?void 0:n.type)==="renderer"||typeof process<"u"&&((i=process.versions)!=null&&i.electron))return!0;const r=typeof navigator<"u"&&navigator.userAgent;return!!(r&&r.indexOf("Electron")>=0)}function eo(){return!(typeof process=="object"&&String(process)==="[object process]"&&!(process!=null&&process.browser))||m1()}function X3(t){return eo()?m1()?"Electron":(W3.userAgent||"").indexOf("Edge")>-1?"Edge":globalThis.chrome?"Chrome":globalThis.safari?"Safari":globalThis.mozInnerScreenX?"Firefox":"Unknown":"Node"}const y1="4.0.7";function $3(t){try{const e=window[t],r="__storage_test__";return e.setItem(r,r),e.removeItem(r),e}catch{return null}}class Q3{constructor(e,r,n="sessionStorage"){this.storage=$3(n),this.id=e,this.config=r,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const r=JSON.stringify(this.config);this.storage.setItem(this.id,r)}}_loadConfiguration(){let e={};if(this.storage){const r=this.storage.getItem(this.id);e=r?JSON.parse(r):{}}return Object.assign(this.config,e),this}}function Y3(t){let e;return t<10?e=`${t.toFixed(2)}ms`:t<100?e=`${t.toFixed(1)}ms`:t<1e3?e=`${t.toFixed(0)}ms`:e=`${(t/1e3).toFixed(2)}s`,e}function K3(t,e=8){const r=Math.max(e-t.length,0);return`${" ".repeat(r)}${t}`}var Wc;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(Wc||(Wc={}));const Z3=10;function M_(t){return typeof t!="string"?t:(t=t.toUpperCase(),Wc[t]||Wc.WHITE)}function q3(t,e,r){return!eo&&typeof t=="string"&&(e&&(t=`\x1B[${M_(e)}m${t}\x1B[39m`),r&&(t=`\x1B[${M_(r)+Z3}m${t}\x1B[49m`)),t}function G3(t,e=["constructor"]){const r=Object.getPrototypeOf(t),n=Object.getOwnPropertyNames(r),i=t;for(const o of n){const f=i[o];typeof f=="function"&&(e.find(p=>o===p)||(i[o]=f.bind(t)))}}function ig(t,e){if(!t)throw new Error("Assertion failed")}function za(){var e,r,n;let t;if(eo()&&pc.performance)t=(r=(e=pc==null?void 0:pc.performance)==null?void 0:e.now)==null?void 0:r.call(e);else if("hrtime"in Va){const i=(n=Va==null?void 0:Va.hrtime)==null?void 0:n.call(Va);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}const Ha={debug:eo()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},J3={enabled:!0,level:0};function ja(){}const N_={},O_={once:!0};class ql{constructor({id:e}={id:""}){this.VERSION=y1,this._startTs=za(),this._deltaTs=za(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=e,this.userData={},this._storage=new Q3(`__probe-${this.id}__`,J3),this.timeStamp(`${this.id} started`),G3(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((za()-this._startTs).toPrecision(10))}getDelta(){return Number((za()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(e=!0){return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,r){this._storage.setConfiguration({[e]:r})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,r){if(!e)throw new Error(r||"Assertion failed")}warn(e){return this._getLogFunction(0,e,Ha.warn,arguments,O_)}error(e){return this._getLogFunction(0,e,Ha.error,arguments)}deprecated(e,r){return this.warn(`\`${e}\` is deprecated and will be removed in a later version. Use \`${r}\` instead`)}removed(e,r){return this.error(`\`${e}\` has been removed. Use \`${r}\` instead`)}probe(e,r){return this._getLogFunction(e,r,Ha.log,arguments,{time:!0,once:!0})}log(e,r){return this._getLogFunction(e,r,Ha.debug,arguments)}info(e,r){return this._getLogFunction(e,r,console.info,arguments)}once(e,r){return this._getLogFunction(e,r,Ha.debug||Ha.info,arguments,O_)}table(e,r,n){return r?this._getLogFunction(e,r,console.table||ja,n&&[n],{tag:tT(r)}):ja}time(e,r){return this._getLogFunction(e,r,console.time?console.time:console.info)}timeEnd(e,r){return this._getLogFunction(e,r,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,r){return this._getLogFunction(e,r,console.timeStamp||ja)}group(e,r,n={collapsed:!1}){const i=D_({logLevel:e,message:r,opts:n}),{collapsed:o}=n;return i.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,r,n={}){return this.group(e,r,Object.assign({},n,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||ja)}withGroup(e,r,n){this.group(e,r)();try{n()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=v1(e)}_getLogFunction(e,r,n,i,o){if(this._shouldLog(e)){o=D_({logLevel:e,message:r,args:i,opts:o}),n=n||o.method,ig(n),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=za();const f=o.tag||o.message;if(o.once&&f)if(!N_[f])N_[f]=za();else return ja;return r=eT(this.id,o.message,o),n.bind(console,r,...o.args)}return ja}}ql.VERSION=y1;function v1(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return ig(Number.isFinite(e)&&e>=0),e}function D_(t){const{logLevel:e,message:r}=t;t.logLevel=v1(e);const n=t.args?Array.from(t.args):[];for(;n.length&&n.shift()!==r;);switch(typeof e){case"string":case"function":r!==void 0&&n.unshift(r),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const i=typeof t.message;return ig(i==="string"||i==="object"),Object.assign(t,{args:n},t.opts)}function eT(t,e,r){if(typeof e=="string"){const n=r.time?K3(Y3(r.total)):"";e=r.time?`${t}: ${n}  ${e}`:`${t}: ${e}`,e=q3(e,r.color,r.background)}return e}function tT(t){for(const e in t)for(const r in t[e])return r||"untitled";return"empty"}const yh="4.3.2",rT=yh[0]>="0"&&yh[0]<="9"?`v${yh}`:"";function nT(){const t=new ql({id:"loaders.gl"});return globalThis.loaders=globalThis.loaders||{},globalThis.loaders.log=t,globalThis.loaders.version=rT,globalThis.probe=globalThis.probe||{},globalThis.probe.loaders=t,t}const iT=nT();function sT(t,e){return w1(t||{},e)}function w1(t,e,r=0){if(r>3)return e;const n={...t};for(const[i,o]of Object.entries(e))o&&typeof o=="object"&&!Array.isArray(o)?n[i]=w1(n[i]||{},e[i],r+1):n[i]=e[i];return n}const oT="latest";function aT(){var t;return(t=globalThis._loadersgl_)!=null&&t.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version="4.3.2"),globalThis._loadersgl_.version}const AT=aT();function Zs(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const Go=typeof process!="object"||String(process)!=="[object process]"||process.browser,lT=typeof window<"u"&&typeof window.orientation<"u",I_=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);I_&&parseFloat(I_[1]);class uT{constructor(e,r){F(this,"name");F(this,"workerThread");F(this,"isRunning",!0);F(this,"result");F(this,"_resolve",()=>{});F(this,"_reject",()=>{});this.name=e,this.workerThread=r,this.result=new Promise((n,i)=>{this._resolve=n,this._reject=i})}postMessage(e,r){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:r})}done(e){Zs(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Zs(this.isRunning),this.isRunning=!1,this._reject(e)}}class vh{terminate(){}}const wh=new Map;function cT(t){Zs(t.source&&!t.url||!t.source&&t.url);let e=wh.get(t.source||t.url);return e||(t.url&&(e=fT(t.url),wh.set(t.url,e)),t.source&&(e=T1(t.source),wh.set(t.source,e))),Zs(e),e}function fT(t){if(!t.startsWith("http"))return t;const e=hT(t);return T1(e)}function T1(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function hT(t){return`try {
  importScripts('${t}');
} catch (error) {
  console.error(error);
  throw error;
}`}function E1(t,e=!0,r){const n=r||new Set;if(t){if(F_(t))n.add(t);else if(F_(t.buffer))n.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(const i in t)E1(t[i],e,n)}}return r===void 0?Array.from(n):[]}function F_(t){return t?t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas:!1}const Th=()=>{};class id{constructor(e){F(this,"name");F(this,"source");F(this,"url");F(this,"terminated",!1);F(this,"worker");F(this,"onMessage");F(this,"onError");F(this,"_loadableURL","");const{name:r,source:n,url:i}=e;Zs(n||i),this.name=r,this.source=n,this.url=i,this.onMessage=Th,this.onError=o=>console.log(o),this.worker=Go?this._createBrowserWorker():this._createNodeWorker()}static isSupported(){return typeof Worker<"u"&&Go||typeof vh<"u"&&!Go}destroy(){this.onMessage=Th,this.onError=Th,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,r){r=r||E1(e),this.worker.postMessage(e,r)}_getErrorFromErrorEvent(e){let r="Failed to load ";return r+=`worker ${this.name} from ${this.url}. `,e.message&&(r+=`${e.message} in `),e.lineno&&(r+=`:${e.lineno}:${e.colno}`),new Error(r)}_createBrowserWorker(){this._loadableURL=cT({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=r=>{r.data?this.onMessage(r.data):this.onError(new Error("No data received"))},e.onerror=r=>{this.onError(this._getErrorFromErrorEvent(r)),this.terminated=!0},e.onmessageerror=r=>console.error(r),e}_createNodeWorker(){let e;if(this.url){const n=this.url.includes(":/")||this.url.startsWith("/")?this.url:`./${this.url}`;e=new vh(n,{eval:!1})}else if(this.source)e=new vh(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",r=>{this.onMessage(r)}),e.on("error",r=>{this.onError(r)}),e.on("exit",r=>{}),e}}class dT{constructor(e){F(this,"name","unnamed");F(this,"source");F(this,"url");F(this,"maxConcurrency",1);F(this,"maxMobileConcurrency",1);F(this,"onDebug",()=>{});F(this,"reuseWorkers",!0);F(this,"props",{});F(this,"jobQueue",[]);F(this,"idleQueue",[]);F(this,"count",0);F(this,"isDestroyed",!1);this.source=e.source,this.url=e.url,this.setProps(e)}static isSupported(){return id.isSupported()}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e,r=(i,o,f)=>i.done(f),n=(i,o)=>i.error(o)){const i=new Promise(o=>(this.jobQueue.push({name:e,onMessage:r,onError:n,onStart:o}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const r=this.jobQueue.shift();if(r){this.onDebug({message:"Starting job",name:r.name,workerThread:e,backlog:this.jobQueue.length});const n=new uT(r.name,e);e.onMessage=i=>r.onMessage(n,i.type,i.payload),e.onError=i=>r.onError(n,i),r.onStart(n);try{await n.result}catch(i){console.error(`Worker exception: ${i}`)}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){!Go||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new id({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return lT?this.maxMobileConcurrency:this.maxConcurrency}}const gT={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}},Hs=class Hs{constructor(e){F(this,"props");F(this,"workerPools",new Map);this.props={...gT},this.setProps(e),this.workerPools=new Map}static isSupported(){return id.isSupported()}static getWorkerFarm(e={}){return Hs._workerFarm=Hs._workerFarm||new Hs({}),Hs._workerFarm.setProps(e),Hs._workerFarm}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const r of this.workerPools.values())r.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:r,source:n,url:i}=e;let o=this.workerPools.get(r);return o||(o=new dT({name:r,source:n,url:i}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(r,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}};F(Hs,"_workerFarm");let Xc=Hs;function pT(t,e={}){const r=e[t.id]||{},n=Go?`${t.id}-worker.js`:`${t.id}-worker-node.js`;let i=r.workerUrl;if(!i&&t.id==="compression"&&(i=e.workerUrl),e._workerType==="test"&&(Go?i=`modules/${t.module}/dist/${n}`:i=`modules/${t.module}/src/workers/${t.id}-worker-node.ts`),!i){let o=t.version;o==="latest"&&(o=oT);const f=o?`@${o}`:"";i=`https://unpkg.com/@loaders.gl/${t.module}${f}/dist/${n}`}return Zs(i),i}function _T(t,e=AT){Zs(t,"no worker provided");const r=t.version;return!(!e||!r)}function mT(t,e){return!Xc.isSupported()||!Go&&!(e!=null&&e._nodeWorkers)?!1:t.worker&&(e==null?void 0:e.worker)}async function yT(t,e,r,n,i){const o=t.id,f=pT(t,r),y=Xc.getWorkerFarm(r).getWorkerPool({name:o,url:f});r=JSON.parse(JSON.stringify(r)),n=JSON.parse(JSON.stringify(n||{}));const T=await y.startJob("process-on-worker",vT.bind(null,i));return T.postMessage("process",{input:e,options:r,context:n}),await(await T.result).result}async function vT(t,e,r,n){switch(r){case"done":e.done(n);break;case"error":e.error(new Error(n.error));break;case"process":const{id:i,input:o,options:f}=n;try{const p=await t(o,f);e.postMessage("done",{id:i,result:p})}catch(p){const y=p instanceof Error?p.message:"unknown error";e.postMessage("error",{id:i,error:y})}break;default:console.warn(`parse-with-worker unknown message ${r}`)}}function wT(t,e,r){if(r=r||t.byteLength,t.byteLength<r||e.byteLength<r)return!1;const n=new Uint8Array(t),i=new Uint8Array(e);for(let o=0;o<n.length;++o)if(n[o]!==i[o])return!1;return!0}function TT(...t){return ET(t)}function ET(t){const e=t.map(o=>o instanceof ArrayBuffer?new Uint8Array(o):o),r=e.reduce((o,f)=>o+f.byteLength,0),n=new Uint8Array(r);let i=0;for(const o of e)n.set(o,i),i+=o.byteLength;return n.buffer}async function ST(t){const e=[];for await(const r of t)e.push(r);return TT(...e)}function L_(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}class U_{constructor(e,r){this.sampleSize=1,this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this.name=e,this.type=r,this.reset()}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=L_(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(L_()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class Nf{constructor(e){this.stats={},this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e,r="count"){return this._getOrCreate({name:e,type:r})}get size(){return Object.keys(this.stats).length}reset(){for(const e of Object.values(this.stats))e.reset();return this}forEach(e){for(const r of Object.values(this.stats))e(r)}getTable(){const e={};return this.forEach(r=>{e[r.name]={time:r.time||0,count:r.count||0,average:r.getAverageTime()||0,hz:r.getHz()||0}}),e}_initializeStats(e=[]){e.forEach(r=>this._getOrCreate(r))}_getOrCreate(e){const{name:r,type:n}=e;let i=this.stats[r];return i||(e instanceof U_?i=e:i=new U_(r,n),this.stats[r]=i),i}}let bT="";const B_={};function CT(t){for(const e in B_)if(t.startsWith(e)){const r=B_[e];t=t.replace(e,r)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t=`${bT}${t}`),t}function RT(t){return t&&typeof t=="object"&&t.isBuffer}function S1(t){if(RT(t))return t;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){const e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function b1(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function PT(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}const kT=t=>typeof t=="boolean",Ol=t=>typeof t=="function",Gl=t=>t!==null&&typeof t=="object",V_=t=>Gl(t)&&t.constructor==={}.constructor,xT=t=>!!t&&typeof t[Symbol.iterator]=="function",MT=t=>t&&typeof t[Symbol.asyncIterator]=="function",aa=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,Aa=t=>typeof Blob<"u"&&t instanceof Blob,NT=t=>t&&typeof t=="object"&&t.isBuffer,OT=t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||Gl(t)&&Ol(t.tee)&&Ol(t.cancel)&&Ol(t.getReader),DT=t=>Gl(t)&&Ol(t.read)&&Ol(t.pipe)&&kT(t.readable),C1=t=>OT(t)||DT(t);class IT extends Error{constructor(r,n){super(r);F(this,"reason");F(this,"url");F(this,"response");this.reason=n.reason,this.url=n.url,this.response=n.response}}const FT=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,LT=/^([-\w.]+\/[-\w.+]+)/;function z_(t,e){return t.toLowerCase()===e.toLowerCase()}function UT(t){const e=LT.exec(t);return e?e[1]:t}function H_(t){const e=FT.exec(t);return e?e[1]:""}const R1=/\?.*/;function BT(t){const e=t.match(R1);return e&&e[0]}function sg(t){return t.replace(R1,"")}function VT(t){if(t.length<50)return t;const e=t.slice(t.length-15);return`${t.substr(0,32)}...${e}`}function Of(t){return aa(t)?t.url:Aa(t)?t.name||"":typeof t=="string"?t:""}function og(t){if(aa(t)){const e=t,r=e.headers.get("content-type")||"",n=sg(e.url);return UT(r)||H_(n)}return Aa(t)?t.type||"":typeof t=="string"?H_(t):""}function zT(t){return aa(t)?t.headers["content-length"]||-1:Aa(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}async function P1(t){if(aa(t))return t;const e={},r=zT(t);r>=0&&(e["content-length"]=String(r));const n=Of(t),i=og(t);i&&(e["content-type"]=i);const o=await WT(t);o&&(e["x-first-bytes"]=o),typeof t=="string"&&(t=new TextEncoder().encode(t));const f=new Response(t,{headers:e});return Object.defineProperty(f,"url",{value:n}),f}async function HT(t){if(!t.ok)throw await jT(t)}async function jT(t){const e=VT(t.url);let r=`Failed to fetch resource (${t.status}) ${t.statusText}: ${e}`;r=r.length>100?`${r.slice(0,100)}...`:r;const n={reason:t.statusText,url:t.url,response:t};try{const i=t.headers.get("Content-Type");n.reason=!t.bodyUsed&&(i!=null&&i.includes("application/json"))?await t.json():await t.text()}catch{}return new IT(r,n)}async function WT(t){if(typeof t=="string")return`data:,${t.slice(0,5)}`;if(t instanceof Blob){const r=t.slice(0,5);return await new Promise(n=>{const i=new FileReader;i.onload=o=>{var f;return n((f=o==null?void 0:o.target)==null?void 0:f.result)},i.readAsDataURL(r)})}if(t instanceof ArrayBuffer){const r=t.slice(0,5);return`data:base64,${XT(r)}`}return null}function XT(t){let e="";const r=new Uint8Array(t);for(let n=0;n<r.byteLength;n++)e+=String.fromCharCode(r[n]);return btoa(e)}function $T(t){return!QT(t)&&!YT(t)}function QT(t){return t.startsWith("http:")||t.startsWith("https:")}function YT(t){return t.startsWith("data:")}async function j_(t,e){var r,n;if(typeof t=="string"){const i=CT(t);return $T(i)&&(r=globalThis.loaders)!=null&&r.fetchNode?(n=globalThis.loaders)==null?void 0:n.fetchNode(i,e):await fetch(i,e)}return await P1(t)}const W_=new ql({id:"loaders.gl"});class KT{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class ZT{constructor(){F(this,"console");this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}}const k1={fetch:null,mimeType:void 0,nothrow:!1,log:new ZT,useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:ng,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},qT={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function x1(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state||(t._state={}),t._state}function M1(){const t=x1();return t.globalOptions=t.globalOptions||{...k1},t.globalOptions}function GT(t,e,r,n){return r=r||[],r=Array.isArray(r)?r:[r],JT(t,r),tE(e,t,n)}function JT(t,e){X_(t,null,k1,qT,e);for(const r of e){const n=t&&t[r.id]||{},i=r.options&&r.options[r.id]||{},o=r.deprecatedOptions&&r.deprecatedOptions[r.id]||{};X_(n,r.id,i,o,e)}}function X_(t,e,r,n,i){const o=e||"Top level",f=e?`${e}.`:"";for(const p in t){const y=!e&&Gl(t[p]),T=p==="baseUri"&&!e,R=p==="workerUrl"&&e;if(!(p in r)&&!T&&!R){if(p in n)W_.warn(`${o} loader option '${f}${p}' no longer supported, use '${n[p]}'`)();else if(!y){const x=eE(p,i);W_.warn(`${o} loader option '${f}${p}' not recognized. ${x}`)()}}}}function eE(t,e){const r=t.toLowerCase();let n="";for(const i of e)for(const o in i.options){if(t===o)return`Did you mean '${i.id}.${o}'?`;const f=o.toLowerCase();(r.startsWith(f)||f.startsWith(r))&&(n=n||`Did you mean '${i.id}.${o}'?`)}return n}function tE(t,e,r){const i={...t.options||{}};return rE(i,r),i.log===null&&(i.log=new KT),$_(i,M1()),$_(i,e),i}function $_(t,e){for(const r in e)if(r in e){const n=e[r];V_(n)&&V_(t[r])?t[r]={...t[r],...e[r]}:t[r]=e[r]}}function rE(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function ag(t){return t?(Array.isArray(t)&&(t=t[0]),Array.isArray(t==null?void 0:t.extensions)):!1}function Ag(t){jc(t,"null loader"),jc(ag(t),"invalid loader");let e;return Array.isArray(t)&&(e=t[1],t=t[0],t={...t,options:{...t.options,...e}}),(t!=null&&t.parseTextSync||t!=null&&t.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}const N1=()=>{const t=x1();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function nE(t){const e=N1();t=Array.isArray(t)?t:[t];for(const r of t){const n=Ag(r);e.find(i=>n===i)||e.unshift(n)}}function iE(){return N1()}const sE=/\.([^.]+)$/;async function oE(t,e=[],r,n){if(!O1(t))return null;let i=Q_(t,e,{...r,nothrow:!0},n);if(i)return i;if(Aa(t)&&(t=await t.slice(0,10).arrayBuffer(),i=Q_(t,e,r,n)),!i&&!(r!=null&&r.nothrow))throw new Error(D1(t));return i}function Q_(t,e=[],r,n){if(!O1(t))return null;if(e&&!Array.isArray(e))return Ag(e);let i=[];e&&(i=i.concat(e)),r!=null&&r.ignoreRegisteredLoaders||i.push(...iE()),AE(i);const o=aE(t,i,r,n);if(!o&&!(r!=null&&r.nothrow))throw new Error(D1(t));return o}function aE(t,e,r,n){const i=Of(t),o=og(t),f=sg(i)||(n==null?void 0:n.url);let p=null,y="";return r!=null&&r.mimeType&&(p=Eh(e,r==null?void 0:r.mimeType),y=`match forced by supplied MIME type ${r==null?void 0:r.mimeType}`),p=p||lE(e,f),y=y||(p?`matched url ${f}`:""),p=p||Eh(e,o),y=y||(p?`matched MIME type ${o}`:""),p=p||cE(e,t),y=y||(p?`matched initial data ${I1(t)}`:""),r!=null&&r.fallbackMimeType&&(p=p||Eh(e,r==null?void 0:r.fallbackMimeType),y=y||(p?`matched fallback MIME type ${o}`:"")),y&&iT.log(1,`selectLoader selected ${p==null?void 0:p.name}: ${y}.`),p}function O1(t){return!(t instanceof Response&&t.status===204)}function D1(t){const e=Of(t),r=og(t);let n="No valid loader found (";n+=e?`${b1(e)}, `:"no url provided, ",n+=`MIME type: ${r?`"${r}"`:"not provided"}, `;const i=t?I1(t):"";return n+=i?` first bytes: "${i}"`:"first bytes: not available",n+=")",n}function AE(t){for(const e of t)Ag(e)}function lE(t,e){const r=e&&sE.exec(e),n=r&&r[1];return n?uE(t,n):null}function uE(t,e){e=e.toLowerCase();for(const r of t)for(const n of r.extensions)if(n.toLowerCase()===e)return r;return null}function Eh(t,e){var r;for(const n of t)if((r=n.mimeTypes)!=null&&r.some(i=>z_(e,i))||z_(e,`application/x.${n.id}`))return n;return null}function cE(t,e){if(!e)return null;for(const r of t)if(typeof e=="string"){if(fE(e,r))return r}else if(ArrayBuffer.isView(e)){if(Y_(e.buffer,e.byteOffset,r))return r}else if(e instanceof ArrayBuffer&&Y_(e,0,r))return r;return null}function fE(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(n=>t.startsWith(n))}function Y_(t,e,r){return(Array.isArray(r.tests)?r.tests:[r.tests]).some(i=>hE(t,e,r,i))}function hE(t,e,r,n){if(n instanceof ArrayBuffer)return wT(n,t,n.byteLength);switch(typeof n){case"function":return n(t);case"string":const i=sd(t,e,n.length);return n===i;default:return!1}}function I1(t,e=5){return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?sd(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?sd(t,0,e):""}function sd(t,e,r){if(t.byteLength<e+r)return"";const n=new DataView(t);let i="";for(let o=0;o<r;o++)i+=String.fromCharCode(n.getUint8(e+o));return i}const dE=256*1024;function*gE(t,e){const r=(e==null?void 0:e.chunkSize)||dE;let n=0;const i=new TextEncoder;for(;n<t.length;){const o=Math.min(t.length-n,r),f=t.slice(n,n+o);n+=o,yield i.encode(f)}}const pE=256*1024;function*_E(t,e={}){const{chunkSize:r=pE}=e;let n=0;for(;n<t.byteLength;){const i=Math.min(t.byteLength-n,r),o=new ArrayBuffer(i),f=new Uint8Array(t,n,i);new Uint8Array(o).set(f),n+=i,yield o}}const mE=1024*1024;async function*yE(t,e){const r=(e==null?void 0:e.chunkSize)||mE;let n=0;for(;n<t.size;){const i=n+r,o=await t.slice(n,i).arrayBuffer();n=i,yield o}}function K_(t,e){return ng?vE(t,e):wE(t)}async function*vE(t,e){const r=t.getReader();let n;try{for(;;){const i=n||r.read();e!=null&&e._streamReadAhead&&(n=r.read());const{done:o,value:f}=await i;if(o)return;yield S1(f)}}catch{r.releaseLock()}}async function*wE(t,e){for await(const r of t)yield S1(r)}function TE(t,e){if(typeof t=="string")return gE(t,e);if(t instanceof ArrayBuffer)return _E(t,e);if(Aa(t))return yE(t,e);if(C1(t))return K_(t,e);if(aa(t))return K_(t.body,e);throw new Error("makeIterator")}const F1="Cannot convert supplied data type";function EE(t,e,r){if(e.text&&typeof t=="string")return t;if(NT(t)&&(t=t.buffer),t instanceof ArrayBuffer){const n=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let n=t.buffer;const i=t.byteLength||t.length;return(t.byteOffset!==0||i!==n.byteLength)&&(n=n.slice(t.byteOffset,t.byteOffset+i)),n}throw new Error(F1)}async function SE(t,e,r){const n=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||n)return EE(t,e);if(Aa(t)&&(t=await P1(t)),aa(t)){const i=t;return await HT(i),e.binary?await i.arrayBuffer():await i.text()}if(C1(t)&&(t=TE(t,r)),xT(t)||MT(t))return ST(t);throw new Error(F1)}function L1(t,e){const r=M1(),n=t||r;return typeof n.fetch=="function"?n.fetch:Gl(n.fetch)?i=>j_(i,n.fetch):e!=null&&e.fetch?e==null?void 0:e.fetch:j_}function bE(t,e,r){if(r)return r;const n={fetch:L1(e,t),...t};if(n.url){const i=sg(n.url);n.baseUrl=i,n.queryString=BT(n.url),n.filename=b1(i),n.baseUrl=PT(i)}return Array.isArray(n.loaders)||(n.loaders=null),n}function CE(t,e){if(t&&!Array.isArray(t))return t;let r;if(t&&(r=Array.isArray(t)?t:[t]),e&&e.loaders){const n=Array.isArray(e.loaders)?e.loaders:[e.loaders];r=r?[...r,...n]:n}return r&&r.length?r:void 0}async function $c(t,e,r,n){e&&!Array.isArray(e)&&!ag(e)&&(n=void 0,r=e,e=void 0),t=await t,r=r||{};const i=Of(t),f=CE(e,n),p=await oE(t,f,r);return p?(r=GT(r,p,f,i),n=bE({url:i,_parse:$c,loaders:f},r,n||null),await RE(p,t,r,n)):null}async function RE(t,e,r,n){if(_T(t),r=sT(t.options,r),aa(e)){const o=e,{ok:f,redirected:p,status:y,statusText:T,type:R,url:x}=o,M=Object.fromEntries(o.headers.entries());n.response={headers:M,ok:f,redirected:p,status:y,statusText:T,type:R,url:x}}e=await SE(e,t,r);const i=t;if(i.parseTextSync&&typeof e=="string")return i.parseTextSync(e,r,n);if(mT(t,r))return await yT(t,e,r,n,$c);if(i.parseText&&typeof e=="string")return await i.parseText(e,r,n);if(i.parse)return await i.parse(e,r,n);throw Zs(!i.parseSync),new Error(`${t.id} loader - no parser found and worker is disabled`)}async function od(t,e,r,n){let i,o;!Array.isArray(e)&&!ag(e)?(i=[],o=e):(i=e,o=r);const f=L1(o);let p=t;return typeof t=="string"&&(p=await f(t)),Aa(t)&&(p=await f(t)),Array.isArray(i)?await $c(p,i,o):await $c(p,i,o)}const PE="4.3.2";var qm;const kE=(qm=globalThis.loaders)==null?void 0:qm.parseImageNode,ad=typeof Image<"u",Ad=typeof ImageBitmap<"u",xE=!!kE,ld=ng?!0:xE;function ME(t){switch(t){case"auto":return Ad||ad||ld;case"imagebitmap":return Ad;case"image":return ad;case"data":return ld;default:throw new Error(`@loaders.gl/images: image ${t} not supported in this environment`)}}function NE(){if(Ad)return"imagebitmap";if(ad)return"image";if(ld)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function OE(t){const e=IE(t);if(!e)throw new Error("Not an image");return e}function DE(t){switch(OE(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),r=e.getContext("2d");if(!r)throw new Error("getImageData");return e.width=t.width,e.height=t.height,r.drawImage(t,0,0),r.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function IE(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}const FE=/^data:image\/svg\+xml/,LE=/\.svg((\?|#).*)?$/;function lg(t){return t&&(FE.test(t)||LE.test(t))}function UE(t,e){if(lg(e)){let n=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(n=unescape(encodeURIComponent(n)))}catch(o){throw new Error(o.message)}return`data:image/svg+xml;base64,${btoa(n)}`}return U1(t,e)}function U1(t,e){if(lg(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function B1(t,e,r){const n=UE(t,r),i=self.URL||self.webkitURL,o=typeof n!="string"&&i.createObjectURL(n);try{return await BE(o||n,e)}finally{o&&i.revokeObjectURL(o)}}async function BE(t,e){const r=new Image;return r.src=t,e.image&&e.image.decode&&r.decode?(await r.decode(),r):await new Promise((n,i)=>{try{r.onload=()=>n(r),r.onerror=o=>{const f=o instanceof Error?o.message:"error";i(new Error(f))}}catch(o){i(o)}})}const VE={};let Z_=!0;async function zE(t,e,r){let n;lg(r)?n=await B1(t,e,r):n=U1(t,r);const i=e&&e.imagebitmap;return await HE(n,i)}async function HE(t,e=null){if((jE(e)||!Z_)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(r){console.warn(r),Z_=!1}return await createImageBitmap(t)}function jE(t){for(const e in t||VE)return!1;return!0}function WE(t){return!YE(t,"ftyp",4)||!(t[8]&96)?null:XE(t)}function XE(t){switch($E(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function $E(t,e,r){return String.fromCharCode(...t.slice(e,r))}function QE(t){return[...t].map(e=>e.charCodeAt(0))}function YE(t,e,r=0){const n=QE(e);for(let i=0;i<n.length;++i)if(n[i]!==t[i+r])return!1;return!0}const Li=!1,Dl=!0;function V1(t){const e=Jl(t);return ZE(e)||JE(e)||qE(e)||GE(e)||KE(e)}function KE(t){const e=new Uint8Array(t instanceof DataView?t.buffer:t),r=WE(e);return r?{mimeType:r.mimeType,width:0,height:0}:null}function ZE(t){const e=Jl(t);return e.byteLength>=24&&e.getUint32(0,Li)===2303741511?{mimeType:"image/png",width:e.getUint32(16,Li),height:e.getUint32(20,Li)}:null}function qE(t){const e=Jl(t);return e.byteLength>=10&&e.getUint32(0,Li)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,Dl),height:e.getUint16(8,Dl)}:null}function GE(t){const e=Jl(t);return e.byteLength>=14&&e.getUint16(0,Li)===16973&&e.getUint32(2,Dl)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,Dl),height:e.getUint32(22,Dl)}:null}function JE(t){const e=Jl(t);if(!(e.byteLength>=3&&e.getUint16(0,Li)===65496&&e.getUint8(2)===255))return null;const{tableMarkers:n,sofMarkers:i}=eS();let o=2;for(;o+9<e.byteLength;){const f=e.getUint16(o,Li);if(i.has(f))return{mimeType:"image/jpeg",height:e.getUint16(o+5,Li),width:e.getUint16(o+7,Li)};if(!n.has(f))return null;o+=2,o+=e.getUint16(o,Li)}return null}function eS(){const t=new Set([65499,65476,65484,65501,65534]);for(let r=65504;r<65520;++r)t.add(r);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function Jl(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function tS(t,e){var i;const{mimeType:r}=V1(t)||{},n=(i=globalThis.loaders)==null?void 0:i.parseImageNode;return jc(n),await n(t,r)}async function rS(t,e,r){e=e||{};const i=(e.image||{}).type||"auto",{url:o}=r||{},f=nS(i);let p;switch(f){case"imagebitmap":p=await zE(t,e,o);break;case"image":p=await B1(t,e,o);break;case"data":p=await tS(t);break;default:jc(!1)}return i==="data"&&(p=DE(p)),p}function nS(t){switch(t){case"auto":case"data":return NE();default:return ME(t),t}}const iS=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],sS=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],oS={image:{type:"auto",decode:!0}},aS={dataType:null,batchType:null,id:"image",module:"images",name:"Images",version:PE,mimeTypes:sS,extensions:iS,parse:rS,tests:[t=>!!V1(new DataView(t))],options:oS},tr=new ql({id:"deck"});let ud={};function AS(t){ud=t}function ln(t,e,r,n){tr.level>0&&ud[t]&&ud[t].call(null,e,r,n)}function lS(t){const e=t[0],r=t[t.length-1];return e==="{"&&r==="}"||e==="["&&r==="]"}const uS={dataType:null,batchType:null,id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:lS,parseTextSync:JSON.parse};function cS(){const t="9.0.38",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error(`deck.gl - multiple versions detected: ${e} vs ${t}`);return e||(tr.log(1,`deck.gl ${t}`)(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:tr,_registerLoggers:AS},nE([uS,[aS,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}const fS=cS();function Ko(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const Sh={number:{type:"number",validate(t,e){return Number.isFinite(t)&&typeof e=="object"&&(e.max===void 0||t<=e.max)&&(e.min===void 0||t>=e.min)}},array:{type:"array",validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function hS(t){const e={};for(const[r,n]of Object.entries(t))e[r]=gS(n);return e}function dS(t,e,r){const n={};for(const[i,o]of Object.entries(e))t&&i in t&&!o.private?(o.validate&&Ko(o.validate(t[i],o),`${r}: invalid ${i}`),n[i]=t[i]):n[i]=o.value;return n}function gS(t){let e=q_(t);if(e!=="object")return{value:t,...Sh[e],type:e};if(typeof t=="object")return t?t.type!==void 0?{...t,...Sh[t.type],type:t.type}:t.value===void 0?{type:"object",value:t}:(e=q_(t.value),{...t,...Sh[e],type:e}):{type:"object",value:null};throw new Error("props")}function q_(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}const pS=`#ifdef MODULE_LOGDEPTH
logdepth_adjustPosition(gl_Position);
#endif
`,_S=`#ifdef MODULE_MATERIAL
gl_FragColor = material_filterColor(gl_FragColor);
#endif
#ifdef MODULE_LIGHTING
gl_FragColor = lighting_filterColor(gl_FragColor);
#endif
#ifdef MODULE_FOG
gl_FragColor = fog_filterColor(gl_FragColor);
#endif
#ifdef MODULE_PICKING
gl_FragColor = picking_filterHighlightColor(gl_FragColor);
gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif
#ifdef MODULE_LOGDEPTH
logdepth_setFragDepth();
#endif
`,mS={vertex:pS,fragment:_S},G_=/void\s+main\s*\([^)]*\)\s*\{\n?/,J_=/}\n?[^{}]*$/,bh=[],Dc="__LUMA_INJECT_DECLARATIONS__";function yS(t){const e={vertex:{},fragment:{}};for(const r in t){let n=t[r];const i=vS(r);typeof n=="string"&&(n={order:0,injection:n}),e[i][r]=n}return e}function vS(t){const e=t.slice(0,2);switch(e){case"vs":return"vertex";case"fs":return"fragment";default:throw new Error(e)}}function Qc(t,e,r,n=!1){const i=e==="vertex";for(const o in r){const f=r[o];f.sort((y,T)=>y.order-T.order),bh.length=f.length;for(let y=0,T=f.length;y<T;++y)bh[y]=f[y].injection;const p=`${bh.join(`
`)}
`;switch(o){case"vs:#decl":i&&(t=t.replace(Dc,p));break;case"vs:#main-start":i&&(t=t.replace(G_,y=>y+p));break;case"vs:#main-end":i&&(t=t.replace(J_,y=>p+y));break;case"fs:#decl":i||(t=t.replace(Dc,p));break;case"fs:#main-start":i||(t=t.replace(G_,y=>y+p));break;case"fs:#main-end":i||(t=t.replace(J_,y=>p+y));break;default:t=t.replace(o,y=>y+p)}}return t=t.replace(Dc,""),n&&(t=t.replace(/\}\s*$/,o=>o+mS[e])),t}let wS=1;class Zo{constructor(e){F(this,"name");F(this,"vs");F(this,"fs");F(this,"getModuleUniforms");F(this,"dependencies");F(this,"deprecations");F(this,"defines");F(this,"injections");F(this,"uniforms",{});F(this,"uniformTypes",{});const{name:r,vs:n,fs:i,dependencies:o=[],uniformTypes:f={},uniformPropTypes:p={},getUniforms:y,deprecations:T=[],defines:R={},inject:x={}}=e;Ko(typeof r=="string"),this.name=r,this.vs=n,this.fs=i,this.getModuleUniforms=y,this.dependencies=Zo.instantiateModules(o),this.deprecations=this._parseDeprecationDefinitions(T),this.defines=R,this.injections=yS(x),this.uniformTypes=f,p&&(this.uniforms=hS(p))}static instantiateModules(e){return e.map(r=>{if(r instanceof Zo)return r;Ko(typeof r!="string",`Shader module use by name is deprecated. Import shader module '${JSON.stringify(r)}' and use it directly.`),r.name||(console.warn("shader module has no name"),r.name=`shader-module-${wS++}`);const n=new Zo(r);return n.dependencies=Zo.instantiateModules(r.dependencies||[]),n})}getModuleSource(e){let r;switch(e){case"vertex":r=this.vs||"";break;case"fragment":r=this.fs||"";break;default:Ko(!1)}const n=this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_");return`// ----- MODULE ${this.name} ---------------

#define MODULE_${n}
${r}

`}getUniforms(e,r){return this.getModuleUniforms?this.getModuleUniforms(e,r):dS(e,this.uniforms,this.name)}getDefines(){return this.defines}checkDeprecations(e,r){this.deprecations.forEach(n=>{var i;(i=n.regex)!=null&&i.test(e)&&(n.deprecated?r.deprecated(n.old,n.new)():r.removed(n.old,n.new)())})}_parseDeprecationDefinitions(e){return e.forEach(r=>{switch(r.type){case"function":r.regex=new RegExp(`\\b${r.old}\\(`);break;default:r.regex=new RegExp(`${r.type} ${r.old};`)}}),e}_defaultGetUniforms(e={}){const r={},n=this.uniforms;for(const i in n){const o=n[i];i in e&&!o.private?(o.validate&&Ko(o.validate(e[i],o),`${this.name}: invalid ${i}`),r[i]=e[i]):r[i]=o.value}return r}}function e2(t){if(t.source&&t.platformInfo.type==="webgpu")return{...t,vs:void 0,fs:void 0};if(!t.vs)throw new Error("no vertex shader");const e=t2(t.platformInfo,t.vs);let r;return t.fs&&(r=t2(t.platformInfo,t.fs)),{...t,vs:e,fs:r}}function t2(t,e){if(typeof e=="string")return e;switch(t.type){case"webgpu":if(e!=null&&e.wgsl)return e.wgsl;throw new Error("WebGPU does not support GLSL shaders");default:if(e!=null&&e.glsl)return e.glsl;throw new Error("WebGL does not support WGSL shaders")}}function Df(t){const e=Zo.instantiateModules(t);return TS(e)}function TS(t){const e={},r={};return z1({modules:t,level:0,moduleMap:e,moduleDepth:r}),Object.keys(r).sort((n,i)=>r[i]-r[n]).map(n=>e[n])}function z1(t){const{modules:e,level:r,moduleMap:n,moduleDepth:i}=t;if(r>=5)throw new Error("Possible loop in shader dependency graph");for(const o of e)n[o.name]=o,(i[o.name]===void 0||i[o.name]<r)&&(i[o.name]=r);for(const o of e)o.dependencies&&z1({modules:o.dependencies,level:r+1,moduleMap:n,moduleDepth:i})}function ES(t){switch(t==null?void 0:t.gpu.toLowerCase()){case"apple":return`#define APPLE_GPU
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"nvidia":return`#define NVIDIA_GPU
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function SS(t,e){var n;if(Number(((n=t.match(/^#version[ \t]+(\d+)/m))==null?void 0:n[1])||100)!==300)throw new Error("luma.gl v9 only supports GLSL 3.00 shader sources");switch(e){case"vertex":return t=r2(t,bS),t;case"fragment":return t=r2(t,CS),t;default:throw new Error(e)}}const H1=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],bS=[...H1,[cd("attribute"),"in $1"],[cd("varying"),"out $1"]],CS=[...H1,[cd("varying"),"in $1"]];function r2(t,e){for(const[r,n]of e)t=t.replace(r,n);return t}function cd(t){return new RegExp(`\\b${t}[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)`,"g")}function j1(t,e){let r="";for(const n in t){const i=t[n];if(r+=`void ${i.signature} {
`,i.header&&(r+=`  ${i.header}`),e[n]){const o=e[n];o.sort((f,p)=>f.order-p.order);for(const f of o)r+=`  ${f.injection}
`}i.footer&&(r+=`  ${i.footer}`),r+=`}
`}return r}function W1(t){const e={vertex:{},fragment:{}};for(const r of t){let n,i;typeof r!="string"?(n=r,i=n.hook):(n={},i=r),i=i.trim();const[o,f]=i.split(":"),p=i.replace(/\(.+/,""),y=Object.assign(n,{signature:f});switch(o){case"vs":e.vertex[p]=y;break;case"fs":e.fragment[p]=y;break;default:throw new Error(o)}}return e}function RS(t,e){return{name:PS(t,e),language:"glsl",version:kS(t)}}function PS(t,e="unnamed"){const n=/#define[^\S\r\n]*SHADER_NAME[^\S\r\n]*([A-Za-z0-9_-]+)\s*/.exec(t);return n?n[1]:e}function kS(t){let e=100;const r=t.match(/[^\s]+/g);if(r&&r.length>=2&&r[0]==="#version"){const n=parseInt(r[1],10);Number.isFinite(n)&&(e=n)}if(e!==100&&e!==300)throw new Error(`Invalid GLSL version ${e}`);return e}const X1=`

${Dc}
`,xS=`precision highp float;
`;function MS(t){const e=Df(t.modules||[]);return{source:fd(t.platformInfo,{...t,source:t.source,stage:"vertex",modules:e}),getUniforms:ug(e)}}function NS(t){const e=Df(t.modules||[]);return{vs:fd(t.platformInfo,{...t,source:t.vs,stage:"vertex",modules:e}),fs:fd(t.platformInfo,{...t,source:t.fs,stage:"fragment",modules:e}),getUniforms:ug(e)}}function OS(t){const{vs:e,fs:r}=t,n=Df(t.modules||[]);return{vs:n2(t.platformInfo,{...t,source:e,stage:"vertex",modules:n}),fs:n2(t.platformInfo,{...t,source:r,stage:"fragment",modules:n}),getUniforms:ug(n)}}function fd(t,e){const{source:r,stage:n,modules:i,hookFunctions:o=[],inject:f={},log:p}=e;Ko(typeof r=="string","shader source must be a string");const y=r;let T="";const R=W1(o),x={},M={},U={};for(const j in f){const G=typeof f[j]=="string"?{injection:f[j],order:0}:f[j],re=/^(v|f)s:(#)?([\w-]+)$/.exec(j);if(re){const se=re[2],ce=re[3];se?ce==="decl"?M[j]=[G]:U[j]=[G]:x[j]=[G]}else U[j]=[G]}const W=t.type!=="webgpu"?i:[];for(const j of W){p&&j.checkDeprecations(y,p);const G=j.getModuleSource(n,"wgsl");T+=G;const re=j.injections[n];for(const se in re){const ce=/^(v|f)s:#([\w-]+)$/.exec(se);if(ce){const be=ce[2]==="decl"?M:U;be[se]=be[se]||[],be[se].push(re[se])}else x[se]=x[se]||[],x[se].push(re[se])}}return T+=X1,T=Qc(T,n,M),T+=j1(R[n],x),T+=y,T=Qc(T,n,U),T}function n2(t,e){const{id:r,source:n,stage:i,language:o="glsl",modules:f,defines:p={},hookFunctions:y=[],inject:T={},prologue:R=!0,log:x}=e;Ko(typeof n=="string","shader source must be a string");const M=o==="glsl"?RS(n).version:-1,U=t.shaderLanguageVersion,W=M===100?"#version 100":"#version 300 es",G=n.split(`
`).slice(1).join(`
`),re={};f.forEach(Xe=>{Object.assign(re,Xe.getDefines())}),Object.assign(re,p);let se="";switch(o){case"wgsl":break;case"glsl":se=R?`${W}

// ----- PROLOGUE -------------------------
${DS({id:r,source:n,stage:i})}
${`#define SHADER_TYPE_${i.toUpperCase()}`}
${ES(t)}
${i==="fragment"?xS:""}

// ----- APPLICATION DEFINES -------------------------

${IS(re)}

`:`${W}
`;break}const ce=W1(y),we={},be={},Pe={};for(const Xe in T){const nt=typeof T[Xe]=="string"?{injection:T[Xe],order:0}:T[Xe],Ue=/^(v|f)s:(#)?([\w-]+)$/.exec(Xe);if(Ue){const Je=Ue[2],it=Ue[3];Je?it==="decl"?be[Xe]=[nt]:Pe[Xe]=[nt]:we[Xe]=[nt]}else Pe[Xe]=[nt]}for(const Xe of f){x&&Xe.checkDeprecations(G,x);const nt=Xe.getModuleSource(i);se+=nt;const Ue=Xe.injections[i];for(const Je in Ue){const it=/^(v|f)s:#([\w-]+)$/.exec(Je);if(it){const _t=it[2]==="decl"?be:Pe;_t[Je]=_t[Je]||[],_t[Je].push(Ue[Je])}else we[Je]=we[Je]||[],we[Je].push(Ue[Je])}}return se+="// ----- MAIN SHADER SOURCE -------------------------",se+=X1,se=Qc(se,i,be),se+=j1(ce[i],we),se+=G,se=Qc(se,i,Pe),o==="glsl"&&M!==U&&(se=SS(se,i)),se.trim()}function ug(t){return function(r){const n={};for(const i of t){const o=i.getUniforms(r,n);Object.assign(n,o)}return n}}function DS(t){const{id:e,source:r,stage:n}=t;return e&&r.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME ${e}_${n}

`:""}function IS(t={}){let e="";for(const r in t){const n=t[r];(n||Number.isFinite(n))&&(e+=`#define ${r.toUpperCase()} ${t[r]}
`)}return e}const Qo=class Qo{constructor(){F(this,"_hookFunctions",[]);F(this,"_defaultModules",[])}static getDefaultShaderAssembler(){return Qo.defaultShaderAssembler=Qo.defaultShaderAssembler||new Qo,Qo.defaultShaderAssembler}addDefaultModule(e){this._defaultModules.find(r=>r.name===(typeof e=="string"?e:e.name))||this._defaultModules.push(e)}removeDefaultModule(e){const r=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(n=>n.name!==r)}addShaderHook(e,r){r&&(e=Object.assign(r,{hook:e})),this._hookFunctions.push(e)}assembleShader(e){const r=this._getModuleList(e.modules),n=this._hookFunctions,i=e2(e);return{...MS({platformInfo:e.platformInfo,...i,modules:r,hookFunctions:n}),modules:r}}assembleShaderPair(e){const r=e2(e),n=this._getModuleList(e.modules),i=this._hookFunctions,{platformInfo:o}=e;return{...e.platformInfo.shaderLanguage==="wgsl"?NS({platformInfo:o,...r,modules:n,hookFunctions:i}):OS({platformInfo:o,...r,modules:n,hookFunctions:i}),modules:n}}_getModuleList(e=[]){const r=new Array(this._defaultModules.length+e.length),n={};let i=0;for(let o=0,f=this._defaultModules.length;o<f;++o){const p=this._defaultModules[o],y=p.name;r[i++]=p,n[y]=!0}for(let o=0,f=e.length;o<f;++o){const p=e[o],y=p.name;n[y]||(r[i++]=p,n[y]=!0)}return r.length=i,Zo.instantiateModules(r)}};F(Qo,"defaultShaderAssembler");let Yc=Qo;const FS=`out vec4 transform_output;
void main() {
transform_output = vec4(0);
}`,LS=`#version 300 es
${FS}`;function US(t){const{input:e,inputChannels:r,output:n}={};if(!e)return LS;if(!r)throw new Error("inputChannels");const i=BS(r),o=VS(e,r);return`#version 300 es
in ${i} ${e};
out vec4 ${n};
void main() {
  ${n} = ${o};
}`}function BS(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error(`invalid channels: ${t}`)}}function VS(t,e){switch(e){case 1:return`vec4(${t}, 0.0, 0.0, 1.0)`;case 2:return`vec4(${t}, 0.0, 1.0)`;case 3:return`vec4(${t}, 1.0)`;case 4:return t;default:throw new Error(`invalid channels: ${e}`)}}const Be=new ql({id:"luma.gl"});class zS{constructor(){F(this,"stats",new Map)}getStats(e){return this.get(e)}get(e){return this.stats.has(e)||this.stats.set(e,new Nf({id:e})),this.stats.get(e)}}const cg=new zS;function HS(){const t="9.0.28",e="set luma.log.level=1 (or higher) to trace rendering";if(globalThis.luma&&globalThis.luma.VERSION!==t)throw new Error(`luma.gl - multiple VERSIONs detected: ${globalThis.luma.VERSION} vs ${t}`);return globalThis.luma||(eo()&&Be.log(1,`${t} - ${e}`)(),globalThis.luma=globalThis.luma||{VERSION:t,version:t,log:Be,stats:cg}),t}const jS=HS();function WS(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)?t:null}function Hl(t){return Array.isArray(t)?t.length===0||typeof t[0]=="number"?t:null:WS(t)}const Ch={};function la(t="id"){Ch[t]=Ch[t]||1;const e=Ch[t]++;return`${t}-${e}`}function Kc(t){let e=!0;for(const r in t){e=!1;break}return e}var ed;let rr=(ed=class{constructor(e,r,n){F(this,"id");F(this,"props");F(this,"userData",{});F(this,"_device");F(this,"destroyed",!1);F(this,"allocatedBytes",0);F(this,"_attachedResources",new Set);if(!e)throw new Error("no device");this._device=e,this.props=XS(r,n);const i=this.props.id!=="undefined"?this.props.id:la(this[Symbol.toStringTag]);this.props.id=i,this.id=i,this.userData=this.props.userData||{},this.addStats()}destroy(){this.destroyResource()}delete(){return this.destroy(),this}toString(){return`${this[Symbol.toStringTag]||this.constructor.name}(${this.id})`}getProps(){return this.props}attachResource(e){this._attachedResources.add(e)}detachResource(e){this._attachedResources.delete(e)}destroyAttachedResource(e){this._attachedResources.delete(e)&&e.destroy()}destroyAttachedResources(){for(const e of Object.values(this._attachedResources))e.destroy();this._attachedResources=new Set}destroyResource(){this.destroyAttachedResources(),this.removeStats(),this.destroyed=!0}removeStats(){const e=this._device.statsManager.getStats("Resource Counts"),r=this[Symbol.toStringTag];e.get(`${r}s Active`).decrementCount()}trackAllocatedMemory(e,r=this[Symbol.toStringTag]){const n=this._device.statsManager.getStats("Resource Counts");n.get("GPU Memory").addCount(e),n.get(`${r} Memory`).addCount(e),this.allocatedBytes=e}trackDeallocatedMemory(e=this[Symbol.toStringTag]){const r=this._device.statsManager.getStats("Resource Counts");r.get("GPU Memory").subtractCount(this.allocatedBytes),r.get(`${e} Memory`).subtractCount(this.allocatedBytes),this.allocatedBytes=0}addStats(){const e=this._device.statsManager.getStats("Resource Counts"),r=this[Symbol.toStringTag];e.get("Resources Created").incrementCount(),e.get(`${r}s Created`).incrementCount(),e.get(`${r}s Active`).incrementCount()}},F(ed,"defaultProps",{id:"undefined",handle:void 0,userData:void 0}),ed);function XS(t,e){const r={...e};for(const n in t)t[n]!==void 0&&(r[n]=t[n]);return r}const Zr=class Zr extends rr{constructor(r,n){const i={...n};(n.usage||0)&Zr.INDEX&&!n.indexType&&(n.data instanceof Uint32Array?i.indexType="uint32":n.data instanceof Uint16Array&&(i.indexType="uint16"));super(r,i,Zr.defaultProps);F(this,"usage");F(this,"indexType");F(this,"updateTimestamp");F(this,"debugData",new ArrayBuffer(0));this.usage=n.usage||0,this.indexType=i.indexType,this.updateTimestamp=r.incrementTimestamp()}get[Symbol.toStringTag](){return"Buffer"}readSyncWebGL(r,n){throw new Error("not implemented")}_setDebugData(r,n,i){const o=ArrayBuffer.isView(r)?r.buffer:r,f=Math.min(r?r.byteLength:i,Zr.DEBUG_DATA_MAX_LENGTH);r===null?this.debugData=new ArrayBuffer(f):n===0&&i===r.byteLength?this.debugData=o.slice(0,f):this.debugData=o.slice(n,n+f)}};F(Zr,"defaultProps",{...rr.defaultProps,usage:0,byteLength:0,byteOffset:0,data:null,indexType:"uint16",mappedAtCreation:!1}),F(Zr,"MAP_READ",1),F(Zr,"MAP_WRITE",2),F(Zr,"COPY_SRC",4),F(Zr,"COPY_DST",8),F(Zr,"INDEX",16),F(Zr,"VERTEX",32),F(Zr,"UNIFORM",64),F(Zr,"STORAGE",128),F(Zr,"INDIRECT",256),F(Zr,"QUERY_RESOLVE",512),F(Zr,"DEBUG_DATA_MAX_LENGTH",32);let Ar=Zr;function $1(t){const e=i2[t],r=$S(e),n=t.includes("norm"),i=!n&&!t.startsWith("float"),o=t.startsWith("s");return{dataType:i2[t],byteLength:r,integer:i,signed:o,normalized:n}}function $S(t){return QS[t]}const i2={uint8:"uint8",sint8:"sint8",unorm8:"uint8",snorm8:"sint8",uint16:"uint16",sint16:"sint16",unorm16:"uint16",snorm16:"sint16",float16:"float16",float32:"float32",uint32:"uint32",sint32:"sint32"},QS={uint8:1,sint8:1,uint16:2,sint16:2,float16:2,float32:4,uint32:4,sint32:4},YS=["bc1","bc2","bc3","bc4","bc5","bc6","bc7","etc1","etc2","eac","atc","astc","pvrtc"],KS=/^(rg?b?a?)([0-9]*)([a-z]*)(-srgb)?(-webgl|-unsized)?$/;function ZS(t){return YS.some(e=>t.startsWith(e))}function Q1(t){const e=KS.exec(t);if(e){const[,r,n,i,o,f]=e;if(r){const p=`${i}${n}`,y=$1(p);return{format:r,components:r.length,srgb:o==="-srgb",unsized:f==="-unsized",webgl:f==="-webgl",...y}}}return GS(t)}const qS={"rgba4unorm-webgl":{format:"rgba",bpp:2},"rgb565unorm-webgl":{format:"rgb",bpp:2},"rgb5a1unorm-webgl":{format:"rgba",bbp:2},rgb9e5ufloat:{format:"rgb",bbp:4},rg11b10ufloat:{format:"rgb",bbp:4},rgb10a2unorm:{format:"rgba",bbp:4},"rgb10a2uint-webgl":{format:"rgba",bbp:4},stencil8:{components:1,bpp:1,a:"stencil"},depth16unorm:{components:1,bpp:2,a:"depth"},depth24plus:{components:1,bpp:3,a:"depth"},depth32float:{components:1,bpp:4,a:"depth"},"depth24plus-stencil8":{components:2,bpp:4,a:"depth-stencil"},"depth24unorm-stencil8":{components:2,bpp:4,a:"depth-stencil"},"depth32float-stencil8":{components:2,bpp:4,a:"depth-stencil"}};function GS(t){var r;const e=qS[t];if(!e)throw new Error(`Unknown format ${t}`);return{format:e.format||"",components:e.components||((r=e.format)==null?void 0:r.length)||1,byteLength:e.bpp||1,srgb:!1,unsized:!1}}class JS{}class eb{constructor(e=[],r){F(this,"features");F(this,"disabledFeatures");this.features=new Set(e),this.disabledFeatures=r||{}}*[Symbol.iterator](){yield*this.features}has(e){return!this.disabledFeatures[e]&&this.features.has(e)}}const Bl=class Bl{constructor(e){F(this,"id");F(this,"props");F(this,"userData",{});F(this,"statsManager",cg);F(this,"_lumaData",{});F(this,"timestamp",0);this.props={...Bl.defaultProps,...e},this.id=this.props.id||la(this[Symbol.toStringTag].toLowerCase())}get[Symbol.toStringTag](){return"Device"}isTextureFormatCompressed(e){return ZS(e)}loseDevice(){return!1}getCanvasContext(){if(!this.canvasContext)throw new Error("Device has no CanvasContext");return this.canvasContext}createTexture(e){return(e instanceof Promise||typeof e=="string")&&(e={data:e}),this._createTexture(e)}createCommandEncoder(e={}){throw new Error("not implemented")}readPixelsToArrayWebGL(e,r){throw new Error("not implemented")}readPixelsToBufferWebGL(e,r){throw new Error("not implemented")}setParametersWebGL(e){throw new Error("not implemented")}getParametersWebGL(e){throw new Error("not implemented")}withParametersWebGL(e,r){throw new Error("not implemented")}clearWebGL(e){throw new Error("not implemented")}resetWebGL(){throw new Error("not implemented")}incrementTimestamp(){return this.timestamp++}onError(e){this.props.onError(e)}_getBufferProps(e){(e instanceof ArrayBuffer||ArrayBuffer.isView(e))&&(e={data:e});const r={...e};return(e.usage||0)&Ar.INDEX&&!e.indexType&&(e.data instanceof Uint32Array?r.indexType="uint32":e.data instanceof Uint16Array?r.indexType="uint16":Be.warn("indices buffer content must be of integer type")()),r}};F(Bl,"defaultProps",{id:null,canvas:null,container:null,manageState:!0,width:800,height:600,requestMaxLimits:!0,debug:!!Be.get("debug"),spector:!!(Be.get("spector")||Be.get("spectorjs")),break:[],initalizeFeatures:!0,disabledFeatures:{"compilation-status-async-webgl":!0},gl:null,onError:e=>Be.error(e.message)}),F(Bl,"VERSION",jS);let uA=Bl;function ir(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const yl=new Map,sA=class sA{static registerDevices(e){for(const r of e)ir(r.type&&r.isSupported&&r.create),yl.set(r.type,r)}static getAvailableDevices(){return Array.from(yl).map(e=>e.type)}static getSupportedDevices(){return Array.from(yl).filter(e=>e.isSupported()).map(e=>e.type)}static setDefaultDeviceProps(e){Object.assign(uA.defaultProps,e)}static async attachDevice(e){const r=s2(e.devices)||yl;if(e.handle instanceof WebGL2RenderingContext){const n=r.get("webgl");if(n)return await n.attach(e.handle)}if(e.handle===null){const n=r.get("unknown");if(n)return await n.attach(null)}throw new Error("Failed to attach device. Ensure `@luma.gl/webgl` and/or `@luma.gl/webgpu` modules are imported.")}static async createDevice(e={}){var o,f;e={...sA.defaultProps,...e},e.gl&&(e.type="webgl");const r=s2(e.devices)||yl;let n,i;switch(e.type){case"webgpu":if(n=r.get("webgpu"),n)return await n.create(e);break;case"webgl":if(i=r.get("webgl"),i)return await i.create(e);break;case"unknown":const p=r.get("unknown");if(p)return await p.create(e);break;case"best-available":if(n=r.get("webgpu"),(o=n==null?void 0:n.isSupported)!=null&&o.call(n))return await n.create(e);if(i=r.get("webgl"),(f=i==null?void 0:i.isSupported)!=null&&f.call(i))return await i.create(e);break}throw new Error("No matching device found. Ensure `@luma.gl/webgl` and/or `@luma.gl/webgpu` modules are imported.")}static enforceWebGL2(e=!0){const r=HTMLCanvasElement.prototype;if(!e&&r.originalGetContext){r.getContext=r.originalGetContext,r.originalGetContext=void 0;return}r.originalGetContext=r.getContext,r.getContext=function(n,i){return n==="webgl"||n==="experimental-webgl"?this.originalGetContext("webgl2",i):this.originalGetContext(n,i)}}};F(sA,"defaultProps",{...uA.defaultProps,type:"best-available",devices:void 0}),F(sA,"stats",cg),F(sA,"log",Be);let oA=sA;function s2(t){if(!t||(t==null?void 0:t.length)===0)return null;const e=new Map;for(const r of t)e.set(r.type,r);return e}const tb=eo()&&typeof document<"u",If=()=>tb&&document.readyState==="complete",rb={canvas:null,width:800,height:600,useDevicePixels:!0,autoResize:!0,container:null,visible:!0,colorSpace:"srgb",alphaMode:"opaque"};class fg{constructor(e){F(this,"id");F(this,"props");F(this,"canvas");F(this,"htmlCanvas");F(this,"offscreenCanvas");F(this,"type");F(this,"width",1);F(this,"height",1);F(this,"resizeObserver");F(this,"_canvasSizeInfo",{clientWidth:0,clientHeight:0,devicePixelRatio:1});if(this.props={...rb,...e},e=this.props,!eo()){this.id="node-canvas-context",this.type="node",this.width=this.props.width,this.height=this.props.height,this.canvas=null;return}if(e.canvas)typeof e.canvas=="string"?this.canvas=sb(e.canvas):this.canvas=e.canvas;else{const r=ob(e),n=ib((e==null?void 0:e.container)||null);n.insertBefore(r,n.firstChild),this.canvas=r,e!=null&&e.visible||(this.canvas.style.visibility="hidden")}this.canvas instanceof HTMLCanvasElement?(this.id=this.canvas.id,this.type="html-canvas",this.htmlCanvas=this.canvas):(this.id="offscreen-canvas",this.type="offscreen-canvas",this.offscreenCanvas=this.canvas),this.canvas instanceof HTMLCanvasElement&&e.autoResize&&(this.resizeObserver=new ResizeObserver(r=>{for(const n of r)n.target===this.canvas&&this.update()}),this.resizeObserver.observe(this.canvas))}static get isPageLoaded(){return If()}getDevicePixelRatio(e){return typeof OffscreenCanvas<"u"&&this.canvas instanceof OffscreenCanvas||(e=e===void 0?this.props.useDevicePixels:e,!e||e<=0)?1:e===!0?typeof window<"u"&&window.devicePixelRatio||1:e}getPixelSize(){switch(this.type){case"node":return[this.width,this.height];case"offscreen-canvas":return[this.canvas.width,this.canvas.height];case"html-canvas":const e=this.getDevicePixelRatio(),r=this.canvas;return r.parentElement?[r.clientWidth*e,r.clientHeight*e]:[this.canvas.width,this.canvas.height];default:throw new Error(this.type)}}getAspect(){const[e,r]=this.getPixelSize();return e/r}cssToDeviceRatio(){var e;try{const[r]=this.getDrawingBufferSize(),n=this._canvasSizeInfo.clientWidth||((e=this.htmlCanvas)==null?void 0:e.clientWidth);return n?r/n:1}catch{return 1}}cssToDevicePixels(e,r=!0){const n=this.cssToDeviceRatio(),[i,o]=this.getDrawingBufferSize();return ab(e,n,i,o,r)}setDevicePixelRatio(e,r={}){if(!this.htmlCanvas)return;let n="width"in r?r.width:this.htmlCanvas.clientWidth,i="height"in r?r.height:this.htmlCanvas.clientHeight;(!n||!i)&&(Be.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,n=this.htmlCanvas.width||1,i=this.htmlCanvas.height||1);const o=this._canvasSizeInfo;if(o.clientWidth!==n||o.clientHeight!==i||o.devicePixelRatio!==e){let f=e;const p=Math.floor(n*f),y=Math.floor(i*f);this.htmlCanvas.width=p,this.htmlCanvas.height=y;const[T,R]=this.getDrawingBufferSize();(T!==p||R!==y)&&(f=Math.min(T/n,R/i),this.htmlCanvas.width=Math.floor(n*f),this.htmlCanvas.height=Math.floor(i*f),Be.warn("Device pixel ratio clamped")()),this._canvasSizeInfo.clientWidth=n,this._canvasSizeInfo.clientHeight=i,this._canvasSizeInfo.devicePixelRatio=e}}getDrawingBufferSize(){const e=this.device.gl;if(!e)throw new Error("canvas size");return[e.drawingBufferWidth,e.drawingBufferHeight]}_setAutoCreatedCanvasId(e){var r;((r=this.htmlCanvas)==null?void 0:r.id)==="lumagl-auto-created-canvas"&&(this.htmlCanvas.id=e)}}F(fg,"pageLoaded",nb());function nb(){return If()||typeof window>"u"?Promise.resolve():new Promise(t=>{window.addEventListener("load",()=>t())})}function ib(t){if(typeof t=="string"){const e=document.getElementById(t);if(!e&&!If())throw new Error(`Accessing '${t}' before page was loaded`);if(!e)throw new Error(`${t} is not an HTML element`);return e}else if(t)return t;return document.body}function sb(t){const e=document.getElementById(t);if(!e&&!If())throw new Error(`Accessing '${t}' before page was loaded`);if(!(e instanceof HTMLCanvasElement))throw new Error("Object is not a canvas element");return e}function ob(t){const{width:e,height:r}=t,n=document.createElement("canvas");return n.id="lumagl-auto-created-canvas",n.width=e||1,n.height=r||1,n.style.width=Number.isFinite(e)?`${e}px`:"100%",n.style.height=Number.isFinite(r)?`${r}px`:"100%",n}function ab(t,e,r,n,i){const o=t,f=o2(o[0],e,r);let p=a2(o[1],e,n,i),y=o2(o[0]+1,e,r);const T=y===r-1?y:y-1;y=a2(o[1]+1,e,n,i);let R;return i?(y=y===0?y:y+1,R=p,p=y):R=y===n-1?y:y-1,{x:f,y:p,width:Math.max(T-f+1,1),height:Math.max(R-p+1,1)}}function o2(t,e,r){return Math.min(Math.round(t*e),r-1)}function a2(t,e,r,n){return n?Math.max(0,r-1-Math.round(t*e)):Math.min(Math.round(t*e),r-1)}const rs=class rs extends rr{constructor(r,n,i=rs.defaultProps){super(r,n,i);F(this,"dimension");F(this,"format");F(this,"width");F(this,"height");F(this,"depth");F(this,"updateTimestamp");this.dimension=this.props.dimension,this.format=this.props.format,this.width=this.props.width,this.height=this.props.height,this.depth=this.props.depth,this.updateTimestamp=r.incrementTimestamp()}get[Symbol.toStringTag](){return"Texture"}};F(rs,"defaultProps",{...rr.defaultProps,data:null,dimension:"2d",format:"rgba8unorm",width:void 0,height:void 0,depth:1,mipmaps:!0,compressed:!1,usage:0,mipLevels:void 0,samples:void 0,type:void 0,sampler:{},view:void 0}),F(rs,"COPY_SRC",1),F(rs,"COPY_DST",2),F(rs,"TEXTURE_BINDING",4),F(rs,"STORAGE_BINDING",8),F(rs,"RENDER_ATTACHMENT",16);let Qn=rs;const _f=class _f extends rr{get[Symbol.toStringTag](){return"TextureView"}constructor(e,r){super(e,r,_f.defaultProps)}};F(_f,"defaultProps",{...rr.defaultProps,format:void 0,dimension:void 0,aspect:"all",baseMipLevel:0,mipLevelCount:void 0,baseArrayLayer:0,arrayLayerCount:void 0});let Zc=_f;function Ab(t,e,r){let n="";const i=e.split(/\r?\n/),o=t.slice().sort((f,p)=>f.lineNum-p.lineNum);switch((r==null?void 0:r.showSourceCode)||"no"){case"all":let f=0;for(let p=1;p<=i.length;p++)for(n+=Y1(i[p-1],p,r);o.length>f&&o[f].lineNum===p;){const y=o[f++];n+=A2(y,i,y.lineNum,{...r,inlineSource:!1})}return n;case"issues":case"no":for(const p of t)n+=A2(p,i,p.lineNum,{inlineSource:(r==null?void 0:r.showSourceCode)!=="no"});return n}}function A2(t,e,r,n){if(n!=null&&n.inlineSource){const i=lb(e,r),o=t.linePos>0?`${" ".repeat(t.linePos+5)}^^^
`:"";return`
${i}${o}${t.type.toUpperCase()}: ${t.message}

`}return n!=null&&n.html?`<div class='luma-compiler-log-error' style="color:red;"><b> ${t.type.toUpperCase()}: ${t.message}</b></div>`:`${t.type.toUpperCase()}: ${t.message}`}function lb(t,e,r){let n="";for(let i=e-2;i<=e;i++){const o=t[i-1];o!==void 0&&(n+=Y1(o,e,r))}return n}function Y1(t,e,r){const n=r!=null&&r.html?cb(t):t;return`${ub(String(e),4)}: ${n}${r!=null&&r.html?"<br/>":`
`}`}function ub(t,e){let r="";for(let n=t.length;n<e;++n)r+=" ";return r+t}function cb(t){return t.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}function K1(t,e){return{name:fb(t,e),language:"glsl",version:hb(t)}}function fb(t,e="unnamed"){const n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/.exec(t);return n?n[1]:e}function hb(t){let e=100;const r=t.match(/[^\s]+/g);if(r&&r.length>=2&&r[0]==="#version"){const n=parseInt(r[1],10);Number.isFinite(n)&&(e=n)}return e}const mf=class mf extends rr{constructor(r,n){super(r,{id:db(n),...n},mf.defaultProps);F(this,"stage");F(this,"source");F(this,"compilationStatus","pending");this.stage=this.props.stage,this.source=this.props.source}get[Symbol.toStringTag](){return"Shader"}getCompilationInfoSync(){return null}getTranslatedSource(){return null}async debugShader(r=this.props.debug){switch(r){case"never":return;case"errors":if(this.compilationStatus==="success")return;break}const n=await this.getCompilationInfo();this.props.debug==="warnings"&&(n==null?void 0:n.length)===0||this._displayShaderLog(n)}_displayShaderLog(r){var T;if(typeof document>"u"||!(document!=null&&document.createElement))return;const n=K1(this.source).name,i=`${this.stage} ${n}`;let o=Ab(r,this.source,{showSourceCode:"all",html:!0});const f=this.getTranslatedSource();f&&(o+=`<br /><br /><h1>Translated Source</h1><br /><br /><code style="user-select:text;"><pre>${f}</pre></code>`);const p=document.createElement("Button");p.innerHTML=`
<h1>Shader Compilation Error in ${i}</h1><br /><br />
<code style="user-select:text;"><pre>
${o}
</pre></code>`,p.style.top="10px",p.style.left="10px",p.style.position="absolute",p.style.zIndex="9999",p.style.width="100%",p.style.textAlign="left",document.body.appendChild(p);const y=document.getElementsByClassName("luma-compiler-log-error");(T=y[0])!=null&&T.scrollIntoView&&y[0].scrollIntoView(),p.onclick=()=>{const R=`data:text/plain,${encodeURIComponent(this.source)}`;navigator.clipboard.writeText(R)}}};F(mf,"defaultProps",{...rr.defaultProps,language:"auto",stage:void 0,source:"",sourceMap:null,entryPoint:"main",debug:"errors"});let qc=mf;function db(t){return K1(t.source).name||t.id||la(`unnamed ${t.stage}-shader`)}const yf=class yf extends rr{get[Symbol.toStringTag](){return"Sampler"}constructor(e,r){super(e,r,yf.defaultProps)}};F(yf,"defaultProps",{...rr.defaultProps,type:"color-sampler",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",addressModeW:"clamp-to-edge",magFilter:"nearest",minFilter:"nearest",mipmapFilter:"nearest",lodMinClamp:0,lodMaxClamp:32,compare:"less-equal",maxAnisotropy:1});let Gc=yf;const vf=class vf extends rr{constructor(r,n={}){super(r,n,vf.defaultProps);F(this,"width");F(this,"height");F(this,"colorAttachments",[]);F(this,"depthStencilAttachment",null);this.width=this.props.width,this.height=this.props.height}get[Symbol.toStringTag](){return"Framebuffer"}resize(r){let n=!r;if(r){const[i,o]=Array.isArray(r)?r:[r.width,r.height];n=n||o!==this.height||i!==this.width,this.width=i,this.height=o}n&&(Be.log(2,`Resizing framebuffer ${this.id} to ${this.width}x${this.height}`)(),this.resizeAttachments(this.width,this.height))}autoCreateAttachmentTextures(){if(this.props.colorAttachments.length===0&&!this.props.depthStencilAttachment)throw new Error("Framebuffer has noattachments");this.colorAttachments=this.props.colorAttachments.map(n=>{if(typeof n=="string"){const i=this.createColorTexture(n);return this.attachResource(i),i.view}return n instanceof Qn?n.view:n});const r=this.props.depthStencilAttachment;if(r)if(typeof r=="string"){const n=this.createDepthStencilTexture(r);this.attachResource(n),this.depthStencilAttachment=n.view}else r instanceof Qn?this.depthStencilAttachment=r.view:this.depthStencilAttachment=r}createColorTexture(r){return this.device.createTexture({id:"color-attachment",usage:Qn.RENDER_ATTACHMENT,format:r,width:this.width,height:this.height})}createDepthStencilTexture(r){return this.device.createTexture({id:"depth-stencil-attachment",usage:Qn.RENDER_ATTACHMENT,format:r,width:this.width,height:this.height})}resizeAttachments(r,n){for(let i=0;i<this.colorAttachments.length;++i)if(this.colorAttachments[i]){const o=this.device._createTexture({...this.colorAttachments[i].props,width:r,height:n});this.destroyAttachedResource(this.colorAttachments[i]),this.colorAttachments[i]=o.view,this.attachResource(o.view)}if(this.depthStencilAttachment){const i=this.device._createTexture({...this.depthStencilAttachment.props,width:r,height:n});this.destroyAttachedResource(this.depthStencilAttachment),this.depthStencilAttachment=i.view,this.attachResource(i)}}};F(vf,"defaultProps",{...rr.defaultProps,width:1,height:1,colorAttachments:[],depthStencilAttachment:null});let Jc=vf;const wf=class wf extends rr{constructor(r,n){super(r,n,wf.defaultProps);F(this,"shaderLayout");F(this,"bufferLayout");F(this,"linkStatus","pending");F(this,"hash","");this.shaderLayout=this.props.shaderLayout,this.bufferLayout=this.props.bufferLayout||[]}get[Symbol.toStringTag](){return"RenderPipeline"}setUniformsWebGL(r){throw new Error("Use uniform blocks")}};F(wf,"defaultProps",{...rr.defaultProps,vs:null,vertexEntryPoint:"vertexMain",vsConstants:{},fs:null,fragmentEntryPoint:"fragmentMain",fsConstants:{},shaderLayout:null,bufferLayout:[],topology:"triangle-list",parameters:{},bindings:{},uniforms:{}});let cA=wf;const Tf=class Tf extends rr{get[Symbol.toStringTag](){return"RenderPass"}constructor(e,r){super(e,r,Tf.defaultProps)}};F(Tf,"defaultProps",{...rr.defaultProps,framebuffer:null,parameters:void 0,clearColor:[0,0,0,0],clearDepth:1,clearStencil:0,depthReadOnly:!1,stencilReadOnly:!1,discard:!1,occlusionQuerySet:void 0,timestampQuerySet:void 0,beginTimestampIndex:void 0,endTimestampIndex:void 0});let hd=Tf;const Ef=class Ef extends rr{constructor(r,n){super(r,n,Ef.defaultProps);F(this,"hash","")}get[Symbol.toStringTag](){return"ComputePipeline"}};F(Ef,"defaultProps",{...rr.defaultProps,shader:void 0,entryPoint:void 0,constants:{},shaderLayout:void 0});let ef=Ef;const Sf=class Sf extends rr{get[Symbol.toStringTag](){return"CommandEncoder"}constructor(e,r){super(e,r,Sf.defaultProps)}};F(Sf,"defaultProps",{...rr.defaultProps,measureExecutionTime:void 0});let dd=Sf;const bf=class bf extends rr{get[Symbol.toStringTag](){return"CommandBuffer"}constructor(e,r){super(e,r,bf.defaultProps)}};F(bf,"defaultProps",{...rr.defaultProps});let gd=bf;function gb(t){const[e,r]=_b[t],n=e==="i32"||e==="u32",i=e!=="u32",o=mb[e]*r,f=pb(e,r);return{dataType:e,components:r,defaultVertexFormat:f,byteLength:o,integer:n,signed:i}}function pb(t,e){let r;switch(t){case"f32":r="float32";break;case"i32":r="sint32";break;case"u32":r="uint32";break;case"f16":return e<=2?"float16x2":"float16x4"}return e===1?r:`${r}x${e}`}const _b={f32:["f32",1],"vec2<f32>":["f32",2],"vec3<f32>":["f32",3],"vec4<f32>":["f32",4],f16:["f16",1],"vec2<f16>":["f16",2],"vec3<f16>":["f16",3],"vec4<f16>":["f16",4],i32:["i32",1],"vec2<i32>":["i32",2],"vec3<i32>":["i32",3],"vec4<i32>":["i32",4],u32:["u32",1],"vec2<u32>":["u32",2],"vec3<u32>":["u32",3],"vec4<u32>":["u32",4]},mb={f32:4,f16:2,i32:4,u32:4};function Z1(t){let e;t.endsWith("-webgl")&&(t.replace("-webgl",""),e=!0);const[r,n]=t.split("x"),i=r,o=n?parseInt(n):1,f=$1(i),p={type:i,components:o,byteLength:f.byteLength*o,integer:f.integer,signed:f.signed,normalized:f.normalized};return e&&(p.webglOnly=!0),p}function q1(t,e){const r={};for(const n of t.attributes)r[n.name]=vb(t,e,n.name);return r}function yb(t,e,r=16){const n=q1(t,e),i=new Array(r).fill(null);for(const o of Object.values(n))i[o.location]=o;return i}function vb(t,e,r){const n=wb(t,r),i=Tb(e,r);if(!n)return null;const o=gb(n.type),f=(i==null?void 0:i.vertexFormat)||o.defaultVertexFormat,p=Z1(f);return{attributeName:(i==null?void 0:i.attributeName)||n.name,bufferName:(i==null?void 0:i.bufferName)||n.name,location:n.location,shaderType:n.type,shaderDataType:o.dataType,shaderComponents:o.components,vertexFormat:f,bufferDataType:p.type,bufferComponents:p.components,normalized:p.normalized,integer:o.integer,stepMode:(i==null?void 0:i.stepMode)||n.stepMode,byteOffset:(i==null?void 0:i.byteOffset)||0,byteStride:(i==null?void 0:i.byteStride)||0}}function wb(t,e){const r=t.attributes.find(n=>n.name===e);return r||Be.warn(`shader layout attribute "${e}" not present in shader`),r||null}function Tb(t,e){Eb(t);let r=Sb(t,e);return r||(r=bb(t,e),r)?r:(Be.warn(`layout for attribute "${e}" not present in buffer layout`),null)}function Eb(t){for(const e of t)(e.attributes&&e.format||!e.attributes&&!e.format)&&Be.warn(`BufferLayout ${name} must have either 'attributes' or 'format' field`)}function Sb(t,e){for(const r of t)if(r.format&&r.name===e)return{attributeName:r.name,bufferName:e,stepMode:r.stepMode,vertexFormat:r.format,byteOffset:0,byteStride:r.byteStride||0};return null}function bb(t,e){var r;for(const n of t){let i=n.byteStride;if(typeof n.byteStride!="number")for(const f of n.attributes||[]){const p=Z1(f.format);i+=p.byteLength}const o=(r=n.attributes)==null?void 0:r.find(f=>f.attribute===e);if(o)return{attributeName:o.attribute,bufferName:n.name,stepMode:n.stepMode,vertexFormat:o.format,byteOffset:o.byteOffset,byteStride:i}}return null}function Cb(t,e){const r={...t,attributes:t.attributes.map(n=>({...n}))};for(const n of(e==null?void 0:e.attributes)||[]){const i=r.attributes.find(o=>o.name===n.name);i?(i.type=n.type||i.type,i.stepMode=n.stepMode||i.stepMode):Be.warn(`shader layout attribute ${n.name} not present in shader`)}return r}const Cf=class Cf extends rr{constructor(r,n){super(r,n,Cf.defaultProps);F(this,"maxVertexAttributes");F(this,"attributeInfos");F(this,"indexBuffer",null);F(this,"attributes");this.maxVertexAttributes=r.limits.maxVertexAttributes,this.attributes=new Array(this.maxVertexAttributes).fill(null),this.attributeInfos=yb(n.renderPipeline.shaderLayout,n.renderPipeline.bufferLayout,this.maxVertexAttributes)}get[Symbol.toStringTag](){return"VertexArray"}setConstantWebGL(r,n){throw new Error("constant attributes not supported")}};F(Cf,"defaultProps",{...rr.defaultProps,renderPipeline:null});let pd=Cf;const Rf=class Rf extends rr{get[Symbol.toStringTag](){return"TransformFeedback"}constructor(e,r){super(e,r,Rf.defaultProps)}};F(Rf,"defaultProps",{...rr.defaultProps,layout:void 0,buffers:{}});let _d=Rf;const Pf=class Pf extends rr{get[Symbol.toStringTag](){return"QuerySet"}constructor(e,r){super(e,r,Pf.defaultProps)}};F(Pf,"defaultProps",{...rr.defaultProps,type:void 0,count:void 0});let md=Pf;const Rb={f32:{type:"f32",components:1},i32:{type:"i32",components:1},u32:{type:"u32",components:1},"vec2<f32>":{type:"f32",components:2},"vec3<f32>":{type:"f32",components:3},"vec4<f32>":{type:"f32",components:4},"vec2<i32>":{type:"i32",components:2},"vec3<i32>":{type:"i32",components:3},"vec4<i32>":{type:"i32",components:4},"vec2<u32>":{type:"u32",components:2},"vec3<u32>":{type:"u32",components:3},"vec4<u32>":{type:"u32",components:4},"mat2x2<f32>":{type:"f32",components:4},"mat2x3<f32>":{type:"f32",components:6},"mat2x4<f32>":{type:"f32",components:8},"mat3x2<f32>":{type:"f32",components:6},"mat3x3<f32>":{type:"f32",components:9},"mat3x4<f32>":{type:"f32",components:12},"mat4x2<f32>":{type:"f32",components:8},"mat4x3<f32>":{type:"f32",components:12},"mat4x4<f32>":{type:"f32",components:16}};function Pb(t){const e=Rb[t];return ir(t),e}function kb(t,e){switch(e){case 1:return t;case 2:return t+t%2;default:return t+(4-t%4)%4}}let _c;function G1(t){return(!_c||_c.byteLength<t)&&(_c=new ArrayBuffer(t)),_c}function xb(t,e){const r=G1(t.BYTES_PER_ELEMENT*e);return new t(r,0,e)}function Mb(t){const{target:e,source:r,start:n=0,count:i=1}=t,o=r.length,f=i*o;let p=0;for(let y=n;p<o;p++)e[y++]=r[p];for(;p<f;)p<f-p?(e.copyWithin(n+p,n,n+p),p*=2):(e.copyWithin(n+p,n,n+f-p),p=f);return t.target}const l2=1024;class Nb{constructor(e){F(this,"layout",{});F(this,"byteLength");let r=0;for(const[i,o]of Object.entries(e)){const f=Pb(o),{type:p,components:y}=f;r=kb(r,y);const T=r;r+=y,this.layout[i]={type:p,size:y,offset:T}}r+=(4-r%4)%4;const n=r*4;this.byteLength=Math.max(n,l2)}getData(e){const r=Math.max(this.byteLength,l2),n=G1(r),i={i32:new Int32Array(n),u32:new Uint32Array(n),f32:new Float32Array(n),f16:new Uint16Array(n)};for(const[o,f]of Object.entries(e)){const p=this.layout[o];if(!p){Be.warn(`Supplied uniform value ${o} not present in uniform block layout`)();continue}const{type:y,size:T,offset:R}=p,x=i[y];if(T===1){if(typeof f!="number"&&typeof f!="boolean"){Be.warn(`Supplied value for single component uniform ${o} is not a number: ${f}`)();continue}x[R]=Number(f)}else{const M=Hl(f);if(!M){Be.warn(`Supplied value for multi component / array uniform ${o} is not a numeric array: ${f}`)();continue}x.set(M,R)}}return new Uint8Array(n)}has(e){return!!this.layout[e]}get(e){return this.layout[e]}}function Ob(t,e,r=16){if(t!==e)return!1;const n=Hl(t);if(!n)return!1;const i=Hl(e);if(i&&n.length===i.length){for(let o=0;o<n.length;++o)if(i[o]!==n[o])return!1}return!0}function Db(t){const e=Hl(t);return e?e.slice():t}class Ib{constructor(e){F(this,"name");F(this,"uniforms",{});F(this,"modifiedUniforms",{});F(this,"modified",!0);F(this,"bindingLayout",{});F(this,"needsRedraw","initialized");var r;if(this.name=e==null?void 0:e.name,e!=null&&e.name&&(e!=null&&e.shaderLayout)){const n=(r=e==null?void 0:e.shaderLayout.bindings)==null?void 0:r.find(o=>o.type==="uniform"&&o.name===(e==null?void 0:e.name));if(!n)throw new Error(e==null?void 0:e.name);const i=n;for(const o of i.uniforms||[])this.bindingLayout[o.name]=o}}setUniforms(e){for(const[r,n]of Object.entries(e))this._setUniform(r,n),this.needsRedraw||this.setNeedsRedraw(`${this.name}.${r}=${n}`)}setNeedsRedraw(e){this.needsRedraw=this.needsRedraw||e}getAllUniforms(){return this.modifiedUniforms={},this.needsRedraw=!1,this.uniforms||{}}_setUniform(e,r){Ob(this.uniforms[e],r)||(this.uniforms[e]=Db(r),this.modifiedUniforms[e]=!0,this.modified=!0)}}class Fb{constructor(e){F(this,"uniformBlocks",new Map);F(this,"uniformBufferLayouts",new Map);F(this,"uniformBuffers",new Map);for(const[r,n]of Object.entries(e)){const i=r,o=new Nb(n.uniformTypes||{});this.uniformBufferLayouts.set(i,o);const f=new Ib({name:r});f.setUniforms(n.defaultUniforms||{}),this.uniformBlocks.set(i,f)}}destroy(){for(const e of this.uniformBuffers.values())e.destroy()}setUniforms(e){for(const[r,n]of Object.entries(e))this.uniformBlocks.get(r).setUniforms(n);this.updateUniformBuffers()}getUniformBufferByteLength(e){return this.uniformBufferLayouts.get(e).byteLength}getUniformBufferData(e){const r=this.uniformBlocks.get(e).getAllUniforms();return this.uniformBufferLayouts.get(e).getData(r)}createUniformBuffer(e,r,n){n&&this.setUniforms(n);const i=this.getUniformBufferByteLength(r),o=e.createBuffer({usage:Ar.UNIFORM|Ar.COPY_DST,byteLength:i}),f=this.getUniformBufferData(r);return o.write(f),o}getManagedUniformBuffer(e,r){if(!this.uniformBuffers.get(r)){const n=this.getUniformBufferByteLength(r),i=e.createBuffer({usage:Ar.UNIFORM|Ar.COPY_DST,byteLength:n});this.uniformBuffers.set(r,i)}return this.uniformBuffers.get(r)}updateUniformBuffers(){let e=!1;for(const r of this.uniformBlocks.keys()){const n=this.updateUniformBuffer(r);e||(e=n)}return e&&Be.log(3,`UniformStore.updateUniformBuffers(): ${e}`)(),e}updateUniformBuffer(e){const r=this.uniformBlocks.get(e),n=this.uniformBuffers.get(e);let i=!1;if(n&&r.needsRedraw){i||(i=r.needsRedraw);const o=this.getUniformBufferData(e);this.uniformBuffers.get(e).write(o);const p=this.uniformBlocks.get(e).getAllUniforms();Be.log(4,`Writing to uniform buffer ${String(e)}`,o,p)()}return i}}function J1(t){const e=ArrayBuffer.isView(t)?t.constructor:t;switch(e){case Float32Array:return"float32";case Uint16Array:return"uint16";case Uint32Array:return"uint32";case Uint8Array:case Uint8ClampedArray:return"uint8";case Int8Array:return"sint8";case Int16Array:return"sint16";case Int32Array:return"sint32";default:throw new Error(e.constructor.name)}}function ey(t){switch(t){case"float32":return Float32Array;case"uint32":return Uint32Array;case"sint32":return Int32Array;case"uint16":case"unorm16":return Uint16Array;case"sint16":case"snorm16":return Int16Array;case"uint8":case"unorm8":return Uint8Array;case"sint8":case"snorm8":return Int8Array;default:throw new Error(t)}}function Lb(t,e,r){if(!e||e>4)throw new Error(`size ${e}`);const n=e;let i=J1(t);if(i==="uint8"&&r&&n===1)return"unorm8-webgl";if(i==="uint8"&&r&&n===3)return"unorm8x3-webgl";if(i==="uint8"||i==="sint8"){if(n===1||n===3)throw new Error(`size: ${e}`);return r&&(i=i.replace("int","norm")),`${i}x${n}`}if(i==="uint16"||i==="sint16"){if(n===1||n===3)throw new Error(`size: ${e}`);return r&&(i=i.replace("int","norm")),`${i}x${n}`}return n===1?i:`${i}x${n}`}function Ub(t){return Hl(t)!==null||typeof t=="number"||typeof t=="boolean"}function hg(t){const e={bindings:{},uniforms:{}};return Object.keys(t).forEach(r=>{const n=t[r];Ub(n)?e.uniforms[r]=n:e.bindings[r]=n}),e}function Bb(t,e,r){const{removedProps:n={},deprecatedProps:i={},replacedProps:o={}}=r;for(const p in n)if(p in e){const T=n[p]?`${t}.${n[p]}`:"N/A";Be.removed(`${t}.${p}`,T)()}for(const p in i)if(p in e){const y=i[p];Be.deprecated(`${t}.${p}`,`${t}.${y}`)()}let f=null;for(const[p,y]of Object.entries(o))p in e&&(Be.deprecated(`${t}.${p}`,`${t}.${y}`)(),f=f||Object.assign({},e),f[y]=e[p],delete f[p]);return f||e}let Vb="";async function zb(t,e){return await new Promise((r,n)=>{try{const i=new Image;i.onload=()=>r(i),i.onerror=()=>n(new Error(`Could not load image ${t}.`)),i.crossOrigin=(e==null?void 0:e.crossOrigin)||"anonymous",i.src=t.startsWith("http")?t:Vb+t}catch(i){n(i)}})}async function ty(t,e){const r=document.getElementsByTagName("head")[0];if(!r)throw new Error("loadScript");const n=document.createElement("script");return n.setAttribute("type","text/javascript"),n.setAttribute("src",t),new Promise((i,o)=>{n.onload=i,n.onerror=f=>o(new Error(`Unable to load script '${t}': ${f}`)),r.appendChild(n)})}function yd(t,e,r){if(t===e)return!0;if(!r||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!yd(t[n],e[n],r-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(const o of n)if(!e.hasOwnProperty(o)||!yd(t[o],e[o],r-1))return!1;return!0}return!1}function Hb(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function jb(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}class Wb{constructor(){this.constants=new Map,this.aliases=new Map,this.structs=new Map}}class os{constructor(){}get isAstNode(){return!0}get astNodeType(){return""}evaluate(e){throw new Error("Cannot evaluate node")}evaluateString(e){return this.evaluate(e).toString()}search(e){}searchBlock(e,r){if(e){r(tf.instance);for(const n of e)n instanceof Array?this.searchBlock(n,r):n.search(r);r(rf.instance)}}}class tf extends os{}tf.instance=new tf;class rf extends os{}rf.instance=new rf;class lr extends os{constructor(){super()}}class vd extends lr{constructor(e,r,n,i,o,f){super(),this.calls=new Set,this.name=e,this.args=r,this.returnType=n,this.body=i,this.startLine=o,this.endLine=f}get astNodeType(){return"function"}search(e){this.searchBlock(this.body,e)}}class Xb extends lr{constructor(e){super(),this.expression=e}get astNodeType(){return"staticAssert"}search(e){this.expression.search(e)}}class $b extends lr{constructor(e,r){super(),this.condition=e,this.body=r}get astNodeType(){return"while"}search(e){this.condition.search(e),this.searchBlock(this.body,e)}}class Qb extends lr{constructor(e){super(),this.body=e}get astNodeType(){return"continuing"}search(e){this.searchBlock(this.body,e)}}class Yb extends lr{constructor(e,r,n,i){super(),this.init=e,this.condition=r,this.increment=n,this.body=i}get astNodeType(){return"for"}search(e){var r,n,i;(r=this.init)===null||r===void 0||r.search(e),(n=this.condition)===null||n===void 0||n.search(e),(i=this.increment)===null||i===void 0||i.search(e),this.searchBlock(this.body,e)}}class $o extends lr{constructor(e,r,n,i,o){super(),this.name=e,this.type=r,this.storage=n,this.access=i,this.value=o}get astNodeType(){return"var"}search(e){var r;e(this),(r=this.value)===null||r===void 0||r.search(e)}}class ry extends lr{constructor(e,r,n){super(),this.name=e,this.type=r,this.value=n}get astNodeType(){return"override"}search(e){var r;(r=this.value)===null||r===void 0||r.search(e)}}class wd extends lr{constructor(e,r,n,i,o){super(),this.name=e,this.type=r,this.storage=n,this.access=i,this.value=o}get astNodeType(){return"let"}search(e){var r;e(this),(r=this.value)===null||r===void 0||r.search(e)}}class u2 extends lr{constructor(e,r,n,i,o){super(),this.name=e,this.type=r,this.storage=n,this.access=i,this.value=o}get astNodeType(){return"const"}evaluate(e){return this.value.evaluate(e)}search(e){var r;e(this),(r=this.value)===null||r===void 0||r.search(e)}}var fA;(function(t){t.increment="++",t.decrement="--"})(fA||(fA={}));(function(t){function e(r){const n=r;if(n=="parse")throw new Error("Invalid value for IncrementOperator");return t[n]}t.parse=e})(fA||(fA={}));class Kb extends lr{constructor(e,r){super(),this.operator=e,this.variable=r}get astNodeType(){return"increment"}search(e){this.variable.search(e)}}var jl;(function(t){t.assign="=",t.addAssign="+=",t.subtractAssin="-=",t.multiplyAssign="*=",t.divideAssign="/=",t.moduloAssign="%=",t.andAssign="&=",t.orAssign="|=",t.xorAssign="^=",t.shiftLeftAssign="<<=",t.shiftRightAssign=">>="})(jl||(jl={}));(function(t){function e(r){const n=r;if(n=="parse")throw new Error("Invalid value for AssignOperator");return n}t.parse=e})(jl||(jl={}));class Zb extends lr{constructor(e,r,n){super(),this.operator=e,this.variable=r,this.value=n}get astNodeType(){return"assign"}search(e){this.variable.search(e),this.value.search(e)}}class ny extends lr{constructor(e,r){super(),this.name=e,this.args=r}get astNodeType(){return"call"}search(e){for(const r of this.args)r.search(e);e(this)}}class qb extends lr{constructor(e,r){super(),this.body=e,this.continuing=r}get astNodeType(){return"loop"}}class Gb extends lr{constructor(e,r){super(),this.condition=e,this.body=r}get astNodeType(){return"body"}}class Jb extends lr{constructor(e,r,n,i){super(),this.condition=e,this.body=r,this.elseif=n,this.else=i}get astNodeType(){return"if"}search(e){this.condition.search(e),this.searchBlock(this.body,e),this.searchBlock(this.elseif,e),this.searchBlock(this.else,e)}}class eC extends lr{constructor(e){super(),this.value=e}get astNodeType(){return"return"}search(e){var r;(r=this.value)===null||r===void 0||r.search(e)}}class tC extends lr{constructor(e){super(),this.name=e}get astNodeType(){return"enable"}}class rC extends lr{constructor(e){super(),this.extensions=e}get astNodeType(){return"requires"}}class nC extends lr{constructor(e,r){super(),this.severity=e,this.rule=r}get astNodeType(){return"diagnostic"}}class iy extends lr{constructor(e,r){super(),this.name=e,this.type=r}get astNodeType(){return"alias"}}class iC extends lr{constructor(){super()}get astNodeType(){return"discard"}}class sC extends lr{constructor(){super()}get astNodeType(){return"break"}}class oC extends lr{constructor(){super()}get astNodeType(){return"continue"}}class ua extends lr{constructor(e){super(),this.name=e}get astNodeType(){return"type"}get isStruct(){return!1}get isArray(){return!1}}class Xo extends ua{constructor(e,r,n,i){super(e),this.members=r,this.startLine=n,this.endLine=i}get astNodeType(){return"struct"}get isStruct(){return!0}getMemberIndex(e){for(let r=0;r<this.members.length;r++)if(this.members[r].name==e)return r;return-1}}class sy extends ua{constructor(e,r,n){super(e),this.format=r,this.access=n}get astNodeType(){return"template"}}class aC extends ua{constructor(e,r,n,i){super(e),this.storage=r,this.type=n,this.access=i}get astNodeType(){return"pointer"}}class oy extends ua{constructor(e,r,n,i){super(e),this.attributes=r,this.format=n,this.count=i}get astNodeType(){return"array"}get isArray(){return!0}}class Pl extends ua{constructor(e,r,n){super(e),this.format=r,this.access=n}get astNodeType(){return"sampler"}}class Wi extends os{constructor(){super()}}class AC extends Wi{constructor(e){super(),this.value=e}get astNodeType(){return"stringExpr"}toString(){return this.value}evaluateString(){return this.value}}class Ga extends Wi{constructor(e,r){super(),this.type=e,this.args=r}get astNodeType(){return"createExpr"}search(e){if(e(this),this.args)for(const r of this.args)r.search(e)}evaluate(e){return this.args[0].evaluate(e)}}class ay extends Wi{constructor(e,r){super(),this.name=e,this.args=r}get astNodeType(){return"callExpr"}evaluate(e){switch(this.name){case"abs":return Math.abs(this.args[0].evaluate(e));case"acos":return Math.acos(this.args[0].evaluate(e));case"acosh":return Math.acosh(this.args[0].evaluate(e));case"asin":return Math.asin(this.args[0].evaluate(e));case"asinh":return Math.asinh(this.args[0].evaluate(e));case"atan":return Math.atan(this.args[0].evaluate(e));case"atan2":return Math.atan2(this.args[0].evaluate(e),this.args[1].evaluate(e));case"atanh":return Math.atanh(this.args[0].evaluate(e));case"ceil":return Math.ceil(this.args[0].evaluate(e));case"clamp":return Math.min(Math.max(this.args[0].evaluate(e),this.args[1].evaluate(e)),this.args[2].evaluate(e));case"cos":return Math.cos(this.args[0].evaluate(e));case"degrees":return this.args[0].evaluate(e)*180/Math.PI;case"distance":return Math.sqrt(Math.pow(this.args[0].evaluate(e)-this.args[1].evaluate(e),2));case"dot":case"exp":return Math.exp(this.args[0].evaluate(e));case"exp2":return Math.pow(2,this.args[0].evaluate(e));case"floor":return Math.floor(this.args[0].evaluate(e));case"fma":return this.args[0].evaluate(e)*this.args[1].evaluate(e)+this.args[2].evaluate(e);case"fract":return this.args[0].evaluate(e)-Math.floor(this.args[0].evaluate(e));case"inverseSqrt":return 1/Math.sqrt(this.args[0].evaluate(e));case"log":return Math.log(this.args[0].evaluate(e));case"log2":return Math.log2(this.args[0].evaluate(e));case"max":return Math.max(this.args[0].evaluate(e),this.args[1].evaluate(e));case"min":return Math.min(this.args[0].evaluate(e),this.args[1].evaluate(e));case"mix":return this.args[0].evaluate(e)*(1-this.args[2].evaluate(e))+this.args[1].evaluate(e)*this.args[2].evaluate(e);case"modf":return this.args[0].evaluate(e)-Math.floor(this.args[0].evaluate(e));case"pow":return Math.pow(this.args[0].evaluate(e),this.args[1].evaluate(e));case"radians":return this.args[0].evaluate(e)*Math.PI/180;case"round":return Math.round(this.args[0].evaluate(e));case"sign":return Math.sign(this.args[0].evaluate(e));case"sin":return Math.sin(this.args[0].evaluate(e));case"sinh":return Math.sinh(this.args[0].evaluate(e));case"saturate":return Math.min(Math.max(this.args[0].evaluate(e),0),1);case"smoothstep":return this.args[0].evaluate(e)*this.args[0].evaluate(e)*(3-2*this.args[0].evaluate(e));case"sqrt":return Math.sqrt(this.args[0].evaluate(e));case"step":return this.args[0].evaluate(e)<this.args[1].evaluate(e)?0:1;case"tan":return Math.tan(this.args[0].evaluate(e));case"tanh":return Math.tanh(this.args[0].evaluate(e));case"trunc":return Math.trunc(this.args[0].evaluate(e));default:throw new Error("Non const function: "+this.name)}}search(e){for(const r of this.args)r.search(e);e(this)}}class Td extends Wi{constructor(e){super(),this.name=e}get astNodeType(){return"varExpr"}search(e){e(this),this.postfix&&this.postfix.search(e)}evaluate(e){const r=e.constants.get(this.name);if(!r)throw new Error("Cannot evaluate node");return r.evaluate(e)}}class c2 extends Wi{constructor(e,r){super(),this.name=e,this.initializer=r}get astNodeType(){return"constExpr"}evaluate(e){var r,n;if(this.initializer instanceof Ga){const i=(r=this.postfix)===null||r===void 0?void 0:r.evaluateString(e),o=(n=this.initializer.type)===null||n===void 0?void 0:n.name,f=e.structs.get(o),p=f==null?void 0:f.getMemberIndex(i);return p!==void 0&&p!=-1?this.initializer.args[p].evaluate(e):this.initializer.evaluate(e)}return this.initializer.evaluate(e)}search(e){this.initializer.search(e)}}class f2 extends Wi{constructor(e){super(),this.value=e}get astNodeType(){return"literalExpr"}evaluate(){return this.value}}class lC extends Wi{constructor(e,r){super(),this.type=e,this.value=r}get astNodeType(){return"bitcastExpr"}search(e){this.value.search(e)}}class h2 extends Wi{constructor(e){super(),this.contents=e}get astNodeType(){return"groupExpr"}evaluate(e){return this.contents[0].evaluate(e)}search(e){this.searchBlock(this.contents,e)}}class uC extends Wi{constructor(e){super(),this.index=e}search(e){this.index.search(e)}}class Ay extends Wi{constructor(){super()}}class cC extends Ay{constructor(e,r){super(),this.operator=e,this.right=r}get astNodeType(){return"unaryOp"}evaluate(e){switch(this.operator){case"+":return this.right.evaluate(e);case"-":return-this.right.evaluate(e);case"!":return this.right.evaluate(e)?0:1;case"~":return~this.right.evaluate(e);default:throw new Error("Unknown unary operator: "+this.operator)}}search(e){this.right.search(e)}}class Mi extends Ay{constructor(e,r,n){super(),this.operator=e,this.left=r,this.right=n}get astNodeType(){return"binaryOp"}evaluate(e){switch(this.operator){case"+":return this.left.evaluate(e)+this.right.evaluate(e);case"-":return this.left.evaluate(e)-this.right.evaluate(e);case"*":return this.left.evaluate(e)*this.right.evaluate(e);case"/":return this.left.evaluate(e)/this.right.evaluate(e);case"%":return this.left.evaluate(e)%this.right.evaluate(e);case"==":return this.left.evaluate(e)==this.right.evaluate(e)?1:0;case"!=":return this.left.evaluate(e)!=this.right.evaluate(e)?1:0;case"<":return this.left.evaluate(e)<this.right.evaluate(e)?1:0;case">":return this.left.evaluate(e)>this.right.evaluate(e)?1:0;case"<=":return this.left.evaluate(e)<=this.right.evaluate(e)?1:0;case">=":return this.left.evaluate(e)>=this.right.evaluate(e)?1:0;case"&&":return this.left.evaluate(e)&&this.right.evaluate(e)?1:0;case"||":return this.left.evaluate(e)||this.right.evaluate(e)?1:0;default:throw new Error(`Unknown operator ${this.operator}`)}}search(e){this.left.search(e),this.right.search(e)}}class ly extends os{constructor(){super()}}class fC extends ly{constructor(e,r){super(),this.selector=e,this.body=r}get astNodeType(){return"case"}search(e){this.searchBlock(this.body,e)}}class hC extends ly{constructor(e){super(),this.body=e}get astNodeType(){return"default"}search(e){this.searchBlock(this.body,e)}}class dC extends os{constructor(e,r,n){super(),this.name=e,this.type=r,this.attributes=n}get astNodeType(){return"argument"}}class gC extends os{constructor(e,r){super(),this.condition=e,this.body=r}get astNodeType(){return"elseif"}search(e){this.condition.search(e),this.searchBlock(this.body,e)}}class pC extends os{constructor(e,r,n){super(),this.name=e,this.type=r,this.attributes=n}get astNodeType(){return"member"}}let _C=class extends os{constructor(e,r){super(),this.name=e,this.value=r}get astNodeType(){return"attribute"}};var pe,oe;(function(t){t[t.token=0]="token",t[t.keyword=1]="keyword",t[t.reserved=2]="reserved"})(oe||(oe={}));class Ae{constructor(e,r,n){this.name=e,this.type=r,this.rule=n}toString(){return this.name}}class H{}pe=H;H.none=new Ae("",oe.reserved,"");H.eof=new Ae("EOF",oe.token,"");H.reserved={asm:new Ae("asm",oe.reserved,"asm"),bf16:new Ae("bf16",oe.reserved,"bf16"),do:new Ae("do",oe.reserved,"do"),enum:new Ae("enum",oe.reserved,"enum"),f16:new Ae("f16",oe.reserved,"f16"),f64:new Ae("f64",oe.reserved,"f64"),handle:new Ae("handle",oe.reserved,"handle"),i8:new Ae("i8",oe.reserved,"i8"),i16:new Ae("i16",oe.reserved,"i16"),i64:new Ae("i64",oe.reserved,"i64"),mat:new Ae("mat",oe.reserved,"mat"),premerge:new Ae("premerge",oe.reserved,"premerge"),regardless:new Ae("regardless",oe.reserved,"regardless"),typedef:new Ae("typedef",oe.reserved,"typedef"),u8:new Ae("u8",oe.reserved,"u8"),u16:new Ae("u16",oe.reserved,"u16"),u64:new Ae("u64",oe.reserved,"u64"),unless:new Ae("unless",oe.reserved,"unless"),using:new Ae("using",oe.reserved,"using"),vec:new Ae("vec",oe.reserved,"vec"),void:new Ae("void",oe.reserved,"void")};H.keywords={array:new Ae("array",oe.keyword,"array"),atomic:new Ae("atomic",oe.keyword,"atomic"),bool:new Ae("bool",oe.keyword,"bool"),f32:new Ae("f32",oe.keyword,"f32"),i32:new Ae("i32",oe.keyword,"i32"),mat2x2:new Ae("mat2x2",oe.keyword,"mat2x2"),mat2x3:new Ae("mat2x3",oe.keyword,"mat2x3"),mat2x4:new Ae("mat2x4",oe.keyword,"mat2x4"),mat3x2:new Ae("mat3x2",oe.keyword,"mat3x2"),mat3x3:new Ae("mat3x3",oe.keyword,"mat3x3"),mat3x4:new Ae("mat3x4",oe.keyword,"mat3x4"),mat4x2:new Ae("mat4x2",oe.keyword,"mat4x2"),mat4x3:new Ae("mat4x3",oe.keyword,"mat4x3"),mat4x4:new Ae("mat4x4",oe.keyword,"mat4x4"),ptr:new Ae("ptr",oe.keyword,"ptr"),sampler:new Ae("sampler",oe.keyword,"sampler"),sampler_comparison:new Ae("sampler_comparison",oe.keyword,"sampler_comparison"),struct:new Ae("struct",oe.keyword,"struct"),texture_1d:new Ae("texture_1d",oe.keyword,"texture_1d"),texture_2d:new Ae("texture_2d",oe.keyword,"texture_2d"),texture_2d_array:new Ae("texture_2d_array",oe.keyword,"texture_2d_array"),texture_3d:new Ae("texture_3d",oe.keyword,"texture_3d"),texture_cube:new Ae("texture_cube",oe.keyword,"texture_cube"),texture_cube_array:new Ae("texture_cube_array",oe.keyword,"texture_cube_array"),texture_multisampled_2d:new Ae("texture_multisampled_2d",oe.keyword,"texture_multisampled_2d"),texture_storage_1d:new Ae("texture_storage_1d",oe.keyword,"texture_storage_1d"),texture_storage_2d:new Ae("texture_storage_2d",oe.keyword,"texture_storage_2d"),texture_storage_2d_array:new Ae("texture_storage_2d_array",oe.keyword,"texture_storage_2d_array"),texture_storage_3d:new Ae("texture_storage_3d",oe.keyword,"texture_storage_3d"),texture_depth_2d:new Ae("texture_depth_2d",oe.keyword,"texture_depth_2d"),texture_depth_2d_array:new Ae("texture_depth_2d_array",oe.keyword,"texture_depth_2d_array"),texture_depth_cube:new Ae("texture_depth_cube",oe.keyword,"texture_depth_cube"),texture_depth_cube_array:new Ae("texture_depth_cube_array",oe.keyword,"texture_depth_cube_array"),texture_depth_multisampled_2d:new Ae("texture_depth_multisampled_2d",oe.keyword,"texture_depth_multisampled_2d"),texture_external:new Ae("texture_external",oe.keyword,"texture_external"),u32:new Ae("u32",oe.keyword,"u32"),vec2:new Ae("vec2",oe.keyword,"vec2"),vec3:new Ae("vec3",oe.keyword,"vec3"),vec4:new Ae("vec4",oe.keyword,"vec4"),bitcast:new Ae("bitcast",oe.keyword,"bitcast"),block:new Ae("block",oe.keyword,"block"),break:new Ae("break",oe.keyword,"break"),case:new Ae("case",oe.keyword,"case"),continue:new Ae("continue",oe.keyword,"continue"),continuing:new Ae("continuing",oe.keyword,"continuing"),default:new Ae("default",oe.keyword,"default"),diagnostic:new Ae("diagnostic",oe.keyword,"diagnostic"),discard:new Ae("discard",oe.keyword,"discard"),else:new Ae("else",oe.keyword,"else"),enable:new Ae("enable",oe.keyword,"enable"),fallthrough:new Ae("fallthrough",oe.keyword,"fallthrough"),false:new Ae("false",oe.keyword,"false"),fn:new Ae("fn",oe.keyword,"fn"),for:new Ae("for",oe.keyword,"for"),function:new Ae("function",oe.keyword,"function"),if:new Ae("if",oe.keyword,"if"),let:new Ae("let",oe.keyword,"let"),const:new Ae("const",oe.keyword,"const"),loop:new Ae("loop",oe.keyword,"loop"),while:new Ae("while",oe.keyword,"while"),private:new Ae("private",oe.keyword,"private"),read:new Ae("read",oe.keyword,"read"),read_write:new Ae("read_write",oe.keyword,"read_write"),return:new Ae("return",oe.keyword,"return"),requires:new Ae("requires",oe.keyword,"requires"),storage:new Ae("storage",oe.keyword,"storage"),switch:new Ae("switch",oe.keyword,"switch"),true:new Ae("true",oe.keyword,"true"),alias:new Ae("alias",oe.keyword,"alias"),type:new Ae("type",oe.keyword,"type"),uniform:new Ae("uniform",oe.keyword,"uniform"),var:new Ae("var",oe.keyword,"var"),override:new Ae("override",oe.keyword,"override"),workgroup:new Ae("workgroup",oe.keyword,"workgroup"),write:new Ae("write",oe.keyword,"write"),r8unorm:new Ae("r8unorm",oe.keyword,"r8unorm"),r8snorm:new Ae("r8snorm",oe.keyword,"r8snorm"),r8uint:new Ae("r8uint",oe.keyword,"r8uint"),r8sint:new Ae("r8sint",oe.keyword,"r8sint"),r16uint:new Ae("r16uint",oe.keyword,"r16uint"),r16sint:new Ae("r16sint",oe.keyword,"r16sint"),r16float:new Ae("r16float",oe.keyword,"r16float"),rg8unorm:new Ae("rg8unorm",oe.keyword,"rg8unorm"),rg8snorm:new Ae("rg8snorm",oe.keyword,"rg8snorm"),rg8uint:new Ae("rg8uint",oe.keyword,"rg8uint"),rg8sint:new Ae("rg8sint",oe.keyword,"rg8sint"),r32uint:new Ae("r32uint",oe.keyword,"r32uint"),r32sint:new Ae("r32sint",oe.keyword,"r32sint"),r32float:new Ae("r32float",oe.keyword,"r32float"),rg16uint:new Ae("rg16uint",oe.keyword,"rg16uint"),rg16sint:new Ae("rg16sint",oe.keyword,"rg16sint"),rg16float:new Ae("rg16float",oe.keyword,"rg16float"),rgba8unorm:new Ae("rgba8unorm",oe.keyword,"rgba8unorm"),rgba8unorm_srgb:new Ae("rgba8unorm_srgb",oe.keyword,"rgba8unorm_srgb"),rgba8snorm:new Ae("rgba8snorm",oe.keyword,"rgba8snorm"),rgba8uint:new Ae("rgba8uint",oe.keyword,"rgba8uint"),rgba8sint:new Ae("rgba8sint",oe.keyword,"rgba8sint"),bgra8unorm:new Ae("bgra8unorm",oe.keyword,"bgra8unorm"),bgra8unorm_srgb:new Ae("bgra8unorm_srgb",oe.keyword,"bgra8unorm_srgb"),rgb10a2unorm:new Ae("rgb10a2unorm",oe.keyword,"rgb10a2unorm"),rg11b10float:new Ae("rg11b10float",oe.keyword,"rg11b10float"),rg32uint:new Ae("rg32uint",oe.keyword,"rg32uint"),rg32sint:new Ae("rg32sint",oe.keyword,"rg32sint"),rg32float:new Ae("rg32float",oe.keyword,"rg32float"),rgba16uint:new Ae("rgba16uint",oe.keyword,"rgba16uint"),rgba16sint:new Ae("rgba16sint",oe.keyword,"rgba16sint"),rgba16float:new Ae("rgba16float",oe.keyword,"rgba16float"),rgba32uint:new Ae("rgba32uint",oe.keyword,"rgba32uint"),rgba32sint:new Ae("rgba32sint",oe.keyword,"rgba32sint"),rgba32float:new Ae("rgba32float",oe.keyword,"rgba32float"),static_assert:new Ae("static_assert",oe.keyword,"static_assert")};H.tokens={decimal_float_literal:new Ae("decimal_float_literal",oe.token,/((-?[0-9]*\.[0-9]+|-?[0-9]+\.[0-9]*)((e|E)(\+|-)?[0-9]+)?f?)|(-?[0-9]+(e|E)(\+|-)?[0-9]+f?)|([0-9]+f)/),hex_float_literal:new Ae("hex_float_literal",oe.token,/-?0x((([0-9a-fA-F]*\.[0-9a-fA-F]+|[0-9a-fA-F]+\.[0-9a-fA-F]*)((p|P)(\+|-)?[0-9]+f?)?)|([0-9a-fA-F]+(p|P)(\+|-)?[0-9]+f?))/),int_literal:new Ae("int_literal",oe.token,/-?0x[0-9a-fA-F]+|0i?|-?[1-9][0-9]*i?/),uint_literal:new Ae("uint_literal",oe.token,/0x[0-9a-fA-F]+u|0u|[1-9][0-9]*u/),ident:new Ae("ident",oe.token,/[_a-zA-Z][0-9a-zA-Z_]*/),and:new Ae("and",oe.token,"&"),and_and:new Ae("and_and",oe.token,"&&"),arrow:new Ae("arrow ",oe.token,"->"),attr:new Ae("attr",oe.token,"@"),forward_slash:new Ae("forward_slash",oe.token,"/"),bang:new Ae("bang",oe.token,"!"),bracket_left:new Ae("bracket_left",oe.token,"["),bracket_right:new Ae("bracket_right",oe.token,"]"),brace_left:new Ae("brace_left",oe.token,"{"),brace_right:new Ae("brace_right",oe.token,"}"),colon:new Ae("colon",oe.token,":"),comma:new Ae("comma",oe.token,","),equal:new Ae("equal",oe.token,"="),equal_equal:new Ae("equal_equal",oe.token,"=="),not_equal:new Ae("not_equal",oe.token,"!="),greater_than:new Ae("greater_than",oe.token,">"),greater_than_equal:new Ae("greater_than_equal",oe.token,">="),shift_right:new Ae("shift_right",oe.token,">>"),less_than:new Ae("less_than",oe.token,"<"),less_than_equal:new Ae("less_than_equal",oe.token,"<="),shift_left:new Ae("shift_left",oe.token,"<<"),modulo:new Ae("modulo",oe.token,"%"),minus:new Ae("minus",oe.token,"-"),minus_minus:new Ae("minus_minus",oe.token,"--"),period:new Ae("period",oe.token,"."),plus:new Ae("plus",oe.token,"+"),plus_plus:new Ae("plus_plus",oe.token,"++"),or:new Ae("or",oe.token,"|"),or_or:new Ae("or_or",oe.token,"||"),paren_left:new Ae("paren_left",oe.token,"("),paren_right:new Ae("paren_right",oe.token,")"),semicolon:new Ae("semicolon",oe.token,";"),star:new Ae("star",oe.token,"*"),tilde:new Ae("tilde",oe.token,"~"),underscore:new Ae("underscore",oe.token,"_"),xor:new Ae("xor",oe.token,"^"),plus_equal:new Ae("plus_equal",oe.token,"+="),minus_equal:new Ae("minus_equal",oe.token,"-="),times_equal:new Ae("times_equal",oe.token,"*="),division_equal:new Ae("division_equal",oe.token,"/="),modulo_equal:new Ae("modulo_equal",oe.token,"%="),and_equal:new Ae("and_equal",oe.token,"&="),or_equal:new Ae("or_equal",oe.token,"|="),xor_equal:new Ae("xor_equal",oe.token,"^="),shift_right_equal:new Ae("shift_right_equal",oe.token,">>="),shift_left_equal:new Ae("shift_left_equal",oe.token,"<<=")};H.simpleTokens={"@":pe.tokens.attr,"{":pe.tokens.brace_left,"}":pe.tokens.brace_right,":":pe.tokens.colon,",":pe.tokens.comma,"(":pe.tokens.paren_left,")":pe.tokens.paren_right,";":pe.tokens.semicolon};H.literalTokens={"&":pe.tokens.and,"&&":pe.tokens.and_and,"->":pe.tokens.arrow,"/":pe.tokens.forward_slash,"!":pe.tokens.bang,"[":pe.tokens.bracket_left,"]":pe.tokens.bracket_right,"=":pe.tokens.equal,"==":pe.tokens.equal_equal,"!=":pe.tokens.not_equal,">":pe.tokens.greater_than,">=":pe.tokens.greater_than_equal,">>":pe.tokens.shift_right,"<":pe.tokens.less_than,"<=":pe.tokens.less_than_equal,"<<":pe.tokens.shift_left,"%":pe.tokens.modulo,"-":pe.tokens.minus,"--":pe.tokens.minus_minus,".":pe.tokens.period,"+":pe.tokens.plus,"++":pe.tokens.plus_plus,"|":pe.tokens.or,"||":pe.tokens.or_or,"*":pe.tokens.star,"~":pe.tokens.tilde,_:pe.tokens.underscore,"^":pe.tokens.xor,"+=":pe.tokens.plus_equal,"-=":pe.tokens.minus_equal,"*=":pe.tokens.times_equal,"/=":pe.tokens.division_equal,"%=":pe.tokens.modulo_equal,"&=":pe.tokens.and_equal,"|=":pe.tokens.or_equal,"^=":pe.tokens.xor_equal,">>=":pe.tokens.shift_right_equal,"<<=":pe.tokens.shift_left_equal};H.regexTokens={decimal_float_literal:pe.tokens.decimal_float_literal,hex_float_literal:pe.tokens.hex_float_literal,int_literal:pe.tokens.int_literal,uint_literal:pe.tokens.uint_literal,ident:pe.tokens.ident};H.storage_class=[pe.keywords.function,pe.keywords.private,pe.keywords.workgroup,pe.keywords.uniform,pe.keywords.storage];H.access_mode=[pe.keywords.read,pe.keywords.write,pe.keywords.read_write];H.sampler_type=[pe.keywords.sampler,pe.keywords.sampler_comparison];H.sampled_texture_type=[pe.keywords.texture_1d,pe.keywords.texture_2d,pe.keywords.texture_2d_array,pe.keywords.texture_3d,pe.keywords.texture_cube,pe.keywords.texture_cube_array];H.multisampled_texture_type=[pe.keywords.texture_multisampled_2d];H.storage_texture_type=[pe.keywords.texture_storage_1d,pe.keywords.texture_storage_2d,pe.keywords.texture_storage_2d_array,pe.keywords.texture_storage_3d];H.depth_texture_type=[pe.keywords.texture_depth_2d,pe.keywords.texture_depth_2d_array,pe.keywords.texture_depth_cube,pe.keywords.texture_depth_cube_array,pe.keywords.texture_depth_multisampled_2d];H.texture_external_type=[pe.keywords.texture_external];H.any_texture_type=[...pe.sampled_texture_type,...pe.multisampled_texture_type,...pe.storage_texture_type,...pe.depth_texture_type,...pe.texture_external_type];H.texel_format=[pe.keywords.r8unorm,pe.keywords.r8snorm,pe.keywords.r8uint,pe.keywords.r8sint,pe.keywords.r16uint,pe.keywords.r16sint,pe.keywords.r16float,pe.keywords.rg8unorm,pe.keywords.rg8snorm,pe.keywords.rg8uint,pe.keywords.rg8sint,pe.keywords.r32uint,pe.keywords.r32sint,pe.keywords.r32float,pe.keywords.rg16uint,pe.keywords.rg16sint,pe.keywords.rg16float,pe.keywords.rgba8unorm,pe.keywords.rgba8unorm_srgb,pe.keywords.rgba8snorm,pe.keywords.rgba8uint,pe.keywords.rgba8sint,pe.keywords.bgra8unorm,pe.keywords.bgra8unorm_srgb,pe.keywords.rgb10a2unorm,pe.keywords.rg11b10float,pe.keywords.rg32uint,pe.keywords.rg32sint,pe.keywords.rg32float,pe.keywords.rgba16uint,pe.keywords.rgba16sint,pe.keywords.rgba16float,pe.keywords.rgba32uint,pe.keywords.rgba32sint,pe.keywords.rgba32float];H.const_literal=[pe.tokens.int_literal,pe.tokens.uint_literal,pe.tokens.decimal_float_literal,pe.tokens.hex_float_literal,pe.keywords.true,pe.keywords.false];H.literal_or_ident=[pe.tokens.ident,pe.tokens.int_literal,pe.tokens.uint_literal,pe.tokens.decimal_float_literal,pe.tokens.hex_float_literal];H.element_count_expression=[pe.tokens.int_literal,pe.tokens.uint_literal,pe.tokens.ident];H.template_types=[pe.keywords.vec2,pe.keywords.vec3,pe.keywords.vec4,pe.keywords.mat2x2,pe.keywords.mat2x3,pe.keywords.mat2x4,pe.keywords.mat3x2,pe.keywords.mat3x3,pe.keywords.mat3x4,pe.keywords.mat4x2,pe.keywords.mat4x3,pe.keywords.mat4x4,pe.keywords.atomic,pe.keywords.bitcast,...pe.any_texture_type];H.attribute_name=[pe.tokens.ident,pe.keywords.block,pe.keywords.diagnostic];H.assignment_operators=[pe.tokens.equal,pe.tokens.plus_equal,pe.tokens.minus_equal,pe.tokens.times_equal,pe.tokens.division_equal,pe.tokens.modulo_equal,pe.tokens.and_equal,pe.tokens.or_equal,pe.tokens.xor_equal,pe.tokens.shift_right_equal,pe.tokens.shift_left_equal];H.increment_operators=[pe.tokens.plus_plus,pe.tokens.minus_minus];class d2{constructor(e,r,n){this.type=e,this.lexeme=r,this.line=n}toString(){return this.lexeme}isTemplateType(){return H.template_types.indexOf(this.type)!=-1}isArrayType(){return this.type==H.keywords.array}isArrayOrTemplateType(){return this.isArrayType()||this.isTemplateType()}}class mC{constructor(e){this._tokens=[],this._start=0,this._current=0,this._line=1,this._source=e??""}scanTokens(){for(;!this._isAtEnd();)if(this._start=this._current,!this.scanToken())throw`Invalid syntax at line ${this._line}`;return this._tokens.push(new d2(H.eof,"",this._line)),this._tokens}scanToken(){let e=this._advance();if(e==`
`)return this._line++,!0;if(this._isWhitespace(e))return!0;if(e=="/"){if(this._peekAhead()=="/"){for(;e!=`
`;){if(this._isAtEnd())return!0;e=this._advance()}return this._line++,!0}else if(this._peekAhead()=="*"){this._advance();let f=1;for(;f>0;){if(this._isAtEnd())return!0;if(e=this._advance(),e==`
`)this._line++;else if(e=="*"){if(this._peekAhead()=="/"&&(this._advance(),f--,f==0))return!0}else e=="/"&&this._peekAhead()=="*"&&(this._advance(),f++)}return!0}}const r=H.simpleTokens[e];if(r)return this._addToken(r),!0;let n=H.none;const i=this._isAlpha(e),o=e==="_";if(this._isAlphaNumeric(e)){let f=this._peekAhead();for(;this._isAlphaNumeric(f);)e+=this._advance(),f=this._peekAhead()}if(i){const f=H.keywords[e];if(f)return this._addToken(f),!0}if(i||o)return this._addToken(H.tokens.ident),!0;for(;;){let f=this._findType(e);const p=this._peekAhead();if(e=="-"&&this._tokens.length>0){if(p=="=")return this._current++,e+=p,this._addToken(H.tokens.minus_equal),!0;if(p=="-")return this._current++,e+=p,this._addToken(H.tokens.minus_minus),!0;const y=this._tokens.length-1;if((H.literal_or_ident.indexOf(this._tokens[y].type)!=-1||this._tokens[y].type==H.tokens.paren_right)&&p!=">")return this._addToken(f),!0}if(e==">"&&(p==">"||p=="=")){let y=!1,T=this._tokens.length-1;for(let R=0;R<5&&T>=0&&H.assignment_operators.indexOf(this._tokens[T].type)===-1;++R,--T)if(this._tokens[T].type===H.tokens.less_than){T>0&&this._tokens[T-1].isArrayOrTemplateType()&&(y=!0);break}if(y)return this._addToken(f),!0}if(f===H.none){let y=e,T=0;const R=2;for(let x=0;x<R;++x)if(y+=this._peekAhead(x),f=this._findType(y),f!==H.none){T=x;break}if(f===H.none)return n===H.none?!1:(this._current--,this._addToken(n),!0);e=y,this._current+=T+1}if(n=f,this._isAtEnd())break;e+=this._advance()}return n===H.none?!1:(this._addToken(n),!0)}_findType(e){for(const n in H.regexTokens){const i=H.regexTokens[n];if(this._match(e,i.rule))return i}const r=H.literalTokens[e];return r||H.none}_match(e,r){const n=r.exec(e);return n&&n.index==0&&n[0]==e}_isAtEnd(){return this._current>=this._source.length}_isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}_isAlphaNumeric(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e=="_"||e>="0"&&e<="9"}_isWhitespace(e){return e==" "||e=="	"||e=="\r"}_advance(e=0){let r=this._source[this._current];return e=e||0,e++,this._current+=e,r}_peekAhead(e=0){return e=e||0,this._current+e>=this._source.length?"\0":this._source[this._current+e]}_addToken(e){const r=this._source.substring(this._start,this._current);this._tokens.push(new d2(e,r,this._line))}}class yC{constructor(){this._tokens=[],this._current=0,this._currentLine=0,this._context=new Wb,this._deferArrayCountEval=[]}parse(e){this._initialize(e),this._deferArrayCountEval.length=0;const r=[];for(;!this._isAtEnd();){const n=this._global_decl_or_directive();if(!n)break;r.push(n)}if(this._deferArrayCountEval.length>0){for(const n of this._deferArrayCountEval){const i=n.arrayType,o=n.countNode;if(o instanceof Td){const p=o.name,y=this._context.constants.get(p);if(y)try{const T=y.evaluate(this._context);i.count=T}catch{}}}this._deferArrayCountEval.length=0}return r}_initialize(e){if(e)if(typeof e=="string"){const r=new mC(e);this._tokens=r.scanTokens()}else this._tokens=e;else this._tokens=[];this._current=0}_error(e,r){return{token:e,message:r,toString:function(){return`${r}`}}}_isAtEnd(){return this._current>=this._tokens.length||this._peek().type==H.eof}_match(e){if(e instanceof Ae)return this._check(e)?(this._advance(),!0):!1;for(let r=0,n=e.length;r<n;++r){const i=e[r];if(this._check(i))return this._advance(),!0}return!1}_consume(e,r){if(this._check(e))return this._advance();throw this._error(this._peek(),r)}_check(e){if(this._isAtEnd())return!1;const r=this._peek();if(e instanceof Array){const n=r.type;return e.indexOf(n)!=-1}return r.type==e}_advance(){var e,r;return this._currentLine=(r=(e=this._peek())===null||e===void 0?void 0:e.line)!==null&&r!==void 0?r:-1,this._isAtEnd()||this._current++,this._previous()}_peek(){return this._tokens[this._current]}_previous(){return this._tokens[this._current-1]}_global_decl_or_directive(){for(;this._match(H.tokens.semicolon)&&!this._isAtEnd(););if(this._match(H.keywords.alias)){const r=this._type_alias();return this._consume(H.tokens.semicolon,"Expected ';'"),r}if(this._match(H.keywords.diagnostic)){const r=this._diagnostic();return this._consume(H.tokens.semicolon,"Expected ';'"),r}if(this._match(H.keywords.requires)){const r=this._requires_directive();return this._consume(H.tokens.semicolon,"Expected ';'"),r}if(this._match(H.keywords.enable)){const r=this._enable_directive();return this._consume(H.tokens.semicolon,"Expected ';'"),r}const e=this._attribute();if(this._check(H.keywords.var)){const r=this._global_variable_decl();return r!=null&&(r.attributes=e),this._consume(H.tokens.semicolon,"Expected ';'."),r}if(this._check(H.keywords.override)){const r=this._override_variable_decl();return r!=null&&(r.attributes=e),this._consume(H.tokens.semicolon,"Expected ';'."),r}if(this._check(H.keywords.let)){const r=this._global_let_decl();return r!=null&&(r.attributes=e),this._consume(H.tokens.semicolon,"Expected ';'."),r}if(this._check(H.keywords.const)){const r=this._global_const_decl();return r!=null&&(r.attributes=e),this._consume(H.tokens.semicolon,"Expected ';'."),r}if(this._check(H.keywords.struct)){const r=this._struct_decl();return r!=null&&(r.attributes=e),r}if(this._check(H.keywords.fn)){const r=this._function_decl();return r!=null&&(r.attributes=e),r}return null}_function_decl(){if(!this._match(H.keywords.fn))return null;const e=this._currentLine,r=this._consume(H.tokens.ident,"Expected function name.").toString();this._consume(H.tokens.paren_left,"Expected '(' for function arguments.");const n=[];if(!this._check(H.tokens.paren_right))do{if(this._check(H.tokens.paren_right))break;const p=this._attribute(),y=this._consume(H.tokens.ident,"Expected argument name.").toString();this._consume(H.tokens.colon,"Expected ':' for argument type.");const T=this._attribute(),R=this._type_decl();R!=null&&(R.attributes=T,n.push(new dC(y,R,p)))}while(this._match(H.tokens.comma));this._consume(H.tokens.paren_right,"Expected ')' after function arguments.");let i=null;if(this._match(H.tokens.arrow)){const p=this._attribute();i=this._type_decl(),i!=null&&(i.attributes=p)}const o=this._compound_statement(),f=this._currentLine;return new vd(r,n,i,o,e,f)}_compound_statement(){const e=[];for(this._consume(H.tokens.brace_left,"Expected '{' for block.");!this._check(H.tokens.brace_right);){const r=this._statement();r!==null&&e.push(r)}return this._consume(H.tokens.brace_right,"Expected '}' for block."),e}_statement(){for(;this._match(H.tokens.semicolon)&&!this._isAtEnd(););if(this._check(H.tokens.attr)&&this._attribute(),this._check(H.keywords.if))return this._if_statement();if(this._check(H.keywords.switch))return this._switch_statement();if(this._check(H.keywords.loop))return this._loop_statement();if(this._check(H.keywords.for))return this._for_statement();if(this._check(H.keywords.while))return this._while_statement();if(this._check(H.keywords.continuing))return this._continuing_statement();if(this._check(H.keywords.static_assert))return this._static_assert_statement();if(this._check(H.tokens.brace_left))return this._compound_statement();let e=null;return this._check(H.keywords.return)?e=this._return_statement():this._check([H.keywords.var,H.keywords.let,H.keywords.const])?e=this._variable_statement():this._match(H.keywords.discard)?e=new iC:this._match(H.keywords.break)?e=new sC:this._match(H.keywords.continue)?e=new oC:e=this._increment_decrement_statement()||this._func_call_statement()||this._assignment_statement(),e!=null&&this._consume(H.tokens.semicolon,"Expected ';' after statement."),e}_static_assert_statement(){if(!this._match(H.keywords.static_assert))return null;const e=this._optional_paren_expression();return new Xb(e)}_while_statement(){if(!this._match(H.keywords.while))return null;const e=this._optional_paren_expression();this._check(H.tokens.attr)&&this._attribute();const r=this._compound_statement();return new $b(e,r)}_continuing_statement(){if(!this._match(H.keywords.continuing))return null;const e=this._compound_statement();return new Qb(e)}_for_statement(){if(!this._match(H.keywords.for))return null;this._consume(H.tokens.paren_left,"Expected '('.");const e=this._check(H.tokens.semicolon)?null:this._for_init();this._consume(H.tokens.semicolon,"Expected ';'.");const r=this._check(H.tokens.semicolon)?null:this._short_circuit_or_expression();this._consume(H.tokens.semicolon,"Expected ';'.");const n=this._check(H.tokens.paren_right)?null:this._for_increment();this._consume(H.tokens.paren_right,"Expected ')'."),this._check(H.tokens.attr)&&this._attribute();const i=this._compound_statement();return new Yb(e,r,n,i)}_for_init(){return this._variable_statement()||this._func_call_statement()||this._assignment_statement()}_for_increment(){return this._func_call_statement()||this._increment_decrement_statement()||this._assignment_statement()}_variable_statement(){if(this._check(H.keywords.var)){const e=this._variable_decl();if(e===null)throw this._error(this._peek(),"Variable declaration expected.");let r=null;return this._match(H.tokens.equal)&&(r=this._short_circuit_or_expression()),new $o(e.name,e.type,e.storage,e.access,r)}if(this._match(H.keywords.let)){const e=this._consume(H.tokens.ident,"Expected name for let.").toString();let r=null;if(this._match(H.tokens.colon)){const i=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=i)}this._consume(H.tokens.equal,"Expected '=' for let.");const n=this._short_circuit_or_expression();return new wd(e,r,null,null,n)}if(this._match(H.keywords.const)){const e=this._consume(H.tokens.ident,"Expected name for const.").toString();let r=null;if(this._match(H.tokens.colon)){const i=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=i)}this._consume(H.tokens.equal,"Expected '=' for const.");const n=this._short_circuit_or_expression();return new u2(e,r,null,null,n)}return null}_increment_decrement_statement(){const e=this._current,r=this._unary_expression();if(r==null)return null;if(!this._check(H.increment_operators))return this._current=e,null;const n=this._consume(H.increment_operators,"Expected increment operator");return new Kb(n.type===H.tokens.plus_plus?fA.increment:fA.decrement,r)}_assignment_statement(){let e=null;if(this._check(H.tokens.brace_right))return null;let r=this._match(H.tokens.underscore);if(r||(e=this._unary_expression()),!r&&e==null)return null;const n=this._consume(H.assignment_operators,"Expected assignment operator."),i=this._short_circuit_or_expression();return new Zb(jl.parse(n.lexeme),e,i)}_func_call_statement(){if(!this._check(H.tokens.ident))return null;const e=this._current,r=this._consume(H.tokens.ident,"Expected function name."),n=this._argument_expression_list();return n===null?(this._current=e,null):new ny(r.lexeme,n)}_loop_statement(){if(!this._match(H.keywords.loop))return null;this._check(H.tokens.attr)&&this._attribute(),this._consume(H.tokens.brace_left,"Expected '{' for loop.");const e=[];let r=this._statement();for(;r!==null;){if(Array.isArray(r))for(let i of r)e.push(i);else e.push(r);r=this._statement()}let n=null;return this._match(H.keywords.continuing)&&(n=this._compound_statement()),this._consume(H.tokens.brace_right,"Expected '}' for loop."),new qb(e,n)}_switch_statement(){if(!this._match(H.keywords.switch))return null;const e=this._optional_paren_expression();this._check(H.tokens.attr)&&this._attribute(),this._consume(H.tokens.brace_left,"Expected '{' for switch.");const r=this._switch_body();if(r==null||r.length==0)throw this._error(this._previous(),"Expected 'case' or 'default'.");return this._consume(H.tokens.brace_right,"Expected '}' for switch."),new Gb(e,r)}_switch_body(){const e=[];if(this._match(H.keywords.case)){const r=this._case_selectors();this._match(H.tokens.colon),this._check(H.tokens.attr)&&this._attribute(),this._consume(H.tokens.brace_left,"Exected '{' for switch case.");const n=this._case_body();this._consume(H.tokens.brace_right,"Exected '}' for switch case."),e.push(new fC(r,n))}if(this._match(H.keywords.default)){this._match(H.tokens.colon),this._check(H.tokens.attr)&&this._attribute(),this._consume(H.tokens.brace_left,"Exected '{' for switch default.");const r=this._case_body();this._consume(H.tokens.brace_right,"Exected '}' for switch default."),e.push(new hC(r))}if(this._check([H.keywords.default,H.keywords.case])){const r=this._switch_body();e.push(r[0])}return e}_case_selectors(){const e=[this._shift_expression()];for(;this._match(H.tokens.comma);)e.push(this._shift_expression());return e}_case_body(){if(this._match(H.keywords.fallthrough))return this._consume(H.tokens.semicolon,"Expected ';'"),[];let e=this._statement();if(e==null)return[];e instanceof Array||(e=[e]);const r=this._case_body();return r.length==0?e:[...e,r[0]]}_if_statement(){if(!this._match(H.keywords.if))return null;const e=this._optional_paren_expression();this._check(H.tokens.attr)&&this._attribute();const r=this._compound_statement();let n=[];this._match_elseif()&&(this._check(H.tokens.attr)&&this._attribute(),n=this._elseif_statement(n));let i=null;return this._match(H.keywords.else)&&(this._check(H.tokens.attr)&&this._attribute(),i=this._compound_statement()),new Jb(e,r,n,i)}_match_elseif(){return this._tokens[this._current].type===H.keywords.else&&this._tokens[this._current+1].type===H.keywords.if?(this._advance(),this._advance(),!0):!1}_elseif_statement(e=[]){const r=this._optional_paren_expression(),n=this._compound_statement();return e.push(new gC(r,n)),this._match_elseif()&&(this._check(H.tokens.attr)&&this._attribute(),this._elseif_statement(e)),e}_return_statement(){if(!this._match(H.keywords.return))return null;const e=this._short_circuit_or_expression();return new eC(e)}_short_circuit_or_expression(){let e=this._short_circuit_and_expr();for(;this._match(H.tokens.or_or);)e=new Mi(this._previous().toString(),e,this._short_circuit_and_expr());return e}_short_circuit_and_expr(){let e=this._inclusive_or_expression();for(;this._match(H.tokens.and_and);)e=new Mi(this._previous().toString(),e,this._inclusive_or_expression());return e}_inclusive_or_expression(){let e=this._exclusive_or_expression();for(;this._match(H.tokens.or);)e=new Mi(this._previous().toString(),e,this._exclusive_or_expression());return e}_exclusive_or_expression(){let e=this._and_expression();for(;this._match(H.tokens.xor);)e=new Mi(this._previous().toString(),e,this._and_expression());return e}_and_expression(){let e=this._equality_expression();for(;this._match(H.tokens.and);)e=new Mi(this._previous().toString(),e,this._equality_expression());return e}_equality_expression(){const e=this._relational_expression();return this._match([H.tokens.equal_equal,H.tokens.not_equal])?new Mi(this._previous().toString(),e,this._relational_expression()):e}_relational_expression(){let e=this._shift_expression();for(;this._match([H.tokens.less_than,H.tokens.greater_than,H.tokens.less_than_equal,H.tokens.greater_than_equal]);)e=new Mi(this._previous().toString(),e,this._shift_expression());return e}_shift_expression(){let e=this._additive_expression();for(;this._match([H.tokens.shift_left,H.tokens.shift_right]);)e=new Mi(this._previous().toString(),e,this._additive_expression());return e}_additive_expression(){let e=this._multiplicative_expression();for(;this._match([H.tokens.plus,H.tokens.minus]);)e=new Mi(this._previous().toString(),e,this._multiplicative_expression());return e}_multiplicative_expression(){let e=this._unary_expression();for(;this._match([H.tokens.star,H.tokens.forward_slash,H.tokens.modulo]);)e=new Mi(this._previous().toString(),e,this._unary_expression());return e}_unary_expression(){return this._match([H.tokens.minus,H.tokens.bang,H.tokens.tilde,H.tokens.star,H.tokens.and])?new cC(this._previous().toString(),this._unary_expression()):this._singular_expression()}_singular_expression(){const e=this._primary_expression(),r=this._postfix_expression();return r&&(e.postfix=r),e}_postfix_expression(){if(this._match(H.tokens.bracket_left)){const e=this._short_circuit_or_expression();this._consume(H.tokens.bracket_right,"Expected ']'.");const r=new uC(e),n=this._postfix_expression();return n&&(r.postfix=n),r}if(this._match(H.tokens.period)){const e=this._consume(H.tokens.ident,"Expected member name."),r=this._postfix_expression(),n=new AC(e.lexeme);return r&&(n.postfix=r),n}return null}_getStruct(e){return this._context.aliases.has(e)?this._context.aliases.get(e).type:this._context.structs.has(e)?this._context.structs.get(e):null}_primary_expression(){if(this._match(H.tokens.ident)){const n=this._previous().toString();if(this._check(H.tokens.paren_left)){const i=this._argument_expression_list(),o=this._getStruct(n);return o!=null?new Ga(o,i):new ay(n,i)}if(this._context.constants.has(n)){const i=this._context.constants.get(n);return new c2(n,i.value)}return new Td(n)}if(this._match(H.const_literal))return new f2(parseFloat(this._previous().toString()));if(this._check(H.tokens.paren_left))return this._paren_expression();if(this._match(H.keywords.bitcast)){this._consume(H.tokens.less_than,"Expected '<'.");const n=this._type_decl();this._consume(H.tokens.greater_than,"Expected '>'.");const i=this._paren_expression();return new lC(n,i)}const e=this._type_decl(),r=this._argument_expression_list();return new Ga(e,r)}_argument_expression_list(){if(!this._match(H.tokens.paren_left))return null;const e=[];do{if(this._check(H.tokens.paren_right))break;const r=this._short_circuit_or_expression();e.push(r)}while(this._match(H.tokens.comma));return this._consume(H.tokens.paren_right,"Expected ')' for agument list"),e}_optional_paren_expression(){this._match(H.tokens.paren_left);const e=this._short_circuit_or_expression();return this._match(H.tokens.paren_right),new h2([e])}_paren_expression(){this._consume(H.tokens.paren_left,"Expected '('.");const e=this._short_circuit_or_expression();return this._consume(H.tokens.paren_right,"Expected ')'."),new h2([e])}_struct_decl(){if(!this._match(H.keywords.struct))return null;const e=this._currentLine,r=this._consume(H.tokens.ident,"Expected name for struct.").toString();this._consume(H.tokens.brace_left,"Expected '{' for struct body.");const n=[];for(;!this._check(H.tokens.brace_right);){const f=this._attribute(),p=this._consume(H.tokens.ident,"Expected variable name.").toString();this._consume(H.tokens.colon,"Expected ':' for struct member type.");const y=this._attribute(),T=this._type_decl();T!=null&&(T.attributes=y),this._check(H.tokens.brace_right)?this._match(H.tokens.comma):this._consume(H.tokens.comma,"Expected ',' for struct member."),n.push(new pC(p,T,f))}this._consume(H.tokens.brace_right,"Expected '}' after struct body.");const i=this._currentLine,o=new Xo(r,n,e,i);return this._context.structs.set(r,o),o}_global_variable_decl(){const e=this._variable_decl();return e&&this._match(H.tokens.equal)&&(e.value=this._const_expression()),e}_override_variable_decl(){const e=this._override_decl();return e&&this._match(H.tokens.equal)&&(e.value=this._const_expression()),e}_global_const_decl(){if(!this._match(H.keywords.const))return null;const e=this._consume(H.tokens.ident,"Expected variable name");let r=null;if(this._match(H.tokens.colon)){const o=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=o)}let n=null;if(this._match(H.tokens.equal)){const o=this._short_circuit_or_expression();if(o instanceof Ga)n=o;else if(o instanceof c2&&o.initializer instanceof Ga)n=o.initializer;else try{const f=o.evaluate(this._context);n=new f2(f)}catch{n=o}}const i=new u2(e.toString(),r,"","",n);return this._context.constants.set(i.name,i),i}_global_let_decl(){if(!this._match(H.keywords.let))return null;const e=this._consume(H.tokens.ident,"Expected variable name");let r=null;if(this._match(H.tokens.colon)){const i=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=i)}let n=null;return this._match(H.tokens.equal)&&(n=this._const_expression()),new wd(e.toString(),r,"","",n)}_const_expression(){return this._short_circuit_or_expression()}_variable_decl(){if(!this._match(H.keywords.var))return null;let e="",r="";this._match(H.tokens.less_than)&&(e=this._consume(H.storage_class,"Expected storage_class.").toString(),this._match(H.tokens.comma)&&(r=this._consume(H.access_mode,"Expected access_mode.").toString()),this._consume(H.tokens.greater_than,"Expected '>'."));const n=this._consume(H.tokens.ident,"Expected variable name");let i=null;if(this._match(H.tokens.colon)){const o=this._attribute();i=this._type_decl(),i!=null&&(i.attributes=o)}return new $o(n.toString(),i,e,r,null)}_override_decl(){if(!this._match(H.keywords.override))return null;const e=this._consume(H.tokens.ident,"Expected variable name");let r=null;if(this._match(H.tokens.colon)){const n=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=n)}return new ry(e.toString(),r,null)}_diagnostic(){this._consume(H.tokens.paren_left,"Expected '('");const e=this._consume(H.tokens.ident,"Expected severity control name.");this._consume(H.tokens.comma,"Expected ','");const r=this._consume(H.tokens.ident,"Expected diagnostic rule name.");return this._consume(H.tokens.paren_right,"Expected ')'"),new nC(e.toString(),r.toString())}_enable_directive(){const e=this._consume(H.tokens.ident,"identity expected.");return new tC(e.toString())}_requires_directive(){const e=[this._consume(H.tokens.ident,"identity expected.").toString()];for(;this._match(H.tokens.comma);){const r=this._consume(H.tokens.ident,"identity expected.");e.push(r.toString())}return new rC(e)}_type_alias(){const e=this._consume(H.tokens.ident,"identity expected.");this._consume(H.tokens.equal,"Expected '=' for type alias.");let r=this._type_decl();if(r===null)throw this._error(this._peek(),"Expected Type for Alias.");this._context.aliases.has(r.name)&&(r=this._context.aliases.get(r.name).type);const n=new iy(e.toString(),r);return this._context.aliases.set(n.name,n),n}_type_decl(){if(this._check([H.tokens.ident,...H.texel_format,H.keywords.bool,H.keywords.f32,H.keywords.i32,H.keywords.u32])){const n=this._advance(),i=n.toString();return this._context.structs.has(i)?this._context.structs.get(i):this._context.aliases.has(i)?this._context.aliases.get(i).type:new ua(n.toString())}let e=this._texture_sampler_types();if(e)return e;if(this._check(H.template_types)){let n=this._advance().toString(),i=null,o=null;return this._match(H.tokens.less_than)&&(i=this._type_decl(),o=null,this._match(H.tokens.comma)&&(o=this._consume(H.access_mode,"Expected access_mode for pointer").toString()),this._consume(H.tokens.greater_than,"Expected '>' for type.")),new sy(n,i,o)}if(this._match(H.keywords.ptr)){let n=this._previous().toString();this._consume(H.tokens.less_than,"Expected '<' for pointer.");const i=this._consume(H.storage_class,"Expected storage_class for pointer");this._consume(H.tokens.comma,"Expected ',' for pointer.");const o=this._type_decl();let f=null;return this._match(H.tokens.comma)&&(f=this._consume(H.access_mode,"Expected access_mode for pointer").toString()),this._consume(H.tokens.greater_than,"Expected '>' for pointer."),new aC(n,i.toString(),o,f)}const r=this._attribute();if(this._match(H.keywords.array)){let n=null,i=-1;const o=this._previous();let f=null;if(this._match(H.tokens.less_than)){n=this._type_decl(),this._context.aliases.has(n.name)&&(n=this._context.aliases.get(n.name).type);let y="";if(this._match(H.tokens.comma)){f=this._shift_expression();try{y=f.evaluate(this._context).toString(),f=null}catch{y="1"}}this._consume(H.tokens.greater_than,"Expected '>' for array."),i=y?parseInt(y):0}const p=new oy(o.toString(),r,n,i);return f&&this._deferArrayCountEval.push({arrayType:p,countNode:f}),p}return null}_texture_sampler_types(){if(this._match(H.sampler_type))return new Pl(this._previous().toString(),null,null);if(this._match(H.depth_texture_type))return new Pl(this._previous().toString(),null,null);if(this._match(H.sampled_texture_type)||this._match(H.multisampled_texture_type)){const e=this._previous();this._consume(H.tokens.less_than,"Expected '<' for sampler type.");const r=this._type_decl();return this._consume(H.tokens.greater_than,"Expected '>' for sampler type."),new Pl(e.toString(),r,null)}if(this._match(H.storage_texture_type)){const e=this._previous();this._consume(H.tokens.less_than,"Expected '<' for sampler type.");const r=this._consume(H.texel_format,"Invalid texel format.").toString();this._consume(H.tokens.comma,"Expected ',' after texel format.");const n=this._consume(H.access_mode,"Expected access mode for storage texture type.").toString();return this._consume(H.tokens.greater_than,"Expected '>' for sampler type."),new Pl(e.toString(),r,n)}return null}_attribute(){let e=[];for(;this._match(H.tokens.attr);){const r=this._consume(H.attribute_name,"Expected attribute name"),n=new _C(r.toString(),null);if(this._match(H.tokens.paren_left)){if(n.value=this._consume(H.literal_or_ident,"Expected attribute value").toString(),this._check(H.tokens.comma)){this._advance();do{const i=this._consume(H.literal_or_ident,"Expected attribute value").toString();n.value instanceof Array||(n.value=[n.value]),n.value.push(i)}while(this._match(H.tokens.comma))}this._consume(H.tokens.paren_right,"Expected ')'")}e.push(n)}return e.length==0?null:e}}class aA{constructor(e,r){this.name=e,this.attributes=r,this.size=0}get isArray(){return!1}get isStruct(){return!1}get isTemplate(){return!1}}class g2{constructor(e,r,n){this.name=e,this.type=r,this.attributes=n,this.offset=0,this.size=0}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray?this.type.format:this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class mc extends aA{constructor(e,r){super(e,r),this.members=[],this.align=0,this.startLine=-1,this.endLine=-1,this.inUse=!1}get isStruct(){return!0}}class Rh extends aA{constructor(e,r){super(e,r),this.count=0,this.stride=0}get isArray(){return!0}}class p2 extends aA{constructor(e,r,n,i){super(e,n),this.format=r,this.access=i}get isTemplate(){return!0}}var zs;(function(t){t[t.Uniform=0]="Uniform",t[t.Storage=1]="Storage",t[t.Texture=2]="Texture",t[t.Sampler=3]="Sampler",t[t.StorageTexture=4]="StorageTexture"})(zs||(zs={}));class yc{constructor(e,r,n,i,o,f,p){this.name=e,this.type=r,this.group=n,this.binding=i,this.attributes=o,this.resourceType=f,this.access=p}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get size(){return this.type.size}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray?this.type.format:this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class vC{constructor(e,r){this.name=e,this.type=r}}class vc{constructor(e,r){this.align=e,this.size=r}}class wC{constructor(e,r,n,i){this.name=e,this.type=r,this.locationType=n,this.location=i,this.interpolation=null}}class _2{constructor(e,r,n,i){this.name=e,this.type=r,this.locationType=n,this.location=i}}class TC{constructor(e,r,n,i){this.name=e,this.type=r,this.attributes=n,this.id=i}}class EC{constructor(e,r){this.name=e,this.type=r}}class SC{constructor(e,r=null){this.stage=null,this.inputs=[],this.outputs=[],this.arguments=[],this.returnType=null,this.resources=[],this.overrides=[],this.startLine=-1,this.endLine=-1,this.inUse=!1,this.calls=new Set,this.name=e,this.stage=r}}class bC{constructor(){this.vertex=[],this.fragment=[],this.compute=[]}}class CC{constructor(e){this.resources=null,this.inUse=!1,this.info=null,this.node=e}}class is{constructor(e){this.uniforms=[],this.storage=[],this.textures=[],this.samplers=[],this.aliases=[],this.overrides=[],this.structs=[],this.entry=new bC,this.functions=[],this._types=new Map,this._functions=new Map,e&&this.update(e)}_isStorageTexture(e){return e.name=="texture_storage_1d"||e.name=="texture_storage_2d"||e.name=="texture_storage_2d_array"||e.name=="texture_storage_3d"}update(e){const n=new yC().parse(e);for(const i of n)i instanceof vd&&this._functions.set(i.name,new CC(i));for(const i of n)if(i instanceof Xo){const o=this._getTypeInfo(i,null);o instanceof mc&&this.structs.push(o)}for(const i of n){if(i instanceof iy){this.aliases.push(this._getAliasInfo(i));continue}if(i instanceof ry){const o=i,f=this._getAttributeNum(o.attributes,"id",0),p=o.type!=null?this._getTypeInfo(o.type,o.attributes):null;this.overrides.push(new TC(o.name,p,o.attributes,f));continue}if(this._isUniformVar(i)){const o=i,f=this._getAttributeNum(o.attributes,"group",0),p=this._getAttributeNum(o.attributes,"binding",0),y=this._getTypeInfo(o.type,o.attributes),T=new yc(o.name,y,f,p,o.attributes,zs.Uniform,o.access);this.uniforms.push(T);continue}if(this._isStorageVar(i)){const o=i,f=this._getAttributeNum(o.attributes,"group",0),p=this._getAttributeNum(o.attributes,"binding",0),y=this._getTypeInfo(o.type,o.attributes),T=this._isStorageTexture(y),R=new yc(o.name,y,f,p,o.attributes,T?zs.StorageTexture:zs.Storage,o.access);this.storage.push(R);continue}if(this._isTextureVar(i)){const o=i,f=this._getAttributeNum(o.attributes,"group",0),p=this._getAttributeNum(o.attributes,"binding",0),y=this._getTypeInfo(o.type,o.attributes),T=this._isStorageTexture(y),R=new yc(o.name,y,f,p,o.attributes,T?zs.StorageTexture:zs.Texture,o.access);T?this.storage.push(R):this.textures.push(R);continue}if(this._isSamplerVar(i)){const o=i,f=this._getAttributeNum(o.attributes,"group",0),p=this._getAttributeNum(o.attributes,"binding",0),y=this._getTypeInfo(o.type,o.attributes),T=new yc(o.name,y,f,p,o.attributes,zs.Sampler,o.access);this.samplers.push(T);continue}if(i instanceof vd){const o=this._getAttribute(i,"vertex"),f=this._getAttribute(i,"fragment"),p=this._getAttribute(i,"compute"),y=o||f||p,T=new SC(i.name,y==null?void 0:y.name);T.startLine=i.startLine,T.endLine=i.endLine,this.functions.push(T),this._functions.get(i.name).info=T,y?(this._functions.get(i.name).inUse=!0,T.inUse=!0,T.resources=this._findResources(i,!!y),T.inputs=this._getInputs(i.args),T.outputs=this._getOutputs(i.returnType),this.entry[y.name].push(T)):(T.arguments=i.args.map(R=>new EC(R.name,this._getTypeInfo(R.type,R.attributes))),T.returnType=i.returnType?this._getTypeInfo(i.returnType,i.attributes):null);continue}}for(const i of this._functions.values())i.info&&(i.info.inUse=i.inUse,this._addCalls(i.node,i.info.calls));for(const i of this._functions.values())i.node.search(o=>{var f;if(o.astNodeType==="varExpr"){const p=o;for(const y of this.overrides)p.name==y.name&&((f=i.info)===null||f===void 0||f.overrides.push(y))}});for(const i of this.uniforms)this._markStructsInUse(i.type);for(const i of this.storage)this._markStructsInUse(i.type)}_markStructsInUse(e){if(e)if(e.isStruct){if(e.inUse=!0,e.members)for(const r of e.members)this._markStructsInUse(r.type)}else if(e.isArray)this._markStructsInUse(e.format);else if(e.isTemplate)e.format&&this._markStructsInUse(e.format);else{const r=this._getAlias(e.name);r&&this._markStructsInUse(r)}}_addCalls(e,r){var n;for(const i of e.calls){const o=(n=this._functions.get(i.name))===null||n===void 0?void 0:n.info;o&&r.add(o)}}findResource(e,r){for(const n of this.uniforms)if(n.group==e&&n.binding==r)return n;for(const n of this.storage)if(n.group==e&&n.binding==r)return n;for(const n of this.textures)if(n.group==e&&n.binding==r)return n;for(const n of this.samplers)if(n.group==e&&n.binding==r)return n;return null}_findResource(e){for(const r of this.uniforms)if(r.name==e)return r;for(const r of this.storage)if(r.name==e)return r;for(const r of this.textures)if(r.name==e)return r;for(const r of this.samplers)if(r.name==e)return r;return null}_markStructsFromAST(e){const r=this._getTypeInfo(e,null);this._markStructsInUse(r)}_findResources(e,r){const n=[],i=this,o=[];return e.search(f=>{if(f instanceof tf)o.push({});else if(f instanceof rf)o.pop();else if(f instanceof $o){const p=f;r&&p.type!==null&&this._markStructsFromAST(p.type),o.length>0&&(o[o.length-1][p.name]=p)}else if(f instanceof Ga){const p=f;r&&p.type!==null&&this._markStructsFromAST(p.type)}else if(f instanceof wd){const p=f;r&&p.type!==null&&this._markStructsFromAST(p.type),o.length>0&&(o[o.length-1][p.name]=p)}else if(f instanceof Td){const p=f;if(o.length>0&&o[o.length-1][p.name])return;const y=i._findResource(p.name);y&&n.push(y)}else if(f instanceof ay){const p=f,y=i._functions.get(p.name);y&&(r&&(y.inUse=!0),e.calls.add(y.node),y.resources===null&&(y.resources=i._findResources(y.node,r)),n.push(...y.resources))}else if(f instanceof ny){const p=f,y=i._functions.get(p.name);y&&(r&&(y.inUse=!0),e.calls.add(y.node),y.resources===null&&(y.resources=i._findResources(y.node,r)),n.push(...y.resources))}}),[...new Map(n.map(f=>[f.name,f])).values()]}getBindGroups(){const e=[];function r(n,i){n>=e.length&&(e.length=n+1),e[n]===void 0&&(e[n]=[]),i>=e[n].length&&(e[n].length=i+1)}for(const n of this.uniforms){r(n.group,n.binding);const i=e[n.group];i[n.binding]=n}for(const n of this.storage){r(n.group,n.binding);const i=e[n.group];i[n.binding]=n}for(const n of this.textures){r(n.group,n.binding);const i=e[n.group];i[n.binding]=n}for(const n of this.samplers){r(n.group,n.binding);const i=e[n.group];i[n.binding]=n}return e}_getOutputs(e,r=void 0){if(r===void 0&&(r=[]),e instanceof Xo)this._getStructOutputs(e,r);else{const n=this._getOutputInfo(e);n!==null&&r.push(n)}return r}_getStructOutputs(e,r){for(const n of e.members)if(n.type instanceof Xo)this._getStructOutputs(n.type,r);else{const i=this._getAttribute(n,"location")||this._getAttribute(n,"builtin");if(i!==null){const o=this._getTypeInfo(n.type,n.type.attributes),f=this._parseInt(i.value),p=new _2(n.name,o,i.name,f);r.push(p)}}}_getOutputInfo(e){const r=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(r!==null){const n=this._getTypeInfo(e,e.attributes),i=this._parseInt(r.value);return new _2("",n,r.name,i)}return null}_getInputs(e,r=void 0){r===void 0&&(r=[]);for(const n of e)if(n.type instanceof Xo)this._getStructInputs(n.type,r);else{const i=this._getInputInfo(n);i!==null&&r.push(i)}return r}_getStructInputs(e,r){for(const n of e.members)if(n.type instanceof Xo)this._getStructInputs(n.type,r);else{const i=this._getInputInfo(n);i!==null&&r.push(i)}}_getInputInfo(e){const r=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(r!==null){const n=this._getAttribute(e,"interpolation"),i=this._getTypeInfo(e.type,e.attributes),o=this._parseInt(r.value),f=new wC(e.name,i,r.name,o);return n!==null&&(f.interpolation=this._parseString(n.value)),f}return null}_parseString(e){return e instanceof Array&&(e=e[0]),e}_parseInt(e){e instanceof Array&&(e=e[0]);const r=parseInt(e);return isNaN(r)?e:r}_getAlias(e){for(const r of this.aliases)if(r.name==e)return r.type;return null}_getAliasInfo(e){return new vC(e.name,this._getTypeInfo(e.type,null))}_getTypeInfo(e,r){if(this._types.has(e))return this._types.get(e);if(e instanceof oy){const i=e,o=i.format?this._getTypeInfo(i.format,i.attributes):null,f=new Rh(i.name,r);return f.format=o,f.count=i.count,this._types.set(e,f),this._updateTypeInfo(f),f}if(e instanceof Xo){const i=e,o=new mc(i.name,r);o.startLine=i.startLine,o.endLine=i.endLine;for(const f of i.members){const p=this._getTypeInfo(f.type,f.attributes);o.members.push(new g2(f.name,p,f.attributes))}return this._types.set(e,o),this._updateTypeInfo(o),o}if(e instanceof Pl){const i=e,o=i.format instanceof ua,f=i.format?o?this._getTypeInfo(i.format,null):new aA(i.format,null):null,p=new p2(i.name,f,r,i.access);return this._types.set(e,p),this._updateTypeInfo(p),p}if(e instanceof sy){const i=e,o=i.format?this._getTypeInfo(i.format,null):null,f=new p2(i.name,o,r,i.access);return this._types.set(e,f),this._updateTypeInfo(f),f}const n=new aA(e.name,r);return this._types.set(e,n),this._updateTypeInfo(n),n}_updateTypeInfo(e){var r,n;const i=this._getTypeSize(e);if(e.size=(r=i==null?void 0:i.size)!==null&&r!==void 0?r:0,e instanceof Rh&&e.format){const o=this._getTypeSize(e.format);e.stride=(n=o==null?void 0:o.size)!==null&&n!==void 0?n:0,this._updateTypeInfo(e.format)}e instanceof mc&&this._updateStructInfo(e)}_updateStructInfo(e){var r;let n=0,i=0,o=0,f=0;for(let p=0,y=e.members.length;p<y;++p){const T=e.members[p],R=this._getTypeSize(T);if(!R)continue;(r=this._getAlias(T.type.name))!==null&&r!==void 0||T.type;const x=R.align,M=R.size;n=this._roundUp(x,n+i),i=M,o=n,f=Math.max(f,x),T.offset=n,T.size=M,this._updateTypeInfo(T.type)}e.size=this._roundUp(f,o+i),e.align=f}_getTypeSize(e){var r,n;if(e==null)return null;const i=this._getAttributeNum(e.attributes,"size",0),o=this._getAttributeNum(e.attributes,"align",0);if(e instanceof g2&&(e=e.type),e instanceof aA){const f=this._getAlias(e.name);f!==null&&(e=f)}{const f=is._typeInfo[e.name];if(f!==void 0){const p=((r=e.format)===null||r===void 0?void 0:r.name)==="f16"?2:1;return new vc(Math.max(o,f.align/p),Math.max(i,f.size/p))}}{const f=is._typeInfo[e.name.substring(0,e.name.length-1)];if(f){const p=e.name[e.name.length-1]==="h"?2:1;return new vc(Math.max(o,f.align/p),Math.max(i,f.size/p))}}if(e instanceof Rh){let f=e,p=8,y=8;const T=this._getTypeSize(f.format);T!==null&&(y=T.size,p=T.align);const R=f.count,x=this._getAttributeNum((n=e==null?void 0:e.attributes)!==null&&n!==void 0?n:null,"stride",this._roundUp(p,y));return y=R*x,i&&(y=i),new vc(Math.max(o,p),Math.max(i,y))}if(e instanceof mc){let f=0,p=0,y=0,T=0,R=0;for(const x of e.members){const M=this._getTypeSize(x.type);M!==null&&(f=Math.max(M.align,f),y=this._roundUp(M.align,y+T),T=M.size,R=y)}return p=this._roundUp(f,R+T),new vc(Math.max(o,f),Math.max(i,p))}return null}_isUniformVar(e){return e instanceof $o&&e.storage=="uniform"}_isStorageVar(e){return e instanceof $o&&e.storage=="storage"}_isTextureVar(e){return e instanceof $o&&e.type!==null&&is._textureTypes.indexOf(e.type.name)!=-1}_isSamplerVar(e){return e instanceof $o&&e.type!==null&&is._samplerTypes.indexOf(e.type.name)!=-1}_getAttribute(e,r){const n=e;if(!n||!n.attributes)return null;const i=n.attributes;for(let o of i)if(o.name==r)return o;return null}_getAttributeNum(e,r,n){if(e===null)return n;for(let i of e)if(i.name==r){let o=i!==null&&i.value!==null?i.value:n;return o instanceof Array&&(o=o[0]),typeof o=="number"?o:typeof o=="string"?parseInt(o):n}return n}_roundUp(e,r){return Math.ceil(r/e)*e}}is._typeInfo={f16:{align:2,size:2},i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},atomic:{align:4,size:4},vec2:{align:8,size:8},vec3:{align:16,size:12},vec4:{align:16,size:16},mat2x2:{align:8,size:16},mat3x2:{align:8,size:24},mat4x2:{align:8,size:32},mat2x3:{align:16,size:32},mat3x3:{align:16,size:48},mat4x3:{align:16,size:64},mat2x4:{align:16,size:32},mat3x4:{align:16,size:48},mat4x4:{align:16,size:64}};is._textureTypes=H.any_texture_type.map(t=>t.name);is._samplerTypes=H.sampler_type.map(t=>t.name);function RC(t){var o;const e={attributes:[],bindings:[]};let r;try{r=PC(t)}catch(f){return Be.error(f.message)(),e}for(const f of r.uniforms){const p=[];for(const y of((o=f.type)==null?void 0:o.members)||[])p.push({name:y.name,type:m2(y.type)});e.bindings.push({type:"uniform",name:f.name,location:f.binding,group:f.group,members:p})}const n=r.entry.vertex[0],i=(n==null?void 0:n.inputs.length)||0;for(let f=0;f<i;f++){const p=n.inputs[f];if(p.locationType==="location"){const y=m2(p.type);e.attributes.push({name:p.name,location:Number(p.location),type:y})}}return e}function m2(t){return t.format?`${t.name}<${t.format.name}>`:t.name}function PC(t){try{return new is(t)}catch(e){if(e instanceof Error)throw e;let r="WGSL parse error";throw typeof e=="object"&&(e!=null&&e.message)&&(r+=`: ${e.message} `),typeof e=="object"&&(e!=null&&e.token)&&(r+=e.token.line||""),new Error(r,{cause:e})}}const kC=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;
const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;
const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;
const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;
float sin_taylor_fp32(float a) {
float r, s, t, x;
if (a == 0.0) {
return 0.0;
}
x = -a * a;
s = a;
r = a;
r = r * x;
t = r * INVERSE_FACTORIAL_3;
s = s + t;
r = r * x;
t = r * INVERSE_FACTORIAL_5;
s = s + t;
r = r * x;
t = r * INVERSE_FACTORIAL_7;
s = s + t;
r = r * x;
t = r * INVERSE_FACTORIAL_9;
s = s + t;
return s;
}
void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
if (a == 0.0) {
sin_t = 0.0;
cos_t = 1.0;
}
sin_t = sin_taylor_fp32(a);
cos_t = sqrt(1.0 - sin_t * sin_t);
}
float tan_taylor_fp32(float a) {
float sin_a;
float cos_a;
if (a == 0.0) {
return 0.0;
}
float z = floor(a / TWO_PI);
float r = a - TWO_PI * z;
float t;
float q = floor(r / PI_2 + 0.5);
int j = int(q);
if (j < -2 || j > 2) {
return 1.0 / 0.0;
}
t = r - PI_2 * q;
q = floor(t / PI_16 + 0.5);
int k = int(q);
int abs_k = int(abs(float(k)));
if (abs_k > 4) {
return 1.0 / 0.0;
} else {
t = t - PI_16 * q;
}
float u = 0.0;
float v = 0.0;
float sin_t, cos_t;
float s, c;
sincos_taylor_fp32(t, sin_t, cos_t);
if (k == 0) {
s = sin_t;
c = cos_t;
} else {
if (abs(float(abs_k) - 1.0) < 0.5) {
u = COS_TABLE_0;
v = SIN_TABLE_0;
} else if (abs(float(abs_k) - 2.0) < 0.5) {
u = COS_TABLE_1;
v = SIN_TABLE_1;
} else if (abs(float(abs_k) - 3.0) < 0.5) {
u = COS_TABLE_2;
v = SIN_TABLE_2;
} else if (abs(float(abs_k) - 4.0) < 0.5) {
u = COS_TABLE_3;
v = SIN_TABLE_3;
}
if (k > 0) {
s = u * sin_t + v * cos_t;
c = u * cos_t - v * sin_t;
} else {
s = u * sin_t - v * cos_t;
c = u * cos_t + v * sin_t;
}
}
if (j == 0) {
sin_a = s;
cos_a = c;
} else if (j == 1) {
sin_a = c;
cos_a = -s;
} else if (j == -1) {
sin_a = -c;
cos_a = s;
} else {
sin_a = -s;
cos_a = -c;
}
return sin_a / cos_a;
}
#endif
float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
return tan_taylor_fp32(a);
#else
return tan(a);
#endif
}
`,xC={name:"fp32",vs:kC},MC=[0,1,1,1],NC=`uniform pickingUniforms {
float isActive;
float isAttribute;
float isHighlightActive;
float useFloatColors;
vec3 highlightedObjectColor;
vec4 highlightColor;
} picking;
out vec4 picking_vRGBcolor_Avalid;
vec3 picking_normalizeColor(vec3 color) {
return picking.useFloatColors > 0.5 ? color : color / 255.0;
}
vec4 picking_normalizeColor(vec4 color) {
return picking.useFloatColors > 0.5 ? color : color / 255.0;
}
bool picking_isColorZero(vec3 color) {
return dot(color, vec3(1.0)) < 0.00001;
}
bool picking_isColorValid(vec3 color) {
return dot(color, vec3(1.0)) > 0.00001;
}
bool isVertexHighlighted(vec3 vertexColor) {
vec3 highlightedObjectColor = picking_normalizeColor(picking.highlightedObjectColor);
return
bool(picking.isHighlightActive) && picking_isColorZero(abs(vertexColor - highlightedObjectColor));
}
void picking_setPickingColor(vec3 pickingColor) {
pickingColor = picking_normalizeColor(pickingColor);
if (bool(picking.isActive)) {
picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));
if (!bool(picking.isAttribute)) {
picking_vRGBcolor_Avalid.rgb = pickingColor;
}
} else {
picking_vRGBcolor_Avalid.a = float(isVertexHighlighted(pickingColor));
}
}
void picking_setPickingAttribute(float value) {
if (bool(picking.isAttribute)) {
picking_vRGBcolor_Avalid.r = value;
}
}
void picking_setPickingAttribute(vec2 value) {
if (bool(picking.isAttribute)) {
picking_vRGBcolor_Avalid.rg = value;
}
}
void picking_setPickingAttribute(vec3 value) {
if (bool(picking.isAttribute)) {
picking_vRGBcolor_Avalid.rgb = value;
}
}
`,OC=`uniform pickingUniforms {
float isActive;
float isAttribute;
float isHighlightActive;
float useFloatColors;
vec3 highlightedObjectColor;
vec4 highlightColor;
} picking;
in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
if (picking.isActive > 0.5) {
return color;
}
bool selected = bool(picking_vRGBcolor_Avalid.a);
if (selected) {
float highLightAlpha = picking.highlightColor.a;
float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
float highLightRatio = highLightAlpha / blendedAlpha;
vec3 blendedRGB = mix(color.rgb, picking.highlightColor.rgb, highLightRatio);
return vec4(blendedRGB, blendedAlpha);
} else {
return color;
}
}
vec4 picking_filterPickingColor(vec4 color) {
if (bool(picking.isActive)) {
if (picking_vRGBcolor_Avalid.a == 0.0) {
discard;
}
return picking_vRGBcolor_Avalid;
}
return color;
}
vec4 picking_filterColor(vec4 color) {
vec4 highlightColor = picking_filterHighlightColor(color);
return picking_filterPickingColor(highlightColor);
}
`,y2={name:"picking",vs:NC,fs:OC,uniformTypes:{isActive:"f32",isAttribute:"f32",isHighlightActive:"f32",useFloatColors:"f32",highlightedObjectColor:"vec3<f32>",highlightColor:"vec4<f32>"},defaultUniforms:{isActive:!1,isAttribute:!1,isHighlightActive:!1,useFloatColors:!0,highlightedObjectColor:[0,0,0],highlightColor:MC},getUniforms:DC};function DC(t={},e){const r={};if(t.highlightedObjectColor!==void 0)if(t.highlightedObjectColor===null)r.isHighlightActive=!1;else{r.isHighlightActive=!0;const n=t.highlightedObjectColor.slice(0,3);r.highlightedObjectColor=n}if(t.highlightColor){const n=Array.from(t.highlightColor,i=>i/255);Number.isFinite(n[3])||(n[3]=1),r.highlightColor=n}return t.isActive!==void 0&&(r.isActive=!!t.isActive,r.isAttribute=!!t.isAttribute),t.useFloatColors!==void 0&&(r.useFloatColors=!!t.useFloatColors),r}function uy(t,e=[],r=0){const n=Math.fround(t),i=t-n;return e[r]=n,e[r+1]=i,e}function IC(t){return t-Math.fround(t)}function FC(t){const e=new Float32Array(32);for(let r=0;r<4;++r)for(let n=0;n<4;++n){const i=r*4+n;uy(t[n*4+r],e,i*2)}return e}const LC=`uniform float ONE;
vec2 split(float a) {
const float SPLIT = 4097.0;
float t = a * SPLIT;
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
float a_hi = t * ONE - (t - a);
float a_lo = a * ONE - a_hi;
#else
float a_hi = t - (t - a);
float a_lo = a - a_hi;
#endif
return vec2(a_hi, a_lo);
}
vec2 split2(vec2 a) {
vec2 b = split(a.x);
b.y += a.y;
return b;
}
vec2 quickTwoSum(float a, float b) {
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
float sum = (a + b) * ONE;
float err = b - (sum - a) * ONE;
#else
float sum = a + b;
float err = b - (sum - a);
#endif
return vec2(sum, err);
}
vec2 twoSum(float a, float b) {
float s = (a + b);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
float v = (s * ONE - a) * ONE;
float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);
#else
float v = s - a;
float err = (a - (s - v)) + (b - v);
#endif
return vec2(s, err);
}
vec2 twoSub(float a, float b) {
float s = (a - b);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
float v = (s * ONE - a) * ONE;
float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);
#else
float v = s - a;
float err = (a - (s - v)) - (b + v);
#endif
return vec2(s, err);
}
vec2 twoSqr(float a) {
float prod = a * a;
vec2 a_fp64 = split(a);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *
a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;
#else
float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;
#endif
return vec2(prod, err);
}
vec2 twoProd(float a, float b) {
float prod = a * b;
vec2 a_fp64 = split(a);
vec2 b_fp64 = split(b);
float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +
a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;
return vec2(prod, err);
}
vec2 sum_fp64(vec2 a, vec2 b) {
vec2 s, t;
s = twoSum(a.x, b.x);
t = twoSum(a.y, b.y);
s.y += t.x;
s = quickTwoSum(s.x, s.y);
s.y += t.y;
s = quickTwoSum(s.x, s.y);
return s;
}
vec2 sub_fp64(vec2 a, vec2 b) {
vec2 s, t;
s = twoSub(a.x, b.x);
t = twoSub(a.y, b.y);
s.y += t.x;
s = quickTwoSum(s.x, s.y);
s.y += t.y;
s = quickTwoSum(s.x, s.y);
return s;
}
vec2 mul_fp64(vec2 a, vec2 b) {
vec2 prod = twoProd(a.x, b.x);
prod.y += a.x * b.y;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
prod = split2(prod);
#endif
prod = quickTwoSum(prod.x, prod.y);
prod.y += a.y * b.x;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
prod = split2(prod);
#endif
prod = quickTwoSum(prod.x, prod.y);
return prod;
}
vec2 div_fp64(vec2 a, vec2 b) {
float xn = 1.0 / b.x;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
vec2 yn = mul_fp64(a, vec2(xn, 0));
#else
vec2 yn = a * xn;
#endif
float diff = (sub_fp64(a, mul_fp64(b, yn))).x;
vec2 prod = twoProd(xn, diff);
return sum_fp64(yn, prod);
}
vec2 sqrt_fp64(vec2 a) {
if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);
if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);
float x = 1.0 / sqrt(a.x);
float yn = a.x * x;
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
vec2 yn_sqr = twoSqr(yn) * ONE;
#else
vec2 yn_sqr = twoSqr(yn);
#endif
float diff = sub_fp64(a, yn_sqr).x;
vec2 prod = twoProd(x * 0.5, diff);
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
return sum_fp64(split(yn), prod);
#else
return sum_fp64(vec2(yn, 0.0), prod);
#endif
}
`,UC={ONE:1};function BC(){return UC}const VC={name:"fp64-arithmetic",vs:LC,getUniforms:BC,fp64ify:uy,fp64LowPart:IC,fp64ifyMatrix4:FC},zC={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0,_cartographicRadians:!1};globalThis.mathgl=globalThis.mathgl||{config:{...zC}};const Yn=globalThis.mathgl.config;function HC(t,{precision:e=Yn.precision}={}){return t=jC(t),`${parseFloat(t.toPrecision(e))}`}function hA(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function js(t,e,r){return XC(t,n=>Math.max(e,Math.min(r,n)))}function dA(t,e,r){return hA(t)?t.map((n,i)=>dA(n,e[i],r)):r*e+(1-r)*t}function Wl(t,e,r){const n=Yn.EPSILON;try{if(t===e)return!0;if(hA(t)&&hA(e)){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!Wl(t[i],e[i]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):typeof t=="number"&&typeof e=="number"?Math.abs(t-e)<=Yn.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{Yn.EPSILON=n}}function jC(t){return Math.round(t/Yn.EPSILON)*Yn.EPSILON}function WC(t){return t.clone?t.clone():new Array(t.length)}function XC(t,e,r){if(hA(t)){const n=t;r=r||WC(n);for(let i=0;i<r.length&&i<n.length;++i){const o=typeof t=="number"?t:t[i];r[i]=e(o,i,r)}return r}return e(t)}class cy extends Array{clone(){return new this.constructor().copy(this)}fromArray(e,r=0){for(let n=0;n<this.ELEMENTS;++n)this[n]=e[n+r];return this.check()}toArray(e=[],r=0){for(let n=0;n<this.ELEMENTS;++n)e[r+n]=this[n];return e}toObject(e){return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:hA(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Yn)}formatString(e){let r="";for(let n=0;n<this.ELEMENTS;++n)r+=(n>0?", ":"")+HC(this[n],e);return`${e.printTypes?this.constructor.name:""}[${r}]`}equals(e){if(!e||this.length!==e.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(!Wl(this[r],e[r]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(this[r]!==e[r])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,r,n){if(n===void 0)return this.lerp(this,e,r);for(let i=0;i<this.ELEMENTS;++i){const o=e[i],f=typeof r=="number"?r:r[i];this[i]=o+n*(f-o)}return this.check()}min(e){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(e[r],this[r]);return this.check()}max(e){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.max(e[r],this[r]);return this.check()}clamp(e,r){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e[n]),r[n]);return this.check()}add(...e){for(const r of e)for(let n=0;n<this.ELEMENTS;++n)this[n]+=r[n];return this.check()}subtract(...e){for(const r of e)for(let n=0;n<this.ELEMENTS;++n)this[n]-=r[n];return this.check()}scale(e){if(typeof e=="number")for(let r=0;r<this.ELEMENTS;++r)this[r]*=e;else for(let r=0;r<this.ELEMENTS&&r<e.length;++r)this[r]*=e[r];return this.check()}multiplyByScalar(e){for(let r=0;r<this.ELEMENTS;++r)this[r]*=e;return this.check()}check(){if(Yn.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let e=this.length===this.ELEMENTS;for(let r=0;r<this.ELEMENTS;++r)e=e&&Number.isFinite(this[r]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let r=0;r<this.ELEMENTS;++r)this[r]=e;return this.check()}addScalar(e){for(let r=0;r<this.ELEMENTS;++r)this[r]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let r=0;r<this.ELEMENTS;++r)this[r]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,r){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e),r);return this.check()}get elements(){return this}}function $C(t,e){if(t.length!==e)return!1;for(let r=0;r<t.length;++r)if(!Number.isFinite(t[r]))return!1;return!0}function Mn(t){if(!Number.isFinite(t))throw new Error(`Invalid number ${JSON.stringify(t)}`);return t}function Ph(t,e,r=""){if(Yn.debug&&!$C(t,e))throw new Error(`math.gl: ${r} some fields set to invalid numbers'`);return t}function v2(t,e){if(!t)throw new Error(`math.gl assertion ${e}`)}class QC extends cy{get x(){return this[0]}set x(e){this[0]=Mn(e)}get y(){return this[1]}set y(e){this[1]=Mn(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let r=0;r<this.ELEMENTS;++r)e+=this[r]*this[r];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let r=0;for(let n=0;n<this.ELEMENTS;++n){const i=this[n]-e[n];r+=i*i}return Mn(r)}dot(e){let r=0;for(let n=0;n<this.ELEMENTS;++n)r+=this[n]*e[n];return Mn(r)}normalize(){const e=this.magnitude();if(e!==0)for(let r=0;r<this.ELEMENTS;++r)this[r]/=e;return this.check()}multiply(...e){for(const r of e)for(let n=0;n<this.ELEMENTS;++n)this[n]*=r[n];return this.check()}divide(...e){for(const r of e)for(let n=0;n<this.ELEMENTS;++n)this[n]/=r[n];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return v2(e>=0&&e<this.ELEMENTS,"index is out of range"),Mn(this[e])}setComponent(e,r){return v2(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=r,this.check()}addVectors(e,r){return this.copy(e).add(r)}subVectors(e,r){return this.copy(e).subtract(r)}multiplyVectors(e,r){return this.copy(e).multiply(r)}addScaledVector(e,r){return this.add(new this.constructor(e).multiplyScalar(r))}}const Ic=1e-6;let gA=typeof Float32Array<"u"?Float32Array:Array;function YC(){const t=new gA(2);return gA!=Float32Array&&(t[0]=0,t[1]=0),t}function w2(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function KC(t,e){return t[0]=-e[0],t[1]=-e[1],t}function fy(t,e,r,n){const i=e[0],o=e[1];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t}function ZC(t,e,r){const n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t}(function(){const t=YC();return function(e,r,n,i,o,f){let p,y;for(r||(r=2),n||(n=0),i?y=Math.min(i*r+n,e.length):y=e.length,p=n;p<y;p+=r)t[0]=e[p],t[1]=e[p+1],o(t,t,f),e[p]=t[0],e[p+1]=t[1];return e}})();function qC(t,e,r){const n=e[0],i=e[1],o=r[3]*n+r[7]*i||1;return t[0]=(r[0]*n+r[4]*i)/o,t[1]=(r[1]*n+r[5]*i)/o,t}function hy(t,e,r){const n=e[0],i=e[1],o=e[2],f=r[3]*n+r[7]*i+r[11]*o||1;return t[0]=(r[0]*n+r[4]*i+r[8]*o)/f,t[1]=(r[1]*n+r[5]*i+r[9]*o)/f,t[2]=(r[2]*n+r[6]*i+r[10]*o)/f,t}function GC(t,e,r){const n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t[2]=e[2],t}function JC(){const t=new gA(3);return gA!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function eR(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function tR(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function rR(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function nR(t,e,r){const n=e[0],i=e[1],o=e[2],f=r[0],p=r[1],y=r[2];return t[0]=i*y-o*p,t[1]=o*f-n*y,t[2]=n*p-i*f,t}function dy(t,e,r){const n=e[0],i=e[1],o=e[2];let f=r[3]*n+r[7]*i+r[11]*o+r[15];return f=f||1,t[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/f,t[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/f,t[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/f,t}function iR(t,e,r){const n=e[0],i=e[1],o=e[2];return t[0]=n*r[0]+i*r[3]+o*r[6],t[1]=n*r[1]+i*r[4]+o*r[7],t[2]=n*r[2]+i*r[5]+o*r[8],t}function sR(t,e,r){const n=r[0],i=r[1],o=r[2],f=r[3],p=e[0],y=e[1],T=e[2];let R=i*T-o*y,x=o*p-n*T,M=n*y-i*p,U=i*M-o*x,W=o*R-n*M,j=n*x-i*R;const G=f*2;return R*=G,x*=G,M*=G,U*=2,W*=2,j*=2,t[0]=p+R+U,t[1]=y+x+W,t[2]=T+M+j,t}function oR(t,e,r,n){const i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function aR(t,e,r,n){const i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function AR(t,e,r,n){const i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function lR(t,e){const r=t[0],n=t[1],i=t[2],o=e[0],f=e[1],p=e[2],y=Math.sqrt((r*r+n*n+i*i)*(o*o+f*f+p*p)),T=y&&rR(t,e)/y;return Math.acos(Math.min(Math.max(T,-1),1))}const uR=eR;(function(){const t=JC();return function(e,r,n,i,o,f){let p,y;for(r||(r=3),n||(n=0),i?y=Math.min(i*r+n,e.length):y=e.length,p=n;p<y;p+=r)t[0]=e[p],t[1]=e[p+1],t[2]=e[p+2],o(t,t,f),e[p]=t[0],e[p+1]=t[1],e[p+2]=t[2];return e}})();const kh=[0,0,0];let wc;class Hi extends QC{static get ZERO(){return wc||(wc=new Hi(0,0,0),Object.freeze(wc)),wc}constructor(e=0,r=0,n=0){super(-0,-0,-0),arguments.length===1&&hA(e)?this.copy(e):(Yn.debug&&(Mn(e),Mn(r),Mn(n)),this[0]=e,this[1]=r,this[2]=n)}set(e,r,n){return this[0]=e,this[1]=r,this[2]=n,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Yn.debug&&(Mn(e.x),Mn(e.y),Mn(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=Mn(e)}angle(e){return lR(this,e)}cross(e){return nR(this,this,e),this.check()}rotateX({radians:e,origin:r=kh}){return oR(this,this,r,e),this.check()}rotateY({radians:e,origin:r=kh}){return aR(this,this,r,e),this.check()}rotateZ({radians:e,origin:r=kh}){return AR(this,this,r,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return dy(this,this,e),this.check()}transformAsVector(e){return hy(this,this,e),this.check()}transformByMatrix3(e){return iR(this,this,e),this.check()}transformByMatrix2(e){return GC(this,this,e),this.check()}transformByQuaternion(e){return sR(this,this,e),this.check()}}class cR extends cy{toString(){let e="[";if(Yn.printRowMajor){e+="row-major:";for(let r=0;r<this.RANK;++r)for(let n=0;n<this.RANK;++n)e+=` ${this[n*this.RANK+r]}`}else{e+="column-major:";for(let r=0;r<this.ELEMENTS;++r)e+=` ${this[r]}`}return e+="]",e}getElementIndex(e,r){return r*this.RANK+e}getElement(e,r){return this[r*this.RANK+e]}setElement(e,r,n){return this[r*this.RANK+e]=Mn(n),this}getColumn(e,r=new Array(this.RANK).fill(-0)){const n=e*this.RANK;for(let i=0;i<this.RANK;++i)r[i]=this[n+i];return r}setColumn(e,r){const n=e*this.RANK;for(let i=0;i<this.RANK;++i)this[n+i]=r[i];return this}}function fR(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function hR(t,e){if(t===e){const r=e[1],n=e[2],i=e[3],o=e[6],f=e[7],p=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[11]=e[14],t[12]=i,t[13]=f,t[14]=p}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function Ed(t,e){const r=e[0],n=e[1],i=e[2],o=e[3],f=e[4],p=e[5],y=e[6],T=e[7],R=e[8],x=e[9],M=e[10],U=e[11],W=e[12],j=e[13],G=e[14],re=e[15],se=r*p-n*f,ce=r*y-i*f,we=r*T-o*f,be=n*y-i*p,Pe=n*T-o*p,Xe=i*T-o*y,nt=R*j-x*W,Ue=R*G-M*W,Je=R*re-U*W,it=x*G-M*j,mt=x*re-U*j,_t=M*re-U*G;let ct=se*_t-ce*mt+we*it+be*Je-Pe*Ue+Xe*nt;return ct?(ct=1/ct,t[0]=(p*_t-y*mt+T*it)*ct,t[1]=(i*mt-n*_t-o*it)*ct,t[2]=(j*Xe-G*Pe+re*be)*ct,t[3]=(M*Pe-x*Xe-U*be)*ct,t[4]=(y*Je-f*_t-T*Ue)*ct,t[5]=(r*_t-i*Je+o*Ue)*ct,t[6]=(G*we-W*Xe-re*ce)*ct,t[7]=(R*Xe-M*we+U*ce)*ct,t[8]=(f*mt-p*Je+T*nt)*ct,t[9]=(n*Je-r*mt-o*nt)*ct,t[10]=(W*Pe-j*we+re*se)*ct,t[11]=(x*we-R*Pe-U*se)*ct,t[12]=(p*Ue-f*it-y*nt)*ct,t[13]=(r*it-n*Ue+i*nt)*ct,t[14]=(j*ce-W*be-G*se)*ct,t[15]=(R*be-x*ce+M*se)*ct,t):null}function dR(t){const e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],f=t[5],p=t[6],y=t[7],T=t[8],R=t[9],x=t[10],M=t[11],U=t[12],W=t[13],j=t[14],G=t[15],re=e*f-r*o,se=e*p-n*o,ce=r*p-n*f,we=T*W-R*U,be=T*j-x*U,Pe=R*j-x*W,Xe=e*Pe-r*be+n*we,nt=o*Pe-f*be+p*we,Ue=T*ce-R*se+x*re,Je=U*ce-W*se+j*re;return y*Xe-i*nt+G*Ue-M*Je}function Jo(t,e,r){const n=e[0],i=e[1],o=e[2],f=e[3],p=e[4],y=e[5],T=e[6],R=e[7],x=e[8],M=e[9],U=e[10],W=e[11],j=e[12],G=e[13],re=e[14],se=e[15];let ce=r[0],we=r[1],be=r[2],Pe=r[3];return t[0]=ce*n+we*p+be*x+Pe*j,t[1]=ce*i+we*y+be*M+Pe*G,t[2]=ce*o+we*T+be*U+Pe*re,t[3]=ce*f+we*R+be*W+Pe*se,ce=r[4],we=r[5],be=r[6],Pe=r[7],t[4]=ce*n+we*p+be*x+Pe*j,t[5]=ce*i+we*y+be*M+Pe*G,t[6]=ce*o+we*T+be*U+Pe*re,t[7]=ce*f+we*R+be*W+Pe*se,ce=r[8],we=r[9],be=r[10],Pe=r[11],t[8]=ce*n+we*p+be*x+Pe*j,t[9]=ce*i+we*y+be*M+Pe*G,t[10]=ce*o+we*T+be*U+Pe*re,t[11]=ce*f+we*R+be*W+Pe*se,ce=r[12],we=r[13],be=r[14],Pe=r[15],t[12]=ce*n+we*p+be*x+Pe*j,t[13]=ce*i+we*y+be*M+Pe*G,t[14]=ce*o+we*T+be*U+Pe*re,t[15]=ce*f+we*R+be*W+Pe*se,t}function nf(t,e,r){const n=r[0],i=r[1],o=r[2];let f,p,y,T,R,x,M,U,W,j,G,re;return e===t?(t[12]=e[0]*n+e[4]*i+e[8]*o+e[12],t[13]=e[1]*n+e[5]*i+e[9]*o+e[13],t[14]=e[2]*n+e[6]*i+e[10]*o+e[14],t[15]=e[3]*n+e[7]*i+e[11]*o+e[15]):(f=e[0],p=e[1],y=e[2],T=e[3],R=e[4],x=e[5],M=e[6],U=e[7],W=e[8],j=e[9],G=e[10],re=e[11],t[0]=f,t[1]=p,t[2]=y,t[3]=T,t[4]=R,t[5]=x,t[6]=M,t[7]=U,t[8]=W,t[9]=j,t[10]=G,t[11]=re,t[12]=f*n+R*i+W*o+e[12],t[13]=p*n+x*i+j*o+e[13],t[14]=y*n+M*i+G*o+e[14],t[15]=T*n+U*i+re*o+e[15]),t}function dg(t,e,r){const n=r[0],i=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function gR(t,e,r,n){let i=n[0],o=n[1],f=n[2],p=Math.sqrt(i*i+o*o+f*f),y,T,R,x,M,U,W,j,G,re,se,ce,we,be,Pe,Xe,nt,Ue,Je,it,mt,_t,ct,Vt;return p<Ic?null:(p=1/p,i*=p,o*=p,f*=p,T=Math.sin(r),y=Math.cos(r),R=1-y,x=e[0],M=e[1],U=e[2],W=e[3],j=e[4],G=e[5],re=e[6],se=e[7],ce=e[8],we=e[9],be=e[10],Pe=e[11],Xe=i*i*R+y,nt=o*i*R+f*T,Ue=f*i*R-o*T,Je=i*o*R-f*T,it=o*o*R+y,mt=f*o*R+i*T,_t=i*f*R+o*T,ct=o*f*R-i*T,Vt=f*f*R+y,t[0]=x*Xe+j*nt+ce*Ue,t[1]=M*Xe+G*nt+we*Ue,t[2]=U*Xe+re*nt+be*Ue,t[3]=W*Xe+se*nt+Pe*Ue,t[4]=x*Je+j*it+ce*mt,t[5]=M*Je+G*it+we*mt,t[6]=U*Je+re*it+be*mt,t[7]=W*Je+se*it+Pe*mt,t[8]=x*_t+j*ct+ce*Vt,t[9]=M*_t+G*ct+we*Vt,t[10]=U*_t+re*ct+be*Vt,t[11]=W*_t+se*ct+Pe*Vt,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function gy(t,e,r){const n=Math.sin(r),i=Math.cos(r),o=e[4],f=e[5],p=e[6],y=e[7],T=e[8],R=e[9],x=e[10],M=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+T*n,t[5]=f*i+R*n,t[6]=p*i+x*n,t[7]=y*i+M*n,t[8]=T*i-o*n,t[9]=R*i-f*n,t[10]=x*i-p*n,t[11]=M*i-y*n,t}function pR(t,e,r){const n=Math.sin(r),i=Math.cos(r),o=e[0],f=e[1],p=e[2],y=e[3],T=e[8],R=e[9],x=e[10],M=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-T*n,t[1]=f*i-R*n,t[2]=p*i-x*n,t[3]=y*i-M*n,t[8]=o*n+T*i,t[9]=f*n+R*i,t[10]=p*n+x*i,t[11]=y*n+M*i,t}function py(t,e,r){const n=Math.sin(r),i=Math.cos(r),o=e[0],f=e[1],p=e[2],y=e[3],T=e[4],R=e[5],x=e[6],M=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+T*n,t[1]=f*i+R*n,t[2]=p*i+x*n,t[3]=y*i+M*n,t[4]=T*i-o*n,t[5]=R*i-f*n,t[6]=x*i-p*n,t[7]=M*i-y*n,t}function _R(t,e){const r=e[0],n=e[1],i=e[2],o=e[3],f=r+r,p=n+n,y=i+i,T=r*f,R=n*f,x=n*p,M=i*f,U=i*p,W=i*y,j=o*f,G=o*p,re=o*y;return t[0]=1-x-W,t[1]=R+re,t[2]=M-G,t[3]=0,t[4]=R-re,t[5]=1-T-W,t[6]=U+j,t[7]=0,t[8]=M+G,t[9]=U-j,t[10]=1-T-x,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function mR(t,e,r,n,i,o,f){const p=1/(r-e),y=1/(i-n),T=1/(o-f);return t[0]=o*2*p,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o*2*y,t[6]=0,t[7]=0,t[8]=(r+e)*p,t[9]=(i+n)*y,t[10]=(f+o)*T,t[11]=-1,t[12]=0,t[13]=0,t[14]=f*o*2*T,t[15]=0,t}function yR(t,e,r,n,i){const o=1/Math.tan(e/2);if(t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0){const f=1/(n-i);t[10]=(i+n)*f,t[14]=2*i*n*f}else t[10]=-1,t[14]=-2*n;return t}const vR=yR;function wR(t,e,r,n,i,o,f){const p=1/(e-r),y=1/(n-i),T=1/(o-f);return t[0]=-2*p,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*y,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*T,t[11]=0,t[12]=(e+r)*p,t[13]=(i+n)*y,t[14]=(f+o)*T,t[15]=1,t}const TR=wR;function ER(t,e,r,n){let i,o,f,p,y,T,R,x,M,U;const W=e[0],j=e[1],G=e[2],re=n[0],se=n[1],ce=n[2],we=r[0],be=r[1],Pe=r[2];return Math.abs(W-we)<Ic&&Math.abs(j-be)<Ic&&Math.abs(G-Pe)<Ic?fR(t):(x=W-we,M=j-be,U=G-Pe,i=1/Math.sqrt(x*x+M*M+U*U),x*=i,M*=i,U*=i,o=se*U-ce*M,f=ce*x-re*U,p=re*M-se*x,i=Math.sqrt(o*o+f*f+p*p),i?(i=1/i,o*=i,f*=i,p*=i):(o=0,f=0,p=0),y=M*p-U*f,T=U*o-x*p,R=x*f-M*o,i=Math.sqrt(y*y+T*T+R*R),i?(i=1/i,y*=i,T*=i,R*=i):(y=0,T=0,R=0),t[0]=o,t[1]=y,t[2]=x,t[3]=0,t[4]=f,t[5]=T,t[6]=M,t[7]=0,t[8]=p,t[9]=R,t[10]=U,t[11]=0,t[12]=-(o*W+f*j+p*G),t[13]=-(y*W+T*j+R*G),t[14]=-(x*W+M*j+U*G),t[15]=1,t)}function SR(){const t=new gA(4);return gA!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function bR(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function eu(t,e,r){const n=e[0],i=e[1],o=e[2],f=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*f,t[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*f,t[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*f,t[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*f,t}(function(){const t=SR();return function(e,r,n,i,o,f){let p,y;for(r||(r=4),n||(n=0),i?y=Math.min(i*r+n,e.length):y=e.length,p=n;p<y;p+=r)t[0]=e[p],t[1]=e[p+1],t[2]=e[p+2],t[3]=e[p+3],o(t,t,f),e[p]=t[0],e[p+1]=t[1],e[p+2]=t[2],e[p+3]=t[3];return e}})();var Sd;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"})(Sd||(Sd={}));const CR=45*Math.PI/180,RR=1,xh=.1,Mh=500,PR=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class ji extends cR{static get IDENTITY(){return xR()}static get ZERO(){return kR()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return Sd}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,r,n,i,o,f,p,y,T,R,x,M,U,W,j,G){return this[0]=e,this[1]=r,this[2]=n,this[3]=i,this[4]=o,this[5]=f,this[6]=p,this[7]=y,this[8]=T,this[9]=R,this[10]=x,this[11]=M,this[12]=U,this[13]=W,this[14]=j,this[15]=G,this.check()}setRowMajor(e,r,n,i,o,f,p,y,T,R,x,M,U,W,j,G){return this[0]=e,this[1]=o,this[2]=T,this[3]=U,this[4]=r,this[5]=f,this[6]=R,this[7]=W,this[8]=n,this[9]=p,this[10]=x,this[11]=j,this[12]=i,this[13]=y,this[14]=M,this[15]=G,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(PR)}fromObject(e){return this.check()}fromQuaternion(e){return _R(this,e),this.check()}frustum(e){const{left:r,right:n,bottom:i,top:o,near:f=xh,far:p=Mh}=e;return p===1/0?MR(this,r,n,i,o,f):mR(this,r,n,i,o,f,p),this.check()}lookAt(e){const{eye:r,center:n=[0,0,0],up:i=[0,1,0]}=e;return ER(this,r,n,i),this.check()}ortho(e){const{left:r,right:n,bottom:i,top:o,near:f=xh,far:p=Mh}=e;return TR(this,r,n,i,o,f,p),this.check()}orthographic(e){const{fovy:r=CR,aspect:n=RR,focalDistance:i=1,near:o=xh,far:f=Mh}=e;T2(r);const p=r/2,y=i*Math.tan(p),T=y*n;return this.ortho({left:-T,right:T,bottom:-y,top:y,near:o,far:f})}perspective(e){const{fovy:r=45*Math.PI/180,aspect:n=1,near:i=.1,far:o=500}=e;return T2(r),vR(this,r,n,i,o),this.check()}determinant(){return dR(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,r){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],r=r||[-0,-0,-0];const n=this.getScale(r),i=1/n[0],o=1/n[1],f=1/n[2];return e[0]=this[0]*i,e[1]=this[1]*o,e[2]=this[2]*f,e[3]=0,e[4]=this[4]*i,e[5]=this[5]*o,e[6]=this[6]*f,e[7]=0,e[8]=this[8]*i,e[9]=this[9]*o,e[10]=this[10]*f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,r){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],r=r||[-0,-0,-0];const n=this.getScale(r),i=1/n[0],o=1/n[1],f=1/n[2];return e[0]=this[0]*i,e[1]=this[1]*o,e[2]=this[2]*f,e[3]=this[4]*i,e[4]=this[5]*o,e[5]=this[6]*f,e[6]=this[8]*i,e[7]=this[9]*o,e[8]=this[10]*f,e}transpose(){return hR(this,this),this.check()}invert(){return Ed(this,this),this.check()}multiplyLeft(e){return Jo(this,e,this),this.check()}multiplyRight(e){return Jo(this,this,e),this.check()}rotateX(e){return gy(this,this,e),this.check()}rotateY(e){return pR(this,this,e),this.check()}rotateZ(e){return py(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,r){return gR(this,this,e,r),this.check()}scale(e){return dg(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return nf(this,this,e),this.check()}transform(e,r){return e.length===4?(r=eu(r||[-0,-0,-0,-0],e,this),Ph(r,4),r):this.transformAsPoint(e,r)}transformAsPoint(e,r){const{length:n}=e;let i;switch(n){case 2:i=ZC(r||[-0,-0],e,this);break;case 3:i=dy(r||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Ph(i,e.length),i}transformAsVector(e,r){let n;switch(e.length){case 2:n=qC(r||[-0,-0],e,this);break;case 3:n=hy(r||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Ph(n,e.length),n}transformPoint(e,r){return this.transformAsPoint(e,r)}transformVector(e,r){return this.transformAsPoint(e,r)}transformDirection(e,r){return this.transformAsVector(e,r)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,r,n){return this.identity().translate([e,r,n])}}let Tc,Ec;function kR(){return Tc||(Tc=new ji([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(Tc)),Tc}function xR(){return Ec||(Ec=new ji,Object.freeze(Ec)),Ec}function T2(t){if(t>Math.PI*2)throw Error("expected radians")}function MR(t,e,r,n,i,o){const f=2*o/(r-e),p=2*o/(i-n),y=(r+e)/(r-e),T=(i+n)/(i-n),R=-1,x=-1,M=-2*o;return t[0]=f,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=p,t[6]=0,t[7]=0,t[8]=y,t[9]=T,t[10]=R,t[11]=x,t[12]=0,t[13]=0,t[14]=M,t[15]=0,t}const E2=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))
struct AmbientLight {
vec3 color;
};
struct PointLight {
vec3 color;
vec3 position;
vec3 attenuation;
};
struct DirectionalLight {
vec3 color;
vec3 direction;
};
uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;
uniform bool lighting_uEnabled;
float getPointLightAttenuation(PointLight pointLight, float distance) {
return pointLight.attenuation.x
+ pointLight.attenuation.y * distance
+ pointLight.attenuation.z * distance * distance;
}
#endif
`,NR={lightSources:{}};function Nh(t={}){const{color:e=[0,0,0],intensity:r=1}=t;return e.map(n=>n*r/255)}function OR({ambientLight:t,pointLights:e=[],directionalLights:r=[]}){const n={};return t?n["lighting_uAmbientLight.color"]=Nh(t):n["lighting_uAmbientLight.color"]=[0,0,0],e.forEach((i,o)=>{n[`lighting_uPointLight[${o}].color`]=Nh(i),n[`lighting_uPointLight[${o}].position`]=i.position,n[`lighting_uPointLight[${o}].attenuation`]=i.attenuation||[1,0,0]}),n.lighting_uPointLightCount=e.length,r.forEach((i,o)=>{n[`lighting_uDirectionalLight[${o}].color`]=Nh(i),n[`lighting_uDirectionalLight[${o}].direction`]=i.direction}),n.lighting_uDirectionalLightCount=r.length,n}function _y(t=NR){var e,r;if("lightSources"in t){const{ambientLight:n,pointLights:i,directionalLights:o}=t.lightSources||{};return n||i&&i.length>0||o&&o.length>0?Object.assign({},OR({ambientLight:n,pointLights:i,directionalLights:o}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){const n={pointLights:[],directionalLights:[]};for(const i of t.lights||[])switch(i.type){case"ambient":n.ambientLight=i;break;case"directional":(e=n.directionalLights)==null||e.push(i);break;case"point":(r=n.pointLights)==null||r.push(i);break}return _y({lightSources:n})}return{}}const my={name:"lights",vs:E2,fs:E2,getUniforms:_y,defines:{MAX_LIGHTS:3}},yy=`uniform float lighting_uAmbient;
uniform float lighting_uDiffuse;
uniform float lighting_uShininess;
uniform vec3  lighting_uSpecularColor;
vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
vec3 halfway_direction = normalize(light_direction + view_direction);
float lambertian = dot(light_direction, normal_worldspace);
float specular = 0.0;
if (lambertian > 0.0) {
float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
specular = pow(specular_angle, lighting_uShininess);
}
lambertian = max(lambertian, 0.0);
return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;
}
vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
vec3 lightColor = surfaceColor;
if (lighting_uEnabled) {
vec3 view_direction = normalize(cameraPosition - position_worldspace);
lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;
for (int i = 0; i < MAX_LIGHTS; i++) {
if (i >= lighting_uPointLightCount) {
break;
}
PointLight pointLight = lighting_uPointLight[i];
vec3 light_position_worldspace = pointLight.position;
vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
}
for (int i = 0; i < MAX_LIGHTS; i++) {
if (i >= lighting_uDirectionalLightCount) {
break;
}
DirectionalLight directionalLight = lighting_uDirectionalLight[i];
lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
}
}
return lightColor;
}
vec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
vec3 lightColor = vec3(0, 0, 0);
vec3 surfaceColor = vec3(0, 0, 0);
if (lighting_uEnabled) {
vec3 view_direction = normalize(cameraPosition - position_worldspace);
for (int i = 0; i < MAX_LIGHTS; i++) {
if (i >= lighting_uPointLightCount) {
break;
}
PointLight pointLight = lighting_uPointLight[i];
vec3 light_position_worldspace = pointLight.position;
vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
}
for (int i = 0; i < MAX_LIGHTS; i++) {
if (i >= lighting_uDirectionalLightCount) {
break;
}
DirectionalLight directionalLight = lighting_uDirectionalLight[i];
lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
}
}
return lightColor;
}
`,DR={};function IR(t){const{ambient:e=.35,diffuse:r=.6,shininess:n=32,specularColor:i=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:r,lighting_uShininess:n,lighting_uSpecularColor:i.map(o=>o/255)}}function vy(t=DR){if(!("material"in t))return{};const{material:e}=t;return e?IR(e):{lighting_uEnabled:!1}}const wy={name:"gouraud-lighting",dependencies:[my],vs:yy,defines:{LIGHTING_VERTEX:1},getUniforms:vy},FR={name:"phong-lighting",dependencies:[my],fs:yy,defines:{LIGHTING_FRAGMENT:1},getUniforms:vy},Ty="#define SMOOTH_EDGE_RADIUS 0.5",LR=`
${Ty}

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`,UR=`
${Ty}

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`,BR={name:"geometry",vs:LR,fs:UR},Qt={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(Qt,"IDENTITY",{get:()=>(tr.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const Ui={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Xl={common:0,meters:1,pixels:2},bd={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},VR=Object.keys(Qt).map(t=>`const int COORDINATE_SYSTEM_${t} = ${Qt[t]};`).join(""),zR=Object.keys(Ui).map(t=>`const int PROJECTION_MODE_${t} = ${Ui[t]};`).join(""),HR=Object.keys(Xl).map(t=>`const int UNIT_${t.toUpperCase()} = ${Xl[t]};`).join(""),jR=`${VR}
${zR}
${HR}
uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size_at_latitude(float lat) {
float y = clamp(lat, -89.9, 89.9);
return 1.0 / cos(radians(y));
}
float project_size() {
if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
project_uPseudoMeters == false) {
if (geometry.position.w == 0.0) {
return project_size_at_latitude(geometry.worldPosition.y);
}
float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
float y2 = y * y;
float y4 = y2 * y2;
float y6 = y4 * y2;
return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
}
return 1.0;
}
float project_size_at_latitude(float meters, float lat) {
return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);
}
float project_size(float meters) {
return meters * project_uCommonUnitsPerMeter.z * project_size();
}
vec2 project_size(vec2 meters) {
return meters * project_uCommonUnitsPerMeter.xy * project_size();
}
vec3 project_size(vec3 meters) {
return meters * project_uCommonUnitsPerMeter * project_size();
}
vec4 project_size(vec4 meters) {
return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}
mat3 project_get_orientation_matrix(vec3 up) {
vec3 uz = normalize(up);
vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
vec3 uy = cross(uz, ux);
return mat3(ux, uy, uz);
}
bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
transform = project_get_orientation_matrix(commonPosition);
return true;
}
return false;
}
vec3 project_normal(vec3 vector) {
vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
mat3 rotation;
if (project_needs_rotation(geometry.position.xyz, rotation)) {
n = rotation * n;
}
return n;
}
vec4 project_offset_(vec4 offset) {
float dy = offset.y;
vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
float x = lnglat.x;
if (project_uWrapLongitude) {
x = mod(x + 180., 360.0) - 180.;
}
float y = clamp(lnglat.y, -89.9, 89.9);
return vec2(
radians(x) + PI,
PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
) * WORLD_SCALE;
}
vec3 project_globe_(vec3 lnglatz) {
float lambda = radians(lnglatz.x);
float phi = radians(lnglatz.y);
float cosPhi = cos(phi);
float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;
return vec3(
sin(lambda) * cosPhi,
-cos(lambda) * cosPhi,
sin(phi)
) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
vec4 position_world = project_uModelMatrix * position;
if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
return vec4(
project_mercator_(position_world.xy),
project_size_at_latitude(position_world.z, position_world.y),
position_world.w
);
}
if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
position_world.xyz += project_uCoordinateOrigin;
}
}
if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
return vec4(
project_globe_(position_world.xyz),
position_world.w
);
}
}
if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
return vec4(
project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
project_size(position_world.z),
position_world.w
);
}
}
}
if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
(project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
(project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
position_world.xyz -= project_uCoordinateOrigin;
}
return project_offset_(position_world) + project_offset_(project_uModelMatrix * vec4(position64Low, 0.0));
}
vec4 project_position(vec4 position) {
return project_position(position, ZERO_64_LOW);
}
vec3 project_position(vec3 position, vec3 position64Low) {
vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
return projected_position.xyz;
}
vec3 project_position(vec3 position) {
vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
return projected_position.xyz;
}
vec2 project_position(vec2 position) {
vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
return projected_position.xy;
}
vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
return offset * project_uFocalDistance;
}
float project_size_to_pixel(float meters) {
return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
if (unit == UNIT_METERS) return project_size_to_pixel(size);
if (unit == UNIT_COMMON) return size * project_uScale;
return size;
}
float project_pixel_size(float pixels) {
return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
return pixels / project_uScale;
}
`;function WR(t,e){if(t===e)return!0;if(Array.isArray(t)){const r=t.length;if(!e||e.length!==r)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}return!1}function tu(t){let e={},r;return n=>{for(const i in n)if(!WR(n[i],e[i])){r=t(n),e=n;break}return r}}const S2=[0,0,0,0],XR=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],Ey=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],$R=[0,0,0],Sy=[0,0,0],QR=tu(ZR);function by(t,e,r=Sy){r.length<3&&(r=[r[0],r[1],0]);let n=r,i,o=!0;switch(e===Qt.LNGLAT_OFFSETS||e===Qt.METER_OFFSETS?i=r:i=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case Ui.WEB_MERCATOR:(e===Qt.LNGLAT||e===Qt.CARTESIAN)&&(i=[0,0,0],o=!1);break;case Ui.WEB_MERCATOR_AUTO_OFFSET:e===Qt.LNGLAT?n=i:e===Qt.CARTESIAN&&(n=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],i=t.unprojectPosition(n),n[0]-=r[0],n[1]-=r[1],n[2]-=r[2]);break;case Ui.IDENTITY:n=t.position.map(Math.fround),n[2]=n[2]||0;break;case Ui.GLOBE:o=!1,i=null;break;default:o=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:n,offsetMode:o}}function YR(t,e,r){const{viewMatrixUncentered:n,projectionMatrix:i}=t;let{viewMatrix:o,viewProjectionMatrix:f}=t,p=S2,y=S2,T=t.cameraPosition;const{geospatialOrigin:R,shaderCoordinateOrigin:x,offsetMode:M}=by(t,e,r);return M&&(y=t.projectPosition(R||x),T=[T[0]-y[0],T[1]-y[1],T[2]-y[2]],y[3]=1,p=eu([],y,f),o=n||o,f=Jo([],i,o),f=Jo([],f,XR)),{viewMatrix:o,viewProjectionMatrix:f,projectionCenter:p,originCommon:y,cameraPosCommon:T,shaderCoordinateOrigin:x,geospatialOrigin:R}}function KR({viewport:t,devicePixelRatio:e=1,modelMatrix:r=null,coordinateSystem:n=Qt.DEFAULT,coordinateOrigin:i=Sy,autoWrapLongitude:o=!1}){n===Qt.DEFAULT&&(n=t.isGeospatial?Qt.LNGLAT:Qt.CARTESIAN);const f=QR({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:i});return f.project_uWrapLongitude=o,f.project_uModelMatrix=r||Ey,f}function ZR({viewport:t,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:n}){const{projectionCenter:i,viewProjectionMatrix:o,originCommon:f,cameraPosCommon:p,shaderCoordinateOrigin:y,geospatialOrigin:T}=YR(t,r,n),R=t.getDistanceScales(),x=[t.width*e,t.height*e],M=eu([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,U={project_uCoordinateSystem:r,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:y,project_uCommonOrigin:f.slice(0,3),project_uCenter:i,project_uPseudoMeters:!!t._pseudoMeters,project_uViewportSize:x,project_uDevicePixelRatio:e,project_uFocalDistance:M,project_uCommonUnitsPerMeter:R.unitsPerMeter,project_uCommonUnitsPerWorldUnit:R.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:$R,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:o,project_uModelMatrix:Ey,project_uCameraPosition:p};if(T){const W=t.getDistanceScales(T);switch(r){case Qt.METER_OFFSETS:U.project_uCommonUnitsPerWorldUnit=W.unitsPerMeter,U.project_uCommonUnitsPerWorldUnit2=W.unitsPerMeter2;break;case Qt.LNGLAT:case Qt.LNGLAT_OFFSETS:t._pseudoMeters||(U.project_uCommonUnitsPerMeter=W.unitsPerMeter),U.project_uCommonUnitsPerWorldUnit=W.unitsPerDegree,U.project_uCommonUnitsPerWorldUnit2=W.unitsPerDegree2;break;case Qt.CARTESIAN:U.project_uCommonUnitsPerWorldUnit=[1,1,W.unitsPerMeter[2]],U.project_uCommonUnitsPerWorldUnit2=[0,0,W.unitsPerMeter2[2]];break}}return U}const qR={};function GR(t=qR){return"viewport"in t?KR(t):{}}const gg={name:"project",dependencies:[xC,BR],vs:jR,getUniforms:GR},JR=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,pg={name:"project32",dependencies:[gg],vs:JR};function eP(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function AA(t,e){const r=eu([],e,t);return bR(r,r,1/r[3]),r}function b2(t,e){const r=t%e;return r<0?e+r:r}function Cd(t,e,r){return t<e?e:t>r?r:t}function tP(t){return Math.log(t)*Math.LOG2E}const _g=Math.log2||tP;function ss(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const ci=Math.PI,Cy=ci/4,Kn=ci/180,Rd=180/ci,pA=512,sf=4003e4,C2=85.051129,rP=1.5;function nP(t){return _g(t)}function of(t){const[e,r]=t;ss(Number.isFinite(e)),ss(Number.isFinite(r)&&r>=-90&&r<=90,"invalid latitude");const n=e*Kn,i=r*Kn,o=pA*(n+ci)/(2*ci),f=pA*(ci+Math.log(Math.tan(Cy+i*.5)))/(2*ci);return[o,f]}function _A(t){const[e,r]=t,n=e/pA*(2*ci)-ci,i=2*(Math.atan(Math.exp(r/pA*(2*ci)-ci))-Cy);return[n*Rd,i*Rd]}function iP(t){const{latitude:e}=t;ss(Number.isFinite(e));const r=Math.cos(e*Kn);return nP(sf*r)-9}function Oh(t){const e=Math.cos(t*Kn);return pA/sf/e}function Pd(t){const{latitude:e,longitude:r,highPrecision:n=!1}=t;ss(Number.isFinite(e)&&Number.isFinite(r));const i=pA,o=Math.cos(e*Kn),f=i/360,p=f/o,y=i/sf/o,T={unitsPerMeter:[y,y,y],metersPerUnit:[1/y,1/y,1/y],unitsPerDegree:[f,p,y],degreesPerUnit:[1/f,1/p,1/y]};if(n){const R=Kn*Math.tan(e*Kn)/o,x=f*R/2,M=i/sf*R,U=M/p*y;T.unitsPerDegree2=[0,x,M],T.unitsPerMeter2=[U,0,U]}return T}function Ry(t,e){const[r,n,i]=t,[o,f,p]=e,{unitsPerMeter:y,unitsPerMeter2:T}=Pd({longitude:r,latitude:n,highPrecision:!0}),R=of(t);R[0]+=o*(y[0]+T[0]*f),R[1]+=f*(y[1]+T[1]*f);const x=_A(R),M=(i||0)+(p||0);return Number.isFinite(i)||Number.isFinite(p)?[x[0],x[1],M]:x}function sP(t){const{height:e,pitch:r,bearing:n,altitude:i,scale:o,center:f}=t,p=eP();nf(p,p,[0,0,-i]),gy(p,p,-r*Kn),py(p,p,n*Kn);const y=o/e;return dg(p,p,[y,y,y]),f&&nf(p,p,tR([],f)),p}function oP(t){const{width:e,height:r,altitude:n,pitch:i=0,offset:o,center:f,scale:p,nearZMultiplier:y=1,farZMultiplier:T=1}=t;let{fovy:R=af(rP)}=t;n!==void 0&&(R=af(n));const x=R*Kn,M=i*Kn,U=Py(R);let W=U;f&&(W+=f[2]*p/Math.cos(M)/r);const j=x*(.5+(o?o[1]:0)/r),G=Math.sin(j)*W/Math.sin(Cd(Math.PI/2-M-j,.01,Math.PI-.01)),re=Math.sin(M)*G+W,se=W*10,ce=Math.min(re*T,se);return{fov:x,aspect:e/r,focalDistance:U,near:y,far:ce}}function af(t){return 2*Math.atan(.5/t)*Rd}function Py(t){return .5/Math.tan(.5*t*Kn)}function ky(t,e){const[r,n,i=0]=t;return ss(Number.isFinite(r)&&Number.isFinite(n)&&Number.isFinite(i)),AA(e,[r,n,i,1])}function mg(t,e,r=0){const[n,i,o]=t;if(ss(Number.isFinite(n)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(o))return AA(e,[n,i,o,1]);const f=AA(e,[n,i,0,1]),p=AA(e,[n,i,1,1]),y=f[2],T=p[2],R=y===T?0:((r||0)-y)/(T-y);return fy([],f,p,R)}function aP(t){const{width:e,height:r,bounds:n,minExtent:i=0,maxZoom:o=24,offset:f=[0,0]}=t,[[p,y],[T,R]]=n,x=AP(t.padding),M=of([p,Cd(R,-85.051129,C2)]),U=of([T,Cd(y,-85.051129,C2)]),W=[Math.max(Math.abs(U[0]-M[0]),i),Math.max(Math.abs(U[1]-M[1]),i)],j=[e-x.left-x.right-Math.abs(f[0])*2,r-x.top-x.bottom-Math.abs(f[1])*2];ss(j[0]>0&&j[1]>0);const G=j[0]/W[0],re=j[1]/W[1],se=(x.right-x.left)/2/G,ce=(x.top-x.bottom)/2/re,we=[(U[0]+M[0])/2+se,(U[1]+M[1])/2+ce],be=_A(we),Pe=Math.min(o,_g(Math.abs(Math.min(G,re))));return ss(Number.isFinite(Pe)),{longitude:be[0],latitude:be[1],zoom:Pe}}function AP(t=0){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:(ss(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}const R2=Math.PI/180;function lP(t,e=0){const{width:r,height:n,unproject:i}=t,o={targetZ:e},f=i([0,n],o),p=i([r,n],o);let y,T;const R=t.fovy?.5*t.fovy*R2:Math.atan(.5/t.altitude),x=(90-t.pitch)*R2;return R>x-.01?(y=P2(t,0,e),T=P2(t,r,e)):(y=i([0,0],o),T=i([r,0],o)),[f,p,T,y]}function P2(t,e,r){const{pixelUnprojectionMatrix:n}=t,i=AA(n,[e,0,1,1]),o=AA(n,[e,t.height,1,1]),p=(r*t.distanceScales.unitsPerMeter[2]-i[2])/(o[2]-i[2]),y=fy([],i,o,p),T=_A(y);return T.push(r),T}const k2=512;function uP(t){const{width:e,height:r,pitch:n=0}=t;let{longitude:i,latitude:o,zoom:f,bearing:p=0}=t;(i<-180||i>180)&&(i=b2(i+180,360)-180),(p<-180||p>180)&&(p=b2(p+180,360)-180);const y=_g(r/k2);if(f<=y)f=y,o=0;else{const T=r/2/Math.pow(2,f),R=_A([0,T])[1];if(o<R)o=R;else{const x=_A([0,k2-T])[1];o>x&&(o=x)}}return{width:e,height:r,longitude:i,latitude:o,zoom:f,pitch:n,bearing:p}}const cP=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

out vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,fP=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

in vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,hP=tu(mP),dP=tu(yP),gP=[0,0,0,1],pP=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function _P(t,e){const[r,n,i]=t,o=mg([r,n,i],e);return Number.isFinite(i)?o:[o[0],o[1],0]}function mP({viewport:t,center:e}){return new ji(t.viewProjectionMatrix).invert().transform(e)}function yP({viewport:t,shadowMatrices:e}){const r=[],n=t.pixelUnprojectionMatrix,i=t.isGeospatial?void 0:1,o=[[0,0,i],[t.width,0,i],[0,t.height,i],[t.width,t.height,i],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(f=>_P(f,n));for(const f of e){const p=f.clone().translate(new Hi(t.center).negate()),y=o.map(R=>p.transform(R)),T=new ji().ortho({left:Math.min(...y.map(R=>R[0])),right:Math.max(...y.map(R=>R[0])),bottom:Math.min(...y.map(R=>R[1])),top:Math.max(...y.map(R=>R[1])),near:Math.min(...y.map(R=>-R[2])),far:Math.max(...y.map(R=>-R[2]))});r.push(T.multiplyRight(f))}return r}function vP(t,e){const{shadowEnabled:r=!0}=t;if(!r||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1,shadow_uShadowMap0:t.dummyShadowMap,shadow_uShadowMap1:t.dummyShadowMap};const n={shadow_uDrawShadowMap:!!t.drawToShadowMap,shadow_uUseShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,shadow_uColor:t.shadowColor||gP,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},i=hP({viewport:t.viewport,center:e.project_uCenter}),o=[],f=dP({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let p=0;p<t.shadowMatrices.length;p++){const y=f[p],T=y.clone().translate(new Hi(t.viewport.center).negate());e.project_uCoordinateSystem===Qt.LNGLAT&&e.project_uProjectionMode===Ui.WEB_MERCATOR?(f[p]=T,o[p]=i):(f[p]=y.clone().multiplyRight(pP),o[p]=T.transform(i))}for(let p=0;p<f.length;p++)n[`shadow_uViewProjectionMatrices[${p}]`]=f[p],n[`shadow_uProjectCenters[${p}]`]=o[p];for(let p=0;p<2;p++)n[`shadow_uShadowMap${p}`]=t.shadowMaps&&t.shadowMaps[p]||t.dummyShadowMap;return n}const x2={name:"shadow",dependencies:[gg],vs:cP,fs:fP,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?vP(t,e):{}},yg={...y2,defaultUniforms:{...y2.defaultUniforms,useFloatColors:!1},inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}}},wP=[gg],TP=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function EP(){const t=Yc.getDefaultShaderAssembler();for(const e of wP)t.addDefaultModule(e);for(const e of TP)t.addShaderHook(e);return t}const SP=[255,255,255],bP=1;let CP=0;class RP{constructor(e={}){this.type="ambient";const{color:r=SP}=e,{intensity:n=bP}=e;this.id=e.id||`ambient-${CP++}`,this.color=r,this.intensity=n}}const PP=[255,255,255],kP=1,xP=[0,0,-1];let MP=0;class M2{constructor(e={}){this.type="directional";const{color:r=PP}=e,{intensity:n=kP}=e,{direction:i=xP}=e,{_shadow:o=!1}=e;this.id=e.id||`directional-${MP++}`,this.color=r,this.intensity=n,this.type="directional",this.direction=new Hi(i).normalize().toArray(),this.shadow=o}getProjectedLight(e){return this}}class NP{constructor(e,r={id:"pass"}){const{id:n}=r;this.id=n,this.device=e,this.props={...r}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class vg extends NP{constructor(){super(...arguments),this._lastRenderIndex=-1}render(e){const[r,n]=this.device.canvasContext.getDrawingBufferSize(),i=e.clearCanvas??!0,o=e.clearColor??(i?[0,0,0,0]:!1),f=i?1:!1,p=i?0:!1,y=e.colorMask??15,T={viewport:[0,0,r,n]};e.colorMask&&(T.colorMask=y),e.scissorRect&&(T.scissorRect=e.scissorRect);const R=this.device.beginRenderPass({framebuffer:e.target,parameters:T,clearColor:o,clearDepth:f,clearStencil:p});try{return this._drawLayers(R,e)}finally{R.end()}}_drawLayers(e,r){const{target:n,moduleParameters:i,viewports:o,views:f,onViewportActive:p,clearStack:y=!0}=r;r.pass=r.pass||"unknown",y&&(this._lastRenderIndex=-1);const T=[];for(const R of o){const x=f&&f[R.id];p==null||p(R);const M=this._getDrawLayerParams(R,r),U=R.subViewports||[R];for(const W of U){const j=this._drawLayersInViewport(e,{target:n,moduleParameters:i,viewport:W,view:x,pass:r.pass,layers:r.layers},M);T.push(j)}}return T}_getDrawLayerParams(e,{layers:r,pass:n,isPicking:i=!1,layerFilter:o,cullRect:f,effects:p,moduleParameters:y},T=!1){var W;const R=[],x=xy(this._lastRenderIndex+1),M={layer:r[0],viewport:e,isPicking:i,renderPass:n,cullRect:f},U={};for(let j=0;j<r.length;j++){const G=r[j],re=this._shouldDrawLayer(G,M,o,U),se={shouldDrawLayer:re};re&&!T&&(se.layerRenderIndex=x(G,re),se.moduleParameters=this._getModuleParameters(G,p,n,y),se.layerParameters={...(W=G.context.deck)==null?void 0:W.props.parameters,...this.getLayerParameters(G,j,e)}),R[j]=se}return R}_drawLayersInViewport(e,{layers:r,moduleParameters:n,pass:i,target:o,viewport:f,view:p},y){const T=OP(this.device,{moduleParameters:n,target:o,viewport:f});if(p&&p.props.clear){const x=p.props.clear===!0?{color:!0,depth:!0}:p.props.clear;this.device.withParametersWebGL({scissorTest:!0,scissor:T},()=>this.device.clearWebGL(x))}const R={totalCount:r.length,visibleCount:0,compositeCount:0,pickableCount:0};e.setParameters({viewport:T});for(let x=0;x<r.length;x++){const M=r[x],{shouldDrawLayer:U,layerRenderIndex:W,moduleParameters:j,layerParameters:G}=y[x];if(U&&M.props.pickable&&R.pickableCount++,M.isComposite)R.compositeCount++;else if(U){R.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,W),j.viewport=f,M.context.renderPass=e;try{M._drawLayer({renderPass:e,moduleParameters:j,uniforms:{layerIndex:W},parameters:G})}catch(re){M.raiseError(re,`drawing ${M} to ${i}`)}}}return R}shouldDrawLayer(e){return!0}getModuleParameters(e,r){return null}getLayerParameters(e,r,n){return e.props.parameters}_shouldDrawLayer(e,r,n,i){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;r.layer=e;let f=e.parent;for(;f;){if(!f.props.visible||!f.filterSubLayer(r))return!1;r.layer=f,f=f.parent}if(n){const p=r.layer.id;if(p in i||(i[p]=n(r)),!i[p])return!1}return e.activateViewport(r.viewport),!0}_getModuleParameters(e,r,n,i){var p,y;const o=this.device.canvasContext.cssToDeviceRatio(),f=Object.assign(Object.create(((p=e.internalState)==null?void 0:p.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,picking:{isActive:0},devicePixelRatio:o});if(r)for(const T of r)Object.assign(f,(y=T.getModuleParameters)==null?void 0:y.call(T,e));return Object.assign(f,this.getModuleParameters(e,r),i)}}function xy(t=0,e={}){const r={},n=(i,o)=>{const f=i.props._offset,p=i.id,y=i.parent&&i.parent.id;let T;if(y&&!(y in e)&&n(i.parent,!1),y in r){const R=r[y]=r[y]||xy(e[y],e);T=R(i,o),r[p]=R}else Number.isFinite(f)?(T=f+(e[y]||0),r[p]=null):T=t;return o&&T>=t&&(t=T+1),e[p]=T,T};return n}function OP(t,{moduleParameters:e,target:r,viewport:n}){const i=e&&e.devicePixelRatio||t.canvasContext.cssToDeviceRatio(),[,o]=t.canvasContext.getDrawingBufferSize(),f=r?r.height:o,p=n;return[p.x*i,f-(p.y+p.height)*i,p.width*i,p.height*i]}class DP extends vg{constructor(e,r){super(e,r),this.shadowMap=e.createTexture({width:1,height:1,sampler:{minFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}}),this.depthBuffer=e.createTexture({format:"depth16unorm",width:1,height:1,mipmaps:!1,dataFormat:6402,type:5125}),this.fbo=e.createFramebuffer({id:"shadowmap",width:1,height:1,colorAttachments:[this.shadowMap],depthStencilAttachment:this.depthBuffer})}render(e){const r=this.fbo,n=this.device.canvasContext.cssToDeviceRatio(),i=e.viewports[0],o=i.width*n,f=i.height*n,p=[1,1,1,1];(o!==r.width||f!==r.height)&&r.resize({width:o,height:f}),super.render({...e,clearColor:p,target:r,pass:"shadow"})}getLayerParameters(e,r,n){return{...e.props.parameters,blend:!1,depthRange:[0,1],depthTest:!0}}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.destroy(),this.fbo=null),this.shadowMap&&(this.shadowMap.destroy(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.destroy(),this.depthBuffer=null)}}const IP={color:[255,255,255],intensity:1},N2=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],FP=[0,0,0,200/255];class My{constructor(e={}){this.id="lighting-effect",this.shadowColor=FP,this.shadow=!1,this.ambientLight=null,this.directionalLights=[],this.pointLights=[],this.shadowPasses=[],this.shadowMaps=[],this.dummyShadowMap=null,this.setProps(e)}setup(e){this.context=e;const{device:r,deck:n}=e;this.shadow&&!this.dummyShadowMap&&(this._createShadowPasses(r),n._addDefaultShaderModule(x2),this.dummyShadowMap=r.createTexture({width:1,height:1}))}setProps(e){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const r in e){const n=e[r];switch(n.type){case"ambient":this.ambientLight=n;break;case"directional":this.directionalLights.push(n);break;case"point":this.pointLights.push(n);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(r=>r.shadow),this.context&&this.setup(this.context),this.props=e}preRender({layers:e,layerFilter:r,viewports:n,onViewportActive:i,views:o}){if(this.shadow){this.shadowMatrices=this._calculateMatrices();for(let f=0;f<this.shadowPasses.length;f++)this.shadowPasses[f].render({layers:e,layerFilter:r,viewports:n,onViewportActive:i,views:o,moduleParameters:{shadowLightId:f,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const r=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return r.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(n=>n.getProjectedLight({layer:e})),pointLights:this.pointLights.map(n=>n.getProjectedLight({layer:e}))},r}cleanup(e){for(const r of this.shadowPasses)r.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.destroy(),this.dummyShadowMap=null,e.deck._removeDefaultShaderModule(x2))}_calculateMatrices(){const e=[];for(const r of this.directionalLights){const n=new ji().lookAt({eye:new Hi(r.direction).negate()});e.push(n)}return e}_createShadowPasses(e){for(let r=0;r<this.directionalLights.length;r++){const n=new DP(e);this.shadowPasses[r]=n,this.shadowMaps[r]=n.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:r,directionalLights:n}=this;!e&&r.length===0&&n.length===0&&(this.ambientLight=new RP(IP),this.directionalLights.push(new M2(N2[0]),new M2(N2[1])))}}class LP{constructor(e={}){this._pool=[],this.opts={overAlloc:2,poolSize:100},this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,r,{size:n=1,type:i,padding:o=0,copy:f=!1,initialize:p=!1,maxCount:y}){const T=i||e&&e.constructor||Float32Array,R=r*n+o;if(ArrayBuffer.isView(e)){if(R<=e.length)return e;if(R*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new T(e.buffer,0,R)}let x=1/0;y&&(x=y*n+o);const M=this._allocate(T,R,p,x);return e&&f?M.set(e):p||M.fill(0,0,4),this._release(e),M}release(e){this._release(e)}_allocate(e,r,n,i){let o=Math.max(Math.ceil(r*this.opts.overAlloc),1);o>i&&(o=i);const f=this._pool,p=e.BYTES_PER_ELEMENT*o,y=f.findIndex(T=>T.byteLength>=p);if(y>=0){const T=new e(f.splice(y,1)[0],0,o);return n&&T.fill(0),T}return new e(o)}_release(e){if(!ArrayBuffer.isView(e))return;const r=this._pool,{buffer:n}=e,{byteLength:i}=n,o=r.findIndex(f=>f.byteLength>=i);o<0?r.push(n):(o>0||r.length<this.opts.poolSize)&&r.splice(o,0,n),r.length>this.opts.poolSize&&r.shift()}}const mA=new LP;function kl(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function UP(t){return[t[12],t[13],t[14]]}function BP(t){return{left:Wa(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:Wa(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:Wa(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:Wa(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:Wa(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:Wa(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}const O2=new Hi;function Wa(t,e,r,n){O2.set(t,e,r);const i=O2.len();return{distance:n/i,normal:new Hi(-t/i,-e/i,-r/i)}}function VP(t){return t-Math.fround(t)}let vl;function Dh(t,e){const{size:r=1,startIndex:n=0}=e,i=e.endIndex!==void 0?e.endIndex:t.length,o=(i-n)/r;vl=mA.allocate(vl,o,{type:Float32Array,size:r*2});let f=n,p=0;for(;f<i;){for(let y=0;y<r;y++){const T=t[f++];vl[p+y]=T,vl[p+y+r]=VP(T)}p+=r*2}return vl.subarray(0,o*r*2)}function zP(t){let e=null,r=!1;for(const n of t)n&&(e?(r||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],r=!0),e[0][0]=Math.min(e[0][0],n[0][0]),e[0][1]=Math.min(e[0][1],n[0][1]),e[1][0]=Math.max(e[1][0],n[1][0]),e[1][1]=Math.max(e[1][1],n[1][1])):e=n);return e}const HP=Math.PI/180,jP=kl(),D2=[0,0,0],WP={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function XP({width:t,height:e,orthographic:r,fovyRadians:n,focalDistance:i,padding:o,near:f,far:p}){const y=t/e,T=r?new ji().orthographic({fovy:n,aspect:y,focalDistance:i,near:f,far:p}):new ji().perspective({fovy:n,aspect:y,near:f,far:p});if(o){const{left:R=0,right:x=0,top:M=0,bottom:U=0}=o,W=js((R+t-x)/2,0,t)-t/2,j=js((M+e-U)/2,0,e)-e/2;T[8]-=W*2/t,T[9]+=j*2/e}return T}class ru{constructor(e={}){this._frustumPlanes={},this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||WP,this.focalDistance=e.focalDistance||1,this.position=e.position||D2,this.modelMatrix=e.modelMatrix||null;const{longitude:r,latitude:n}=e;this.isGeospatial=Number.isFinite(n)&&Number.isFinite(r),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Ui.WEB_MERCATOR:Ui.WEB_MERCATOR_AUTO_OFFSET:Ui.IDENTITY}equals(e){return e instanceof ru?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Wl(e.projectionMatrix,this.projectionMatrix)&&Wl(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:r=!0}={}){const n=this.projectPosition(e),i=ky(n,this.pixelProjectionMatrix),[o,f]=i,p=r?f:this.height-f;return e.length===2?[o,p]:[o,p,i[2]]}unproject(e,{topLeft:r=!0,targetZ:n}={}){const[i,o,f]=e,p=r?o:this.height-o,y=n&&n*this.distanceScales.unitsPerMeter[2],T=mg([i,p,f],this.pixelUnprojectionMatrix,y),[R,x,M]=this.unprojectPosition(T);return Number.isFinite(f)?[R,x,M]:Number.isFinite(n)?[R,x,n]:[R,x]}projectPosition(e){const[r,n]=this.projectFlat(e),i=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[r,n,i]}unprojectPosition(e){const[r,n]=this.unprojectFlat(e),i=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[r,n,i]}projectFlat(e){if(this.isGeospatial){const r=of(e);return r[1]=js(r[1],-318,830),r}return e}unprojectFlat(e){return this.isGeospatial?_A(e):e}getBounds(e={}){const r={targetZ:e.z||0},n=this.unproject([0,0],r),i=this.unproject([this.width,0],r),o=this.unproject([0,this.height],r),f=this.unproject([this.width,this.height],r);return[Math.min(n[0],i[0],o[0],f[0]),Math.min(n[1],i[1],o[1],f[1]),Math.max(n[0],i[0],o[0],f[0]),Math.max(n[1],i[1],o[1],f[1])]}getDistanceScales(e){return e?Pd({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:r,width:n=1,height:i=1}){return e<this.x+this.width&&this.x<e+n&&r<this.y+this.height&&this.y<r+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,BP(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,r){return null}_initProps(e){const r=e.longitude,n=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=iP({latitude:n})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||Pd({latitude:n,longitude:r}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:o,modelMatrix:f}=e;let p=D2;if(o&&(p=f?new ji(f).transformAsVector(o,[]):o),this.isGeospatial){const y=this.projectPosition([r,n,0]);this.center=new Hi(p).scale(this.distanceScales.unitsPerMeter).add(y)}else this.center=this.projectPosition(p)}_initMatrices(e){const{viewMatrix:r=jP,projectionMatrix:n=null,orthographic:i=!1,fovyRadians:o,fovy:f=75,near:p=.1,far:y=1e3,padding:T=null,focalDistance:R=1}=e;this.viewMatrixUncentered=r,this.viewMatrix=new ji().multiplyRight(r).translate(new Hi(this.center).negate()),this.projectionMatrix=n||XP({width:this.width,height:this.height,orthographic:i,fovyRadians:o||f*HP,focalDistance:R,padding:T,near:p,far:y});const x=kl();Jo(x,x,this.projectionMatrix),Jo(x,x,this.viewMatrix),this.viewProjectionMatrix=x,this.viewMatrixInverse=Ed([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=UP(this.viewMatrixInverse);const M=kl(),U=kl();dg(M,M,[this.width/2,-this.height/2,1]),nf(M,M,[1,-1,0]),Jo(U,M,this.viewProjectionMatrix),this.pixelProjectionMatrix=U,this.pixelUnprojectionMatrix=Ed(kl(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||tr.warn("Pixel project matrix not invertible")()}}ru.displayName="Viewport";class ra extends ru{constructor(e={}){const{latitude:r=0,longitude:n=0,zoom:i=0,pitch:o=0,bearing:f=0,nearZMultiplier:p=.1,farZMultiplier:y=1.01,nearZ:T,farZ:R,orthographic:x=!1,projectionMatrix:M,repeat:U=!1,worldOffset:W=0,position:j,padding:G,legacyMeterSizes:re=!1}=e;let{width:se,height:ce,altitude:we=1.5}=e;const be=Math.pow(2,i);se=se||1,ce=ce||1;let Pe,Xe=null;if(M)we=M[5]/2,Pe=af(we);else{e.fovy?(Pe=e.fovy,we=Py(Pe)):Pe=af(we);let Ue;if(G){const{top:Je=0,bottom:it=0}=G;Ue=[0,js((Je+ce-it)/2,0,ce)-ce/2]}Xe=oP({width:se,height:ce,scale:be,center:j&&[0,0,j[2]*Oh(r)],offset:Ue,pitch:o,fovy:Pe,nearZMultiplier:p,farZMultiplier:y}),Number.isFinite(T)&&(Xe.near=T),Number.isFinite(R)&&(Xe.far=R)}let nt=sP({height:ce,pitch:o,bearing:f,scale:be,altitude:we});W&&(nt=new ji().translate([512*W,0,0]).multiplyLeft(nt)),super({...e,width:se,height:ce,viewMatrix:nt,longitude:n,latitude:r,zoom:i,...Xe,fovy:Pe,focalDistance:we}),this.latitude=r,this.longitude=n,this.zoom=i,this.pitch=o,this.bearing=f,this.altitude=we,this.fovy=Pe,this.orthographic=x,this._subViewports=U?[]:null,this._pseudoMeters=re,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),r=Math.floor((e[0]+180)/360),n=Math.ceil((e[2]-180)/360);for(let i=r;i<=n;i++){const o=i?new ra({...this,worldOffset:i}):this;this._subViewports.push(o)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[r,n]=this.projectFlat(e),i=(e[2]||0)*Oh(e[1]);return[r,n,i]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[r,n]=this.unprojectFlat(e),i=(e[2]||0)/Oh(n);return[r,n,i]}addMetersToLngLat(e,r){return Ry(e,r)}panByPosition(e,r){const n=mg(r,this.pixelUnprojectionMatrix),i=this.projectFlat(e),o=w2([],i,KC([],n)),f=w2([],this.center,o),[p,y]=this.unprojectFlat(f);return{longitude:p,latitude:y}}getBounds(e={}){const r=lP(this,e.z||0);return[Math.min(r[0][0],r[1][0],r[2][0],r[3][0]),Math.min(r[0][1],r[1][1],r[2][1],r[3][1]),Math.max(r[0][0],r[1][0],r[2][0],r[3][0]),Math.max(r[0][1],r[1][1],r[2][1],r[3][1])]}fitBounds(e,r={}){const{width:n,height:i}=this,{longitude:o,latitude:f,zoom:p}=aP({width:n,height:i,bounds:e,...r});return new ra({width:n,height:i,longitude:o,latitude:f,zoom:p})}}ra.displayName="WebMercatorViewport";const I2=[0,0,0];function Ih(t,e,r=!1){const n=e.projectPosition(t);if(r&&e instanceof ra){const[i,o,f=0]=t,p=e.getDistanceScales([i,o]);n[2]=f*p.unitsPerMeter[2]}return n}function $P(t){const{viewport:e,modelMatrix:r,coordinateOrigin:n}=t;let{coordinateSystem:i,fromCoordinateSystem:o,fromCoordinateOrigin:f}=t;return i===Qt.DEFAULT&&(i=e.isGeospatial?Qt.LNGLAT:Qt.CARTESIAN),o===void 0&&(o=i),f===void 0&&(f=n),{viewport:e,coordinateSystem:i,coordinateOrigin:n,modelMatrix:r,fromCoordinateSystem:o,fromCoordinateOrigin:f}}function Ny(t,{viewport:e,modelMatrix:r,coordinateSystem:n,coordinateOrigin:i,offsetMode:o}){let[f,p,y=0]=t;switch(r&&([f,p,y]=eu([],[f,p,y,1],r)),n){case Qt.LNGLAT:return Ih([f,p,y],e,o);case Qt.LNGLAT_OFFSETS:return Ih([f+i[0],p+i[1],y+(i[2]||0)],e,o);case Qt.METER_OFFSETS:return Ih(Ry(i,[f,p,y]),e,o);case Qt.CARTESIAN:default:return e.isGeospatial?[f+i[0],p+i[1],y+i[2]]:e.projectPosition([f,p,y])}}function QP(t,e){const{viewport:r,coordinateSystem:n,coordinateOrigin:i,modelMatrix:o,fromCoordinateSystem:f,fromCoordinateOrigin:p}=$P(e),{autoOffset:y=!0}=e,{geospatialOrigin:T=I2,shaderCoordinateOrigin:R=I2,offsetMode:x=!1}=y?by(r,n,i):{},M=Ny(t,{viewport:r,modelMatrix:o,coordinateSystem:f,coordinateOrigin:p,offsetMode:x});if(x){const U=r.projectPosition(T||R);uR(M,M,U)}return M}let YP=1,KP=1;class Oy{constructor(){F(this,"time",0);F(this,"channels",new Map);F(this,"animations",new Map);F(this,"playing",!1);F(this,"lastEngineTime",-1)}addChannel(e){const{delay:r=0,duration:n=Number.POSITIVE_INFINITY,rate:i=1,repeat:o=1}=e,f=YP++,p={time:0,delay:r,duration:n,rate:i,repeat:o};return this._setChannelTime(p,this.time),this.channels.set(f,p),f}removeChannel(e){this.channels.delete(e);for(const[r,n]of this.animations)n.channel===e&&this.detachAnimation(r)}isFinished(e){const r=this.channels.get(e);return r===void 0?!1:this.time>=r.delay+r.duration*r.repeat}getTime(e){if(e===void 0)return this.time;const r=this.channels.get(e);return r===void 0?-1:r.time}setTime(e){this.time=Math.max(0,e);const r=this.channels.values();for(const i of r)this._setChannelTime(i,this.time);const n=this.animations.values();for(const i of n){const{animation:o,channel:f}=i;o.setTime(this.getTime(f))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,r){const n=KP++;return this.animations.set(n,{animation:e,channel:r}),e.setTime(this.getTime(r)),n}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,r){const n=r-e.delay,i=e.duration*e.repeat;n>=i?e.time=e.duration*e.rate:(e.time=Math.max(0,n)%e.duration,e.time*=e.rate)}}let ZP=0;const qP={device:null,onAddHTML:()=>"",onInitialize:async()=>null,onRender:()=>{},onFinalize:()=>{},onError:t=>console.error(t),stats:oA.stats.get(`animation-loop-${ZP++}`),useDevicePixels:!0,autoResizeViewport:!1,autoResizeDrawingBuffer:!1};class GP{constructor(e){F(this,"device",null);F(this,"canvas",null);F(this,"props");F(this,"animationProps",null);F(this,"timeline",null);F(this,"stats");F(this,"cpuTime");F(this,"gpuTime");F(this,"frameRate");F(this,"display");F(this,"needsRedraw","initialized");F(this,"_initialized",!1);F(this,"_running",!1);F(this,"_animationFrameId",null);F(this,"_nextFramePromise",null);F(this,"_resolveNextFrame",null);F(this,"_cpuStartTime",0);if(this.props={...qP,...e},e=this.props,!e.device)throw new Error("No device provided");const{useDevicePixels:r=!0}=this.props;this.stats=e.stats||new Nf({id:"animation-loop-stats"}),this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this.setProps({autoResizeViewport:e.autoResizeViewport,autoResizeDrawingBuffer:e.autoResizeDrawingBuffer,useDevicePixels:r}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}destroy(){this.stop(),this._setDisplay(null)}delete(){this.destroy()}setNeedsRedraw(e){return this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.props.autoResizeViewport=e.autoResizeViewport||!1),"autoResizeDrawingBuffer"in e&&(this.props.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer||!1),"useDevicePixels"in e&&(this.props.useDevicePixels=e.useDevicePixels||!1),this}async start(){if(this._running)return this;this._running=!0;try{let e;return this._initialized||(this._initialized=!0,await this._initDevice(),this._initialize(),await this.props.onInitialize(this._getAnimationProps())),this._running?(e!==!1&&(this._cancelAnimationFrame(),this._requestAnimationFrame()),this):null}catch(e){const r=e instanceof Error?e:new Error("Unknown error");throw this.props.onError(r),r}}stop(){return this._running&&(this.animationProps&&this.props.onFinalize(this.animationProps),this._cancelAnimationFrame(),this._nextFramePromise=null,this._resolveNextFrame=null,this._running=!1),this}redraw(){var e;return(e=this.device)!=null&&e.isLost?this:(this._beginFrameTimers(),this._setupFrame(),this._updateAnimationProps(),this._renderFrame(this._getAnimationProps()),this._clearNeedsRedraw(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endFrameTimers(),this)}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){if(this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.canvas instanceof HTMLCanvasElement)return this.canvas.toDataURL();throw new Error("OffscreenCanvas")}_initialize(){this._startEventHandling(),this._initializeAnimationProps(),this._updateAnimationProps(),this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_setDisplay(e){this.display&&(this.display.destroy(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_requestAnimationFrame(){this._running&&(this._animationFrameId=Hb(this._animationFrame.bind(this)))}_cancelAnimationFrame(){this._animationFrameId!==null&&(jb(this._animationFrameId),this._animationFrameId=null)}_animationFrame(){this._running&&(this.redraw(),this._requestAnimationFrame())}_renderFrame(e){if(this.display){this.display._renderFrame(e);return}this.props.onRender(this._getAnimationProps()),this.device.submit()}_clearNeedsRedraw(){this.needsRedraw=!1}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_initializeAnimationProps(){var e,r;if(!this.device)throw new Error("loop");this.animationProps={animationLoop:this,device:this.device,canvas:(r=(e=this.device)==null?void 0:e.canvasContext)==null?void 0:r.canvas,timeline:this.timeline,useDevicePixels:this.props.useDevicePixels,needsRedraw:!1,width:1,height:1,aspect:1,time:0,startTime:Date.now(),engineTime:0,tick:0,tock:0,_mousePosition:null}}_getAnimationProps(){if(!this.animationProps)throw new Error("animationProps");return this.animationProps}_updateAnimationProps(){if(!this.animationProps)return;const{width:e,height:r,aspect:n}=this._getSizeAndAspect();(e!==this.animationProps.width||r!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=r,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime}async _initDevice(){var e;if(this.device=await this.props.device,!this.device)throw new Error("No device provided");this.canvas=((e=this.device.canvasContext)==null?void 0:e.canvas)||null}_createInfoDiv(){if(this.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const r=document.createElement("div");r.style.position="absolute",r.style.left="10px",r.style.bottom="10px",r.style.width="300px",r.style.background="white",this.canvas instanceof HTMLCanvasElement&&e.appendChild(this.canvas),e.appendChild(r);const n=this.props.onAddHTML(r);n&&(r.innerHTML=n)}}_getSizeAndAspect(){var o,f,p,y;if(!this.device)return{width:1,height:1,aspect:1};const[e,r]=((f=(o=this.device)==null?void 0:o.canvasContext)==null?void 0:f.getPixelSize())||[1,1];let n=1;const i=(y=(p=this.device)==null?void 0:p.canvasContext)==null?void 0:y.canvas;return i&&i.clientHeight?n=i.clientWidth/i.clientHeight:e>0&&r>0&&(n=e/r),{width:e,height:r,aspect:n}}_resizeViewport(){this.props.autoResizeViewport&&this.device.gl&&this.device.gl.viewport(0,0,this.device.gl.drawingBufferWidth,this.device.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){var e,r;this.props.autoResizeDrawingBuffer&&((r=(e=this.device)==null?void 0:e.canvasContext)==null||r.resize({useDevicePixels:this.props.useDevicePixels}))}_beginFrameTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this.cpuTime.timeStart()}_endFrameTimers(){this.cpuTime.timeEnd()}_startEventHandling(){this.canvas&&(this.canvas.addEventListener("mousemove",this._onMousemove.bind(this)),this.canvas.addEventListener("mouseleave",this._onMouseleave.bind(this)))}_onMousemove(e){e instanceof MouseEvent&&(this._getAnimationProps()._mousePosition=[e.offsetX,e.offsetY])}_onMouseleave(e){this._getAnimationProps()._mousePosition=null}}class F2{constructor(e){F(this,"id");F(this,"userData",{});F(this,"topology");F(this,"bufferLayout",[]);F(this,"vertexCount");F(this,"indices");F(this,"attributes");this.id=e.id||la("geometry"),this.topology=e.topology,this.indices=e.indices||null,this.attributes=e.attributes,this.vertexCount=e.vertexCount,this.bufferLayout=e.bufferLayout||[],this.indices&&ir(this.indices.usage===Ar.INDEX)}destroy(){var e;(e=this.indices)==null||e.destroy();for(const r of Object.values(this.attributes))r.destroy()}getVertexCount(){return this.vertexCount}getAttributes(){return this.attributes}getIndexes(){return this.indices}_calculateVertexCount(e){return e.byteLength/12}}function JP(t,e){if(e instanceof F2)return e;const r=e4(t,e),{attributes:n,bufferLayout:i}=t4(t,e);return new F2({topology:e.topology||"triangle-list",bufferLayout:i,vertexCount:e.vertexCount,indices:r,attributes:n})}function e4(t,e){if(!e.indices)return;const r=e.indices.value;return t.createBuffer({usage:Ar.INDEX,data:r})}function t4(t,e){const r=[],n={};for(const[o,f]of Object.entries(e.attributes)){let p=o;switch(o){case"POSITION":p="positions";break;case"NORMAL":p="normals";break;case"TEXCOORD_0":p="texCoords";break;case"COLOR_0":p="colors";break}n[p]=t.createBuffer({data:f.value,id:`${o}-buffer`});const{value:y,size:T,normalized:R}=f;r.push({name:p,format:Lb(y,T,R)})}const i=e._calculateVertexCount(e.attributes,e.indices);return{attributes:n,bufferLayout:r,vertexCount:i}}class r4{constructor(e){F(this,"modules");F(this,"moduleUniforms");F(this,"moduleBindings");F(this,"moduleUniformsChanged");const r=Df(Object.values(e).filter(n=>n.dependencies));for(const n of r)e[n.name]=n;Be.log(1,"Creating ShaderInputs with modules",Object.keys(e))(),this.modules=e,this.moduleUniforms={},this.moduleBindings={};for(const[n,i]of Object.entries(e)){const o=n;this.moduleUniforms[o]=i.defaultUniforms||{},this.moduleBindings[o]={}}}destroy(){}setProps(e){var r;for(const n of Object.keys(e)){const i=n,o=e[i],f=this.modules[i];if(!f){Be.warn(`Module ${n} not found`)();continue}const p=this.moduleUniforms[i],y=this.moduleBindings[i],T=((r=f.getUniforms)==null?void 0:r.call(f,o,p))||o,{uniforms:R,bindings:x}=hg(T);this.moduleUniforms[i]={...p,...R},this.moduleBindings[i]={...y,...x}}}getModules(){return Object.values(this.modules)}getUniformValues(){return this.moduleUniforms}getBindings(){const e={};for(const r of Object.values(this.moduleBindings))Object.assign(e,r);return e}getDebugTable(){var r;const e={};for(const[n,i]of Object.entries(this.moduleUniforms))for(const[o,f]of Object.entries(i))e[`${n}.${o}`]={type:(r=this.modules[n].uniformTypes)==null?void 0:r[o],value:String(f)};return e}}const kf=class kf{constructor(e){F(this,"device");F(this,"_hashCounter",0);F(this,"_hashes",{});F(this,"_renderPipelineCache",{});F(this,"_computePipelineCache",{});this.device=e}static getDefaultPipelineFactory(e){return e._lumaData.defaultPipelineFactory=e._lumaData.defaultPipelineFactory||new kf(e),e._lumaData.defaultPipelineFactory}createRenderPipeline(e){const r={...cA.defaultProps,...e},n=this._hashRenderPipeline(r);if(!this._renderPipelineCache[n]){const i=this.device.createRenderPipeline({...r,id:r.id?`${r.id}-cached`:void 0});i.hash=n,this._renderPipelineCache[n]={pipeline:i,useCount:0}}return this._renderPipelineCache[n].useCount++,this._renderPipelineCache[n].pipeline}createComputePipeline(e){const r={...ef.defaultProps,...e},n=this._hashComputePipeline(r);if(!this._computePipelineCache[n]){const i=this.device.createComputePipeline({...r,id:r.id?`${r.id}-cached`:void 0});i.hash=n,this._computePipelineCache[n]={pipeline:i,useCount:0}}return this._computePipelineCache[n].useCount++,this._computePipelineCache[n].pipeline}release(e){const r=e.hash,n=e instanceof ef?this._computePipelineCache:this._renderPipelineCache;n[r].useCount--,n[r].useCount===0&&(n[r].pipeline.destroy(),delete n[r])}_hashComputePipeline(e){return`${this._getHash(e.shader.source)}`}_hashRenderPipeline(e){const r=this._getHash(e.vs.source),n=e.fs?this._getHash(e.fs.source):0,i="-",o=this._getHash(JSON.stringify(e.bufferLayout));switch(this.device.type){case"webgl":return`${r}/${n}V${i}BL${o}`;default:const f=this._getHash(JSON.stringify(e.parameters));return`${r}/${n}V${i}T${e.topology}P${f}BL${o}`}}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}};F(kf,"defaultProps",{...cA.defaultProps});let kd=kf;const xf=class xf{constructor(e){F(this,"device");F(this,"_cache",{});this.device=e}static getDefaultShaderFactory(e){var r;return(r=e._lumaData).defaultShaderFactory||(r.defaultShaderFactory=new xf(e)),e._lumaData.defaultShaderFactory}createShader(e){const r=this._hashShader(e);let n=this._cache[r];if(!n){const i=this.device.createShader({...e,id:e.id?`${e.id}-cached`:void 0});this._cache[r]=n={shader:i,useCount:0}}return n.useCount++,n.shader}release(e){const r=this._hashShader(e),n=this._cache[r];n&&(n.useCount--,n.useCount===0&&(delete this._cache[r],n.shader.destroy()))}_hashShader(e){return`${e.stage}:${e.source}`}};F(xf,"defaultProps",{...qc.defaultProps});let xd=xf;function n4(t,e){var i;const r={},n="Values";if(t.attributes.length===0&&!((i=t.varyings)!=null&&i.length))return{"No attributes or varyings":{[n]:"N/A"}};for(const o of t.attributes)if(o){const f=`${o.location} ${o.name}: ${o.type}`;r[`in ${f}`]={[n]:o.stepMode||"vertex"}}for(const o of t.varyings||[]){const f=`${o.location} ${o.name}`;r[`out ${f}`]={[n]:JSON.stringify(o.accessor)}}return r}let zr=null,Fh=null;function i4(t,{id:e,minimap:r,opaque:n,top:i="0",left:o="0",rgbaScale:f=1}){zr||(zr=document.createElement("canvas"),zr.id=e,zr.title=e,zr.style.zIndex="100",zr.style.position="absolute",zr.style.top=i,zr.style.left=o,zr.style.border="blue 1px solid",zr.style.transform="scaleY(-1)",document.body.appendChild(zr),Fh=zr.getContext("2d")),(zr.width!==t.width||zr.height!==t.height)&&(zr.width=t.width/2,zr.height=t.height/2,zr.style.width="400px",zr.style.height="400px");const p=t.device.readPixelsToArrayWebGL(t),y=Fh.createImageData(t.width,t.height),T=0;for(let R=0;R<p.length;R+=4)y.data[T+R+0]=p[R+0]*f,y.data[T+R+1]=p[R+1]*f,y.data[T+R+2]=p[R+2]*f,y.data[T+R+3]=n?255:p[R+3]*f;Fh.putImageData(y,0,0)}const Xa=2,s4=1e4,Mf=class Mf{constructor(e,r){F(this,"device");F(this,"id");F(this,"source");F(this,"vs");F(this,"fs");F(this,"pipelineFactory");F(this,"shaderFactory");F(this,"userData",{});F(this,"parameters");F(this,"topology");F(this,"bufferLayout");F(this,"isInstanced");F(this,"instanceCount",0);F(this,"vertexCount");F(this,"indexBuffer",null);F(this,"bufferAttributes",{});F(this,"constantAttributes",{});F(this,"bindings",{});F(this,"uniforms",{});F(this,"vertexArray");F(this,"transformFeedback",null);F(this,"pipeline");F(this,"shaderInputs");F(this,"_uniformStore");F(this,"_attributeInfos",{});F(this,"_gpuGeometry",null);F(this,"_getModuleUniforms");F(this,"props");F(this,"_pipelineNeedsUpdate","newly created");F(this,"_needsRedraw","initializing");F(this,"_destroyed",!1);F(this,"_lastDrawTimestamp",-1);F(this,"_lastLogTime",0);F(this,"_logOpen",!1);F(this,"_drawCount",0);var p,y,T,R;this.props={...Mf.defaultProps,...r},r=this.props,this.id=r.id||la("model"),this.device=e,Object.assign(this.userData,r.userData);const n=Object.fromEntries(((p=this.props.modules)==null?void 0:p.map(x=>[x.name,x]))||[]);this.setShaderInputs(r.shaderInputs||new r4(n));const i=o4(e),o=(((y=this.props.modules)==null?void 0:y.length)>0?this.props.modules:(T=this.shaderInputs)==null?void 0:T.getModules())||[];if(this.device.type==="webgpu"&&this.props.source){(R=this.props).shaderLayout||(R.shaderLayout=RC(this.props.source));const{source:x,getUniforms:M}=this.props.shaderAssembler.assembleShader({platformInfo:i,...this.props,modules:o});this.source=x,this._getModuleUniforms=M}else{const{vs:x,fs:M,getUniforms:U}=this.props.shaderAssembler.assembleShaderPair({platformInfo:i,...this.props,modules:o});this.vs=x,this.fs=M,this._getModuleUniforms=U}this.vertexCount=this.props.vertexCount,this.instanceCount=this.props.instanceCount,this.topology=this.props.topology,this.bufferLayout=this.props.bufferLayout,this.parameters=this.props.parameters,r.geometry&&this.setGeometry(r.geometry),this.pipelineFactory=r.pipelineFactory||kd.getDefaultPipelineFactory(this.device),this.shaderFactory=r.shaderFactory||xd.getDefaultShaderFactory(this.device),this.pipeline=this._updatePipeline(),this.vertexArray=e.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry),"isInstanced"in r&&(this.isInstanced=r.isInstanced),r.instanceCount&&this.setInstanceCount(r.instanceCount),r.vertexCount&&this.setVertexCount(r.vertexCount),r.indexBuffer&&this.setIndexBuffer(r.indexBuffer),r.attributes&&this.setAttributes(r.attributes),r.constantAttributes&&this.setConstantAttributes(r.constantAttributes),r.bindings&&this.setBindings(r.bindings),r.uniforms&&this.setUniforms(r.uniforms),r.moduleSettings&&this.updateModuleSettings(r.moduleSettings),r.transformFeedback&&(this.transformFeedback=r.transformFeedback),Object.seal(this)}destroy(){var e;this._destroyed||(this.pipelineFactory.release(this.pipeline),this.shaderFactory.release(this.pipeline.vs),this.pipeline.fs&&this.shaderFactory.release(this.pipeline.fs),this._uniformStore.destroy(),(e=this._gpuGeometry)==null||e.destroy(),this._destroyed=!0)}needsRedraw(){this._getBindingsUpdateTimestamp()>this._lastDrawTimestamp&&this.setNeedsRedraw("contents of bound textures or buffers updated");const e=this._needsRedraw;return this._needsRedraw=!1,e}setNeedsRedraw(e){this._needsRedraw||(this._needsRedraw=e)}predraw(){this.updateShaderInputs(),this.pipeline=this._updatePipeline()}draw(e){this.predraw();let r;try{this._logDrawCallStart(),this.pipeline=this._updatePipeline(),this.pipeline.setBindings(this.bindings,{disableWarnings:this.props.disableWarnings}),Kc(this.uniforms)||this.pipeline.setUniformsWebGL(this.uniforms);const{indexBuffer:n}=this.vertexArray,i=n?n.byteLength/(n.indexType==="uint32"?4:2):void 0;r=this.pipeline.draw({renderPass:e,vertexArray:this.vertexArray,isInstanced:this.isInstanced,vertexCount:this.vertexCount,instanceCount:this.instanceCount,indexCount:i,transformFeedback:this.transformFeedback||void 0,parameters:this.parameters,topology:this.topology})}finally{this._logDrawCallEnd()}return this._logFramebuffer(e),r?(this._lastDrawTimestamp=this.device.timestamp,this._needsRedraw=!1):this._needsRedraw="waiting for resource initialization",r}setGeometry(e){var n;(n=this._gpuGeometry)==null||n.destroy();const r=e&&JP(this.device,e);r&&(this.setTopology(r.topology||"triangle-list"),this.bufferLayout=L2(r.bufferLayout,this.bufferLayout),this.vertexArray&&this._setGeometryAttributes(r)),this._gpuGeometry=r}setTopology(e){e!==this.topology&&(this.topology=e,this._setPipelineNeedsUpdate("topology"))}setBufferLayout(e){this.bufferLayout=this._gpuGeometry?L2(e,this._gpuGeometry.bufferLayout):e,this._setPipelineNeedsUpdate("bufferLayout"),this.pipeline=this._updatePipeline(),this.vertexArray=this.device.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry)}setParameters(e){yd(e,this.parameters,2)||(this.parameters=e,this._setPipelineNeedsUpdate("parameters"))}setInstanceCount(e){this.instanceCount=e,this.isInstanced===void 0&&e>0&&(this.isInstanced=!0),this.setNeedsRedraw("instanceCount")}setVertexCount(e){this.vertexCount=e,this.setNeedsRedraw("vertexCount")}setShaderInputs(e){this.shaderInputs=e,this._uniformStore=new Fb(this.shaderInputs.modules);for(const r of Object.keys(this.shaderInputs.modules)){const n=this._uniformStore.getManagedUniformBuffer(this.device,r);this.bindings[`${r}Uniforms`]=n}this.setNeedsRedraw("shaderInputs")}updateShaderInputs(){this._uniformStore.setUniforms(this.shaderInputs.getUniformValues()),this.setBindings(this.shaderInputs.getBindings()),this.setNeedsRedraw("shaderInputs")}setBindings(e){Object.assign(this.bindings,e),this.setNeedsRedraw("bindings")}setTransformFeedback(e){this.transformFeedback=e,this.setNeedsRedraw("transformFeedback")}setIndexBuffer(e){this.vertexArray.setIndexBuffer(e),this.setNeedsRedraw("indexBuffer")}setAttributes(e,r){e.indices&&Be.warn(`Model:${this.id} setAttributes() - indexBuffer should be set using setIndexBuffer()`)();for(const[n,i]of Object.entries(e)){const o=this.bufferLayout.find(y=>U2(y).includes(n));if(!o){Be.warn(`Model(${this.id}): Missing layout for buffer "${n}".`)();continue}const f=U2(o);let p=!1;for(const y of f){const T=this._attributeInfos[y];T&&(this.vertexArray.setBuffer(T.location,i),p=!0)}!p&&!((r==null?void 0:r.disableWarnings)??this.props.disableWarnings)&&Be.warn(`Model(${this.id}): Ignoring buffer "${i.id}" for unknown attribute "${n}"`)()}this.setNeedsRedraw("attributes")}setConstantAttributes(e,r){for(const[n,i]of Object.entries(e)){const o=this._attributeInfos[n];o?this.vertexArray.setConstantWebGL(o.location,i):((r==null?void 0:r.disableWarnings)??this.props.disableWarnings)||Be.warn(`Model "${this.id}: Ignoring constant supplied for unknown attribute "${n}"`)()}this.setNeedsRedraw("constants")}setUniforms(e){Kc(e)||(this.pipeline.setUniformsWebGL(e),Object.assign(this.uniforms,e)),this.setNeedsRedraw("uniforms")}updateModuleSettings(e){const{bindings:r,uniforms:n}=hg(this._getModuleUniforms(e));Object.assign(this.bindings,r),Object.assign(this.uniforms,n),this.setNeedsRedraw("moduleSettings")}_getBindingsUpdateTimestamp(){let e=0;for(const r of Object.values(this.bindings))r instanceof Zc?e=Math.max(e,r.texture.updateTimestamp):r instanceof Ar||r instanceof Qn?e=Math.max(e,r.updateTimestamp):r instanceof Gc||(e=Math.max(e,r.buffer.updateTimestamp));return e}_setGeometryAttributes(e){const r={...e.attributes};for(const[n]of Object.entries(r))!this.pipeline.shaderLayout.attributes.find(i=>i.name===n)&&n!=="positions"&&delete r[n];this.vertexCount=e.vertexCount,this.setIndexBuffer(e.indices||null),this.setAttributes(e.attributes,{disableWarnings:!0}),this.setAttributes(r,{disableWarnings:this.props.disableWarnings}),this.setNeedsRedraw("geometry attributes")}_setPipelineNeedsUpdate(e){this._pipelineNeedsUpdate||(this._pipelineNeedsUpdate=e),this.setNeedsRedraw(e)}_updatePipeline(){if(this._pipelineNeedsUpdate){let e=null,r=null;this.pipeline&&(Be.log(1,`Model ${this.id}: Recreating pipeline because "${this._pipelineNeedsUpdate}".`)(),e=this.pipeline.vs,r=this.pipeline.fs),this._pipelineNeedsUpdate=!1;const n=this.shaderFactory.createShader({id:`${this.id}-vertex`,stage:"vertex",source:this.source||this.vs,debug:this.props.debugShaders});let i=null;this.source?i=n:this.fs&&(i=this.shaderFactory.createShader({id:`${this.id}-fragment`,stage:"fragment",source:this.source||this.fs,debug:this.props.debugShaders})),this.pipeline=this.pipelineFactory.createRenderPipeline({...this.props,bufferLayout:this.bufferLayout,topology:this.topology,parameters:this.parameters,vs:n,fs:i}),this._attributeInfos=q1(this.pipeline.shaderLayout,this.bufferLayout),e&&this.shaderFactory.release(e),r&&this.shaderFactory.release(r)}return this.pipeline}_logDrawCallStart(){const e=Be.level>3?0:s4;Be.level<2||Date.now()-this._lastLogTime<e||(this._lastLogTime=Date.now(),this._logOpen=!0,Be.group(Xa,`>>> DRAWING MODEL ${this.id}`,{collapsed:Be.level<=2})())}_logDrawCallEnd(){if(this._logOpen){const e=n4(this.pipeline.shaderLayout,this.id);Be.table(Xa,e)();const r=this.shaderInputs.getDebugTable();for(const[i,o]of Object.entries(this.uniforms))r[i]={value:o};Be.table(Xa,r)();const n=this._getAttributeDebugTable();Be.table(Xa,this._attributeInfos)(),Be.table(Xa,n)(),Be.groupEnd(Xa)(),this._logOpen=!1}}_logFramebuffer(e){const r=Be.get("framebuffer");if(this._drawCount++,!r||this._drawCount++>3&&this._drawCount%60)return;const n=e.props.framebuffer;n&&i4(n,{id:n.id,minimap:!0})}_getAttributeDebugTable(){const e={};for(const[r,n]of Object.entries(this._attributeInfos))e[n.location]={name:r,type:n.shaderType,values:this._getBufferOrConstantValues(this.vertexArray.attributes[n.location],n.bufferDataType)};if(this.vertexArray.indexBuffer){const{indexBuffer:r}=this.vertexArray,n=r.indexType==="uint32"?new Uint32Array(r.debugData):new Uint16Array(r.debugData);e.indices={name:"indices",type:r.indexType,values:n.toString()}}return e}_getBufferOrConstantValues(e,r){const n=ey(r);return(e instanceof Ar?new n(e.debugData):e).toString()}};F(Mf,"defaultProps",{...cA.defaultProps,source:null,vs:null,fs:null,id:"unnamed",handle:void 0,userData:{},defines:{},modules:[],moduleSettings:void 0,geometry:null,indexBuffer:null,attributes:{},constantAttributes:{},varyings:[],isInstanced:void 0,instanceCount:0,vertexCount:0,shaderInputs:void 0,pipelineFactory:void 0,shaderFactory:void 0,transformFeedback:void 0,shaderAssembler:Yc.getDefaultShaderAssembler(),debugShaders:void 0,disableWarnings:void 0});let Vi=Mf;function L2(t,e){const r=[...t];for(const n of e){const i=r.findIndex(o=>o.name===n.name);i<0?r.push(n):r[i]=n}return r}function o4(t){return{type:t.type,shaderLanguage:t.info.shadingLanguage,shaderLanguageVersion:t.info.shadingLanguageVersion,gpu:t.info.gpu,features:t.features}}function U2(t){var e;return t.attributes?(e=t.attributes)==null?void 0:e.map(r=>r.attribute):[t.name]}class $l{constructor(e,r=Vi.defaultProps){F(this,"device");F(this,"model");F(this,"transformFeedback");ir($l.isSupported(e),"BufferTransform not yet implemented on WebGPU"),this.device=e,this.model=new Vi(this.device,{id:r.id||"buffer-transform-model",fs:r.fs||US(),topology:r.topology||"point-list",...r}),this.transformFeedback=this.device.createTransformFeedback({layout:this.model.pipeline.shaderLayout,buffers:r.feedbackBuffers}),this.model.setTransformFeedback(this.transformFeedback),Object.seal(this)}static isSupported(e){var r;return((r=e==null?void 0:e.info)==null?void 0:r.type)==="webgl"}destroy(){this.model&&this.model.destroy()}delete(){this.destroy()}run(e){const r=this.device.beginRenderPass(e);this.model.draw(r),r.end()}update(...e){console.warn("TextureTransform#update() not implemented")}getBuffer(e){return this.transformFeedback.getBuffer(e)}readAsync(e){const r=this.getBuffer(e);if(r instanceof Ar)return r.readAsync();const{buffer:n,byteOffset:i=0,byteLength:o=n.byteLength}=r;return n.readAsync(i,o)}}class Af{constructor(e){F(this,"id");F(this,"topology");F(this,"vertexCount");F(this,"indices");F(this,"attributes");F(this,"userData",{});const{attributes:r={},indices:n=null,vertexCount:i=null}=e;this.id=e.id||la("geometry"),this.topology=e.topology,n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n),this.attributes={};for(const[o,f]of Object.entries(r)){const p=ArrayBuffer.isView(f)?{value:f}:f;ir(ArrayBuffer.isView(p.value),`${this._print(o)}: must be typed array or object with value as typed array`),(o==="POSITION"||o==="positions")&&!p.size&&(p.size=3),o==="indices"?(ir(!this.indices),this.indices=p):this.attributes[o]=p}this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this.vertexCount=i||this._calculateVertexCount(this.attributes,this.indices)}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return`Geometry ${this.id} attribute ${e}`}_setAttributes(e,r){return this}_calculateVertexCount(e,r){if(r)return r.value.length;let n=1/0;for(const i of Object.values(e)){const{value:o,size:f,constant:p}=i;!p&&o&&f>=1&&(n=Math.min(n,o.length/f))}return ir(Number.isFinite(n)),n}}const a4={blendColorOperation:"add",blendColorSrcFactor:"one",blendColorDstFactor:"zero",blendAlphaOperation:"add",blendAlphaSrcFactor:"constant-alpha",blendAlphaDstFactor:"zero"};class Dy extends vg{constructor(){super(...arguments),this._colorEncoderState=null}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:r,views:n,viewports:i,onViewportActive:o,pickingFBO:f,deviceRect:{x:p,y,width:T,height:R},cullRect:x,effects:M,pass:U="picking",pickZ:W,moduleParameters:j}){this.pickZ=W;const G=this._resetColorEncoder(W),re=[p,y,T,R],se=super.render({target:f,layers:e,layerFilter:r,views:n,viewports:i,onViewportActive:o,cullRect:x,effects:M==null?void 0:M.filter(we=>we.useInPicking),pass:U,isPicking:!0,moduleParameters:j,clearColor:[0,0,0,0],colorMask:15,scissorRect:re});return this._colorEncoderState=null,{decodePickingColor:G&&l4.bind(null,G),stats:se}}shouldDrawLayer(e){const{pickable:r,operation:n}=e.props;return r&&n.includes("draw")||n.includes("terrain")||n.includes("mask")}getModuleParameters(){return{picking:{isActive:1,isAttribute:this.pickZ},lightSources:{}}}getLayerParameters(e,r,n){const i={depthMask:!0,depthTest:!0,depthRange:[0,1],...e.props.parameters},{pickable:o,operation:f}=e.props;return!this._colorEncoderState||f.includes("terrain")?i.blend=!1:o&&f.includes("draw")&&(Object.assign(i,a4),i.blend=!0,i.blendColor=A4(this._colorEncoderState,e,n)),i}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function A4(t,e,r){const{byLayer:n,byAlpha:i}=t;let o,f=n.get(e);return f?(f.viewports.push(r),o=f.a):(o=n.size+1,o<=255?(f={a:o,layer:e,viewports:[r]},n.set(e,f),i[o]=f):(tr.warn("Too many pickable layers, only picking the first 255")(),o=0)),[0,0,0,o/255]}function l4(t,e){const r=t.byAlpha[e[3]];return r&&{pickedLayer:r.layer,pickedViewports:r.viewports,pickedObjectIndex:r.layer.decodePickingColor(e)}}const Ya={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},lf=Symbol.for("component"),Qs=Symbol.for("propTypes"),Lh=Symbol.for("deprecatedProps"),lA=Symbol.for("asyncPropDefaults"),na=Symbol.for("asyncPropOriginal"),Ws=Symbol.for("asyncPropResolved");function wg(t,e=()=>!0){return Array.isArray(t)?Iy(t,e,[]):e(t)?[t]:[]}function Iy(t,e,r){let n=-1;for(;++n<t.length;){const i=t[n];Array.isArray(i)?Iy(i,e,r):e(i)&&r.push(i)}return r}function u4({target:t,source:e,start:r=0,count:n=1}){const i=e.length,o=n*i;let f=0;for(let p=r;f<i;f++)t[p++]=e[f];for(;f<o;)f<o-f?(t.copyWithin(r+f,r,r+f),f*=2):(t.copyWithin(r+f,r,r+o-f),f=o);return t}class c4{constructor(e,r,n){this._loadCount=0,this._subscribers=new Set,this.id=e,this.context=n,this.setData(r)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,r){if(e===this._data&&!r)return;this._data=e;const n=++this._loadCount;let i=e;typeof e=="string"&&(i=od(e)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(o=>{this._loadCount===n&&(this.isLoaded=!0,this._error=void 0,this._content=o)}).catch(o=>{this._loadCount===n&&(this.isLoaded=!0,this._error=o||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const o of this._subscribers)o.onChange(this.getData())}}class f4{constructor(e){var r;this.protocol=e.protocol||"resource://",this._context={device:e.device,gl:(r=e.device)==null?void 0:r.gl,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:r,forceUpdate:n=!1,persistent:i=!0}){let o=this._resources[e];o?o.setData(r,n):(o=new c4(e,r,this._context),this._resources[e]=o),o.persistent=i}remove(e){const r=this._resources[e];r&&(r.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const r=this._consumers[e];if(r){for(const n in r){const i=r[n],o=this._resources[i.resourceId];o&&o.unsubscribe(i)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:r,consumerId:n,requestId:i="default"}){const{_resources:o,protocol:f}=this;e.startsWith(f)&&(e=e.replace(f,""),o[e]||this.add({resourceId:e,data:null,persistent:!1}));const p=o[e];if(this._track(n,i,p,r),p)return p.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,r,n,i){const o=this._consumers,f=o[e]=o[e]||{};let p=f[r];const y=p&&p.resourceId&&this._resources[p.resourceId];y&&(y.unsubscribe(p),this.prune()),n&&(p?(p.onChange=i,p.resourceId=n.id):p={onChange:i,resourceId:n.id},f[r]=p,n.subscribe(p))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const r=this._resources[e];!r.persistent&&!r.inUse()&&(r.delete(),delete this._resources[e])}}}const h4="layerManager.setLayers",d4="layerManager.activateViewport";class g4{constructor(e,r){this._lastRenderedLayers=[],this._needsRedraw=!1,this._needsUpdate=!1,this._nextLayers=null,this._debug=!1,this._defaultShaderModulesChanged=!1,this.activateViewport=p=>{ln(d4,this,p),p&&(this.context.viewport=p)};const{deck:n,stats:i,viewport:o,timeline:f}=r||{};this.layers=[],this.resourceManager=new f4({device:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,device:e,gl:e==null?void 0:e.gl,deck:n,shaderAssembler:EP(),defaultShaderModules:[],renderPass:void 0,stats:i||new Nf({id:"deck.gl"}),viewport:o||new ru({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:f||new Oy,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let r=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const n of this.layers){const i=n.getNeedsRedraw(e);r=r||i}return r}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._defaultShaderModulesChanged?"shader modules changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(r=>e.find(n=>r.id.indexOf(n)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,r){ln(h4,this,r,e),this._lastRenderedLayers=e;const n=wg(e,Boolean);for(const i of n)i.context=this.context;this._updateLayers(this.layers,n)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw(`updating layers: ${e}`),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}addDefaultShaderModule(e){const{defaultShaderModules:r}=this.context;r.find(n=>n.name===e.name)||(r.push(e),this._defaultShaderModulesChanged=!0)}removeDefaultShaderModule(e){const{defaultShaderModules:r}=this.context,n=r.findIndex(i=>i.name===e.name);n>=0&&(r.splice(n,1),this._defaultShaderModulesChanged=!0)}_handleError(e,r,n){n.raiseError(r,`${e} of ${n}`)}_updateLayers(e,r){const n={};for(const f of e)n[f.id]?tr.warn(`Multiple old layers with same id ${f.id}`)():n[f.id]=f;if(this._defaultShaderModulesChanged){for(const f of e)f.setNeedsUpdate(),f.setChangeFlags({extensionsChanged:!0});this._defaultShaderModulesChanged=!1}const i=[];this._updateSublayersRecursively(r,n,i),this._finalizeOldLayers(n);let o=!1;for(const f of i)if(f.hasUniformTransition()){o=`Uniform transition in ${f}`;break}this._needsUpdate=o,this.layers=i}_updateSublayersRecursively(e,r,n){for(const i of e){i.context=this.context;const o=r[i.id];o===null&&tr.warn(`Multiple new layers with same id ${i.id}`)(),r[i.id]=null;let f=null;try{this._debug&&o!==i&&i.validateProps(),o?(this._transferLayerState(o,i),this._updateLayer(i)):this._initializeLayer(i),n.push(i),f=i.isComposite?i.getSubLayers():null}catch(p){this._handleError("matching",p,i)}f&&this._updateSublayersRecursively(f,r,n)}}_finalizeOldLayers(e){for(const r in e){const n=e[r];n&&this._finalizeLayer(n)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=Ya.INITIALIZED}catch(r){this._handleError("initialization",r,e)}}_transferLayerState(e,r){r._transferState(e),r.lifecycle=Ya.MATCHED,r!==e&&(e.lifecycle=Ya.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(r){this._handleError("update",r,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||`finalized ${e}`,e.lifecycle=Ya.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=Ya.FINALIZED}catch(r){this._handleError("finalization",r,e)}}}function fi(t,e,r){if(t===e)return!0;if(!r||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!fi(t[n],e[n],r-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(const o of n)if(!e.hasOwnProperty(o)||!fi(t[o],e[o],r-1))return!1;return!0}return!1}class p4{constructor(e){this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const r=this.controllers[e];r&&r.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const r=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),r}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const r=this.controllers[e];r&&r.updateTransition()}}getViewports(e){return e?this._viewports.filter(r=>r.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(r=>{e[r.id]=r}),e}getView(e){return this.views.find(r=>r.id===e)}getViewState(e){const r=typeof e=="string"?this.getView(e):e,n=r&&this.viewState[r.getViewStateId()]||this.viewState;return r?r.filterViewState(n):n}getViewport(e){return this._viewportMap[e]}unproject(e,r){const n=this.getViewports(),i={x:e[0],y:e[1]};for(let o=n.length-1;o>=0;--o){const f=n[o];if(f.containsPixel(i)){const p=e.slice();return p[0]-=f.x,p[1]-=f.y,f.unproject(p,r)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,r){(e!==this.width||r!==this.height)&&(this.width=e,this.height=r,this.setNeedsUpdate("Size changed"))}_setViews(e){e=wg(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!fi(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):tr.warn("missing `viewState` or `initialViewState`")()}_createController(e,r){const n=r.type;return new n({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._eventCallbacks.onViewStateChange,onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:o=>{var f;return(f=this.getView(e.id))==null?void 0:f.makeViewport({viewState:o,width:this.width,height:this.height})}})}_updateController(e,r,n,i){const o=e.controller;if(o&&n){const f={...r,...o,id:e.id,x:n.x,y:n.y,width:n.width,height:n.height};return(!i||i.constructor!==o.type)&&(i=this._createController(e,f)),i&&i.setProps(f),i}return null}_rebuildViewports(){const{views:e}=this,r=this.controllers;this._viewports=[],this.controllers={};let n=!1;for(let i=e.length;i--;){const o=e[i],f=this.getViewState(o),p=o.makeViewport({viewState:f,width:this.width,height:this.height});let y=r[o.id];const T=!!o.controller;T&&!y&&(n=!0),(n||!T)&&y&&(y.finalize(),y=null),this.controllers[o.id]=this._updateController(o,f,p,y),p&&this._viewports.unshift(p)}for(const i in r){const o=r[i];o&&!this.controllers[i]&&o.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,r){return e.length!==r.length?!0:e.some((n,i)=>!e[i].equals(r[i]))}}const _4=/([0-9]+\.?[0-9]*)(%|px)/;function Ls(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=_4.exec(t);if(e&&e.length>=3){const r=e[2]==="%",n=parseFloat(e[1]);return{position:r?n/100:n,relative:r}}default:throw new Error(`Could not parse position string ${t}`)}}function Us(t,e){return t.relative?Math.round(t.position*e):t.position}class yA{constructor(e){const{id:r,x:n=0,y:i=0,width:o="100%",height:f="100%",padding:p=null}=e;this.id=r||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=Ls(n),this._y=Ls(i),this._width=Ls(o),this._height=Ls(f),this._padding=p&&{left:Ls(p.left||0),right:Ls(p.right||0),top:Ls(p.top||0),bottom:Ls(p.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.ViewportType===e.ViewportType&&fi(this.props,e.props,2)}makeViewport({width:e,height:r,viewState:n}){n=this.filterViewState(n);const i=this.getDimensions({width:e,height:r});return!i.height||!i.width?null:new this.ViewportType({...n,...this.props,...i})}getViewStateId(){const{viewState:e}=this.props;return typeof e=="string"?e:(e==null?void 0:e.id)||this.id}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const r={...e};for(const n in this.props.viewState)n!=="id"&&(r[n]=this.props.viewState[n]);return r}return e}getDimensions({width:e,height:r}){const n={x:Us(this._x,e),y:Us(this._y,r),width:Us(this._width,e),height:Us(this._height,r)};return this._padding&&(n.padding={left:Us(this._padding.left,e),top:Us(this._padding.top,r),right:Us(this._padding.right,e),bottom:Us(this._padding.bottom,r)}),n}get controller(){const e=this.props.controller;return e?e===!0?{type:this.ControllerType}:typeof e=="function"?{type:e}:{type:this.ControllerType,...e}:null}}class Ff{constructor(e){this._inProgress=!1,this._handle=null,this.time=0,this.settings={duration:0},this._timeline=e}get inProgress(){return this._inProgress}start(e){var r,n;this.cancel(),this.settings=e,this._inProgress=!0,(n=(r=this.settings).onStart)==null||n.call(r,this)}end(){var e,r;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(r=(e=this.settings).onEnd)==null||r.call(e,this))}cancel(){var e,r;this._inProgress&&((r=(e=this.settings).onInterrupt)==null||r.call(e,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var e,r;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:n,settings:i}=this;this._handle=n.addChannel({delay:n.getTime(),duration:i.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(r=(e=this.settings).onUpdate)==null||r.call(e,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const B2=()=>{},Md={BREAK:1,SNAP_TO_END:2,IGNORE:3},m4=t=>t,y4=Md.BREAK;class v4{constructor(e){this._onTransitionUpdate=r=>{const{time:n,settings:{interpolator:i,startProps:o,endProps:f,duration:p,easing:y}}=r,T=y(n/p),R=i.interpolateProps(o,f,T);this.propsInTransition=this.getControllerState({...this.props,...R}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})},this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new Ff(e.timeline),this.onViewStateChange=e.onViewStateChange||B2,this.onStateChange=e.onStateChange||B2}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let r=!1;const n=this.props;if(this.props=e,!n||this._shouldIgnoreViewportChange(n,e))return!1;if(this._isTransitionEnabled(e)){let i=n;if(this.transition.inProgress){const{interruption:o,endProps:f}=this.transition.settings;i={...n,...o===Md.SNAP_TO_END?f:this.propsInTransition||n}}this._triggerTransition(i,e),r=!0}else this.transition.cancel();return r}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:r,transitionInterpolator:n}=e;return(r>0||r==="auto")&&!!n}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,r){return this.transition.inProgress?this.transition.settings.interruption===Md.IGNORE||this._isUpdateDueToCurrentTransition(r):this._isTransitionEnabled(r)?r.transitionInterpolator.arePropsEqual(e,r):!0}_triggerTransition(e,r){const n=this.getControllerState(e),i=this.getControllerState(r).shortestPathFrom(n),o=r.transitionInterpolator,f=o.getDuration?o.getDuration(e,r):r.transitionDuration;if(f===0)return;const p=o.initializeProps(e,i);this.propsInTransition={};const y={duration:f,easing:r.transitionEasing||m4,interpolator:o,interruption:r.transitionInterruption||y4,startProps:p.start,endProps:p.end,onStart:r.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(r.onTransitionInterrupt),onEnd:this._onTransitionEnd(r.onTransitionEnd)};this.transition.start(y),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return r=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e==null||e(r)}}}function qr(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class w4{constructor(e){const{compare:r,extract:n,required:i}=e;this._propsToCompare=r,this._propsToExtract=n||r,this._requiredProps=i}arePropsEqual(e,r){for(const n of this._propsToCompare)if(!(n in e)||!(n in r)||!Wl(e[n],r[n]))return!1;return!0}initializeProps(e,r){const n={},i={};for(const o of this._propsToExtract)(o in e||o in r)&&(n[o]=e[o],i[o]=r[o]);return this._checkRequiredProps(n),this._checkRequiredProps(i),{start:n,end:i}}getDuration(e,r){return r.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(r=>{const n=e[r];qr(Number.isFinite(n)||Array.isArray(n),`${r} is required for transition`)})}}const T4=["longitude","latitude","zoom","bearing","pitch"],E4=["longitude","latitude","zoom"];class Fy extends w4{constructor(e={}){const r=Array.isArray(e)?e:e.transitionProps,n=Array.isArray(e)?{}:e;n.transitionProps=Array.isArray(r)?{compare:r,required:r}:r||{compare:T4,required:E4},super(n.transitionProps),this.opts=n}initializeProps(e,r){const n=super.initializeProps(e,r),{makeViewport:i,around:o}=this.opts;if(i&&o){const f=i(e),p=i(r),y=f.unproject(o);n.start.around=o,Object.assign(n.end,{around:p.project(y),aroundPosition:y,width:r.width,height:r.height})}return n}interpolateProps(e,r,n){const i={};for(const o of this._propsToExtract)i[o]=dA(e[o]||0,r[o]||0,n);if(r.aroundPosition&&this.opts.makeViewport){const o=this.opts.makeViewport({...r,...i});Object.assign(i,o.panByPosition(r.aroundPosition,dA(e.around,r.around,n)))}return i}}const Bs={transitionDuration:0},S4=300,Sc=t=>1-(1-t)*(1-t),$a={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},Wo={};class b4{constructor(e){this.state={},this._events={},this._interactionState={isDragging:!1},this._customEvents=[],this._eventStartBlocked=null,this._panMove=!1,this.invertPan=!1,this.dragMode="rotate",this.inertia=0,this.scrollZoom=!0,this.dragPan=!0,this.dragRotate=!0,this.doubleClickZoom=!0,this.touchZoom=!0,this.touchRotate=!1,this.keyboard=!0,this.transitionManager=new v4({...e,getControllerState:r=>new this.ControllerState(r),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){var e;for(const r in this._events)this._events[r]&&((e=this.eventManager)==null||e.off(r,this.handleEvent));this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const r=this._eventStartBlocked;switch(e.type){case"panstart":return r?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return r?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return r?!1:this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:r,y:n}=this.props,{offsetCenter:i}=e;return[i.x-r,i.y-n]}isPointInBounds(e,r){const{width:n,height:i}=this.props;if(r&&r.handled)return!1;const o=e[0]>=0&&e[0]<=n&&e[1]>=0&&e[1]<=i;return o&&r&&r.stopPropagation(),o}isFunctionKeyPressed(e){const{srcEvent:r}=e;return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const r=setTimeout(()=>{this._eventStartBlocked===r&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=r}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:r}=e;this.inertia=Number.isFinite(r)?r:r===!0?S4:0;const{scrollZoom:n=!0,dragPan:i=!0,dragRotate:o=!0,doubleClickZoom:f=!0,touchZoom:p=!0,touchRotate:y=!1,keyboard:T=!0}=e,R=!!this.onViewStateChange;this.toggleEvents($a.WHEEL,R&&n),this.toggleEvents($a.PAN,R),this.toggleEvents($a.PINCH,R&&(p||y)),this.toggleEvents($a.TRIPLE_PAN,R&&y),this.toggleEvents($a.DOUBLE_TAP,R&&f),this.toggleEvents($a.KEYBOARD,R&&T),this.scrollZoom=n,this.dragPan=i,this.dragRotate=o,this.doubleClickZoom=f,this.touchZoom=p,this.touchRotate=y,this.keyboard=T}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,r){this.eventManager&&e.forEach(n=>{this._events[n]!==r&&(this._events[n]=r,r?this.eventManager.on(n,this.handleEvent):this.eventManager.off(n,this.handleEvent))})}updateViewport(e,r=null,n={}){const i={...e.getViewportProps(),...r},o=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(n),o){const f=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:f,viewId:this.props.id})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState,viewId:this.props.id})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const r=this.getCenter(e);if(!this.isPointInBounds(r,e))return!1;let n=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(n=!n);const i=this.controllerState[n?"panStart":"rotateStart"]({pos:r});return this._panMove=n,this.updateViewport(i,Bs,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;const r=this.getCenter(e),n=this.controllerState.pan({pos:r});return this.updateViewport(n,Bs,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:r}=this;if(this.dragPan&&r&&e.velocity){const n=this.getCenter(e),i=[n[0]+e.velocityX*r/2,n[1]+e.velocityY*r/2],o=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Sc},{isDragging:!1,isPanning:!0})}else{const n=this.controllerState.panEnd();this.updateViewport(n,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const r=this.getCenter(e),n=this.controllerState.rotate({pos:r});return this.updateViewport(n,Bs,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:r}=this;if(this.dragRotate&&r&&e.velocity){const n=this.getCenter(e),i=[n[0]+e.velocityX*r/2,n[1]+e.velocityY*r/2],o=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Sc},{isDragging:!1,isRotating:!0})}else{const n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;const r=this.getCenter(e);if(!this.isPointInBounds(r,e))return!1;e.srcEvent.preventDefault();const{speed:n=.01,smooth:i=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:o}=e;let f=2/(1+Math.exp(-Math.abs(o*n)));o<0&&f!==0&&(f=1/f);const p=this.controllerState.zoom({pos:r,scale:f});return this.updateViewport(p,{...this._getTransitionProps({around:r}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const r=this.getCenter(e);if(!this.isPointInBounds(r,e))return!1;const n=this.controllerState.rotateStart({pos:r});return this.updateViewport(n,Bs,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const r=this.getCenter(e);r[0]-=e.deltaX;const n=this.controllerState.rotate({pos:r});return this.updateViewport(n,Bs,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:r}=this;if(this.touchRotate&&r&&e.velocityY){const n=this.getCenter(e),i=[n[0],n[1]+=e.velocityY*r/2],o=this.controllerState.rotate({pos:i});this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Sc},{isDragging:!1,isRotating:!0}),this.blockEvents(r)}else{const n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const r=this.getCenter(e);if(!this.isPointInBounds(r,e))return!1;const n=this.controllerState.zoomStart({pos:r}).rotateStart({pos:r});return Wo._startPinchRotation=e.rotation,Wo._lastPinchEvent=e,this.updateViewport(n,Bs,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let r=this.controllerState;if(this.touchZoom){const{scale:n}=e,i=this.getCenter(e);r=r.zoom({pos:i,scale:n})}if(this.touchRotate){const{rotation:n}=e;r=r.rotate({deltaAngleX:Wo._startPinchRotation-n})}return this.updateViewport(r,Bs,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Wo._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:r}=this,{_lastPinchEvent:n}=Wo;if(this.touchZoom&&r&&n&&e.scale!==n.scale){const i=this.getCenter(e);let o=this.controllerState.rotateEnd();const f=Math.log2(e.scale),p=(f-Math.log2(n.scale))/(e.deltaTime-n.deltaTime),y=Math.pow(2,f+p*r/2);o=o.zoom({pos:i,scale:y}).zoomEnd(),this.updateViewport(o,{...this._getTransitionProps({around:i}),transitionDuration:r,transitionEasing:Sc},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(r)}else{const i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Wo._startPinchRotation=null,Wo._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const r=this.getCenter(e);if(!this.isPointInBounds(r,e))return!1;const n=this.isFunctionKeyPressed(e),i=this.controllerState.zoom({pos:r,scale:n?.5:2});return this.updateViewport(i,this._getTransitionProps({around:r}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const r=this.isFunctionKeyPressed(e),{zoomSpeed:n,moveSpeed:i,rotateSpeedX:o,rotateSpeedY:f}=this.keyboard===!0?{}:this.keyboard,{controllerState:p}=this;let y;const T={};switch(e.srcEvent.code){case"Minus":y=r?p.zoomOut(n).zoomOut(n):p.zoomOut(n),T.isZooming=!0;break;case"Equal":y=r?p.zoomIn(n).zoomIn(n):p.zoomIn(n),T.isZooming=!0;break;case"ArrowLeft":r?(y=p.rotateLeft(o),T.isRotating=!0):(y=p.moveLeft(i),T.isPanning=!0);break;case"ArrowRight":r?(y=p.rotateRight(o),T.isRotating=!0):(y=p.moveRight(i),T.isPanning=!0);break;case"ArrowUp":r?(y=p.rotateUp(f),T.isRotating=!0):(y=p.moveUp(i),T.isPanning=!0);break;case"ArrowDown":r?(y=p.rotateDown(f),T.isRotating=!0):(y=p.moveDown(i),T.isPanning=!0);break;default:return!1}return this.updateViewport(y,this._getTransitionProps(),T),!0}_getTransitionProps(e){const{transition:r}=this;return!r||!r.transitionInterpolator?Bs:e?{...r,transitionInterpolator:new Fy({...e,...r.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:r}}class C4{constructor(e,r){this._viewportProps=this.applyConstraints(e),this._state=r}getViewportProps(){return this._viewportProps}getState(){return this._state}}const V2=5,R4=1.2;class P4 extends C4{constructor(e){const{width:r,height:n,latitude:i,longitude:o,zoom:f,bearing:p=0,pitch:y=0,altitude:T=1.5,position:R=[0,0,0],maxZoom:x=20,minZoom:M=0,maxPitch:U=60,minPitch:W=0,startPanLngLat:j,startZoomLngLat:G,startRotatePos:re,startBearing:se,startPitch:ce,startZoom:we,normalize:be=!0}=e;qr(Number.isFinite(o)),qr(Number.isFinite(i)),qr(Number.isFinite(f)),super({width:r,height:n,latitude:i,longitude:o,zoom:f,bearing:p,pitch:y,altitude:T,maxZoom:x,minZoom:M,maxPitch:U,minPitch:W,normalize:be,position:R},{startPanLngLat:j,startZoomLngLat:G,startRotatePos:re,startBearing:se,startPitch:ce,startZoom:we}),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:r}){const n=this.getState().startPanLngLat||this._unproject(r);if(!n)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(n,e);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:r=0,deltaAngleY:n=0}){const{startRotatePos:i,startBearing:o,startPitch:f}=this.getState();if(!i||o===void 0||f===void 0)return this;let p;return e?p=this._getNewRotation(e,i,f,o):p={bearing:o+r,pitch:f+n},this._getUpdatedState(p)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:r,scale:n}){let{startZoom:i,startZoomLngLat:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(r)||this._unproject(e)),!o)return this;const{maxZoom:f,minZoom:p}=this.getViewportProps();let y=i+Math.log2(n);y=js(y,p,f);const T=this.makeViewport({...this.getViewportProps(),zoom:y});return this._getUpdatedState({zoom:y,...T.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const r=e.getViewportProps(),n={...this.getViewportProps()},{bearing:i,longitude:o}=n;return Math.abs(i-r.bearing)>180&&(n.bearing=i<0?i+360:i-360),Math.abs(o-r.longitude)>180&&(n.longitude=o<0?o+360:o-360),n}applyConstraints(e){const{maxZoom:r,minZoom:n,zoom:i}=e;e.zoom=js(i,n,r);const{maxPitch:o,minPitch:f,pitch:p}=e;e.pitch=js(p,f,o);const{normalize:y=!0}=e;return y&&Object.assign(e,uP(e)),e}_zoomFromCenter(e){const{width:r,height:n}=this.getViewportProps();return this.zoom({pos:[r/2,n/2],scale:e})}_panFromCenter(e){const{width:r,height:n}=this.getViewportProps();return this.pan({startPos:[r/2,n/2],pos:[r/2+e[0],n/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const r=this.makeViewport(this.getViewportProps());return e&&r.unproject(e)}_getNewRotation(e,r,n,i){const o=e[0]-r[0],f=e[1]-r[1],p=e[1],y=r[1],{width:T,height:R}=this.getViewportProps(),x=o/T;let M=0;f>0?Math.abs(R-y)>V2&&(M=f/(y-R)*R4):f<0&&y>V2&&(M=1-p/y),M=js(M,-1,1);const{minPitch:U,maxPitch:W}=this.getViewportProps(),j=i+180*x;let G=n;return M>0?G=n+M*(W-n):M<0&&(G=n-M*(U-n)),{pitch:G,bearing:j}}}class k4 extends b4{constructor(){super(...arguments),this.ControllerState=P4,this.transition={transitionDuration:300,transitionInterpolator:new Fy({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})},this.dragMode="pan"}setProps(e){e.position=e.position||[0,0,0];const r=this.props;super.setProps(e),(!r||r.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class Tg extends yA{constructor(e={}){super(e)}get ViewportType(){return ra}get ControllerType(){return k4}}Tg.displayName="MapView";const x4=new My;function M4(t,e){const r=t.order??1/0,n=e.order??1/0;return r-n}class N4{constructor(e){this._resolvedEffects=[],this._defaultEffects=[],this.effects=[],this._context=e,this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){const r=this._defaultEffects;if(!r.find(n=>n.id===e.id)){const n=r.findIndex(i=>M4(i,e)>0);n<0?r.push(e):r.splice(n,0,e),e.setup(this._context),this._setEffects(this.effects)}}setProps(e){"effects"in e&&(fi(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(e={clearRedrawFlags:!1}){const r=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),r}getEffects(){return this._resolvedEffects}_setEffects(e){const r={};for(const i of this.effects)r[i.id]=i;const n=[];for(const i of e){const o=r[i.id];let f=i;o&&o!==i?o.setProps?(o.setProps(i.props),f=o):o.cleanup(this._context):o||i.setup(this._context),n.push(f),delete r[i.id]}for(const i in r)r[i].cleanup(this._context);this.effects=n,this._resolvedEffects=n.concat(this._defaultEffects),e.some(i=>i instanceof My)||this._resolvedEffects.push(x4),this._needsRedraw="effects changed"}finalize(){for(const e of this._resolvedEffects)e.cleanup(this._context);this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class O4 extends vg{shouldDrawLayer(e){const{operation:r}=e.props;return r.includes("draw")||r.includes("terrain")}}const D4="deckRenderer.renderLayers";class I4{constructor(e){this.device=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new O4(e),this.pickLayersPass=new Dy(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){if(!e.viewports.length)return;const r=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,n={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e};n.effects&&this._preRender(n.effects,n);const i=this.lastPostProcessEffect?this.renderBuffers[0]:n.target;this.lastPostProcessEffect&&(n.clearColor=[0,0,0,0],n.clearCanvas=!0);const o=r.render({...n,target:i});n.effects&&this._postRender(n.effects,n),this.renderCount++,ln(D4,this,o,e)}needsRedraw(e={clearRedrawFlags:!1}){const r=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),r}finalize(){const{renderBuffers:e}=this;for(const r of e)r.delete();e.length=0}_preRender(e,r){this.lastPostProcessEffect=null,r.preRenderStats=r.preRenderStats||{};for(const n of e)r.preRenderStats[n.id]=n.preRender(r),n.postRender&&(this.lastPostProcessEffect=n.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:e}=this,r=this.device.canvasContext.getDrawingBufferSize();e.length===0&&[0,1].map(n=>{const i=this.device.createTexture({sampler:{minFilter:"linear",magFilter:"linear"}});e.push(this.device.createFramebuffer({id:`deck-renderbuffer-${n}`,colorAttachments:[i]}))});for(const n of e)n.resize(r)}_postRender(e,r){const{renderBuffers:n}=this,i={...r,inputBuffer:n[0],swapBuffer:n[1]};for(const o of e)if(o.postRender){i.target=o.id===this.lastPostProcessEffect?r.target:void 0;const f=o.postRender(i);i.inputBuffer=f,i.swapBuffer=f===n[0]?n[1]:n[0]}}}const F4={pickedColor:null,pickedObjectIndex:-1};function L4({pickedColors:t,decodePickingColor:e,deviceX:r,deviceY:n,deviceRadius:i,deviceRect:o}){const{x:f,y:p,width:y,height:T}=o;let R=i*i,x=-1,M=0;for(let U=0;U<T;U++){const W=U+p-n,j=W*W;if(j>R)M+=4*y;else for(let G=0;G<y;G++){if(t[M+3]-1>=0){const se=G+f-r,ce=se*se+j;ce<=R&&(R=ce,x=M)}M+=4}}if(x>=0){const U=t.slice(x,x+4),W=e(U);if(W){const j=Math.floor(x/4/y),G=x/4-j*y;return{...W,pickedColor:U,pickedX:f+G,pickedY:p+j}}tr.error("Picked non-existent layer. Is picking buffer corrupt?")()}return F4}function U4({pickedColors:t,decodePickingColor:e}){const r=new Map;if(t){for(let n=0;n<t.length;n+=4)if(t[n+3]-1>=0){const o=t.slice(n,n+4),f=o.join(",");if(!r.has(f)){const p=e(o);p?r.set(f,{...p,color:o}):tr.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(r.values())}function Ly({pickInfo:t,viewports:e,pixelRatio:r,x:n,y:i,z:o}){let f=e[0];e.length>1&&(f=V4((t==null?void 0:t.pickedViewports)||e,{x:n,y:i}));let p;if(f){const y=[n-f.x,i-f.y];o!==void 0&&(y[2]=o),p=f.unproject(y)}return{color:null,layer:null,viewport:f,index:-1,picked:!1,x:n,y:i,pixel:[n,i],coordinate:p,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:r}}function B4(t){const{pickInfo:e,lastPickedInfo:r,mode:n,layers:i}=t,{pickedColor:o,pickedLayer:f,pickedObjectIndex:p}=e,y=f?[f]:[];if(n==="hover"){const x=r.index,M=r.layerId,U=f?f.props.id:null;if(U!==M||p!==x){if(U!==M){const W=i.find(j=>j.props.id===M);W&&y.unshift(W)}r.layerId=U,r.index=p,r.info=null}}const T=Ly(t),R=new Map;return R.set(null,T),y.forEach(x=>{let M={...T};x===f&&(M.color=o,M.index=p,M.picked=!0),M=Uy({layer:x,info:M,mode:n});const U=M.layer;x===f&&n==="hover"&&(r.info=M),R.set(U.id,M),n==="hover"&&U.updateAutoHighlight(M)}),R}function Uy({layer:t,info:e,mode:r}){for(;t&&e;){const n=e.layer||null;e.sourceLayer=n,e.layer=t,e=t.getPickingInfo({info:e,mode:r,sourceLayer:n}),t=t.parent}return e}function V4(t,e){for(let r=t.length-1;r>=0;r--){const n=t[r];if(n.containsPixel(e))return n}return t[0]}class z4{constructor(e){this._pickable=!0,this.device=e,this.pickLayersPass=new Dy(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.destroy(),this.depthFBO&&this.depthFBO.destroy()}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:r,layers:n,viewports:i},o=this.lastPickedInfo.info){const f=o&&o.layer&&o.layer.id,p=o&&o.viewport&&o.viewport.id,y=f?n.find(M=>M.id===f):null,T=p&&i.find(M=>M.id===p)||i[0],R=T&&T.unproject([e-T.x,r-T.y]);return{...o,...{x:e,y:r,viewport:T,coordinate:R,layer:y}}}_resizeBuffer(){var r,n;if(!this.pickingFBO&&(this.pickingFBO=this.device.createFramebuffer({colorAttachments:["rgba8unorm"],depthStencilAttachment:"depth16unorm"}),this.device.isTextureFormatRenderable("rgba32float"))){const i=this.device.createFramebuffer({colorAttachments:["rgba32float"],depthStencilAttachment:"depth16unorm"});this.depthFBO=i}const{canvas:e}=this.device.getCanvasContext();(r=this.pickingFBO)==null||r.resize({width:e.width,height:e.height}),(n=this.depthFBO)==null||n.resize({width:e.width,height:e.height})}_getPickable(e){if(this._pickable===!1)return null;const r=e.filter(n=>this.pickLayersPass.shouldDrawLayer(n)&&!n.isComposite);return r.length?r:null}_pickClosestObject({layers:e,views:r,viewports:n,x:i,y:o,radius:f=0,depth:p=1,mode:y="query",unproject3D:T,onViewportActive:R,effects:x}){const M=this.device.canvasContext.cssToDeviceRatio(),U=this._getPickable(e);if(!U||n.length===0)return{result:[],emptyInfo:Ly({viewports:n,x:i,y:o,pixelRatio:M})};this._resizeBuffer();const W=this.device.canvasContext.cssToDevicePixels([i,o],!0),j=[W.x+Math.floor(W.width/2),W.y+Math.floor(W.height/2)],G=Math.round(f*M),{width:re,height:se}=this.pickingFBO,ce=this._getPickingRect({deviceX:j[0],deviceY:j[1],deviceRadius:G,deviceWidth:re,deviceHeight:se}),we={x:i-f,y:o-f,width:f*2+1,height:f*2+1};let be;const Pe=[],Xe=new Set;for(let nt=0;nt<p;nt++){let Ue;if(ce){const it=this._drawAndSample({layers:U,views:r,viewports:n,onViewportActive:R,deviceRect:ce,cullRect:we,effects:x,pass:`picking:${y}`});Ue=L4({...it,deviceX:j[0],deviceY:j[1],deviceRadius:G,deviceRect:ce})}else Ue={pickedColor:null,pickedObjectIndex:-1};let Je;if(Ue.pickedLayer&&T&&this.depthFBO){const{pickedColors:it}=this._drawAndSample({layers:[Ue.pickedLayer],views:r,viewports:n,onViewportActive:R,deviceRect:{x:Ue.pickedX,y:Ue.pickedY,width:1,height:1},cullRect:we,effects:x,pass:`picking:${y}:z`},!0);it[3]&&(Je=it[0])}Ue.pickedLayer&&nt+1<p&&(Xe.add(Ue.pickedLayer),Ue.pickedLayer.disablePickingIndex(Ue.pickedObjectIndex)),be=B4({pickInfo:Ue,lastPickedInfo:this.lastPickedInfo,mode:y,layers:U,viewports:n,x:i,y:o,z:Je,pixelRatio:M});for(const it of be.values())it.layer&&Pe.push(it);if(!Ue.pickedColor)break}for(const nt of Xe)nt.restorePickingColors();return{result:Pe,emptyInfo:be.get(null)}}_pickVisibleObjects({layers:e,views:r,viewports:n,x:i,y:o,width:f=1,height:p=1,mode:y="query",maxObjects:T=null,onViewportActive:R,effects:x}){const M=this._getPickable(e);if(!M||n.length===0)return[];this._resizeBuffer();const U=this.device.canvasContext.cssToDeviceRatio(),W=this.device.canvasContext.cssToDevicePixels([i,o],!0),j=W.x,G=W.y+W.height,re=this.device.canvasContext.cssToDevicePixels([i+f,o+p],!0),se=re.x+re.width,ce=re.y,we={x:j,y:ce,width:se-j,height:G-ce},be=this._drawAndSample({layers:M,views:r,viewports:n,onViewportActive:R,deviceRect:we,cullRect:{x:i,y:o,width:f,height:p},effects:x,pass:`picking:${y}`}),Pe=U4(be),Xe=new Map,nt=[],Ue=Number.isFinite(T);for(let Je=0;Je<Pe.length&&!(Ue&&nt.length>=T);Je++){const it=Pe[Je];let mt={color:it.pickedColor,layer:null,index:it.pickedObjectIndex,picked:!0,x:i,y:o,pixelRatio:U};mt=Uy({layer:it.pickedLayer,info:mt,mode:y});const _t=mt.layer.id;Xe.has(_t)||Xe.set(_t,new Set);const ct=Xe.get(_t),Vt=mt.object??mt.index;ct.has(Vt)||(ct.add(Vt),nt.push(mt))}return nt}_drawAndSample({layers:e,views:r,viewports:n,onViewportActive:i,deviceRect:o,cullRect:f,effects:p,pass:y},T=!1){const R=T?this.depthFBO:this.pickingFBO,x={layers:e,layerFilter:this.layerFilter,views:r,viewports:n,onViewportActive:i,pickingFBO:R,deviceRect:o,cullRect:f,effects:p,pass:y,pickZ:T,preRenderStats:{}};for(const se of p)se.useInPicking&&(x.preRenderStats[se.id]=se.preRender(x));const{decodePickingColor:M}=this.pickLayersPass.render(x),{x:U,y:W,width:j,height:G}=o,re=new(T?Float32Array:Uint8Array)(j*G*4);return this.device.readPixelsToArrayWebGL(R,{sourceX:U,sourceY:W,sourceWidth:j,sourceHeight:G,target:re}),{pickedColors:re,decodePickingColor:M}}_getPickingRect({deviceX:e,deviceY:r,deviceRadius:n,deviceWidth:i,deviceHeight:o}){const f=Math.max(0,e-n),p=Math.max(0,r-n),y=Math.min(i,e+n+1)-f,T=Math.min(o,r+n+1)-p;return y<=0||T<=0?null:{x:f,y:p,width:y,height:T}}}const H4={"top-left":{top:0,left:0},"top-right":{top:0,right:0},"bottom-left":{bottom:0,left:0},"bottom-right":{bottom:0,right:0},fill:{top:0,left:0,bottom:0,right:0}},j4="top-left",z2="__root";class W4{constructor({deck:e,parentElement:r}){this.defaultWidgets=[],this.widgets=[],this.resolvedWidgets=[],this.containers={},this.lastViewports={},this.deck=e,this.parentElement=r}getWidgets(){return this.resolvedWidgets}setProps(e){e.widgets&&!fi(e.widgets,this.widgets,1)&&this._setWidgets(e.widgets)}finalize(){for(const e of this.getWidgets())this._remove(e);this.defaultWidgets.length=0,this.resolvedWidgets.length=0;for(const e in this.containers)this.containers[e].remove()}addDefault(e){this.defaultWidgets.find(r=>r.id===e.id)||(this._add(e),this.defaultWidgets.push(e),this._setWidgets(this.widgets))}_setWidgets(e){const r={};for(const n of this.resolvedWidgets)r[n.id]=n;this.resolvedWidgets.length=0;for(const n of this.defaultWidgets)r[n.id]=null,this.resolvedWidgets.push(n);for(let n of e){const i=r[n.id];i?i.viewId!==n.viewId||i.placement!==n.placement?(this._remove(i),this._add(n)):n!==i&&(i.setProps(n.props),n=i):this._add(n),r[n.id]=null,this.resolvedWidgets.push(n)}for(const n in r){const i=r[n];i&&this._remove(i)}this.widgets=e}_add(e){const{viewId:r=null,placement:n=j4}=e,i=e.onAdd({deck:this.deck,viewId:r});i&&this._getContainer(r,n).append(i),e._element=i}_remove(e){e.onRemove(),e._element&&e._element.remove(),e._element=void 0}_getContainer(e,r){var f;const n=e||z2;let i=this.containers[n];i||(i=document.createElement("div"),i.style.pointerEvents="none",i.style.position="absolute",i.style.overflow="hidden",(f=this.parentElement)==null||f.append(i),this.containers[n]=i);let o=i.querySelector(`.${r}`);return o||(o=document.createElement("div"),o.className=r,o.style.position="absolute",o.style.zIndex="2",Object.assign(o.style,H4[r]),i.append(o)),o}_updateContainers(){const e=this.deck.width,r=this.deck.height;for(const n in this.containers){const i=this.lastViewports[n]||null,o=n===z2||i,f=this.containers[n];o?(f.style.display="block",f.style.left=`${i?i.x:0}px`,f.style.top=`${i?i.y:0}px`,f.style.width=`${i?i.width:e}px`,f.style.height=`${i?i.height:r}px`):f.style.display="none"}}onRedraw({viewports:e,layers:r}){var o,f;const n=e.reduce((p,y)=>(p[y.id]=y,p),{}),{lastViewports:i}=this;for(const p of this.getWidgets()){const{viewId:y}=p;if(y){const T=n[y];T&&(p.onViewportChange&&!T.equals(i[y])&&p.onViewportChange(T),(o=p.onRedraw)==null||o.call(p,{viewports:[T],layers:r}))}else{if(p.onViewportChange)for(const T of e)T.equals(i[T.id])||p.onViewportChange(T);(f=p.onRedraw)==null||f.call(p,{viewports:e,layers:r})}}this.lastViewports=n,this._updateContainers()}onHover(e,r){var n,i;for(const o of this.getWidgets()){const{viewId:f}=o;(!f||f===((n=e.viewport)==null?void 0:n.id))&&((i=o.onHover)==null||i.call(o,e,r))}}onEvent(e,r){var i,o;const n=bd[r.type];if(n)for(const f of this.getWidgets()){const{viewId:p}=f;(!p||p===((i=e.viewport)==null?void 0:i.id))&&((o=f[n.handler])==null||o.call(f,e,r))}}}const X4={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class $4{constructor(){this.id="default-tooltip",this.placement="fill",this.props={},this.isVisible=!1}onAdd({deck:e}){const r=document.createElement("div");return r.className="deck-tooltip",Object.assign(r.style,X4),this.deck=e,this.element=r,r}onRemove(){this.deck=void 0,this.element=void 0}setProps(){}onViewportChange(e){var r;this.isVisible&&e.id===((r=this.lastViewport)==null?void 0:r.id)&&e!==this.lastViewport&&this.setTooltip(null)}onHover(e){const{deck:r}=this,n=r&&r.props.getTooltip;if(!n)return;const i=n(e);this.lastViewport=e.viewport,this.setTooltip(i,e.x,e.y)}setTooltip(e,r,n){const i=this.element;if(i){if(typeof e=="string")i.innerText=e;else if(e)e.text&&(i.innerText=e.text),e.html&&(i.innerHTML=e.html),e.className&&(i.className=e.className);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform=`translate(${r}px, ${n}px)`,e&&typeof e=="object"&&"style"in e&&Object.assign(i.style,e.style)}}}var Ja;(function(t){t[t.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",t[t.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",t[t.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",t[t.FUNC_ADD=32774]="FUNC_ADD",t[t.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",t[t.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",t[t.BLEND_EQUATION=32777]="BLEND_EQUATION",t[t.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",t[t.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",t[t.BLEND_DST_RGB=32968]="BLEND_DST_RGB",t[t.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",t[t.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",t[t.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",t[t.BLEND_COLOR=32773]="BLEND_COLOR",t[t.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",t[t.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",t[t.LINE_WIDTH=2849]="LINE_WIDTH",t[t.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",t[t.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",t[t.CULL_FACE_MODE=2885]="CULL_FACE_MODE",t[t.FRONT_FACE=2886]="FRONT_FACE",t[t.DEPTH_RANGE=2928]="DEPTH_RANGE",t[t.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",t[t.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",t[t.DEPTH_FUNC=2932]="DEPTH_FUNC",t[t.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",t[t.STENCIL_FUNC=2962]="STENCIL_FUNC",t[t.STENCIL_FAIL=2964]="STENCIL_FAIL",t[t.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",t[t.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",t[t.STENCIL_REF=2967]="STENCIL_REF",t[t.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",t[t.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",t[t.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",t[t.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",t[t.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",t[t.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",t[t.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",t[t.VIEWPORT=2978]="VIEWPORT",t[t.SCISSOR_BOX=3088]="SCISSOR_BOX",t[t.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",t[t.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",t[t.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",t[t.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",t[t.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",t[t.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",t[t.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",t[t.RED_BITS=3410]="RED_BITS",t[t.GREEN_BITS=3411]="GREEN_BITS",t[t.BLUE_BITS=3412]="BLUE_BITS",t[t.ALPHA_BITS=3413]="ALPHA_BITS",t[t.DEPTH_BITS=3414]="DEPTH_BITS",t[t.STENCIL_BITS=3415]="STENCIL_BITS",t[t.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",t[t.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",t[t.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",t[t.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",t[t.SAMPLES=32937]="SAMPLES",t[t.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",t[t.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",t[t.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",t[t.VENDOR=7936]="VENDOR",t[t.RENDERER=7937]="RENDERER",t[t.VERSION=7938]="VERSION",t[t.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",t[t.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",t[t.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.BUFFER_SIZE=34660]="BUFFER_SIZE",t[t.BUFFER_USAGE=34661]="BUFFER_USAGE",t[t.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",t[t.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",t[t.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",t[t.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",t[t.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",t[t.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",t[t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",t[t.CULL_FACE=2884]="CULL_FACE",t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK",t[t.BLEND=3042]="BLEND",t[t.DEPTH_TEST=2929]="DEPTH_TEST",t[t.DITHER=3024]="DITHER",t[t.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",t[t.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",t[t.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",t[t.SCISSOR_TEST=3089]="SCISSOR_TEST",t[t.STENCIL_TEST=2960]="STENCIL_TEST",t[t.NO_ERROR=0]="NO_ERROR",t[t.INVALID_ENUM=1280]="INVALID_ENUM",t[t.INVALID_VALUE=1281]="INVALID_VALUE",t[t.INVALID_OPERATION=1282]="INVALID_OPERATION",t[t.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",t[t.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",t[t.CW=2304]="CW",t[t.CCW=2305]="CCW",t[t.DONT_CARE=4352]="DONT_CARE",t[t.FASTEST=4353]="FASTEST",t[t.NICEST=4354]="NICEST",t[t.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.DOUBLE=5130]="DOUBLE",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER",t[t.COMPILE_STATUS=35713]="COMPILE_STATUS",t[t.DELETE_STATUS=35712]="DELETE_STATUS",t[t.LINK_STATUS=35714]="LINK_STATUS",t[t.VALIDATE_STATUS=35715]="VALIDATE_STATUS",t[t.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",t[t.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",t[t.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",t[t.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",t[t.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",t[t.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",t[t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",t[t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",t[t.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",t[t.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",t[t.SHADER_TYPE=35663]="SHADER_TYPE",t[t.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",t[t.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP",t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",t[t.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",t[t.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",t[t.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",t[t.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE=5890]="TEXTURE",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",t[t.TEXTURE0=33984]="TEXTURE0",t[t.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",t[t.REPEAT=10497]="REPEAT",t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t[t.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",t[t.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.LOW_FLOAT=36336]="LOW_FLOAT",t[t.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",t[t.HIGH_FLOAT=36338]="HIGH_FLOAT",t[t.LOW_INT=36339]="LOW_INT",t[t.MEDIUM_INT=36340]="MEDIUM_INT",t[t.HIGH_INT=36341]="HIGH_INT",t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.RENDERBUFFER=36161]="RENDERBUFFER",t[t.RGBA4=32854]="RGBA4",t[t.RGB5_A1=32855]="RGB5_A1",t[t.RGB565=36194]="RGB565",t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.STENCIL_INDEX=6401]="STENCIL_INDEX",t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",t[t.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",t[t.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",t[t.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",t[t.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",t[t.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",t[t.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",t[t.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",t[t.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",t[t.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",t[t.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",t[t.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",t[t.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",t[t.NONE=0]="NONE",t[t.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",t[t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",t[t.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",t[t.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",t[t.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",t[t.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",t[t.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",t[t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",t[t.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",t[t.READ_BUFFER=3074]="READ_BUFFER",t[t.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",t[t.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",t[t.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",t[t.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",t[t.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",t[t.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",t[t.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",t[t.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",t[t.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",t[t.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",t[t.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",t[t.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",t[t.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",t[t.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",t[t.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",t[t.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",t[t.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",t[t.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",t[t.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",t[t.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",t[t.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",t[t.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",t[t.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",t[t.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",t[t.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",t[t.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",t[t.RED=6403]="RED",t[t.RGB8=32849]="RGB8",t[t.RGBA8=32856]="RGBA8",t[t.RGB10_A2=32857]="RGB10_A2",t[t.TEXTURE_3D=32879]="TEXTURE_3D",t[t.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",t[t.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",t[t.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",t[t.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",t[t.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",t[t.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",t[t.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",t[t.SRGB=35904]="SRGB",t[t.SRGB8=35905]="SRGB8",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",t[t.RGBA32F=34836]="RGBA32F",t[t.RGB32F=34837]="RGB32F",t[t.RGBA16F=34842]="RGBA16F",t[t.RGB16F=34843]="RGB16F",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",t[t.R11F_G11F_B10F=35898]="R11F_G11F_B10F",t[t.RGB9_E5=35901]="RGB9_E5",t[t.RGBA32UI=36208]="RGBA32UI",t[t.RGB32UI=36209]="RGB32UI",t[t.RGBA16UI=36214]="RGBA16UI",t[t.RGB16UI=36215]="RGB16UI",t[t.RGBA8UI=36220]="RGBA8UI",t[t.RGB8UI=36221]="RGB8UI",t[t.RGBA32I=36226]="RGBA32I",t[t.RGB32I=36227]="RGB32I",t[t.RGBA16I=36232]="RGBA16I",t[t.RGB16I=36233]="RGB16I",t[t.RGBA8I=36238]="RGBA8I",t[t.RGB8I=36239]="RGB8I",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.R8=33321]="R8",t[t.RG8=33323]="RG8",t[t.R16F=33325]="R16F",t[t.R32F=33326]="R32F",t[t.RG16F=33327]="RG16F",t[t.RG32F=33328]="RG32F",t[t.R8I=33329]="R8I",t[t.R8UI=33330]="R8UI",t[t.R16I=33331]="R16I",t[t.R16UI=33332]="R16UI",t[t.R32I=33333]="R32I",t[t.R32UI=33334]="R32UI",t[t.RG8I=33335]="RG8I",t[t.RG8UI=33336]="RG8UI",t[t.RG16I=33337]="RG16I",t[t.RG16UI=33338]="RG16UI",t[t.RG32I=33339]="RG32I",t[t.RG32UI=33340]="RG32UI",t[t.R8_SNORM=36756]="R8_SNORM",t[t.RG8_SNORM=36757]="RG8_SNORM",t[t.RGB8_SNORM=36758]="RGB8_SNORM",t[t.RGBA8_SNORM=36759]="RGBA8_SNORM",t[t.RGB10_A2UI=36975]="RGB10_A2UI",t[t.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",t[t.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.HALF_FLOAT=5131]="HALF_FLOAT",t[t.RG=33319]="RG",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",t[t.CURRENT_QUERY=34917]="CURRENT_QUERY",t[t.QUERY_RESULT=34918]="QUERY_RESULT",t[t.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",t[t.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",t[t.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",t[t.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",t[t.DRAW_BUFFER0=34853]="DRAW_BUFFER0",t[t.DRAW_BUFFER1=34854]="DRAW_BUFFER1",t[t.DRAW_BUFFER2=34855]="DRAW_BUFFER2",t[t.DRAW_BUFFER3=34856]="DRAW_BUFFER3",t[t.DRAW_BUFFER4=34857]="DRAW_BUFFER4",t[t.DRAW_BUFFER5=34858]="DRAW_BUFFER5",t[t.DRAW_BUFFER6=34859]="DRAW_BUFFER6",t[t.DRAW_BUFFER7=34860]="DRAW_BUFFER7",t[t.DRAW_BUFFER8=34861]="DRAW_BUFFER8",t[t.DRAW_BUFFER9=34862]="DRAW_BUFFER9",t[t.DRAW_BUFFER10=34863]="DRAW_BUFFER10",t[t.DRAW_BUFFER11=34864]="DRAW_BUFFER11",t[t.DRAW_BUFFER12=34865]="DRAW_BUFFER12",t[t.DRAW_BUFFER13=34866]="DRAW_BUFFER13",t[t.DRAW_BUFFER14=34867]="DRAW_BUFFER14",t[t.DRAW_BUFFER15=34868]="DRAW_BUFFER15",t[t.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",t[t.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",t[t.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",t[t.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",t[t.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",t[t.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",t[t.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",t[t.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",t[t.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",t[t.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",t[t.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",t[t.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",t[t.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",t[t.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",t[t.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",t[t.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",t[t.SAMPLER_3D=35679]="SAMPLER_3D",t[t.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",t[t.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",t[t.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",t[t.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",t[t.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",t[t.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",t[t.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",t[t.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",t[t.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",t[t.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",t[t.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",t[t.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",t[t.MAX_SAMPLES=36183]="MAX_SAMPLES",t[t.SAMPLER_BINDING=35097]="SAMPLER_BINDING",t[t.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",t[t.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",t[t.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",t[t.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",t[t.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",t[t.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",t[t.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",t[t.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",t[t.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",t[t.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",t[t.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",t[t.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",t[t.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",t[t.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",t[t.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",t[t.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",t[t.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",t[t.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",t[t.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",t[t.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",t[t.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",t[t.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",t[t.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",t[t.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",t[t.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",t[t.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",t[t.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",t[t.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",t[t.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",t[t.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",t[t.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",t[t.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",t[t.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",t[t.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",t[t.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",t[t.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",t[t.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",t[t.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",t[t.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",t[t.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",t[t.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",t[t.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",t[t.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t[t.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",t[t.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",t[t.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",t[t.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",t[t.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",t[t.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",t[t.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",t[t.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",t[t.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",t[t.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",t[t.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",t[t.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",t[t.UNIFORM_TYPE=35383]="UNIFORM_TYPE",t[t.UNIFORM_SIZE=35384]="UNIFORM_SIZE",t[t.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",t[t.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",t[t.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",t[t.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",t[t.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",t[t.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",t[t.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",t[t.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",t[t.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",t[t.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",t[t.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",t[t.OBJECT_TYPE=37138]="OBJECT_TYPE",t[t.SYNC_CONDITION=37139]="SYNC_CONDITION",t[t.SYNC_STATUS=37140]="SYNC_STATUS",t[t.SYNC_FLAGS=37141]="SYNC_FLAGS",t[t.SYNC_FENCE=37142]="SYNC_FENCE",t[t.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",t[t.UNSIGNALED=37144]="UNSIGNALED",t[t.SIGNALED=37145]="SIGNALED",t[t.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",t[t.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",t[t.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",t[t.WAIT_FAILED=37149]="WAIT_FAILED",t[t.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",t[t.COLOR=6144]="COLOR",t[t.DEPTH=6145]="DEPTH",t[t.STENCIL=6146]="STENCIL",t[t.MIN=32775]="MIN",t[t.MAX=32776]="MAX",t[t.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",t[t.STREAM_READ=35041]="STREAM_READ",t[t.STREAM_COPY=35042]="STREAM_COPY",t[t.STATIC_READ=35045]="STATIC_READ",t[t.STATIC_COPY=35046]="STATIC_COPY",t[t.DYNAMIC_READ=35049]="DYNAMIC_READ",t[t.DYNAMIC_COPY=35050]="DYNAMIC_COPY",t[t.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",t[t.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",t[t.INVALID_INDEX=4294967295]="INVALID_INDEX",t[t.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",t[t.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",t[t.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",t[t.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",t[t.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",t[t.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",t[t.R16_EXT=33322]="R16_EXT",t[t.RG16_EXT=33324]="RG16_EXT",t[t.RGB16_EXT=32852]="RGB16_EXT",t[t.RGBA16_EXT=32859]="RGBA16_EXT",t[t.R16_SNORM_EXT=36760]="R16_SNORM_EXT",t[t.RG16_SNORM_EXT=36761]="RG16_SNORM_EXT",t[t.RGB16_SNORM_EXT=36762]="RGB16_SNORM_EXT",t[t.RGBA16_SNORM_EXT=36763]="RGBA16_SNORM_EXT",t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",t[t.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",t[t.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",t[t.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",t[t.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",t[t.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",t[t.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",t[t.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",t[t.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",t[t.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",t[t.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",t[t.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",t[t.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",t[t.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",t[t.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",t[t.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT",t[t.COMPLETION_STATUS_KHR=37297]="COMPLETION_STATUS_KHR",t[t.DEPTH_CLAMP_EXT=34383]="DEPTH_CLAMP_EXT",t[t.FIRST_VERTEX_CONVENTION_WEBGL=36429]="FIRST_VERTEX_CONVENTION_WEBGL",t[t.LAST_VERTEX_CONVENTION_WEBGL=36430]="LAST_VERTEX_CONVENTION_WEBGL",t[t.PROVOKING_VERTEX_WEBL=36431]="PROVOKING_VERTEX_WEBL",t[t.POLYGON_MODE_WEBGL=2880]="POLYGON_MODE_WEBGL",t[t.POLYGON_OFFSET_LINE_WEBGL=10754]="POLYGON_OFFSET_LINE_WEBGL",t[t.LINE_WEBGL=6913]="LINE_WEBGL",t[t.FILL_WEBGL=6914]="FILL_WEBGL",t[t.MAX_CLIP_DISTANCES_WEBGL=3378]="MAX_CLIP_DISTANCES_WEBGL",t[t.MAX_CULL_DISTANCES_WEBGL=33529]="MAX_CULL_DISTANCES_WEBGL",t[t.MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL=33530]="MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL",t[t.CLIP_DISTANCE0_WEBGL=12288]="CLIP_DISTANCE0_WEBGL",t[t.CLIP_DISTANCE1_WEBGL=12289]="CLIP_DISTANCE1_WEBGL",t[t.CLIP_DISTANCE2_WEBGL=12290]="CLIP_DISTANCE2_WEBGL",t[t.CLIP_DISTANCE3_WEBGL=12291]="CLIP_DISTANCE3_WEBGL",t[t.CLIP_DISTANCE4_WEBGL=12292]="CLIP_DISTANCE4_WEBGL",t[t.CLIP_DISTANCE5_WEBGL=12293]="CLIP_DISTANCE5_WEBGL",t[t.CLIP_DISTANCE6_WEBGL=12294]="CLIP_DISTANCE6_WEBGL",t[t.CLIP_DISTANCE7_WEBGL=12295]="CLIP_DISTANCE7_WEBGL",t[t.POLYGON_OFFSET_CLAMP_EXT=36379]="POLYGON_OFFSET_CLAMP_EXT",t[t.LOWER_LEFT_EXT=36001]="LOWER_LEFT_EXT",t[t.UPPER_LEFT_EXT=36002]="UPPER_LEFT_EXT",t[t.NEGATIVE_ONE_TO_ONE_EXT=37726]="NEGATIVE_ONE_TO_ONE_EXT",t[t.ZERO_TO_ONE_EXT=37727]="ZERO_TO_ONE_EXT",t[t.CLIP_ORIGIN_EXT=37724]="CLIP_ORIGIN_EXT",t[t.CLIP_DEPTH_MODE_EXT=37725]="CLIP_DEPTH_MODE_EXT",t[t.SRC1_COLOR_WEBGL=35065]="SRC1_COLOR_WEBGL",t[t.SRC1_ALPHA_WEBGL=34185]="SRC1_ALPHA_WEBGL",t[t.ONE_MINUS_SRC1_COLOR_WEBGL=35066]="ONE_MINUS_SRC1_COLOR_WEBGL",t[t.ONE_MINUS_SRC1_ALPHA_WEBGL=35067]="ONE_MINUS_SRC1_ALPHA_WEBGL",t[t.MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL=35068]="MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL",t[t.MIRROR_CLAMP_TO_EDGE_EXT=34627]="MIRROR_CLAMP_TO_EDGE_EXT"})(Ja||(Ja={}));const Eg={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,35725:null,36006:null,36007:null,34229:null,34964:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32926:!1,32928:!1,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],36389:null,36662:null,36663:null,35053:null,35055:null,35723:4352,36010:null,35977:!1,3333:4,3317:4,37440:!1,37441:!1,37443:37444,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},kr=(t,e,r)=>e?t.enable(r):t.disable(r),H2=(t,e,r)=>t.hint(r,e),xn=(t,e,r)=>t.pixelStorei(r,e),j2=(t,e,r)=>{const n=r===36006?36009:36008;return t.bindFramebuffer(n,e)},wl=(t,e,r)=>{const i={34964:34962,36662:36662,36663:36663,35053:35051,35055:35052}[r];t.bindBuffer(i,e)};function Uh(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}const Q4={3042:kr,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:kr,2885:(t,e)=>t.cullFace(e),2929:kr,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:kr,35723:H2,35725:(t,e)=>t.useProgram(e),36007:(t,e)=>t.bindRenderbuffer(36161,e),36389:(t,e)=>{var r;return(r=t.bindTransformFeedback)==null?void 0:r.call(t,36386,e)},34229:(t,e)=>t.bindVertexArray(e),36006:j2,36010:j2,34964:wl,36662:wl,36663:wl,35053:wl,35055:wl,2886:(t,e)=>t.frontFace(e),33170:H2,2849:(t,e)=>t.lineWidth(e),32823:kr,32824:"polygonOffset",10752:"polygonOffset",35977:kr,32926:kr,32928:kr,32938:"sampleCoverage",32939:"sampleCoverage",3089:kr,3088:(t,e)=>t.scissor(...e),2960:kr,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),34383:kr,10754:kr,12288:kr,12289:kr,12290:kr,12291:kr,12292:kr,12293:kr,12294:kr,12295:kr,3333:xn,3317:xn,37440:xn,37441:xn,37443:xn,3330:xn,3332:xn,3331:xn,3314:xn,32878:xn,3316:xn,3315:xn,32877:xn,framebuffer:(t,e)=>{const r=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,r)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{const r=typeof e=="number"?[e,e]:e;t.blendEquationSeparate(...r)},blendFunc:(t,e)=>{const r=(e==null?void 0:e.length)===2?[...e,...e]:e;t.blendFuncSeparate(...r)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=Uh(e)?e:[e,e];const[r,n]=e;t.stencilMaskSeparate(1028,r),t.stencilMaskSeparate(1029,n)},stencilFunc:(t,e)=>{e=Uh(e)&&e.length===3?[...e,...e]:e;const[r,n,i,o,f,p]=e;t.stencilFuncSeparate(1028,r,n,i),t.stencilFuncSeparate(1029,o,f,p)},stencilOp:(t,e)=>{e=Uh(e)&&e.length===3?[...e,...e]:e;const[r,n,i,o,f,p]=e;t.stencilOpSeparate(1028,r,n,i),t.stencilOpSeparate(1029,o,f,p)},viewport:(t,e)=>t.viewport(...e)};function vr(t,e,r){return e[t]!==void 0?e[t]:r[t]}const Y4={blendEquation:(t,e,r)=>t.blendEquationSeparate(vr(32777,e,r),vr(34877,e,r)),blendFunc:(t,e,r)=>t.blendFuncSeparate(vr(32969,e,r),vr(32968,e,r),vr(32971,e,r),vr(32970,e,r)),polygonOffset:(t,e,r)=>t.polygonOffset(vr(32824,e,r),vr(10752,e,r)),sampleCoverage:(t,e,r)=>t.sampleCoverage(vr(32938,e,r),vr(32939,e,r)),stencilFuncFront:(t,e,r)=>t.stencilFuncSeparate(1028,vr(2962,e,r),vr(2967,e,r),vr(2963,e,r)),stencilFuncBack:(t,e,r)=>t.stencilFuncSeparate(1029,vr(34816,e,r),vr(36003,e,r),vr(36004,e,r)),stencilOpFront:(t,e,r)=>t.stencilOpSeparate(1028,vr(2964,e,r),vr(2965,e,r),vr(2966,e,r)),stencilOpBack:(t,e,r)=>t.stencilOpSeparate(1029,vr(34817,e,r),vr(34818,e,r),vr(34819,e,r))},W2={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,r)=>t({[e]:r}),hint:(t,e,r)=>t({[e]:r}),useProgram:(t,e)=>t({35725:e}),bindRenderbuffer:(t,e,r)=>t({36007:r}),bindTransformFeedback:(t,e,r)=>t({36389:r}),bindVertexArray:(t,e)=>t({34229:e}),bindFramebuffer:(t,e,r)=>{switch(e){case 36160:return t({36006:r,36010:r});case 36009:return t({36006:r});case 36008:return t({36010:r});default:return null}},bindBuffer:(t,e,r)=>{const n={34962:[34964],36662:[36662],36663:[36663],35051:[35053],35052:[35055]}[e];return n?t({[n]:r}):{valueChanged:!0}},blendColor:(t,e,r,n,i)=>t({32773:new Float32Array([e,r,n,i])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,r)=>t({32777:e,34877:r}),blendFunc:(t,e,r)=>t({32969:e,32968:r,32971:e,32970:r}),blendFuncSeparate:(t,e,r,n,i)=>t({32969:e,32968:r,32971:n,32970:i}),clearColor:(t,e,r,n,i)=>t({3106:new Float32Array([e,r,n,i])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,r,n,i)=>t({3107:[e,r,n,i]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,r)=>t({2928:new Float32Array([e,r])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,r)=>t({32824:e,10752:r}),sampleCoverage:(t,e,r)=>t({32938:e,32939:r}),scissor:(t,e,r,n,i)=>t({3088:new Int32Array([e,r,n,i])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,r)=>t({[e===1028?2968:36005]:r}),stencilFunc:(t,e,r,n)=>t({2962:e,2967:r,2963:n,34816:e,36003:r,36004:n}),stencilFuncSeparate:(t,e,r,n,i)=>t({[e===1028?2962:34816]:r,[e===1028?2967:36003]:n,[e===1028?2963:36004]:i}),stencilOp:(t,e,r,n)=>t({2964:e,2965:r,2966:n,34817:e,34818:r,34819:n}),stencilOpSeparate:(t,e,r,n,i)=>t({[e===1028?2964:34817]:r,[e===1028?2965:34818]:n,[e===1028?2966:34819]:i}),viewport:(t,e,r,n,i)=>t({2978:[e,r,n,i]})},Ni=(t,e)=>t.isEnabled(e),X2={3042:Ni,2884:Ni,2929:Ni,3024:Ni,32823:Ni,32926:Ni,32928:Ni,3089:Ni,2960:Ni,35977:Ni},K4=new Set([34016,36388,36387,35983,35368,34965,35739,35738,3074,34853,34854,34855,34856,34857,34858,34859,34860,34861,34862,34863,34864,34865,34866,34867,34868,35097,32873,35869,32874,34068]);function EA(t,e){if(q4(e))return;const r={};for(const i in e){const o=Number(i),f=Q4[i];f&&(typeof f=="string"?r[f]=!0:f(t,e[i],o))}const n=t.state&&t.state.cache;if(n)for(const i in r){const o=Y4[i];o(t,e,n)}}function By(t,e=Eg){if(typeof e=="number"){const i=e,o=X2[i];return o?o(t,i):t.getParameter(i)}const r=Array.isArray(e)?e:Object.keys(e),n={};for(const i of r){const o=X2[i];n[i]=o?o(t,Number(i)):t.getParameter(Number(i))}return n}function Z4(t){EA(t,Eg)}function q4(t){for(const e in t)return!1;return!0}function G4(t,e){if(t===e)return!0;const r=Array.isArray(t)||ArrayBuffer.isView(t),n=Array.isArray(e)||ArrayBuffer.isView(e);if(r&&n&&t.length===e.length){for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return!1}class J4{constructor(e,{copyState:r=!1,log:n=()=>{}}={}){F(this,"gl");F(this,"program",null);F(this,"stateStack",[]);F(this,"enable",!0);F(this,"cache");F(this,"log");this.gl=e,this.cache=r?By(e):Object.assign({},Eg),this.log=n,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(e={}){this.stateStack.push({})}pop(){ir(this.stateStack.length>0);const e=this.stateStack[this.stateStack.length-1];EA(this.gl,e),this.stateStack.pop()}_updateCache(e){let r=!1,n;const i=this.stateStack.length>0?this.stateStack[this.stateStack.length-1]:null;for(const o in e){ir(o!==void 0);const f=e[o],p=this.cache[o];G4(f,p)||(r=!0,n=p,i&&!(o in i)&&(i[o]=p),this.cache[o]=f)}return{valueChanged:r,oldValue:n}}}function ia(t){return t.state}function Vy(t,e){const{enable:r=!0,copyState:n}=e;if(ir(n!==void 0),!t.state){t.state=new J4(t,{copyState:n}),tk(t);for(const o in W2){const f=W2[o];ek(t,o,f)}$2(t,"getParameter"),$2(t,"isEnabled")}const i=ia(t);return i.enable=r,t}function Lf(t){let e=ia(t);e||(Vy(t,{copyState:!1}),e=ia(t)),e.push()}function Ql(t){const e=ia(t);ir(e),e.pop()}function $2(t,e){const r=t[e].bind(t);t[e]=function(i){if(i===void 0||K4.has(i))return r(i);const o=ia(t);return i in o.cache||(o.cache[i]=r(i)),o.enable?o.cache[i]:r(i)},Object.defineProperty(t[e],"name",{value:`${e}-from-cache`,configurable:!1})}function ek(t,e,r){if(!t[e])return;const n=t[e].bind(t);t[e]=function(...o){const f=ia(t),{valueChanged:p,oldValue:y}=r(f._updateCache,...o);return p&&n(...o),y},Object.defineProperty(t[e],"name",{value:`${e}-to-cache`,configurable:!1})}function tk(t){const e=t.useProgram.bind(t);t.useProgram=function(n){const i=ia(t);i.program!==n&&(e(n),i.program=n)}}const rk={powerPreference:"high-performance",onContextLost:()=>console.error("WebGL context lost"),onContextRestored:()=>console.info("WebGL context restored")};function nk(t,e){e={...rk,...e};let r=null;const n=o=>r=o.statusMessage||r;t.addEventListener("webglcontextcreationerror",n,!1);let i=null;if(i||(i=t.getContext("webgl2",e)),t.removeEventListener("webglcontextcreationerror",n,!1),!i)throw new Error(`Failed to create WebGL context: ${r||"Unknown error"}`);if(e.onContextLost){const{onContextLost:o}=e;t.addEventListener("webglcontextlost",f=>o(f),!1)}if(e.onContextRestored){const{onContextRestored:o}=e;t.addEventListener("webglcontextrestored",f=>o(f),!1)}return i}function qs(t,e,r){return r[e]===void 0&&(r[e]=t.getExtension(e)||null),r[e]}function ik(t,e){const r=t.getParameter(7936),n=t.getParameter(7937);qs(t,"WEBGL_debug_renderer_info",e);const i=e.WEBGL_debug_renderer_info,o=t.getParameter(i?i.UNMASKED_VENDOR_WEBGL:7936),f=t.getParameter(i?i.UNMASKED_RENDERER_WEBGL:7937),p=o||r,y=f||n,T=t.getParameter(7938),R=zy(p,y),x=sk(p,y),M=ok(p,y);return{type:"webgl",gpu:R,gpuType:M,gpuBackend:x,vendor:p,renderer:y,version:T,shadingLanguage:"glsl",shadingLanguageVersion:300}}function zy(t,e){return/NVIDIA/i.exec(t)||/NVIDIA/i.exec(e)?"nvidia":/INTEL/i.exec(t)||/INTEL/i.exec(e)?"intel":/Apple/i.exec(t)||/Apple/i.exec(e)?"apple":/AMD/i.exec(t)||/AMD/i.exec(e)||/ATI/i.exec(t)||/ATI/i.exec(e)?"amd":/SwiftShader/i.exec(t)||/SwiftShader/i.exec(e)?"software":"unknown"}function sk(t,e){return/Metal/i.exec(t)||/Metal/i.exec(e)?"metal":/ANGLE/i.exec(t)||/ANGLE/i.exec(e)?"opengl":"unknown"}function ok(t,e){if(/SwiftShader/i.exec(t)||/SwiftShader/i.exec(e))return"cpu";switch(zy(t,e)){case"intel":return"integrated";case"software":return"cpu";case"unknown":return"unknown";default:return"discrete"}}function Hy(t){switch(t){case"uint8":return 5121;case"sint8":return 5120;case"unorm8":return 5121;case"snorm8":return 5120;case"uint16":return 5123;case"sint16":return 5122;case"unorm16":return 5123;case"snorm16":return 5122;case"uint32":return 5125;case"sint32":return 5124;case"float16":return 5131;case"float32":return 5126}throw new Error(String(t))}const an="texture-compression-bc",Jt="texture-compression-astc",Oi="texture-compression-etc2",ak="texture-compression-etc1-webgl",bc="texture-compression-pvrtc-webgl",Bh="texture-compression-atc-webgl",Tl="float32-renderable-webgl",Vh="float16-renderable-webgl",Ak="rgb9e5ufloat_renderable-webgl",zh="snorm8-renderable-webgl",El="norm16-renderable-webgl",Hh="snorm16-renderable-webgl",Cc="float32-filterable",Q2="float16-filterable-webgl",xl="WEBGL_compressed_texture_s3tc",Ml="WEBGL_compressed_texture_s3tc_srgb",eA="EXT_texture_compression_rgtc",tA="EXT_texture_compression_bptc",lk="WEBGL_compressed_texture_etc",uk="WEBGL_compressed_texture_astc",ck="WEBGL_compressed_texture_etc1",fk="WEBGL_compressed_texture_pvrtc",hk="WEBGL_compressed_texture_atc",Y2="EXT_texture_norm16",K2="EXT_render_snorm",dk="EXT_color_buffer_float",Sg={"float32-renderable-webgl":["EXT_color_buffer_float"],"float16-renderable-webgl":["EXT_color_buffer_half_float"],"rgb9e5ufloat_renderable-webgl":["WEBGL_render_shared_exponent"],"snorm8-renderable-webgl":[K2],"norm16-renderable-webgl":[Y2],"snorm16-renderable-webgl":[Y2,K2],"float32-filterable":["OES_texture_float_linear"],"float16-filterable-webgl":["OES_texture_half_float_linear"],"texture-filterable-anisotropic-webgl":["EXT_texture_filter_anisotropic"],"texture-blend-float-webgl":["EXT_float_blend"],"texture-compression-bc":[xl,Ml,eA,tA],"texture-compression-bc5-webgl":[eA],"texture-compression-bc7-webgl":[tA],"texture-compression-etc2":[lk],"texture-compression-astc":[uk],"texture-compression-etc1-webgl":[ck],"texture-compression-pvrtc-webgl":[fk],"texture-compression-atc-webgl":[hk]};function gk(t){return t in Sg}function pk(t,e,r){return(Sg[e]||[]).every(i=>qs(t,i,r))}const Uf={"rgb8unorm-unsized":{gl:6407,b:4,c:2,bpp:4,dataFormat:6407,types:[5121,33635]},"rgba8unorm-unsized":{gl:6408,b:4,c:2,bpp:4,dataFormat:6408,types:[5121,32819,32820]},r8unorm:{gl:33321,b:1,c:1,rb:!0},r8snorm:{gl:36756,b:1,c:1,render:zh},r8uint:{gl:33330,b:1,c:1,rb:!0},r8sint:{gl:33329,b:1,c:1,rb:!0},rg8unorm:{gl:33323,b:2,c:2,rb:!0},rg8snorm:{gl:36757,b:2,c:2,render:zh},rg8uint:{gl:33336,b:2,c:2,rb:!0},rg8sint:{gl:33335,b:2,c:2,rb:!0},r16uint:{gl:33332,b:2,c:1,rb:!0},r16sint:{gl:33331,b:2,c:1,rb:!0},r16float:{gl:33325,b:2,c:1,render:Vh,filter:"float16-filterable-webgl",rb:!0},"r16unorm-webgl":{gl:33322,b:2,c:1,f:El,rb:!0},"r16snorm-webgl":{gl:36760,b:2,c:1,f:Hh},"rgba4unorm-webgl":{gl:32854,b:2,c:4,wgpu:!1,rb:!0},"rgb565unorm-webgl":{gl:36194,b:2,c:4,wgpu:!1,rb:!0},"rgb5a1unorm-webgl":{gl:32855,b:2,c:4,wgpu:!1,rb:!0},"rgb8unorm-webgl":{gl:32849,b:3,c:3,wgpu:!1},"rgb8snorm-webgl":{gl:36758,b:3,c:3,wgpu:!1},rgba8unorm:{gl:32856,b:4,c:2,bpp:4},"rgba8unorm-srgb":{gl:35907,b:4,c:4,bpp:4},rgba8snorm:{gl:36759,b:4,c:4,render:zh},rgba8uint:{gl:36220,b:4,c:4,bpp:4},rgba8sint:{gl:36238,b:4,c:4,bpp:4},bgra8unorm:{b:4,c:4},"bgra8unorm-srgb":{b:4,c:4},rg16uint:{gl:33338,b:4,c:1,bpp:4},rg16sint:{gl:33337,b:4,c:2,bpp:4},rg16float:{gl:33327,bpp:4,b:4,c:2,render:Vh,filter:Q2,rb:!0},"rg16unorm-webgl":{gl:33324,b:2,c:2,render:El},"rg16snorm-webgl":{gl:36761,b:2,c:2,render:Hh},r32uint:{gl:33334,b:4,c:1,bpp:4,rb:!0},r32sint:{gl:33333,b:4,c:1,bpp:4,rb:!0},r32float:{gl:33326,bpp:4,b:4,c:1,render:Tl,filter:Cc},rgb9e5ufloat:{gl:35901,b:4,c:3,p:1,render:Ak},rg11b10ufloat:{gl:35898,b:4,c:3,p:1,render:Tl,rb:!0},rgb10a2unorm:{gl:32857,b:4,c:4,p:1,rb:!0},"rgb10a2uint-webgl":{b:4,c:4,gl:36975,p:1,wgpu:!1,bpp:4,rb:!0},"rgb16unorm-webgl":{gl:32852,b:2,c:3,f:El},"rgb16snorm-webgl":{gl:36762,b:2,c:3,f:El},rg32uint:{gl:33340,b:8,c:2,rb:!0},rg32sint:{gl:33339,b:8,c:2,rb:!0},rg32float:{gl:33328,b:8,c:2,render:Tl,filter:Cc,rb:!0},rgba16uint:{gl:36214,b:8,c:4,rb:!0},rgba16sint:{gl:36232,b:8,c:4,rb:!0},rgba16float:{gl:34842,b:8,c:4,render:Vh,filter:Q2},"rgba16unorm-webgl":{gl:32859,b:2,c:4,render:El,rb:!0},"rgba16snorm-webgl":{gl:36763,b:2,c:4,render:Hh},"rgb32float-webgl":{gl:34837,render:Tl,filter:Cc,gl2ext:dk,dataFormat:6407,types:[5126]},rgba32uint:{gl:36208,b:16,c:4,rb:!0},rgba32sint:{gl:36226,b:16,c:4,rb:!0},rgba32float:{gl:34836,b:16,c:4,render:Tl,filter:Cc,rb:!0},stencil8:{gl:36168,b:1,c:1,attachment:36128,rb:!0},depth16unorm:{gl:33189,b:2,c:1,attachment:36096,dataFormat:6402,types:[5123],rb:!0},depth24plus:{gl:33190,b:3,c:1,attachment:36096,dataFormat:6402,types:[5125]},depth32float:{gl:36012,b:4,c:1,attachment:36096,dataFormat:6402,types:[5126],rb:!0},"depth24plus-stencil8":{gl:35056,b:4,c:2,p:1,attachment:33306,rb:!0,depthTexture:!0,dataFormat:34041,types:[34042]},"depth24unorm-stencil8":{gl:35056,b:4,c:2,p:1,attachment:33306,dataFormat:34041,types:[34042],rb:!0},"depth32float-stencil8":{gl:36013,b:5,c:2,p:1,attachment:33306,dataFormat:34041,types:[36269],rb:!0},"bc1-rgb-unorm-webgl":{gl:33776,x:xl,f:an},"bc1-rgb-unorm-srgb-webgl":{gl:35916,x:Ml,f:an},"bc1-rgba-unorm":{gl:33777,x:xl,f:an},"bc1-rgba-unorm-srgb":{gl:35916,x:Ml,f:an},"bc2-rgba-unorm":{gl:33778,x:xl,f:an},"bc2-rgba-unorm-srgb":{gl:35918,x:Ml,f:an},"bc3-rgba-unorm":{gl:33779,x:xl,f:an},"bc3-rgba-unorm-srgb":{gl:35919,x:Ml,f:an},"bc4-r-unorm":{gl:36283,x:eA,f:an},"bc4-r-snorm":{gl:36284,x:eA,f:an},"bc5-rg-unorm":{gl:36285,x:eA,f:an},"bc5-rg-snorm":{gl:36286,x:eA,f:an},"bc6h-rgb-ufloat":{gl:36495,x:tA,f:an},"bc6h-rgb-float":{gl:36494,x:tA,f:an},"bc7-rgba-unorm":{gl:36492,x:tA,f:an},"bc7-rgba-unorm-srgb":{gl:36493,x:tA,f:an},"etc2-rgb8unorm":{gl:37492,f:Oi},"etc2-rgb8unorm-srgb":{gl:37494,f:Oi},"etc2-rgb8a1unorm":{gl:37496,f:Oi},"etc2-rgb8a1unorm-srgb":{gl:37497,f:Oi},"etc2-rgba8unorm":{gl:37493,f:Oi},"etc2-rgba8unorm-srgb":{gl:37495,f:Oi},"eac-r11unorm":{gl:37488,f:Oi},"eac-r11snorm":{gl:37489,f:Oi},"eac-rg11unorm":{gl:37490,f:Oi},"eac-rg11snorm":{gl:37491,f:Oi},"astc-4x4-unorm":{gl:37808,f:Jt},"astc-4x4-unorm-srgb":{gl:37840,f:Jt},"astc-5x4-unorm":{gl:37809,f:Jt},"astc-5x4-unorm-srgb":{gl:37841,f:Jt},"astc-5x5-unorm":{gl:37810,f:Jt},"astc-5x5-unorm-srgb":{gl:37842,f:Jt},"astc-6x5-unorm":{gl:37811,f:Jt},"astc-6x5-unorm-srgb":{gl:37843,f:Jt},"astc-6x6-unorm":{gl:37812,f:Jt},"astc-6x6-unorm-srgb":{gl:37844,f:Jt},"astc-8x5-unorm":{gl:37813,f:Jt},"astc-8x5-unorm-srgb":{gl:37845,f:Jt},"astc-8x6-unorm":{gl:37814,f:Jt},"astc-8x6-unorm-srgb":{gl:37846,f:Jt},"astc-8x8-unorm":{gl:37815,f:Jt},"astc-8x8-unorm-srgb":{gl:37847,f:Jt},"astc-10x5-unorm":{gl:37819,f:Jt},"astc-10x5-unorm-srgb":{gl:37851,f:Jt},"astc-10x6-unorm":{gl:37817,f:Jt},"astc-10x6-unorm-srgb":{gl:37849,f:Jt},"astc-10x8-unorm":{gl:37818,f:Jt},"astc-10x8-unorm-srgb":{gl:37850,f:Jt},"astc-10x10-unorm":{gl:37819,f:Jt},"astc-10x10-unorm-srgb":{gl:37851,f:Jt},"astc-12x10-unorm":{gl:37820,f:Jt},"astc-12x10-unorm-srgb":{gl:37852,f:Jt},"astc-12x12-unorm":{gl:37821,f:Jt},"astc-12x12-unorm-srgb":{gl:37853,f:Jt},"pvrtc-rgb4unorm-webgl":{gl:35840,f:bc},"pvrtc-rgba4unorm-webgl":{gl:35842,f:bc},"pvrtc-rbg2unorm-webgl":{gl:35841,f:bc},"pvrtc-rgba2unorm-webgl":{gl:35843,f:bc},"etc1-rbg-unorm-webgl":{gl:36196,f:ak},"atc-rgb-unorm-webgl":{gl:35986,f:Bh},"atc-rgba-unorm-webgl":{gl:35986,f:Bh},"atc-rgbai-unorm-webgl":{gl:34798,f:Bh}},_k={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},mk={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};function bg(t,e,r){const n=Uf[e];if(!n||n.gl===void 0)return!1;const i=n.x||n.gl2ext;return i?!!qs(t,i,r):!0}function jy(t){const e=Uf[t],r=e==null?void 0:e.gl;if(r===void 0)throw new Error(`Unsupported texture format ${t}`);return r}function yk(t,e,r){if(!bg(t,e,r)||e.startsWith("depth")||e.startsWith("stencil"))return!1;try{if(Q1(e).signed)return!1}catch{return!1}return e.endsWith("32float")?!!qs(t,"OES_texture_float_linear, extensions",r):e.endsWith("16float")?!!qs(t,"OES_texture_half_float_linear, extensions",r):!0}function vk(t,e,r){return!(!bg(t,e,r)||typeof e=="number")}function uf(t){var i;const e=Uf[t],r=jy(t),n=Q1(t);return{format:r,dataFormat:(e==null?void 0:e.dataFormat)||Tk(n.format,n.integer,n.normalized,r),type:n.dataType?Hy(n.dataType):((i=e==null?void 0:e.types)==null?void 0:i[0])||5121,compressed:n.compressed}}function wk(t){const e=Uf[t];if(!(e!=null&&e.attachment))throw new Error(`${t} is not a depth stencil format`);return e.attachment}function Z2(t){const e=uf(t),r=_k[e.dataFormat]||4,n=mk[e.type]||1;return r*n}function Tk(t,e,r,n){if(n===6408||n===6407)return n;switch(t){case"r":return e&&!r?36244:6403;case"rg":return e&&!r?33320:33319;case"rgb":return e&&!r?36248:6407;case"rgba":return e&&!r?36249:6408;default:return 6408}}const q2={"depth-clip-control":"EXT_depth_clamp","timer-query-webgl":"EXT_disjoint_timer_query_webgl2","compilation-status-async-webgl":"KHR_parallel_shader_compile","polygon-mode-webgl":"WEBGL_polygon_mode","provoking-vertex-webgl":"WEBGL_provoking_vertex","shader-clip-cull-distance-webgl":"WEBGL_clip_cull_distance","shader-noperspective-interpolation-webgl":"NV_shader_noperspective_interpolation","shader-conservative-depth-webgl":"EXT_conservative_depth"};class Ek extends eb{constructor(r,n,i){super([],i);F(this,"gl");F(this,"extensions");F(this,"testedFeatures",new Set);this.gl=r,this.extensions=n,qs(r,"EXT_color_buffer_float",n)}*[Symbol.iterator](){const r=this.getFeatures();for(const n of r)this.has(n)&&(yield n);return[]}has(r){return this.disabledFeatures[r]?!1:(this.testedFeatures.has(r)||(this.testedFeatures.add(r),gk(r)&&pk(this.gl,r,this.extensions)&&this.features.add(r),this.getWebGLFeature(r)&&this.features.add(r)),this.features.has(r))}initializeFeatures(){const r=this.getFeatures().filter(n=>n!=="polygon-mode-webgl");for(const n of r)this.has(n)}getFeatures(){return[...Object.keys(q2),...Object.keys(Sg)]}getWebGLFeature(r){const n=q2[r];return typeof n=="string"?!!qs(this.gl,n,this.extensions):!!n}}class Sk extends JS{constructor(r){super();F(this,"gl");F(this,"limits",{});this.gl=r}get maxTextureDimension1D(){return 0}get maxTextureDimension2D(){return this.getParameter(3379)}get maxTextureDimension3D(){return this.getParameter(32883)}get maxTextureArrayLayers(){return this.getParameter(35071)}get maxBindGroups(){return 0}get maxDynamicUniformBuffersPerPipelineLayout(){return 0}get maxDynamicStorageBuffersPerPipelineLayout(){return 0}get maxSampledTexturesPerShaderStage(){return this.getParameter(35660)}get maxSamplersPerShaderStage(){return this.getParameter(35661)}get maxStorageBuffersPerShaderStage(){return 0}get maxStorageTexturesPerShaderStage(){return 0}get maxUniformBuffersPerShaderStage(){return this.getParameter(35375)}get maxUniformBufferBindingSize(){return this.getParameter(35376)}get maxStorageBufferBindingSize(){return 0}get minUniformBufferOffsetAlignment(){return this.getParameter(35380)}get minStorageBufferOffsetAlignment(){return 0}get maxVertexBuffers(){return 16}get maxVertexAttributes(){return this.getParameter(34921)}get maxVertexBufferArrayStride(){return 2048}get maxInterStageShaderComponents(){return this.getParameter(35659)}get maxComputeWorkgroupStorageSize(){return 0}get maxComputeInvocationsPerWorkgroup(){return 0}get maxComputeWorkgroupSizeX(){return 0}get maxComputeWorkgroupSizeY(){return 0}get maxComputeWorkgroupSizeZ(){return 0}get maxComputeWorkgroupsPerDimension(){return 0}getParameter(r){return this.limits[r]===void 0&&(this.limits[r]=this.gl.getParameter(r)),this.limits[r]}}function Xs(t,e,r){if(bk(e))return r(t);const{nocatch:n=!0}=e;Lf(t),EA(t,e);let i;if(n)i=r(t),Ql(t);else try{i=r(t)}finally{Ql(t)}return i}function bk(t){for(const e in t)return!1;return!0}function Ck(t,e,r,n){if(Kc(e))return n(t);const i=t;Lf(i.gl);try{return Rk(t,e),EA(i.gl,r),n(t)}finally{Ql(i.gl)}}function Rk(t,e){const r=t,{gl:n}=r;if(e.cullMode)switch(e.cullMode){case"none":n.disable(2884);break;case"front":n.enable(2884),n.cullFace(1028);break;case"back":n.enable(2884),n.cullFace(1029);break}if(e.frontFace&&n.frontFace(ea("frontFace",e.frontFace,{ccw:2305,cw:2304})),e.unclippedDepth&&t.features.has("depth-clip-control")&&n.enable(34383),e.depthBias!==void 0&&(n.enable(32823),n.polygonOffset(e.depthBias,e.depthBiasSlopeScale||0)),e.provokingVertex&&t.features.has("provoking-vertex-webgl")){const o=r.getExtension("WEBGL_provoking_vertex").WEBGL_provoking_vertex,f=ea("provokingVertex",e.provokingVertex,{first:36429,last:36430});o==null||o.provokingVertexWEBGL(f)}if((e.polygonMode||e.polygonOffsetLine)&&t.features.has("polygon-mode-webgl")){if(e.polygonMode){const o=r.getExtension("WEBGL_polygon_mode").WEBGL_polygon_mode,f=ea("polygonMode",e.polygonMode,{fill:6914,line:6913});o==null||o.polygonModeWEBGL(1028,f),o==null||o.polygonModeWEBGL(1029,f)}e.polygonOffsetLine&&n.enable(10754)}if(t.features.has("shader-clip-cull-distance-webgl")&&(e.clipDistance0&&n.enable(12288),e.clipDistance1&&n.enable(12289),e.clipDistance2&&n.enable(12290),e.clipDistance3&&n.enable(12291),e.clipDistance4&&n.enable(12292),e.clipDistance5&&n.enable(12293),e.clipDistance6&&n.enable(12294),e.clipDistance7&&n.enable(12295)),e.depthWriteEnabled!==void 0&&n.depthMask(kk("depthWriteEnabled",e.depthWriteEnabled)),e.depthCompare&&(e.depthCompare!=="always"?n.enable(2929):n.disable(2929),n.depthFunc(Nd("depthCompare",e.depthCompare))),e.stencilWriteMask){const i=e.stencilWriteMask;n.stencilMaskSeparate(1028,i),n.stencilMaskSeparate(1029,i)}if(e.stencilReadMask&&Be.warn("stencilReadMask not supported under WebGL"),e.stencilCompare){const i=e.stencilReadMask||4294967295,o=Nd("depthCompare",e.stencilCompare);e.stencilCompare!=="always"?n.enable(2960):n.disable(2960),n.stencilFuncSeparate(1028,o,0,i),n.stencilFuncSeparate(1029,o,0,i)}if(e.stencilPassOperation&&e.stencilFailOperation&&e.stencilDepthFailOperation){const i=jh("stencilPassOperation",e.stencilPassOperation),o=jh("stencilFailOperation",e.stencilFailOperation),f=jh("stencilDepthFailOperation",e.stencilDepthFailOperation);n.stencilOpSeparate(1028,o,f,i),n.stencilOpSeparate(1029,o,f,i)}if(e.blendColorOperation||e.blendAlphaOperation){n.enable(3042);const i=G2("blendColorOperation",e.blendColorOperation||"add"),o=G2("blendAlphaOperation",e.blendAlphaOperation||"add");n.blendEquationSeparate(i,o);const f=Rc("blendColorSrcFactor",e.blendColorSrcFactor||"one"),p=Rc("blendColorDstFactor",e.blendColorDstFactor||"zero"),y=Rc("blendAlphaSrcFactor",e.blendAlphaSrcFactor||"one"),T=Rc("blendAlphaDstFactor",e.blendAlphaDstFactor||"zero");n.blendFuncSeparate(f,p,y,T)}}function Nd(t,e){return ea(t,e,{never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519})}function jh(t,e){return ea(t,e,{keep:7680,zero:0,replace:7681,invert:5386,"increment-clamp":7682,"decrement-clamp":7683,"increment-wrap":34055,"decrement-wrap":34056})}function G2(t,e){return ea(t,e,{add:32774,subtract:32778,"reverse-subtract":32779,min:32775,max:32776})}function Rc(t,e){return ea(t,e,{one:1,zero:0,"src-color":768,"one-minus-src-color":769,"dst-color":774,"one-minus-dst-color":775,"src-alpha":770,"one-minus-src-alpha":771,"dst-alpha":772,"one-minus-dst-alpha":773,"src-alpha-saturated":776,"constant-color":32769,"one-minus-constant-color":32770,"constant-alpha":32771,"one-minus-constant-alpha":32772})}function Pk(t,e){return`Illegal parameter ${e} for ${t}`}function ea(t,e,r){if(!(e in r))throw new Error(Pk(t,e));return r[e]}function kk(t,e){return e}function Wy(t){const e={};return t.addressModeU&&(e[10242]=Wh(t.addressModeU)),t.addressModeV&&(e[10243]=Wh(t.addressModeV)),t.addressModeW&&(e[32882]=Wh(t.addressModeW)),t.magFilter&&(e[10240]=Xy(t.magFilter)),(t.minFilter||t.mipmapFilter)&&(e[10241]=xk(t.minFilter||"linear",t.mipmapFilter)),t.lodMinClamp!==void 0&&(e[33082]=t.lodMinClamp),t.lodMaxClamp!==void 0&&(e[33083]=t.lodMaxClamp),t.type==="comparison-sampler"&&(e[34892]=34894),t.compare&&(e[34893]=Nd("compare",t.compare)),t.maxAnisotropy&&(e[34046]=t.maxAnisotropy),e}function Wh(t){switch(t){case"clamp-to-edge":return 33071;case"repeat":return 10497;case"mirror-repeat":return 33648}}function Xy(t){switch(t){case"nearest":return 9728;case"linear":return 9729}}function xk(t,e){if(!e)return Xy(t);switch(t){case"nearest":return e==="nearest"?9984:9986;case"linear":return e==="nearest"?9985:9987}}class Ys extends Ar{constructor(r,n={}){super(r,n);F(this,"device");F(this,"gl");F(this,"handle");F(this,"glTarget");F(this,"glUsage");F(this,"glIndexType",5123);F(this,"byteLength");F(this,"bytesUsed");this.device=r,this.gl=this.device.gl;const i=typeof n=="object"?n.handle:void 0;this.handle=i||this.gl.createBuffer(),r.setSpectorMetadata(this.handle,{...this.props,data:typeof this.props.data}),this.glTarget=Mk(this.props.usage),this.glUsage=Nk(this.props.usage),this.glIndexType=this.props.indexType==="uint32"?5125:5123,n.data?this._initWithData(n.data,n.byteOffset,n.byteLength):this._initWithByteLength(n.byteLength||0)}_initWithData(r,n=0,i=r.byteLength+n){const o=this.glTarget;this.gl.bindBuffer(o,this.handle),this.gl.bufferData(o,i,this.glUsage),this.gl.bufferSubData(o,n,r),this.gl.bindBuffer(o,null),this.bytesUsed=i,this.byteLength=i,this._setDebugData(r,n,i),this.trackAllocatedMemory(i)}_initWithByteLength(r){ir(r>=0);let n=r;r===0&&(n=new Float32Array(0));const i=this.glTarget;return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,this.glUsage),this.gl.bindBuffer(i,null),this.bytesUsed=r,this.byteLength=r,this._setDebugData(null,0,r),this.trackAllocatedMemory(r),this}destroy(){!this.destroyed&&this.handle&&(this.removeStats(),this.trackDeallocatedMemory(),this.gl.deleteBuffer(this.handle),this.destroyed=!0,this.handle=null)}write(r,n=0){this.gl.bindBuffer(36663,this.handle),this.gl.bufferSubData(36663,n,r),this.gl.bindBuffer(36663,null),this._setDebugData(r,n,r.byteLength)}async readAsync(r=0,n){return this.readSyncWebGL(r,n)}readSyncWebGL(r=0,n){n=n??this.byteLength-r;const i=new Uint8Array(n),o=0;return this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,r,i,o,n),this.gl.bindBuffer(36662,null),this._setDebugData(i,r,n),i}}function Mk(t){return t&Ar.INDEX?34963:t&Ar.VERTEX?34962:t&Ar.UNIFORM?35345:34962}function Nk(t){return t&Ar.INDEX||t&Ar.VERTEX?35044:t&Ar.UNIFORM?35048:35044}class Od extends Gc{constructor(r,n){super(r,n);F(this,"device");F(this,"handle");F(this,"parameters");this.device=r,this.parameters=Wy(n),this.handle=this.handle||this.device.gl.createSampler(),this._setSamplerParameters(this.parameters)}destroy(){this.handle&&(this.device.gl.deleteSampler(this.handle),this.handle=void 0)}toString(){return`Sampler(${this.id},${JSON.stringify(this.props)})`}_setSamplerParameters(r){for(const[n,i]of Object.entries(r)){const o=Number(n);switch(o){case 33082:case 33083:this.device.gl.samplerParameterf(this.handle,o,i);break;default:this.device.gl.samplerParameteri(this.handle,o,i);break}}}}class rA extends Zc{constructor(r,n){super(r,{...Qn.defaultProps,...n});F(this,"device");F(this,"gl");F(this,"handle");F(this,"texture");this.device=r,this.gl=this.device.gl,this.handle=null,this.texture=n.texture}}const Ok={parameters:{},pixelStore:{},pixels:null,border:0,dataFormat:void 0,textureUnit:void 0,target:void 0},Vl=class Vl extends Qn{constructor(r,n){var i;super(r,{...Ok,format:"rgba8unorm",...n});F(this,"MAX_ATTRIBUTES");F(this,"device");F(this,"gl");F(this,"handle");F(this,"sampler");F(this,"view");F(this,"glFormat");F(this,"type");F(this,"dataFormat");F(this,"mipmaps");F(this,"target");F(this,"textureUnit");F(this,"loaded",!1);F(this,"_video");this.device=r,this.gl=this.device.gl,this.handle=this.props.handle||this.gl.createTexture(),this.device.setSpectorMetadata(this.handle,{...this.props,data:typeof this.props.data}),this.glFormat=6408,this.target=Dk(this.props),this.loaded=!1,typeof((i=this.props)==null?void 0:i.data)=="string"&&Object.assign(this.props,{data:zb(this.props.data)}),this.initialize(this.props),Object.seal(this)}destroy(){this.handle&&(this.gl.deleteTexture(this.handle),this.removeStats(),this.trackDeallocatedMemory("Texture"),this.destroyed=!0)}toString(){return`Texture(${this.id},${this.width}x${this.height})`}createView(r){return new rA(this.device,{...r,texture:this})}initialize(r={}){if(this.props.dimension==="cube")return this.initializeCube(r);let n=r.data;if(n instanceof Promise)return n.then(re=>this.initialize(Object.assign({},r,{pixels:re,data:re}))),this;const i=typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement;if(i&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(r)),this;const{parameters:o={}}=r,{pixels:f=null,pixelStore:p={},textureUnit:y=void 0,mipmaps:T=!0}=r;n||(n=f);let{width:R,height:x,dataFormat:M,type:U,compressed:W=!1}=r;const{depth:j=0}=r,G=jy(r.format);return{width:R,height:x,compressed:W,dataFormat:M,type:U}=this._deduceParameters({format:r.format,type:U,dataFormat:M,compressed:W,data:n,width:R,height:x}),this.width=R,this.height=x,this.glFormat=G,this.type=U,this.dataFormat=M,this.textureUnit=y,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),this.mipmaps=T,this.setImageData({data:n,width:R,height:x,depth:j,format:r.format,type:U,dataFormat:M,parameters:p,compressed:W}),this.setSampler(r.sampler),this._setSamplerParameters(o),this.view=this.createView({...this.props,mipLevelCount:1,arrayLayerCount:1}),T&&this.device.isTextureFormatFilterable(r.format)&&this.generateMipmap(),i&&(this._video={video:n,parameters:o,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}initializeCube(r){const{mipmaps:n=!0,parameters:i={}}=r;return this.setCubeMapImageData(r).then(()=>{this.loaded=!0,n&&this.generateMipmap(r),this.setSampler(r.sampler),this._setSamplerParameters(i)}),this}setSampler(r={}){let n;r instanceof Od?(this.sampler=r,n=r.props):(this.sampler=new Od(this.device,r),n=r);const i=Wy(n);return this._setSamplerParameters(i),this}resize(r){const{height:n,width:i,mipmaps:o=!1}=r;return i!==this.width||n!==this.height?this.initialize({width:i,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,mipmaps:o}):this}update(){if(this._video){const{video:r,parameters:n,lastTime:i}=this._video;if(i===r.currentTime||r.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:r,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=r.currentTime}}generateMipmap(r={}){return this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Xs(this.gl,r,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this}setImageData(r){if(this.props.dimension==="3d"||this.props.dimension==="2d-array")return this.setImageData3D(r);this.trackDeallocatedMemory("Texture");const{target:n=this.target,pixels:i=null,level:o=0,glFormat:f=this.glFormat,offset:p=0,parameters:y={}}=r;let{data:T=null,type:R=this.type,width:x=this.width,height:M=this.height,dataFormat:U=this.dataFormat,compressed:W=!1}=r;T||(T=i),{type:R,dataFormat:U,compressed:W,width:x,height:M}=this._deduceParameters({format:this.props.format,type:R,dataFormat:U,compressed:W,data:T,width:x,height:M});const{gl:j}=this;j.bindTexture(this.target,this.handle);let G=null;if({data:T,dataType:G}=this._getDataType({data:T,compressed:W}),Xs(this.gl,y,()=>{switch(G){case"null":j.texImage2D(n,o,f,x,M,0,U,R,T);break;case"typed-array":j.texImage2D(n,o,f,x,M,0,U,R,T,p);break;case"buffer":this.device.gl.bindBuffer(35052,T.handle||T),this.device.gl.texImage2D(n,o,f,x,M,0,U,R,p),this.device.gl.bindBuffer(35052,null);break;case"browser-object":j.texImage2D(n,o,f,x,M,0,U,R,T);break;case"compressed":for(const[re,se]of T.entries())j.compressedTexImage2D(n,re,se.format,se.width,se.height,0,se.data);break;default:ir(!1,"Unknown image data type")}}),T&&T.byteLength)this.trackAllocatedMemory(T.byteLength,"Texture");else{const re=Z2(this.props.format);this.trackAllocatedMemory(this.width*this.height*re,"Texture")}return this.loaded=!0,this}setSubImageData({target:r=this.target,pixels:n=null,data:i=null,x:o=0,y:f=0,width:p=this.width,height:y=this.height,level:T=0,glFormat:R=this.glFormat,type:x=this.type,dataFormat:M=this.dataFormat,compressed:U=!1,offset:W=0,parameters:j={}}){if({type:x,dataFormat:M,compressed:U,width:p,height:y}=this._deduceParameters({format:this.props.format,type:x,dataFormat:M,compressed:U,data:i,width:p,height:y}),ir(this.depth===1,"texSubImage not supported for 3D textures"),i||(i=n),i&&i.data){const G=i;i=G.data,p=G.shape[0],y=G.shape[1]}i instanceof Ys&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),Xs(this.gl,j,()=>{U?this.gl.compressedTexSubImage2D(r,T,o,f,p,y,R,i):i===null?this.gl.texSubImage2D(r,T,o,f,p,y,M,x,null):ArrayBuffer.isView(i)?this.gl.texSubImage2D(r,T,o,f,p,y,M,x,i,W):typeof WebGLBuffer<"u"&&i instanceof WebGLBuffer?(this.device.gl.bindBuffer(35052,i),this.device.gl.texSubImage2D(r,T,o,f,p,y,M,x,W),this.device.gl.bindBuffer(35052,null)):this.device.gl.texSubImage2D(r,T,o,f,p,y,M,x,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(r={}){return Be.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(r=this.textureUnit){const{gl:n}=this;return r!==void 0&&(this.textureUnit=r,n.activeTexture(33984+r)),n.bindTexture(this.target,this.handle),r}unbind(r=this.textureUnit){const{gl:n}=this;return r!==void 0&&(this.textureUnit=r,n.activeTexture(33984+r)),n.bindTexture(this.target,null),r}_getDataType({data:r,compressed:n=!1}){return n?{data:r,dataType:"compressed"}:r===null?{data:r,dataType:"null"}:ArrayBuffer.isView(r)?{data:r,dataType:"typed-array"}:r instanceof Ys?{data:r.handle,dataType:"buffer"}:typeof WebGLBuffer<"u"&&r instanceof WebGLBuffer?{data:r,dataType:"buffer"}:{data:r,dataType:"browser-object"}}_deduceParameters(r){const{format:n,data:i}=r;let{width:o,height:f,dataFormat:p,type:y,compressed:T}=r;const R=uf(n);return p=p||R.dataFormat,y=y||R.type,T=T||R.compressed,{width:o,height:f}=this._deduceImageSize(i,o,f),{dataFormat:p,type:y,compressed:T,width:o,height:f,format:n,data:i}}_deduceImageSize(r,n,i){let o;return typeof ImageData<"u"&&r instanceof ImageData?o={width:r.width,height:r.height}:typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement?o={width:r.naturalWidth,height:r.naturalHeight}:typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement?o={width:r.width,height:r.height}:typeof ImageBitmap<"u"&&r instanceof ImageBitmap?o={width:r.width,height:r.height}:typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement?o={width:r.videoWidth,height:r.videoHeight}:r?o={width:n,height:i}:o={width:n>=0?n:1,height:i>=0?i:1},ir(o,"Could not deduced texture size"),ir(n===void 0||o.width===n,"Deduced texture width does not match supplied width"),ir(i===void 0||o.height===i,"Deduced texture height does not match supplied height"),o}async setCubeMapImageData(r){const{gl:n}=this,{width:i,height:o,pixels:f,data:p,format:y=6408,type:T=5121}=r,R=f||p,x=await Promise.all(Vl.FACES.map(M=>{const U=R[M];return Promise.all(Array.isArray(U)?U:[U])}));this.bind(),Vl.FACES.forEach((M,U)=>{x[U].length>1&&this.props.mipmaps!==!1&&Be.warn(`${this.id} has mipmap and multiple LODs.`)(),x[U].forEach((W,j)=>{i&&o?n.texImage2D(M,j,y,i,o,0,y,T,W):n.texImage2D(M,j,y,y,T,W)})}),this.unbind()}setImageDataForFace(r){const{face:n,width:i,height:o,pixels:f,data:p,format:y=6408,type:T=5121}=r,{gl:R}=this,x=f||p;return this.bind(),x instanceof Promise?x.then(M=>this.setImageDataForFace(Object.assign({},r,{face:n,data:M,pixels:M}))):this.width||this.height?R.texImage2D(n,0,y,i,o,0,y,T,x):R.texImage2D(n,0,y,y,T,x),this}setImageData3D(r){const{level:n=0,dataFormat:i,format:o,type:f,width:p,height:y,depth:T=1,offset:R=0,data:x,parameters:M={}}=r;this.trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle);const U=uf(o);if(Xs(this.gl,M,()=>{ArrayBuffer.isView(x)&&this.gl.texImage3D(this.target,n,U.format,p,y,T,0,U.dataFormat,U.type,x),x instanceof Ys&&(this.gl.bindBuffer(35052,x.handle),this.gl.texImage3D(this.target,n,i,p,y,T,0,o,f,R))}),x&&x.byteLength)this.trackAllocatedMemory(x.byteLength,"Texture");else{const W=Z2(this.props.format);this.trackAllocatedMemory(this.width*this.height*this.depth*W,"Texture")}return this.loaded=!0,this}_setSamplerParameters(r){if(!Kc(r)){Ik(r),this.gl.bindTexture(this.target,this.handle);for(const[n,i]of Object.entries(r)){const o=Number(n),f=i;switch(o){case 33082:case 33083:this.gl.texParameterf(this.target,o,f);break;default:this.gl.texParameteri(this.target,o,f);break}}this.gl.bindTexture(this.target,null)}}};F(Vl,"FACES",[34069,34070,34071,34072,34073,34074]);let Bi=Vl;function Dk(t){switch(t.dimension){case"2d":return 3553;case"cube":return 34067;case"2d-array":return 35866;case"3d":return 32879;case"1d":case"cube-array":default:throw new Error(t.dimension)}}function Ik(t){Be.log(1,"texture sampler parameters",t)()}class Il extends Jc{constructor(r,n){super(r,n);F(this,"device");F(this,"gl");F(this,"handle");const i=n.handle===null;if(this.device=r,this.gl=r.gl,this.handle=this.props.handle||i?this.props.handle:this.gl.createFramebuffer(),!i){r.setSpectorMetadata(this.handle,{id:this.props.id,props:this.props}),this.autoCreateAttachmentTextures();const o=this.gl.bindFramebuffer(36160,this.handle);for(let f=0;f<this.colorAttachments.length;++f){const p=this.colorAttachments[f],y=36064+f;p&&this._attachOne(y,p)}if(this.depthStencilAttachment&&this._attachOne(wk(this.depthStencilAttachment.props.format),this.depthStencilAttachment),n.check!==!1){const f=this.gl.checkFramebufferStatus(36160);if(f!==36053)throw new Error(`Framebuffer ${Lk(f)}`)}this.gl.bindFramebuffer(36160,o)}}get texture(){return this.colorAttachments[0]}destroy(){super.destroy(),!this.destroyed&&this.handle!==null&&this.gl.deleteFramebuffer(this.handle)}createDepthStencilTexture(r){return new Bi(this.device,{id:`${this.id}-depth-stencil`,format:r,width:this.width,height:this.height,mipmaps:!1})}resizeAttachments(r,n){if(this.handle===null)return this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;r===void 0&&(r=this.gl.drawingBufferWidth),n===void 0&&(n=this.gl.drawingBufferHeight);for(const i of this.colorAttachments)i.texture.resize({width:r,height:n});return this.depthStencilAttachment&&this.depthStencilAttachment.texture.resize({width:r,height:n}),this}_attachOne(r,n){if(Array.isArray(n)){const[i,o=0,f=0]=n;return this._attachTexture(r,i,o,f),i}if(n instanceof Bi)return this._attachTexture(r,n,0,0),n;if(n instanceof rA){const i=n;return this._attachTexture(r,i.texture,i.props.baseMipLevel,i.props.baseArrayLayer),n.texture}throw new Error("attach")}_attachTexture(r,n,i,o){const{gl:f}=this.device;switch(f.bindTexture(n.target,n.handle),n.target){case 35866:case 32879:f.framebufferTextureLayer(36160,r,n.target,o,i);break;case 34067:const p=Fk(i);f.framebufferTexture2D(36160,r,p,n.handle,o);break;case 3553:f.framebufferTexture2D(36160,r,3553,n.handle,o);break;default:ir(!1,"Illegal texture type")}f.bindTexture(n.target,null)}}function Fk(t){return t<34069?t+34069:t}function Lk(t){switch(t){case 36053:return"success";case 36054:return"Mismatched attachments";case 36055:return"No attachments";case 36057:return"Height/width mismatch";case 36061:return"Unsupported or split attachments";case 36182:return"Samples mismatch";default:return`${t}`}}class Uk extends fg{constructor(r,n){super(n);F(this,"device");F(this,"presentationSize");F(this,"_framebuffer",null);this.device=r,this.presentationSize=[-1,-1],this._setAutoCreatedCanvasId(`${this.device.id}-canvas`),this.update()}getCurrentFramebuffer(){return this.update(),this._framebuffer=this._framebuffer||new Il(this.device,{handle:null}),this._framebuffer}update(){const r=this.getPixelSize();(r[0]!==this.presentationSize[0]||r[1]!==this.presentationSize[1])&&(this.presentationSize=r,this.resize())}resize(r){if(this.device.gl&&this.canvas){const n=this.getDevicePixelRatio(r==null?void 0:r.useDevicePixels);this.setDevicePixelRatio(n,r);return}}commit(){}}const Bk={spector:Be.get("spector")||Be.get("spectorjs")},Vk="https://cdn.jsdelivr.net/npm/spectorjs@0.9.30/dist/spector.bundle.js",zk=1;let er=null,J2=!1;async function Hk(t){if(!globalThis.SPECTOR)try{await ty(Vk)}catch(e){Be.warn(String(e))}}function jk(t){if(t={...Bk,...t},!(t!=null&&t.spector)||(!er&&globalThis.SPECTOR&&(Be.probe(zk,"SPECTOR found and initialized")(),er=new globalThis.SPECTOR.Spector,globalThis.luma&&(globalThis.luma.spector=er)),!er))return null;if(J2||(J2=!0,er.spyCanvases(),er==null||er.onCaptureStarted.add(e=>Be.info("Spector capture started:",e)()),er==null||er.onCapture.add(e=>{Be.info("Spector capture complete:",e)(),er==null||er.getResultUI(),er==null||er.resultView.display(),er==null||er.resultView.addCapture(e)})),t!=null&&t.canvas){if(typeof t.spector=="string"&&t.spector!==t.canvas.id)return er;er==null||er.startCapture(t==null?void 0:t.canvas,500),new Promise(e=>setTimeout(e,2e3)).then(e=>{Be.info("Spector capture stopped after 2 seconds")(),er==null||er.stopCapture()})}return er}const Wk="https://unpkg.com/webgl-debug@2.0.1/index.js";function $y(t){return t.luma=t.luma||{},t.luma}async function Xk(){eo()&&!globalThis.WebGLDebugUtils&&(globalThis.global=globalThis.global||globalThis,globalThis.global.module={},await ty(Wk))}function $k(t,e={}){return t?e.debug?Yk(t,e):Qk(t):null}function Qk(t){const e=$y(t);return e.realContext?e.realContext:t}function Yk(t,e){if(!globalThis.WebGLDebugUtils)return Be.warn("webgl-debug not loaded")(),t;const r=$y(t);if(r.debugContext)return r.debugContext;globalThis.WebGLDebugUtils.init({...Ja,...t});const n=globalThis.WebGLDebugUtils.makeDebugContext(t,Kk.bind(null,e),Zk.bind(null,e));for(const f in Ja)!(f in n)&&typeof Ja[f]=="number"&&(n[f]=Ja[f]);class i{}Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.setPrototypeOf(i,n);const o=Object.create(i);return r.realContext=t,r.debugContext=o,o.debug=!0,o}function Xh(t,e){e=Array.from(e).map(n=>n===void 0?"undefined":n);let r=globalThis.WebGLDebugUtils.glFunctionArgsToString(t,e);return r=`${r.slice(0,100)}${r.length>100?"...":""}`,`gl.${t}(${r})`}function Kk(t,e,r,n){n=Array.from(n).map(p=>p===void 0?"undefined":p);const i=globalThis.WebGLDebugUtils.glEnumToString(e),o=globalThis.WebGLDebugUtils.glFunctionArgsToString(r,n),f=`${i} in gl.${r}(${o})`;Be.error(f)();debugger;if(t.throwOnError)throw new Error(f)}function Zk(t,e,r){let n="";if(Be.level>=1&&(n=Xh(e,r),Be.log(1,n)()),t.break&&t.break.length>0&&(n=n||Xh(e,r),t.break.every(o=>n.indexOf(o)!==-1)))debugger;for(const i of r)if(i===void 0){if(n=n||Xh(e,r),t.throwOnError)throw new Error(`Undefined argument: ${n}`);Be.error(`Undefined argument: ${n}`)();debugger}}function qk(t){const e=t.split(/\r?\n/),r=[];for(const n of e){if(n.length<=1)continue;const i=n.split(":");if(i.length===2){const[x,M]=i;r.push({message:M.trim(),type:em(x),lineNum:0,linePos:0});continue}const[o,f,p,...y]=i;let T=parseInt(p,10);isNaN(T)&&(T=0);let R=parseInt(f,10);isNaN(R)&&(R=0),r.push({message:y.join(":").trim(),type:em(o),lineNum:T,linePos:R})}return r}function em(t){const e=["warning","error","info"],r=t.toLowerCase();return e.includes(r)?r:"info"}class Gk extends qc{constructor(r,n){super(r,n);F(this,"device");F(this,"handle");switch(this.device=r,this.props.stage){case"vertex":this.handle=this.props.handle||this.device.gl.createShader(35633);break;case"fragment":this.handle=this.props.handle||this.device.gl.createShader(35632);break;default:throw new Error(this.props.stage)}this._compile(this.source)}destroy(){this.handle&&(this.removeStats(),this.device.gl.deleteShader(this.handle),this.destroyed=!0)}async getCompilationInfo(){return await this._waitForCompilationComplete(),this.getCompilationInfoSync()}getCompilationInfoSync(){const r=this.device.gl.getShaderInfoLog(this.handle);return qk(r)}getTranslatedSource(){const n=this.device.getExtension("WEBGL_debug_shaders").WEBGL_debug_shaders;return n==null?void 0:n.getTranslatedShaderSource(this.handle)}async _compile(r){r=(o=>o.startsWith("#version ")?o:`#version 100
${o}`)(r);const{gl:i}=this.device;if(i.shaderSource(this.handle,r),i.compileShader(this.handle),Be.level===0){this.compilationStatus="pending";return}if(!this.device.features.has("compilation-status-async-webgl")){if(this._getCompilationStatus(),this.debugShader(),this.compilationStatus==="error")throw new Error(`GLSL compilation errors in ${this.props.stage} shader ${this.props.id}`);return}Be.once(1,"Shader compilation is asynchronous")(),await this._waitForCompilationComplete(),Be.info(2,`Shader ${this.id} - async compilation complete: ${this.compilationStatus}`)(),this._getCompilationStatus(),this.debugShader()}async _waitForCompilationComplete(){const r=async o=>await new Promise(f=>setTimeout(f,o));if(!this.device.features.has("compilation-status-async-webgl")){await r(10);return}const{gl:i}=this.device;for(;;){if(i.getShaderParameter(this.handle,37297))return;await r(10)}}_getCompilationStatus(){this.compilationStatus=this.device.gl.getShaderParameter(this.handle,35713)?"success":"error"}}const Jk=256,ex=1024,tx=16384,$h=6144,rx=[1,2,4,8];class nx extends hd{constructor(r,n){super(r,n);F(this,"device");F(this,"glParameters");this.device=r,Lf(this.device.gl),this.setParameters(this.props.parameters),this.clear()}end(){Ql(this.device.gl)}pushDebugGroup(r){}popDebugGroup(){}insertDebugMarker(r){}setParameters(r={}){const n={...this.glParameters};this.props.framebuffer&&(n.framebuffer=this.props.framebuffer),this.props.depthReadOnly&&(n.depthMask=!this.props.depthReadOnly),n.stencilMask=this.props.stencilReadOnly?0:1,n[35977]=this.props.discard,r.viewport&&(r.viewport.length>=6?(n.viewport=r.viewport.slice(0,4),n.depthRange=[r.viewport[4],r.viewport[5]]):n.viewport=r.viewport),r.scissorRect&&(n.scissorTest=!0,n.scissor=r.scissorRect),r.blendConstant&&(n.blendColor=r.blendConstant),r.stencilReference&&(console.warn("RenderPassParameters.stencilReference not yet implemented in WebGL"),r[2967]=r.stencilReference),r.colorMask&&(n.colorMask=rx.map(i=>!!(i&r.colorMask))),this.glParameters=n,EA(this.device.gl,n)}beginOcclusionQuery(r){const n=this.props.occlusionQuerySet;n==null||n.beginOcclusionQuery()}endOcclusionQuery(){const r=this.props.occlusionQuerySet;r==null||r.endOcclusionQuery()}clear(){const r={...this.glParameters};let n=0;this.props.clearColor!==!1&&(n|=tx,r.clearColor=this.props.clearColor),this.props.clearDepth!==!1&&(n|=Jk,r.clearDepth=this.props.clearDepth),this.props.clearStencil!==!1&&(n|=ex,r.clearStencil=this.props.clearStencil),n!==0&&Xs(this.device.gl,r,()=>{this.device.gl.clear(n)})}clearColorBuffer(r=0,n=[0,0,0,0]){Xs(this.device.gl,{framebuffer:this.props.framebuffer},()=>{switch(n.constructor){case Int32Array:this.device.gl.clearBufferiv($h,r,n);break;case Uint32Array:this.device.gl.clearBufferuiv($h,r,n);break;case Float32Array:default:this.device.gl.clearBufferfv($h,r,n);break}})}}const ix="Failed to deduce GL constant from typed array";function sx(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(ix)}}function Dd(t,e){const{clamped:r=!0}=e||{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return r?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}const ox={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},ax={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Fl{constructor(...e){F(this,"offset");F(this,"stride");F(this,"type");F(this,"size");F(this,"divisor");F(this,"normalized");F(this,"integer");F(this,"buffer");F(this,"index");e.forEach(r=>this._assign(r)),Object.freeze(this)}static getBytesPerElement(e){return Dd(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return ir(e.size),Dd(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(...e){return new Fl(ox,...e)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Fl.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Fl.getBytesPerVertex(this)}_assign(e={}){return e=Bb("Accessor",e,ax),e.type!==void 0&&(this.type=e.type,(e.type===5124||e.type===5125)&&(this.integer=!0)),e.size!==void 0&&(this.size=e.size),e.offset!==void 0&&(this.offset=e.offset),e.stride!==void 0&&(this.stride=e.stride),e.normalize!==void 0&&(this.normalized=e.normalize),e.normalized!==void 0&&(this.normalized=e.normalized),e.integer!==void 0&&(this.integer=e.integer),e.divisor!==void 0&&(this.divisor=e.divisor),e.buffer!==void 0&&(this.buffer=e.buffer),e.index!==void 0&&(typeof e.index=="boolean"?this.index=e.index?1:0:this.index=e.index),e.instanced!==void 0&&(this.divisor=e.instanced?1:0),e.isInstanced!==void 0&&(this.divisor=e.isInstanced?1:0),this.offset===void 0&&delete this.offset,this.stride===void 0&&delete this.stride,this.type===void 0&&delete this.type,this.size===void 0&&delete this.size,this.divisor===void 0&&delete this.divisor,this.normalized===void 0&&delete this.normalized,this.integer===void 0&&delete this.integer,this.buffer===void 0&&delete this.buffer,this.index===void 0&&delete this.index,this}}function Ax(t){return lx.includes(t)}const lx=[35678,35680,35679,35682,36289,36292,36293,36298,36299,36300,36303,36306,36307,36308,36311],Qy={5126:[5126,1,"float","f32","float32"],35664:[5126,2,"vec2","vec2<f32>","float32x2"],35665:[5126,3,"vec3","vec3<f32>","float32x3"],35666:[5126,4,"vec4","vec4<f32>","float32x4"],5124:[5124,1,"int","i32","sint32"],35667:[5124,2,"ivec2","vec2<i32>","sint32x2"],35668:[5124,3,"ivec3","vec3<i32>","sint32x3"],35669:[5124,4,"ivec4","vec4<i32>","sint32x4"],5125:[5125,1,"uint","u32","uint32"],36294:[5125,2,"uvec2","vec2<u32>","uint32x2"],36295:[5125,3,"uvec3","vec3<u32>","uint32x3"],36296:[5125,4,"uvec4","vec4<u32>","uint32x4"],35670:[5126,1,"bool","f32","float32"],35671:[5126,2,"bvec2","vec2<f32>","float32x2"],35672:[5126,3,"bvec3","vec3<f32>","float32x3"],35673:[5126,4,"bvec4","vec4<f32>","float32x4"],35674:[5126,8,"mat2","mat2x2<f32>"],35685:[5126,8,"mat2x3","mat2x3<f32>"],35686:[5126,8,"mat2x4","mat2x4<f32>"],35687:[5126,12,"mat3x2","mat3x2<f32>"],35675:[5126,12,"mat3","mat3x3<f32>"],35688:[5126,12,"mat3x4","mat3x4<f32>"],35689:[5126,16,"mat4x2","mat4x2<f32>"],35690:[5126,16,"mat4x3","mat4x3<f32>"],35676:[5126,16,"mat4","mat4x4<f32>"]};function Yy(t){const e=Qy[t];if(!e)throw new Error("uniform");const[r,n,,i]=e;return{format:i,components:n,glType:r}}function ux(t){const e=Qy[t];if(!e)throw new Error("attribute");const[,r,,n,i]=e;return{attributeType:n,vertexFormat:i,components:r}}function cx(t,e){const r={attributes:[],bindings:[]};r.attributes=fx(t,e);const n=gx(t,e);for(const p of n){const y=p.uniforms.map(T=>({name:T.name,format:T.format,byteOffset:T.byteOffset,byteStride:T.byteStride,arrayLength:T.arrayLength}));r.bindings.push({type:"uniform",name:p.name,location:p.location,visibility:(p.vertex?1:0)&(p.fragment?2:0),minBindingSize:p.byteLength,uniforms:y})}const i=dx(t,e);let o=0;for(const p of i)if(Ax(p.type)){const{viewDimension:y,sampleType:T}=_x(p.type);r.bindings.push({type:"texture",name:p.name,location:o,viewDimension:y,sampleType:T}),p.textureUnit=o,o+=1}i.length&&(r.uniforms=i);const f=hx(t,e);return f!=null&&f.length&&(r.varyings=f),r}function fx(t,e){const r=[],n=t.getProgramParameter(e,35721);for(let i=0;i<n;i++){const o=t.getActiveAttrib(e,i);if(!o)throw new Error("activeInfo");const{name:f,type:p}=o,y=t.getAttribLocation(e,f);if(y>=0){const{attributeType:T}=ux(p),R=/instance/i.test(f)?"instance":"vertex";r.push({name:f,location:y,stepMode:R,type:T})}}return r.sort((i,o)=>i.location-o.location),r}function hx(t,e){const r=[],n=t.getProgramParameter(e,35971);for(let i=0;i<n;i++){const o=t.getTransformFeedbackVarying(e,i);if(!o)throw new Error("activeInfo");const{name:f,type:p,size:y}=o,{glType:T,components:R}=Yy(p),x=new Fl({type:T,size:y*R}),M={location:i,name:f,accessor:x};r.push(M)}return r.sort((i,o)=>i.location-o.location),r}function dx(t,e){const r=[],n=t.getProgramParameter(e,35718);for(let i=0;i<n;i++){const o=t.getActiveUniform(e,i);if(!o)throw new Error("activeInfo");const{name:f,size:p,type:y}=o,{name:T,isArray:R}=mx(f);let x=t.getUniformLocation(e,T);const M={location:x,name:T,size:p,type:y,isArray:R};if(r.push(M),M.size>1)for(let U=0;U<M.size;U++){const W=`${T}[${U}]`;x=t.getUniformLocation(e,W);const j={...M,name:W,location:x};r.push(j)}}return r}function gx(t,e){const r=(o,f)=>t.getActiveUniformBlockParameter(e,o,f),n=[],i=t.getProgramParameter(e,35382);for(let o=0;o<i;o++){const f={name:t.getActiveUniformBlockName(e,o)||"",location:r(o,35391),byteLength:r(o,35392),vertex:r(o,35396),fragment:r(o,35398),uniformCount:r(o,35394),uniforms:[]},p=r(o,35395)||[],y=t.getActiveUniforms(e,p,35383),T=t.getActiveUniforms(e,p,35384),R=t.getActiveUniforms(e,p,35387),x=t.getActiveUniforms(e,p,35388);for(let M=0;M<f.uniformCount;++M){const U=t.getActiveUniform(e,p[M]);if(!U)throw new Error("activeInfo");f.uniforms.push({name:U.name,format:Yy(y[M]).format,type:y[M],arrayLength:T[M],byteOffset:R[M],byteStride:x[M]})}n.push(f)}return n.sort((o,f)=>o.location-f.location),n}const px={35678:["2d","float"],35680:["cube","float"],35679:["3d","float"],35682:["3d","depth"],36289:["2d-array","float"],36292:["2d-array","depth"],36293:["cube","float"],36298:["2d","sint"],36299:["3d","sint"],36300:["cube","sint"],36303:["2d-array","uint"],36306:["2d","uint"],36307:["3d","uint"],36308:["cube","uint"],36311:["2d-array","uint"]};function _x(t){const e=px[t];if(!e)throw new Error("sampler");const[r,n]=e;return{viewDimension:r,sampleType:n}}function mx(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};const r=/([^[]*)(\[[0-9]+\])?/.exec(t);if(!r||r.length<2)throw new Error(`Failed to parse GLSL uniform name ${t}`);return{name:r[1],length:r[2]?1:0,isArray:!!r[2]}}function yx(t,e,r,n){const i=t;let o=n;o===!0&&(o=1),o===!1&&(o=0);const f=typeof o=="number"?[o]:o;switch(r){case 35678:case 35680:case 35679:case 35682:case 36289:case 36292:case 36293:case 36298:case 36299:case 36300:case 36303:case 36306:case 36307:case 36308:case 36311:if(typeof n!="number")throw new Error("samplers must be set to integers");return t.uniform1i(e,n);case 5126:return t.uniform1fv(e,f);case 35664:return t.uniform2fv(e,f);case 35665:return t.uniform3fv(e,f);case 35666:return t.uniform4fv(e,f);case 5124:return t.uniform1iv(e,f);case 35667:return t.uniform2iv(e,f);case 35668:return t.uniform3iv(e,f);case 35669:return t.uniform4iv(e,f);case 35670:return t.uniform1iv(e,f);case 35671:return t.uniform2iv(e,f);case 35672:return t.uniform3iv(e,f);case 35673:return t.uniform4iv(e,f);case 5125:return i.uniform1uiv(e,f,1);case 36294:return i.uniform2uiv(e,f,2);case 36295:return i.uniform3uiv(e,f,3);case 36296:return i.uniform4uiv(e,f,4);case 35674:return t.uniformMatrix2fv(e,!1,f);case 35675:return t.uniformMatrix3fv(e,!1,f);case 35676:return t.uniformMatrix4fv(e,!1,f);case 35685:return i.uniformMatrix2x3fv(e,!1,f);case 35686:return i.uniformMatrix2x4fv(e,!1,f);case 35687:return i.uniformMatrix3x2fv(e,!1,f);case 35688:return i.uniformMatrix3x4fv(e,!1,f);case 35689:return i.uniformMatrix4x2fv(e,!1,f);case 35690:return i.uniformMatrix4x3fv(e,!1,f)}throw new Error("Illegal uniform")}function vx(t){switch(t){case"point-list":return 0;case"line-list":return 1;case"line-strip":return 3;case"line-loop-webgl":return 2;case"triangle-list":return 4;case"triangle-strip":return 5;case"triangle-fan-webgl":return 6;default:throw new Error(t)}}function wx(t){switch(t){case"point-list":return 0;case"line-list":return 1;case"line-strip":return 1;case"line-loop-webgl":return 1;case"triangle-list":return 4;case"triangle-strip":return 4;case"triangle-fan-webgl":return 4;default:throw new Error(t)}}const tm=4;class Tx extends cA{constructor(r,n){super(r,n);F(this,"device");F(this,"handle");F(this,"vs");F(this,"fs");F(this,"introspectedLayout");F(this,"uniforms",{});F(this,"bindings",{});F(this,"varyings",null);F(this,"_uniformCount",0);F(this,"_uniformSetters",{});this.device=r,this.handle=this.props.handle||this.device.gl.createProgram(),this.device.setSpectorMetadata(this.handle,{id:this.props.id}),this.vs=n.vs,this.fs=n.fs;const{varyings:i,bufferMode:o=35981}=n;switch(i&&i.length>0&&(this.varyings=i,this.device.gl.transformFeedbackVaryings(this.handle,i,o)),this._linkShaders(),Be.time(1,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.introspectedLayout=cx(this.device.gl,this.handle),Be.timeEnd(1,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.shaderLayout=Cb(this.introspectedLayout,n.shaderLayout),this.props.topology){case"triangle-fan-webgl":case"line-loop-webgl":Be.warn(`Primitive topology ${this.props.topology} is deprecated and will be removed in v9.1`);break}}destroy(){this.handle&&(this.device.gl.deleteProgram(this.handle),this.destroyed=!0)}setBindings(r,n){for(const[i,o]of Object.entries(r)){const f=this.shaderLayout.bindings.find(p=>p.name===i)||this.shaderLayout.bindings.find(p=>p.name===`${i}Uniforms`);if(!f){const p=this.shaderLayout.bindings.map(y=>`"${y.name}"`).join(", ");n!=null&&n.disableWarnings||Be.warn(`Unknown binding "${i}" in render pipeline "${this.id}", expected one of ${p}`)();continue}switch(o||Be.warn(`Unsetting binding "${i}" in render pipeline "${this.id}"`)(),f.type){case"uniform":if(!(o instanceof Ys)&&!(o.buffer instanceof Ys))throw new Error("buffer value");break;case"texture":if(!(o instanceof rA||o instanceof Bi||o instanceof Il))throw new Error("texture value");break;case"sampler":Be.warn(`Ignoring sampler ${i}`)();break;default:throw new Error(f.type)}this.bindings[i]=o}}draw(r){var G;const{renderPass:n,parameters:i=this.props.parameters,topology:o=this.props.topology,vertexArray:f,vertexCount:p,instanceCount:y,isInstanced:T=!1,firstVertex:R=0,transformFeedback:x}=r,M=vx(o),U=!!f.indexBuffer,W=(G=f.indexBuffer)==null?void 0:G.glIndexType;if(this.linkStatus!=="success")return Be.info(2,`RenderPipeline:${this.id}.draw() aborted - waiting for shader linking`)(),!1;if(!this._areTexturesRenderable()||p===0)return Be.info(2,`RenderPipeline:${this.id}.draw() aborted - textures not yet loaded`)(),!1;if(p===0)return Be.info(2,`RenderPipeline:${this.id}.draw() aborted - no vertices to draw`)(),!0;this.device.gl.useProgram(this.handle),f.bindBeforeRender(n),x&&x.begin(this.props.topology),this._applyBindings(),this._applyUniforms();const j=n;return Ck(this.device,i,j.glParameters,()=>{U&&T?this.device.gl.drawElementsInstanced(M,p||0,W,R,y||0):U?this.device.gl.drawElements(M,p||0,W,R):T?this.device.gl.drawArraysInstanced(M,R,p||0,y||0):this.device.gl.drawArrays(M,R,p||0),x&&x.end()}),f.unbindAfterRender(n),!0}setUniformsWebGL(r){const{bindings:n}=hg(r);Object.keys(n).forEach(i=>{Be.warn(`Unsupported value "${JSON.stringify(n[i])}" used in setUniforms() for key ${i}. Use setBindings() instead?`)()}),Object.assign(this.uniforms,r)}async _linkShaders(){const{gl:r}=this.device;if(r.attachShader(this.handle,this.vs.handle),r.attachShader(this.handle,this.fs.handle),Be.time(tm,`linkProgram for ${this.id}`)(),r.linkProgram(this.handle),Be.timeEnd(tm,`linkProgram for ${this.id}`)(),Be.level,!this.device.features.has("compilation-status-async-webgl")){const i=this._getLinkStatus();this._reportLinkStatus(i);return}Be.once(1,"RenderPipeline linking is asynchronous")(),await this._waitForLinkComplete(),Be.info(2,`RenderPipeline ${this.id} - async linking complete: ${this.linkStatus}`)();const n=this._getLinkStatus();this._reportLinkStatus(n)}_reportLinkStatus(r){var n;switch(r){case"success":return;default:throw this.vs.compilationStatus==="error"?(this.vs.debugShader(),new Error(`Error during compilation of shader ${this.vs.id}`)):((n=this.fs)==null?void 0:n.compilationStatus)==="error"?(this.fs.debugShader(),new Error(`Error during compilation of shader ${this.fs.id}`)):new Error(`Error during ${r}: ${this.device.gl.getProgramInfoLog(this.handle)}`)}}_getLinkStatus(){const{gl:r}=this.device;return r.getProgramParameter(this.handle,35714)?(r.validateProgram(this.handle),r.getProgramParameter(this.handle,35715)?(this.linkStatus="success","success"):(this.linkStatus="error","validation")):(this.linkStatus="error","linking")}async _waitForLinkComplete(){const r=async o=>await new Promise(f=>setTimeout(f,o));if(!this.device.features.has("compilation-status-async-webgl")){await r(10);return}const{gl:i}=this.device;for(;;){if(i.getProgramParameter(this.handle,37297))return;await r(10)}}_areTexturesRenderable(){let r=!0;for(const[,n]of Object.entries(this.bindings))n instanceof Bi&&(n.update(),r=r&&n.loaded);return r}_applyBindings(){if(this.linkStatus!=="success")return;const{gl:r}=this.device;r.useProgram(this.handle);let n=0,i=0;for(const o of this.shaderLayout.bindings){const f=this.bindings[o.name]||this.bindings[o.name.replace(/Uniforms$/,"")];if(!f)throw new Error(`No value for binding ${o.name} in ${this.id}`);switch(o.type){case"uniform":const{name:p}=o,y=r.getUniformBlockIndex(this.handle,p);if(y===4294967295)throw new Error(`Invalid uniform block name ${p}`);r.uniformBlockBinding(this.handle,i,y),f instanceof Ys?r.bindBufferBase(35345,i,f.handle):r.bindBufferRange(35345,i,f.buffer.handle,f.offset||0,f.size||f.buffer.byteLength-f.offset),i+=1;break;case"texture":if(!(f instanceof rA||f instanceof Bi||f instanceof Il))throw new Error("texture");let T;if(f instanceof rA)T=f.texture;else if(f instanceof Bi)T=f;else if(f instanceof Il&&f.colorAttachments[0]instanceof rA)Be.warn("Passing framebuffer in texture binding may be deprecated. Use fbo.colorAttachments[0] instead")(),T=f.colorAttachments[0].texture;else throw new Error("No texture");r.activeTexture(33984+n),r.bindTexture(T.target,T.handle),n+=1;break;case"sampler":break;case"storage":case"read-only-storage":throw new Error(`binding type '${o.type}' not supported in WebGL`)}}}_applyUniforms(){for(const r of this.shaderLayout.uniforms||[]){const{name:n,location:i,type:o,textureUnit:f}=r,p=this.uniforms[n]??f;p!==void 0&&yx(this.device.gl,i,o,p)}}}class Ex extends gd{constructor(r){super(r,{});F(this,"device");F(this,"commands",[]);this.device=r}submitCommands(r=this.commands){for(const n of r)switch(n.name){case"copy-buffer-to-buffer":Sx(this.device,n.options);break;case"copy-buffer-to-texture":bx(this.device,n.options);break;case"copy-texture-to-buffer":Cx(this.device,n.options);break;case"copy-texture-to-texture":Rx(this.device,n.options);break}}}function Sx(t,e){const r=e.source,n=e.destination;t.gl.bindBuffer(36662,r.handle),t.gl.bindBuffer(36663,n.handle),t.gl.copyBufferSubData(36662,36663,e.sourceOffset??0,e.destinationOffset??0,e.size),t.gl.bindBuffer(36662,null),t.gl.bindBuffer(36663,null)}function bx(t,e){throw new Error("Not implemented")}function Cx(t,e){const{source:r,mipLevel:n=0,aspect:i="all",width:o=e.source.width,height:f=e.source.height,depthOrArrayLayers:p=0,origin:y=[0,0],destination:T,byteOffset:R=0,bytesPerRow:x,rowsPerImage:M}=e;if(i!=="all")throw new Error("not supported");if(n!==0||p!==0||x||M)throw new Error("not implemented");const{framebuffer:U,destroyFramebuffer:W}=Ky(r);let j;try{const G=T,re=o||U.width,se=f||U.height,ce=uf(U.texture.props.format),we=ce.dataFormat,be=ce.type;t.gl.bindBuffer(35051,G.handle),j=t.gl.bindFramebuffer(36160,U.handle),t.gl.readPixels(y[0],y[1],re,se,we,be,R)}finally{t.gl.bindBuffer(35051,null),j!==void 0&&t.gl.bindFramebuffer(36160,j),W&&U.destroy()}}function Rx(t,e){const{source:r,destinationMipLevel:n=0,origin:i=[0,0],destinationOrigin:o=[0,0],destination:f}=e;let{width:p=e.destination.width,height:y=e.destination.height}=e;const{framebuffer:T,destroyFramebuffer:R}=Ky(r),[x,M]=i,[U,W,j]=o,G=t.gl.bindFramebuffer(36160,T.handle);let re=null,se;if(f instanceof Bi)re=f,p=Number.isFinite(p)?p:re.width,y=Number.isFinite(y)?y:re.height,re.bind(0),se=re.target;else throw new Error("invalid destination");switch(se){case 3553:case 34067:t.gl.copyTexSubImage2D(se,n,U,W,x,M,p,y);break;case 35866:case 32879:t.gl.copyTexSubImage3D(se,n,U,W,j,x,M,p,y);break}re&&re.unbind(),t.gl.bindFramebuffer(36160,G),R&&T.destroy()}function Ky(t){if(t instanceof Qn){const{width:e,height:r,id:n}=t;return{framebuffer:t.device.createFramebuffer({id:`framebuffer-for-${n}`,width:e,height:r,colorAttachments:[t]}),destroyFramebuffer:!0}}return{framebuffer:t,destroyFramebuffer:!1}}class Px extends dd{constructor(r,n){super(r,n);F(this,"device");F(this,"commandBuffer");this.device=r,this.commandBuffer=new Ex(r)}destroy(){}finish(){this.commandBuffer.submitCommands()}copyBufferToBuffer(r){this.commandBuffer.commands.push({name:"copy-buffer-to-buffer",options:r})}copyBufferToTexture(r){this.commandBuffer.commands.push({name:"copy-buffer-to-texture",options:r})}copyTextureToBuffer(r){this.commandBuffer.commands.push({name:"copy-texture-to-buffer",options:r})}copyTextureToTexture(r){this.commandBuffer.commands.push({name:"copy-texture-to-texture",options:r})}pushDebugGroup(r){}popDebugGroup(){}insertDebugMarker(r){}resolveQuerySet(r,n,i){}}class Cg extends pd{constructor(r,n){super(r,n);F(this,"device");F(this,"handle");F(this,"buffer",null);F(this,"bufferValue",null);this.device=r,this.handle=this.device.gl.createVertexArray()}get[Symbol.toStringTag](){return"VertexArray"}static isConstantAttributeZeroSupported(r){return X3()==="Chrome"}destroy(){var r;super.destroy(),this.buffer&&((r=this.buffer)==null||r.destroy()),this.handle&&(this.device.gl.deleteVertexArray(this.handle),this.handle=void 0)}setIndexBuffer(r){const n=r;if(n&&n.glTarget!==34963)throw new Error("Use .setBuffer()");this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34963,n?n.handle:null),this.indexBuffer=n,this.device.gl.bindVertexArray(null)}setBuffer(r,n){const i=n;if(i.glTarget===34963)throw new Error("Use .setIndexBuffer()");const{size:o,type:f,stride:p,offset:y,normalized:T,integer:R,divisor:x}=this._getAccessor(r);this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34962,i.handle),R?this.device.gl.vertexAttribIPointer(r,o,f,p,y):this.device.gl.vertexAttribPointer(r,o,f,T,p,y),this.device.gl.bindBuffer(34962,null),this.device.gl.enableVertexAttribArray(r),this.device.gl.vertexAttribDivisor(r,x||0),this.attributes[r]=i,this.device.gl.bindVertexArray(null)}setConstantWebGL(r,n){this._enable(r,!1),this.attributes[r]=n}bindBeforeRender(){this.device.gl.bindVertexArray(this.handle),this._applyConstantAttributes()}unbindAfterRender(){this.device.gl.bindVertexArray(null)}_applyConstantAttributes(){for(let r=0;r<this.maxVertexAttributes;++r){const n=this.attributes[r];ArrayBuffer.isView(n)&&this.device.setConstantAttributeWebGL(r,n)}}_getAccessor(r){const n=this.attributeInfos[r];if(!n)throw new Error(`Unknown attribute location ${r}`);const i=Hy(n.bufferDataType);return{size:n.bufferComponents,type:i,stride:n.byteStride,offset:n.byteOffset,normalized:n.normalized,integer:n.integer,divisor:n.stepMode==="instance"?1:0}}_enable(r,n=!0){const o=Cg.isConstantAttributeZeroSupported(this.device)||r!==0;(n||o)&&(r=Number(r),this.device.gl.bindVertexArray(this.handle),n?this.device.gl.enableVertexAttribArray(r):this.device.gl.disableVertexAttribArray(r),this.device.gl.bindVertexArray(null))}getConstantBuffer(r,n){const i=kx(n),o=i.byteLength*r,f=i.length*r;if(this.buffer&&o!==this.buffer.byteLength)throw new Error(`Buffer size is immutable, byte length ${o} !== ${this.buffer.byteLength}.`);let p=!this.buffer;if(this.buffer=this.buffer||this.device.createBuffer({byteLength:o}),p=p||!xx(i,this.bufferValue),p){const y=xb(n.constructor,f);Mb({target:y,source:i,start:0,count:f}),this.buffer.write(y),this.bufferValue=n}return this.buffer}}function kx(t){return Array.isArray(t)?new Float32Array(t):t}function xx(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}class Mx extends _d{constructor(r,n){super(r,n);F(this,"device");F(this,"gl");F(this,"handle");F(this,"layout");F(this,"buffers",{});F(this,"unusedBuffers",{});F(this,"bindOnUse",!0);F(this,"_bound",!1);this.device=r,this.gl=r.gl,this.handle=this.props.handle||this.gl.createTransformFeedback(),this.layout=this.props.layout,n.buffers&&this.setBuffers(n.buffers),Object.seal(this)}destroy(){this.gl.deleteTransformFeedback(this.handle),super.destroy()}begin(r="point-list"){this.gl.bindTransformFeedback(36386,this.handle),this.bindOnUse&&this._bindBuffers(),this.gl.beginTransformFeedback(wx(r))}end(){this.gl.endTransformFeedback(),this.bindOnUse&&this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null)}setBuffers(r){this.buffers={},this.unusedBuffers={},this.bind(()=>{for(const n in r)this.setBuffer(n,r[n])})}setBuffer(r,n){const i=this._getVaryingIndex(r),{buffer:o,byteLength:f,byteOffset:p}=this._getBufferRange(n);if(i<0){this.unusedBuffers[r]=o,Be.warn(`${this.id} unusedBuffers varying buffer ${r}`)();return}this.buffers[i]={buffer:o,byteLength:f,byteOffset:p},this.bindOnUse||this._bindBuffer(i,o,p,f)}getBuffer(r){if(rm(r))return this.buffers[r]||null;const n=this._getVaryingIndex(r);return n>=0?this.buffers[n]:null}bind(r=this.handle){if(typeof r!="function")return this.gl.bindTransformFeedback(36386,r),this;let n;return this._bound?n=r():(this.gl.bindTransformFeedback(36386,this.handle),this._bound=!0,n=r(),this._bound=!1,this.gl.bindTransformFeedback(36386,null)),n}unbind(){this.bind(null)}_getBufferRange(r){if(r instanceof Ys)return{buffer:r,byteOffset:0,byteLength:r.byteLength};const{buffer:n,byteOffset:i=0,byteLength:o=r.buffer.byteLength}=r;return{buffer:n,byteOffset:i,byteLength:o}}_getVaryingIndex(r){if(rm(r))return Number(r);for(const n of this.layout.varyings)if(r===n.name)return n.location;return-1}_bindBuffers(){for(const r in this.buffers){const{buffer:n,byteLength:i,byteOffset:o}=this._getBufferRange(this.buffers[r]);this._bindBuffer(Number(r),n,o,i)}}_unbindBuffers(){for(const r in this.buffers)this.gl.bindBufferBase(35982,Number(r),null)}_bindBuffer(r,n,i=0,o){const f=n&&n.handle;!f||o===void 0?this.gl.bindBufferBase(35982,r,f):this.gl.bindBufferRange(35982,r,f,i,o)}}function rm(t){return typeof t=="number"?Number.isInteger(t):/^\d+$/.test(t)}class Nx extends md{constructor(r,n){super(r,n);F(this,"device");F(this,"handle");F(this,"target",null);F(this,"_queryPending",!1);F(this,"_pollingPromise",null);if(this.device=r,n.count>1)throw new Error("WebGL QuerySet can only have one value");this.handle=this.device.gl.createQuery(),Object.seal(this)}get[Symbol.toStringTag](){return"Query"}destroy(){this.device.gl.deleteQuery(this.handle)}beginTimestampQuery(){return this._begin(35007)}endTimestampQuery(){this._end()}beginOcclusionQuery(r){return this._begin(r!=null&&r.conservative?36202:35887)}endOcclusionQuery(){this._end()}beginTransformFeedbackQuery(){return this._begin(35976)}endTransformFeedbackQuery(){this._end()}async resolveQuery(){return[await this.pollQuery()]}_begin(r){this._queryPending||(this.target=r,this.device.gl.beginQuery(this.target,this.handle))}_end(){this._queryPending||this.target&&(this.device.gl.endQuery(this.target),this.target=null,this._queryPending=!0)}isResultAvailable(){if(!this._queryPending)return!1;const r=this.device.gl.getQueryParameter(this.handle,34919);return r&&(this._queryPending=!1),r}isTimerDisjoint(){return this.device.gl.getParameter(36795)}getResult(){return this.device.gl.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}pollQuery(r=Number.POSITIVE_INFINITY){if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((i,o)=>{const f=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):n++>r?(o("Timed out"),this._pollingPromise=null):requestAnimationFrame(f)};requestAnimationFrame(f)}),this._pollingPromise}}function Zy(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return ir(!1),0}}function Ox(t){switch(t){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return ir(!1),0}}function Dx(t,e){var G,re;const{sourceX:r=0,sourceY:n=0,sourceFormat:i=6408,sourceAttachment:o=36064}=e||{};let{target:f=null,sourceWidth:p,sourceHeight:y,sourceType:T}=e||{};const{framebuffer:R,deleteFramebuffer:x}=qy(t);ir(R);const{gl:M,handle:U}=R;p=p||R.width,y=y||R.height;const W=o-36064;T=T||((re=(G=R.colorAttachments[W])==null?void 0:G.texture)==null?void 0:re.type)||5121,f=Lx(f,T,i,p,y),T=T||sx(f);const j=M.bindFramebuffer(36160,U);return M.readPixels(r,n,p,y,i,T,f),M.bindFramebuffer(36160,j||null),x&&R.destroy(),f}function Ix(t,e){const{target:r,sourceX:n=0,sourceY:i=0,sourceFormat:o=6408,targetByteOffset:f=0}=e||{};let{sourceWidth:p,sourceHeight:y,sourceType:T}=e||{};const{framebuffer:R,deleteFramebuffer:x}=qy(t);ir(R),p=p||R.width,y=y||R.height;const M=R;T=T||5121;let U=r;if(!U){const j=Zy(o),G=Ox(T),re=f+p*y*j*G;U=M.device.createBuffer({byteLength:re})}const W=t.device.createCommandEncoder();return W.copyTextureToBuffer({source:t,width:p,height:y,origin:[n,i],destination:U,byteOffset:f}),W.destroy(),x&&R.destroy(),U}function qy(t){return t instanceof Jc?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:Fx(t),deleteFramebuffer:!0}}function Fx(t,e){const{device:r,width:n,height:i,id:o}=t;return r.createFramebuffer({...e,id:`framebuffer-for-${o}`,width:n,height:i,colorAttachments:[t]})}function Lx(t,e,r,n,i){if(t)return t;e=e||5121;const o=Dd(e,{clamped:!1}),f=Zy(r);return new o(n*i*f)}const Ux=256,Bx=1024,Vx=16384,zx="clear: bad arguments";function Hx(t,e){const{framebuffer:r=null,color:n=null,depth:i=null,stencil:o=null}=e||{},f={};r&&(f.framebuffer=r);let p=0;n&&(p|=Vx,n!==!0&&(f.clearColor=n)),i&&(p|=Ux,i!==!0&&(f.clearDepth=i)),o&&(p|=Bx,i!==!0&&(f.clearStencil=i)),ir(p!==0,zx);const y=t.gl;Xs(y,f,()=>{y.clear(p)})}const Sl=1,Yo=class Yo extends uA{constructor(r){var T,R;super({...r,id:r.id||la("webgl-device")});F(this,"type","webgl");F(this,"handle");F(this,"features");F(this,"limits");F(this,"info");F(this,"canvasContext");F(this,"lost");F(this,"_resolveContextLost");F(this,"renderPass",null);F(this,"gl");F(this,"debug",!1);F(this,"_canvasSizeInfo",{clientWidth:0,clientHeight:0,devicePixelRatio:1});F(this,"_extensions",{});F(this,"_polyfilled",!1);F(this,"spectorJS");F(this,"_constants");const n=(T=r.gl)==null?void 0:T.device;if(n)throw new Error(`WebGL context already attached to device ${n.id}`);const i=((R=r.gl)==null?void 0:R.canvas)||r.canvas,o=!r.gl;this.canvasContext=new Uk(this,{...r,autoResize:o,canvas:i}),this.lost=new Promise(x=>{this._resolveContextLost=x});let f=r.gl||null;if(f||(f=nk(this.canvasContext.canvas,{...r,onContextLost:x=>{var M;return(M=this._resolveContextLost)==null?void 0:M.call(this,{reason:"destroyed",message:"Entered sleep mode, or too many apps or browser tabs are using the GPU."})}})),!f)throw new Error("WebGL context creation failed");this.handle=f,this.gl=f,this.gl.device=this,this.gl._version=2,r.spector&&(this.spectorJS=jk({...this.props,canvas:this.handle.canvas})),this.info=ik(this.gl,this._extensions),this.limits=new Sk(this.gl),this.features=new Ek(this.gl,this._extensions,this.props.disabledFeatures),this.props.initalizeFeatures&&this.features.initializeFeatures(),o&&this.canvasContext.resize();const{enable:p=!0,copyState:y=!1}=r;Vy(this.gl,{enable:p,copyState:y,log:(...x)=>Be.log(1,...x)()}),r.debug&&(this.gl=$k(this.gl,{...r,throwOnError:!0}),this.debug=!0,Be.level=Math.max(Be.level,1),Be.warn("WebGL debug mode activated. Performance reduced.")())}static isSupported(){return typeof WebGL2RenderingContext<"u"}static attach(r){if(r instanceof Yo)return r;if((r==null?void 0:r.device)instanceof uA)return r.device;if(!jx(r))throw new Error("Invalid WebGL2RenderingContext");return new Yo({gl:r})}static async create(r={}){var p;Be.groupCollapsed(Sl,"WebGLDevice created")();const n=[];r.debug&&n.push(Xk()),r.spector&&n.push(Hk()),typeof r.canvas=="string"&&n.push(fg.pageLoaded);const i=await Promise.allSettled(n);for(const y of i)y.status==="rejected"&&Be.error(`Failed to initialize debug libraries ${y.reason}`)();if(Be.probe(Sl+1,"DOM is loaded")(),(p=r.gl)!=null&&p.device)return Be.warn("reattaching existing device")(),Yo.attach(r.gl);const o=new Yo(r),f=`Created ${o.type}${o.debug?" debug":""} context: ${o.info.vendor}, ${o.info.renderer} for canvas: ${o.canvasContext.id}`;return Be.probe(Sl,f)(),Be.table(Sl,o.info)(),Be.groupEnd(Sl)(),o}destroy(){}get isLost(){return this.gl.isContextLost()}getSize(){return[this.gl.drawingBufferWidth,this.gl.drawingBufferHeight]}isTextureFormatSupported(r){return bg(this.gl,r,this._extensions)}isTextureFormatFilterable(r){return yk(this.gl,r,this._extensions)}isTextureFormatRenderable(r){return vk(this.gl,r,this._extensions)}createCanvasContext(r){throw new Error("WebGL only supports a single canvas")}createBuffer(r){const n=this._getBufferProps(r);return new Ys(this,n)}_createTexture(r){return new Bi(this,r)}createExternalTexture(r){throw new Error("createExternalTexture() not implemented")}createSampler(r){return new Od(this,r)}createShader(r){return new Gk(this,r)}createFramebuffer(r){return new Il(this,r)}createVertexArray(r){return new Cg(this,r)}createTransformFeedback(r){return new Mx(this,r)}createQuerySet(r){return new Nx(this,r)}createRenderPipeline(r){return new Tx(this,r)}beginRenderPass(r){return new nx(this,r)}createComputePipeline(r){throw new Error("ComputePipeline not supported in WebGL")}beginComputePass(r){throw new Error("ComputePass not supported in WebGL")}createCommandEncoder(r){return new Px(this,r)}submit(){var r;(r=this.renderPass)==null||r.end(),this.renderPass=null}readPixelsToArrayWebGL(r,n){return Dx(r,n)}readPixelsToBufferWebGL(r,n){return Ix(r,n)}setParametersWebGL(r){EA(this.gl,r)}getParametersWebGL(r){return By(this.gl,r)}withParametersWebGL(r,n){return Xs(this.gl,r,n)}clearWebGL(r){Hx(this,r)}resetWebGL(){Be.warn("WebGLDevice.resetWebGL is deprecated, use only for debugging")(),Z4(this.gl)}loseDevice(){var o;let r=!1;const i=this.getExtension("WEBGL_lose_context").WEBGL_lose_context;return i&&(r=!0,i.loseContext()),(o=this._resolveContextLost)==null||o.call(this,{reason:"destroyed",message:"Application triggered context loss"}),r}pushState(){Lf(this.gl)}popState(){Ql(this.gl)}setSpectorMetadata(r,n){r.__SPECTOR_Metadata=n}getGLKey(r,n){n=n||this.gl2||this.gl;const i=Number(r);for(const o in n)if(n[o]===i)return`GL.${o}`;return String(r)}setConstantAttributeWebGL(r,n){const i=this.limits.maxVertexAttributes;this._constants=this._constants||new Array(i).fill(null);const o=this._constants[r];switch(o&&Qx(o,n)&&Be.info(1,`setConstantAttributeWebGL(${r}) could have been skipped, value unchanged`)(),this._constants[r]=n,n.constructor){case Float32Array:Wx(this,r,n);break;case Int32Array:Xx(this,r,n);break;case Uint32Array:$x(this,r,n);break;default:ir(!1)}}getExtension(r){return qs(this.gl,r,this._extensions),this._extensions}};F(Yo,"type","webgl");let Ll=Yo;function jx(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&Number.isFinite(t._version))}function Wx(t,e,r){switch(r.length){case 1:t.gl.vertexAttrib1fv(e,r);break;case 2:t.gl.vertexAttrib2fv(e,r);break;case 3:t.gl.vertexAttrib3fv(e,r);break;case 4:t.gl.vertexAttrib4fv(e,r);break;default:ir(!1)}}function Xx(t,e,r){t.gl.vertexAttribI4iv(e,r)}function $x(t,e,r){t.gl.vertexAttribI4uiv(e,r)}function Qx(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}var Qh={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */var nm;function Yx(){return nm||(nm=1,function(t){(function(e,r,n,i){var o=["","webkit","Moz","MS","ms","o"],f=r.createElement("div"),p="function",y=Math.round,T=Math.abs,R=Date.now;function x(D,I,K){return setTimeout(ce(D,K),I)}function M(D,I,K){return Array.isArray(D)?(U(D,K[I],K),!0):!1}function U(D,I,K){var ve;if(D)if(D.forEach)D.forEach(I,K);else if(D.length!==i)for(ve=0;ve<D.length;)I.call(K,D[ve],ve,D),ve++;else for(ve in D)D.hasOwnProperty(ve)&&I.call(K,D[ve],ve,D)}function W(D,I,K){var ve="DEPRECATED METHOD: "+I+`
`+K+` AT 
`;return function(){var Me=new Error("get-stack-trace"),Qe=Me&&Me.stack?Me.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Ot=e.console&&(e.console.warn||e.console.log);return Ot&&Ot.call(e.console,ve,Qe),D.apply(this,arguments)}}var j;typeof Object.assign!="function"?j=function(I){if(I===i||I===null)throw new TypeError("Cannot convert undefined or null to object");for(var K=Object(I),ve=1;ve<arguments.length;ve++){var Me=arguments[ve];if(Me!==i&&Me!==null)for(var Qe in Me)Me.hasOwnProperty(Qe)&&(K[Qe]=Me[Qe])}return K}:j=Object.assign;var G=W(function(I,K,ve){for(var Me=Object.keys(K),Qe=0;Qe<Me.length;)(!ve||ve&&I[Me[Qe]]===i)&&(I[Me[Qe]]=K[Me[Qe]]),Qe++;return I},"extend","Use `assign`."),re=W(function(I,K){return G(I,K,!0)},"merge","Use `assign`.");function se(D,I,K){var ve=I.prototype,Me;Me=D.prototype=Object.create(ve),Me.constructor=D,Me._super=ve,K&&j(Me,K)}function ce(D,I){return function(){return D.apply(I,arguments)}}function we(D,I){return typeof D==p?D.apply(I&&I[0]||i,I):D}function be(D,I){return D===i?I:D}function Pe(D,I,K){U(Je(I),function(ve){D.addEventListener(ve,K,!1)})}function Xe(D,I,K){U(Je(I),function(ve){D.removeEventListener(ve,K,!1)})}function nt(D,I){for(;D;){if(D==I)return!0;D=D.parentNode}return!1}function Ue(D,I){return D.indexOf(I)>-1}function Je(D){return D.trim().split(/\s+/g)}function it(D,I,K){if(D.indexOf&&!K)return D.indexOf(I);for(var ve=0;ve<D.length;){if(K&&D[ve][K]==I||!K&&D[ve]===I)return ve;ve++}return-1}function mt(D){return Array.prototype.slice.call(D,0)}function _t(D,I,K){for(var ve=[],Me=[],Qe=0;Qe<D.length;){var Ot=D[Qe][I];it(Me,Ot)<0&&ve.push(D[Qe]),Me[Qe]=Ot,Qe++}return ve=ve.sort(function(fr,_r){return fr[I]>_r[I]}),ve}function ct(D,I){for(var K,ve,Me=I[0].toUpperCase()+I.slice(1),Qe=0;Qe<o.length;){if(K=o[Qe],ve=K?K+Me:I,ve in D)return ve;Qe++}return i}var Vt=1;function q(){return Vt++}function ae(D){var I=D.ownerDocument||D;return I.defaultView||I.parentWindow||e}var Q=/mobile|tablet|ip(ad|hone|od)|android/i,de="ontouchstart"in e,ue=ct(e,"PointerEvent")!==i,X=de&&Q.test(navigator.userAgent),te="touch",ke="pen",Ve="mouse",je="kinect",ot=25,Ye=1,Ke=2,et=4,At=8,Hr=1,Jr=2,un=4,pn=8,Ft=16,Pt=Jr|un,xr=pn|Ft,Zn=Pt|xr,as=["x","y"],Nn=["clientX","clientY"];function Kt(D,I){var K=this;this.manager=D,this.callback=I,this.element=D.element,this.target=D.options.inputTarget,this.domHandler=function(ve){we(D.options.enable,[D])&&K.handler(ve)},this.init()}Kt.prototype={handler:function(){},init:function(){this.evEl&&Pe(this.element,this.evEl,this.domHandler),this.evTarget&&Pe(this.target,this.evTarget,this.domHandler),this.evWin&&Pe(ae(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&Xe(this.element,this.evEl,this.domHandler),this.evTarget&&Xe(this.target,this.evTarget,this.domHandler),this.evWin&&Xe(ae(this.element),this.evWin,this.domHandler)}};function Xi(D){var I,K=D.options.inputClass;return K?I=K:ue?I=Oe:X?I=ei:de?I=he:I=_i,new I(D,to)}function to(D,I,K){var ve=K.pointers.length,Me=K.changedPointers.length,Qe=I&Ye&&ve-Me===0,Ot=I&(et|At)&&ve-Me===0;K.isFirst=!!Qe,K.isFinal=!!Ot,Qe&&(D.session={}),K.eventType=I,qn(D,K),D.emit("hammer.input",K),D.recognize(K),D.session.prevInput=K}function qn(D,I){var K=D.session,ve=I.pointers,Me=ve.length;K.firstInput||(K.firstInput=ls(I)),Me>1&&!K.firstMultiple?K.firstMultiple=ls(I):Me===1&&(K.firstMultiple=!1);var Qe=K.firstInput,Ot=K.firstMultiple,cr=Ot?Ot.center:Qe.center,fr=I.center=gi(ve);I.timeStamp=R(),I.deltaTime=I.timeStamp-Qe.timeStamp,I.angle=cs(cr,fr),I.distance=On(cr,fr),As(K,I),I.offsetDirection=pi(I.deltaX,I.deltaY);var _r=us(I.deltaTime,I.deltaX,I.deltaY);I.overallVelocityX=_r.x,I.overallVelocityY=_r.y,I.overallVelocity=T(_r.x)>T(_r.y)?_r.x:_r.y,I.scale=Ot?ga(Ot.pointers,ve):1,I.rotation=Ot?da(Ot.pointers,ve):0,I.maxPointers=K.prevInput?I.pointers.length>K.prevInput.maxPointers?I.pointers.length:K.prevInput.maxPointers:I.pointers.length,ha(K,I);var kt=D.element;nt(I.srcEvent.target,kt)&&(kt=I.srcEvent.target),I.target=kt}function As(D,I){var K=I.center,ve=D.offsetDelta||{},Me=D.prevDelta||{},Qe=D.prevInput||{};(I.eventType===Ye||Qe.eventType===et)&&(Me=D.prevDelta={x:Qe.deltaX||0,y:Qe.deltaY||0},ve=D.offsetDelta={x:K.x,y:K.y}),I.deltaX=Me.x+(K.x-ve.x),I.deltaY=Me.y+(K.y-ve.y)}function ha(D,I){var K=D.lastInterval||I,ve=I.timeStamp-K.timeStamp,Me,Qe,Ot,cr;if(I.eventType!=At&&(ve>ot||K.velocity===i)){var fr=I.deltaX-K.deltaX,_r=I.deltaY-K.deltaY,kt=us(ve,fr,_r);Qe=kt.x,Ot=kt.y,Me=T(kt.x)>T(kt.y)?kt.x:kt.y,cr=pi(fr,_r),D.lastInterval=I}else Me=K.velocity,Qe=K.velocityX,Ot=K.velocityY,cr=K.direction;I.velocity=Me,I.velocityX=Qe,I.velocityY=Ot,I.direction=cr}function ls(D){for(var I=[],K=0;K<D.pointers.length;)I[K]={clientX:y(D.pointers[K].clientX),clientY:y(D.pointers[K].clientY)},K++;return{timeStamp:R(),pointers:I,center:gi(I),deltaX:D.deltaX,deltaY:D.deltaY}}function gi(D){var I=D.length;if(I===1)return{x:y(D[0].clientX),y:y(D[0].clientY)};for(var K=0,ve=0,Me=0;Me<I;)K+=D[Me].clientX,ve+=D[Me].clientY,Me++;return{x:y(K/I),y:y(ve/I)}}function us(D,I,K){return{x:I/D||0,y:K/D||0}}function pi(D,I){return D===I?Hr:T(D)>=T(I)?D<0?Jr:un:I<0?pn:Ft}function On(D,I,K){K||(K=as);var ve=I[K[0]]-D[K[0]],Me=I[K[1]]-D[K[1]];return Math.sqrt(ve*ve+Me*Me)}function cs(D,I,K){K||(K=as);var ve=I[K[0]]-D[K[0]],Me=I[K[1]]-D[K[1]];return Math.atan2(Me,ve)*180/Math.PI}function da(D,I){return cs(I[1],I[0],Nn)+cs(D[1],D[0],Nn)}function ga(D,I){return On(I[0],I[1],Nn)/On(D[0],D[1],Nn)}var bA={mousedown:Ye,mousemove:Ke,mouseup:et},fs="mousedown",ro="mousemove mouseup";function _i(){this.evEl=fs,this.evWin=ro,this.pressed=!1,Kt.apply(this,arguments)}se(_i,Kt,{handler:function(I){var K=bA[I.type];K&Ye&&I.button===0&&(this.pressed=!0),K&Ke&&I.which!==1&&(K=et),this.pressed&&(K&et&&(this.pressed=!1),this.callback(this.manager,K,{pointers:[I],changedPointers:[I],pointerType:Ve,srcEvent:I}))}});var no={pointerdown:Ye,pointermove:Ke,pointerup:et,pointercancel:At,pointerout:At},$i={2:te,3:ke,4:Ve,5:je},Gn="pointerdown",Jn="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Gn="MSPointerDown",Jn="MSPointerMove MSPointerUp MSPointerCancel");function Oe(){this.evEl=Gn,this.evWin=Jn,Kt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}se(Oe,Kt,{handler:function(I){var K=this.store,ve=!1,Me=I.type.toLowerCase().replace("ms",""),Qe=no[Me],Ot=$i[I.pointerType]||I.pointerType,cr=Ot==te,fr=it(K,I.pointerId,"pointerId");Qe&Ye&&(I.button===0||cr)?fr<0&&(K.push(I),fr=K.length-1):Qe&(et|At)&&(ve=!0),!(fr<0)&&(K[fr]=I,this.callback(this.manager,Qe,{pointers:K,changedPointers:[I],pointerType:Ot,srcEvent:I}),ve&&K.splice(fr,1))}});var pa={touchstart:Ye,touchmove:Ke,touchend:et,touchcancel:At},io="touchstart",_a="touchstart touchmove touchend touchcancel";function so(){this.evTarget=io,this.evWin=_a,this.started=!1,Kt.apply(this,arguments)}se(so,Kt,{handler:function(I){var K=pa[I.type];if(K===Ye&&(this.started=!0),!!this.started){var ve=Qi.call(this,I,K);K&(et|At)&&ve[0].length-ve[1].length===0&&(this.started=!1),this.callback(this.manager,K,{pointers:ve[0],changedPointers:ve[1],pointerType:te,srcEvent:I})}}});function Qi(D,I){var K=mt(D.touches),ve=mt(D.changedTouches);return I&(et|At)&&(K=_t(K.concat(ve),"identifier")),[K,ve]}var oo={touchstart:Ye,touchmove:Ke,touchend:et,touchcancel:At},mi="touchstart touchmove touchend touchcancel";function ei(){this.evTarget=mi,this.targetIds={},Kt.apply(this,arguments)}se(ei,Kt,{handler:function(I){var K=oo[I.type],ve=Dn.call(this,I,K);ve&&this.callback(this.manager,K,{pointers:ve[0],changedPointers:ve[1],pointerType:te,srcEvent:I})}});function Dn(D,I){var K=mt(D.touches),ve=this.targetIds;if(I&(Ye|Ke)&&K.length===1)return ve[K[0].identifier]=!0,[K,K];var Me,Qe,Ot=mt(D.changedTouches),cr=[],fr=this.target;if(Qe=K.filter(function(_r){return nt(_r.target,fr)}),I===Ye)for(Me=0;Me<Qe.length;)ve[Qe[Me].identifier]=!0,Me++;for(Me=0;Me<Ot.length;)ve[Ot[Me].identifier]&&cr.push(Ot[Me]),I&(et|At)&&delete ve[Ot[Me].identifier],Me++;if(cr.length)return[_t(Qe.concat(cr),"identifier"),cr]}var ao=2500,en=25;function he(){Kt.apply(this,arguments);var D=ce(this.handler,this);this.touch=new ei(this.manager,D),this.mouse=new _i(this.manager,D),this.primaryTouch=null,this.lastTouches=[]}se(he,Kt,{handler:function(I,K,ve){var Me=ve.pointerType==te,Qe=ve.pointerType==Ve;if(!(Qe&&ve.sourceCapabilities&&ve.sourceCapabilities.firesTouchEvents)){if(Me)Re.call(this,K,ve);else if(Qe&&ft.call(this,ve))return;this.callback(I,K,ve)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Re(D,I){D&Ye?(this.primaryTouch=I.changedPointers[0].identifier,He.call(this,I)):D&(et|At)&&He.call(this,I)}function He(D){var I=D.changedPointers[0];if(I.identifier===this.primaryTouch){var K={x:I.clientX,y:I.clientY};this.lastTouches.push(K);var ve=this.lastTouches,Me=function(){var Qe=ve.indexOf(K);Qe>-1&&ve.splice(Qe,1)};setTimeout(Me,ao)}}function ft(D){for(var I=D.srcEvent.clientX,K=D.srcEvent.clientY,ve=0;ve<this.lastTouches.length;ve++){var Me=this.lastTouches[ve],Qe=Math.abs(I-Me.x),Ot=Math.abs(K-Me.y);if(Qe<=en&&Ot<=en)return!0}return!1}var u=ct(f.style,"touchAction"),B=u!==i,Mt="compute",jt="auto",sr="manipulation",yt="none",Nt="pan-x",jr="pan-y",Ut=hs();function vt(D,I){this.manager=D,this.set(I)}vt.prototype={set:function(D){D==Mt&&(D=this.compute()),B&&this.manager.element.style&&Ut[D]&&(this.manager.element.style[u]=D),this.actions=D.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var D=[];return U(this.manager.recognizers,function(I){we(I.options.enable,[I])&&(D=D.concat(I.getTouchAction()))}),tn(D.join(" "))},preventDefaults:function(D){var I=D.srcEvent,K=D.offsetDirection;if(this.manager.session.prevented){I.preventDefault();return}var ve=this.actions,Me=Ue(ve,yt)&&!Ut[yt],Qe=Ue(ve,jr)&&!Ut[jr],Ot=Ue(ve,Nt)&&!Ut[Nt];if(Me){var cr=D.pointers.length===1,fr=D.distance<2,_r=D.deltaTime<250;if(cr&&fr&&_r)return}if(!(Ot&&Qe)&&(Me||Qe&&K&Pt||Ot&&K&xr))return this.preventSrc(I)},preventSrc:function(D){this.manager.session.prevented=!0,D.preventDefault()}};function tn(D){if(Ue(D,yt))return yt;var I=Ue(D,Nt),K=Ue(D,jr);return I&&K?yt:I||K?I?Nt:jr:Ue(D,sr)?sr:jt}function hs(){if(!B)return!1;var D={},I=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(K){D[K]=I?e.CSS.supports("touch-action",K):!0}),D}var qt=1,Dr=2,ur=4,Ir=8,or=Ir,ti=16,cn=32;function pr(D){this.options=j({},this.defaults,D||{}),this.id=q(),this.manager=null,this.options.enable=be(this.options.enable,!0),this.state=qt,this.simultaneous={},this.requireFail=[]}pr.prototype={defaults:{},set:function(D){return j(this.options,D),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(D){if(M(D,"recognizeWith",this))return this;var I=this.simultaneous;return D=qe(D,this),I[D.id]||(I[D.id]=D,D.recognizeWith(this)),this},dropRecognizeWith:function(D){return M(D,"dropRecognizeWith",this)?this:(D=qe(D,this),delete this.simultaneous[D.id],this)},requireFailure:function(D){if(M(D,"requireFailure",this))return this;var I=this.requireFail;return D=qe(D,this),it(I,D)===-1&&(I.push(D),D.requireFailure(this)),this},dropRequireFailure:function(D){if(M(D,"dropRequireFailure",this))return this;D=qe(D,this);var I=it(this.requireFail,D);return I>-1&&this.requireFail.splice(I,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(D){return!!this.simultaneous[D.id]},emit:function(D){var I=this,K=this.state;function ve(Me){I.manager.emit(Me,D)}K<Ir&&ve(I.options.event+lt(K)),ve(I.options.event),D.additionalEvent&&ve(D.additionalEvent),K>=Ir&&ve(I.options.event+lt(K))},tryEmit:function(D){if(this.canEmit())return this.emit(D);this.state=cn},canEmit:function(){for(var D=0;D<this.requireFail.length;){if(!(this.requireFail[D].state&(cn|qt)))return!1;D++}return!0},recognize:function(D){var I=j({},D);if(!we(this.options.enable,[this,I])){this.reset(),this.state=cn;return}this.state&(or|ti|cn)&&(this.state=qt),this.state=this.process(I),this.state&(Dr|ur|Ir|ti)&&this.tryEmit(I)},process:function(D){},getTouchAction:function(){},reset:function(){}};function lt(D){return D&ti?"cancel":D&Ir?"end":D&ur?"move":D&Dr?"start":""}function z(D){return D==Ft?"down":D==pn?"up":D==Jr?"left":D==un?"right":""}function qe(D,I){var K=I.manager;return K?K.get(D):D}function rn(){pr.apply(this,arguments)}se(rn,pr,{defaults:{pointers:1},attrTest:function(D){var I=this.options.pointers;return I===0||D.pointers.length===I},process:function(D){var I=this.state,K=D.eventType,ve=I&(Dr|ur),Me=this.attrTest(D);return ve&&(K&At||!Me)?I|ti:ve||Me?K&et?I|Ir:I&Dr?I|ur:Dr:cn}});function ds(){rn.apply(this,arguments),this.pX=null,this.pY=null}se(ds,rn,{defaults:{event:"pan",threshold:10,pointers:1,direction:Zn},getTouchAction:function(){var D=this.options.direction,I=[];return D&Pt&&I.push(jr),D&xr&&I.push(Nt),I},directionTest:function(D){var I=this.options,K=!0,ve=D.distance,Me=D.direction,Qe=D.deltaX,Ot=D.deltaY;return Me&I.direction||(I.direction&Pt?(Me=Qe===0?Hr:Qe<0?Jr:un,K=Qe!=this.pX,ve=Math.abs(D.deltaX)):(Me=Ot===0?Hr:Ot<0?pn:Ft,K=Ot!=this.pY,ve=Math.abs(D.deltaY))),D.direction=Me,K&&ve>I.threshold&&Me&I.direction},attrTest:function(D){return rn.prototype.attrTest.call(this,D)&&(this.state&Dr||!(this.state&Dr)&&this.directionTest(D))},emit:function(D){this.pX=D.deltaX,this.pY=D.deltaY;var I=z(D.direction);I&&(D.additionalEvent=this.options.event+I),this._super.emit.call(this,D)}});function Ao(){rn.apply(this,arguments)}se(Ao,rn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[yt]},attrTest:function(D){return this._super.attrTest.call(this,D)&&(Math.abs(D.scale-1)>this.options.threshold||this.state&Dr)},emit:function(D){if(D.scale!==1){var I=D.scale<1?"in":"out";D.additionalEvent=this.options.event+I}this._super.emit.call(this,D)}});function yi(){pr.apply(this,arguments),this._timer=null,this._input=null}se(yi,pr,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[jt]},process:function(D){var I=this.options,K=D.pointers.length===I.pointers,ve=D.distance<I.threshold,Me=D.deltaTime>I.time;if(this._input=D,!ve||!K||D.eventType&(et|At)&&!Me)this.reset();else if(D.eventType&Ye)this.reset(),this._timer=x(function(){this.state=or,this.tryEmit()},I.time,this);else if(D.eventType&et)return or;return cn},reset:function(){clearTimeout(this._timer)},emit:function(D){this.state===or&&(D&&D.eventType&et?this.manager.emit(this.options.event+"up",D):(this._input.timeStamp=R(),this.manager.emit(this.options.event,this._input)))}});function vi(){rn.apply(this,arguments)}se(vi,rn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[yt]},attrTest:function(D){return this._super.attrTest.call(this,D)&&(Math.abs(D.rotation)>this.options.threshold||this.state&Dr)}});function L(){rn.apply(this,arguments)}se(L,rn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Pt|xr,pointers:1},getTouchAction:function(){return ds.prototype.getTouchAction.call(this)},attrTest:function(D){var I=this.options.direction,K;return I&(Pt|xr)?K=D.overallVelocity:I&Pt?K=D.overallVelocityX:I&xr&&(K=D.overallVelocityY),this._super.attrTest.call(this,D)&&I&D.offsetDirection&&D.distance>this.options.threshold&&D.maxPointers==this.options.pointers&&T(K)>this.options.velocity&&D.eventType&et},emit:function(D){var I=z(D.offsetDirection);I&&this.manager.emit(this.options.event+I,D),this.manager.emit(this.options.event,D)}});function ri(){pr.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}se(ri,pr,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[sr]},process:function(D){var I=this.options,K=D.pointers.length===I.pointers,ve=D.distance<I.threshold,Me=D.deltaTime<I.time;if(this.reset(),D.eventType&Ye&&this.count===0)return this.failTimeout();if(ve&&Me&&K){if(D.eventType!=et)return this.failTimeout();var Qe=this.pTime?D.timeStamp-this.pTime<I.interval:!0,Ot=!this.pCenter||On(this.pCenter,D.center)<I.posThreshold;this.pTime=D.timeStamp,this.pCenter=D.center,!Ot||!Qe?this.count=1:this.count+=1,this._input=D;var cr=this.count%I.taps;if(cr===0)return this.hasRequireFailures()?(this._timer=x(function(){this.state=or,this.tryEmit()},I.interval,this),Dr):or}return cn},failTimeout:function(){return this._timer=x(function(){this.state=cn},this.options.interval,this),cn},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==or&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function In(D,I){return I=I||{},I.recognizers=be(I.recognizers,In.defaults.preset),new ps(D,I)}In.VERSION="2.0.7",In.defaults={domEvents:!1,touchAction:Mt,enable:!0,inputTarget:null,inputClass:null,preset:[[vi,{enable:!1}],[Ao,{enable:!1},["rotate"]],[L,{direction:Pt}],[ds,{direction:Pt},["swipe"]],[ri],[ri,{event:"doubletap",taps:2},["tap"]],[yi]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var CA=1,gs=2;function ps(D,I){this.options=j({},In.defaults,I||{}),this.options.inputTarget=this.options.inputTarget||D,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=D,this.input=Xi(this),this.touchAction=new vt(this,this.options.touchAction),_s(this,!0),U(this.options.recognizers,function(K){var ve=this.add(new K[0](K[1]));K[2]&&ve.recognizeWith(K[2]),K[3]&&ve.requireFailure(K[3])},this)}ps.prototype={set:function(D){return j(this.options,D),D.touchAction&&this.touchAction.update(),D.inputTarget&&(this.input.destroy(),this.input.target=D.inputTarget,this.input.init()),this},stop:function(D){this.session.stopped=D?gs:CA},recognize:function(D){var I=this.session;if(!I.stopped){this.touchAction.preventDefaults(D);var K,ve=this.recognizers,Me=I.curRecognizer;(!Me||Me&&Me.state&or)&&(Me=I.curRecognizer=null);for(var Qe=0;Qe<ve.length;)K=ve[Qe],I.stopped!==gs&&(!Me||K==Me||K.canRecognizeWith(Me))?K.recognize(D):K.reset(),!Me&&K.state&(Dr|ur|Ir)&&(Me=I.curRecognizer=K),Qe++}},get:function(D){if(D instanceof pr)return D;for(var I=this.recognizers,K=0;K<I.length;K++)if(I[K].options.event==D)return I[K];return null},add:function(D){if(M(D,"add",this))return this;var I=this.get(D.options.event);return I&&this.remove(I),this.recognizers.push(D),D.manager=this,this.touchAction.update(),D},remove:function(D){if(M(D,"remove",this))return this;if(D=this.get(D),D){var I=this.recognizers,K=it(I,D);K!==-1&&(I.splice(K,1),this.touchAction.update())}return this},on:function(D,I){if(D!==i&&I!==i){var K=this.handlers;return U(Je(D),function(ve){K[ve]=K[ve]||[],K[ve].push(I)}),this}},off:function(D,I){if(D!==i){var K=this.handlers;return U(Je(D),function(ve){I?K[ve]&&K[ve].splice(it(K[ve],I),1):delete K[ve]}),this}},emit:function(D,I){this.options.domEvents&&wi(D,I);var K=this.handlers[D]&&this.handlers[D].slice();if(!(!K||!K.length)){I.type=D,I.preventDefault=function(){I.srcEvent.preventDefault()};for(var ve=0;ve<K.length;)K[ve](I),ve++}},destroy:function(){this.element&&_s(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function _s(D,I){var K=D.element;if(K.style){var ve;U(D.options.cssProps,function(Me,Qe){ve=ct(K.style,Qe),I?(D.oldCssProps[ve]=K.style[ve],K.style[ve]=Me):K.style[ve]=D.oldCssProps[ve]||""}),I||(D.oldCssProps={})}}function wi(D,I){var K=r.createEvent("Event");K.initEvent(D,!0,!0),K.gesture=I,I.target.dispatchEvent(K)}j(In,{INPUT_START:Ye,INPUT_MOVE:Ke,INPUT_END:et,INPUT_CANCEL:At,STATE_POSSIBLE:qt,STATE_BEGAN:Dr,STATE_CHANGED:ur,STATE_ENDED:Ir,STATE_RECOGNIZED:or,STATE_CANCELLED:ti,STATE_FAILED:cn,DIRECTION_NONE:Hr,DIRECTION_LEFT:Jr,DIRECTION_RIGHT:un,DIRECTION_UP:pn,DIRECTION_DOWN:Ft,DIRECTION_HORIZONTAL:Pt,DIRECTION_VERTICAL:xr,DIRECTION_ALL:Zn,Manager:ps,Input:Kt,TouchAction:vt,TouchInput:ei,MouseInput:_i,PointerEventInput:Oe,TouchMouseInput:he,SingleTouchInput:so,Recognizer:pr,AttrRecognizer:rn,Tap:ri,Pan:ds,Swipe:L,Pinch:Ao,Rotate:vi,Press:yi,on:Pe,off:Xe,each:U,merge:re,extend:G,assign:j,inherit:se,bindFn:ce,prefixed:ct});var ma=typeof e<"u"?e:typeof self<"u"?self:{};ma.Hammer=In,t.exports?t.exports=In:e[n]=In})(window,document,"Hammer")}(Qh)),Qh.exports}var nu=Yx();const Kx=$d(nu),Di=Ew({__proto__:null,default:Kx},[nu]),Gy=1,Jy=2,Id=4,Zx={mousedown:Gy,mousemove:Jy,mouseup:Id};function qx(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return!0;return!1}function Gx(t){const e=t.prototype.handler;t.prototype.handler=function(n){const i=this.store;n.button>0&&n.type==="pointerdown"&&(qx(i,o=>o.pointerId===n.pointerId)||i.push(n)),e.call(this,n)}}function Jx(t){t.prototype.handler=function(r){let n=Zx[r.type];n&Gy&&r.button>=0&&(this.pressed=!0),n&Jy&&r.buttons===0&&(n=Id),this.pressed&&(n&Id&&(this.pressed=!1),this.callback(this.manager,n,{pointers:[r],changedPointers:[r],pointerType:"mouse",srcEvent:r}))}}Gx(nu.PointerEventInput);Jx(nu.MouseInput);const eM=nu.Manager;class Bf{constructor(e,r,n){this.element=e,this.callback=r,this.options={enable:!0,...n}}}const tM=Di?[[Di.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Di.Rotate,{enable:!1}],[Di.Pinch,{enable:!1}],[Di.Swipe,{enable:!1}],[Di.Pan,{threshold:0,enable:!1}],[Di.Press,{enable:!1}],[Di.Tap,{event:"doubletap",taps:2,enable:!1}],[Di.Tap,{event:"anytap",enable:!1}],[Di.Tap,{enable:!1}]]:null,im={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},rM={doubletap:["tap"]},nM={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},Rg={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},iM={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},sm={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},sM=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",nA=typeof window<"u"?window:global;let Fd=!1;try{const t={get passive(){return Fd=!0,!0}};nA.addEventListener("test",null,t),nA.removeEventListener("test",null)}catch{Fd=!1}const oM=sM.indexOf("firefox")!==-1,{WHEEL_EVENTS:aM}=Rg,om="wheel",am=4.000244140625,AM=40,lM=.25;class uM extends Bf{constructor(e,r,n){super(e,r,n),this.handleEvent=i=>{if(!this.options.enable)return;let o=i.deltaY;nA.WheelEvent&&(oM&&i.deltaMode===nA.WheelEvent.DOM_DELTA_PIXEL&&(o/=nA.devicePixelRatio),i.deltaMode===nA.WheelEvent.DOM_DELTA_LINE&&(o*=AM)),o!==0&&o%am===0&&(o=Math.floor(o/am)),i.shiftKey&&o&&(o=o*lM),this.callback({type:om,center:{x:i.clientX,y:i.clientY},delta:-o,srcEvent:i,pointerType:"mouse",target:i.target})},this.events=(this.options.events||[]).concat(aM),this.events.forEach(i=>e.addEventListener(i,this.handleEvent,Fd?{passive:!1}:!1))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,r){e===om&&(this.options.enable=r)}}const{MOUSE_EVENTS:cM}=Rg,Am="pointermove",lm="pointerover",um="pointerout",cm="pointerenter",fm="pointerleave";class fM extends Bf{constructor(e,r,n){super(e,r,n),this.handleEvent=o=>{this.handleOverEvent(o),this.handleOutEvent(o),this.handleEnterEvent(o),this.handleLeaveEvent(o),this.handleMoveEvent(o)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat(cM),this.events.forEach(o=>e.addEventListener(o,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,r){e===Am&&(this.enableMoveEvent=r),e===lm&&(this.enableOverEvent=r),e===um&&(this.enableOutEvent=r),e===cm&&(this.enableEnterEvent=r),e===fm&&(this.enableLeaveEvent=r)}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this._emit(lm,e)}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this._emit(um,e)}handleEnterEvent(e){this.enableEnterEvent&&e.type==="mouseenter"&&this._emit(cm,e)}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this._emit(fm,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.buttons===0&&(this.pressed=!1),this.pressed||this._emit(Am,e);break;case"mouseup":this.pressed=!1;break}}_emit(e,r){this.callback({type:e,center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:"mouse",target:r.target})}}const{KEY_EVENTS:hM}=Rg,hm="keydown",dm="keyup";class dM extends Bf{constructor(e,r,n){super(e,r,n),this.handleEvent=i=>{const o=i.target||i.srcElement;o.tagName==="INPUT"&&o.type==="text"||o.tagName==="TEXTAREA"||(this.enableDownEvent&&i.type==="keydown"&&this.callback({type:hm,srcEvent:i,key:i.key,target:i.target}),this.enableUpEvent&&i.type==="keyup"&&this.callback({type:dm,srcEvent:i,key:i.key,target:i.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(hM),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,r){e===hm&&(this.enableDownEvent=r),e===dm&&(this.enableUpEvent=r)}}const gm="contextmenu";class gM extends Bf{constructor(e,r,n){super(e,r,n),this.handleEvent=i=>{this.options.enable&&this.callback({type:gm,center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:"mouse",target:i.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,r){e===gm&&(this.options.enable=r)}}const pm=1,Ld=2,_m=4,pM={pointerdown:pm,pointermove:Ld,pointerup:_m,mousedown:pm,mousemove:Ld,mouseup:_m},_M=0,mM=1,yM=2,vM=1,wM=2,TM=4;function EM(t){const e=pM[t.srcEvent.type];if(!e)return null;const{buttons:r,button:n}=t.srcEvent;let i=!1,o=!1,f=!1;return e===Ld?(i=!!(r&vM),o=!!(r&TM),f=!!(r&wM)):(i=n===_M,o=n===mM,f=n===yM),{leftButton:i,middleButton:o,rightButton:f}}function SM(t,e){const r=t.center;if(!r)return null;const n=e.getBoundingClientRect(),i=n.width/e.offsetWidth||1,o=n.height/e.offsetHeight||1,f={x:(r.x-n.left-e.clientLeft)/i,y:(r.y-n.top-e.clientTop)/o};return{center:r,offsetCenter:f}}const Yh={srcElement:"root",priority:0};class bM{constructor(e){this.handleEvent=r=>{if(this.isEmpty())return;const n=this._normalizeEvent(r);let i=r.srcEvent.target;for(;i&&i!==n.rootElement;){if(this._emit(n,i),n.handled)return;i=i.parentNode}this._emit(n,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,r,n,i=!1,o=!1){const{handlers:f,handlersByElement:p}=this;let y=Yh;typeof n=="string"||n&&n.addEventListener?y={...Yh,srcElement:n}:n&&(y={...Yh,...n});let T=p.get(y.srcElement);T||(T=[],p.set(y.srcElement,T));const R={type:e,handler:r,srcElement:y.srcElement,priority:y.priority};i&&(R.once=!0),o&&(R.passive=!0),f.push(R),this._active=this._active||!R.passive;let x=T.length-1;for(;x>=0&&!(T[x].priority>=R.priority);)x--;T.splice(x+1,0,R)}remove(e,r){const{handlers:n,handlersByElement:i}=this;for(let o=n.length-1;o>=0;o--){const f=n[o];if(f.type===e&&f.handler===r){n.splice(o,1);const p=i.get(f.srcElement);p.splice(p.indexOf(f),1),p.length===0&&i.delete(f.srcElement)}}this._active=n.some(o=>!o.passive)}_emit(e,r){const n=this.handlersByElement.get(r);if(n){let i=!1;const o=()=>{e.handled=!0},f=()=>{e.handled=!0,i=!0},p=[];for(let y=0;y<n.length;y++){const{type:T,handler:R,once:x}=n[y];if(R({...e,type:T,stopPropagation:o,stopImmediatePropagation:f}),x&&p.push(n[y]),i)break}for(let y=0;y<p.length;y++){const{type:T,handler:R}=p[y];this.remove(T,R)}}}_normalizeEvent(e){const r=this.eventManager.getElement();return{...e,...EM(e),...SM(e,r),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:r}}}const CM={events:null,recognizers:null,recognizerOptions:{},Manager:eM,touchAction:"none",tabIndex:0};class RM{constructor(e=null,r){this._onBasicInput=i=>{const{srcEvent:o}=i,f=nM[o.type];f&&this.manager.emit(f,i)},this._onOtherEvent=i=>{this.manager.emit(i.type,i)},this.options={...CM,...r},this.events=new Map,this.setElement(e);const{events:n}=this.options;n&&this.on(n)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:r}=this,n=r.Manager;this.manager=new n(e,{touchAction:r.touchAction,recognizers:r.recognizers||tM}).on("hammer.input",this._onBasicInput),r.recognizers||Object.keys(im).forEach(i=>{const o=this.manager.get(i);o&&im[i].forEach(f=>{o.recognizeWith(f)})});for(const i in r.recognizerOptions){const o=this.manager.get(i);if(o){const f=r.recognizerOptions[i];delete f.enable,o.set(f)}}this.wheelInput=new uM(e,this._onOtherEvent,{enable:!1}),this.moveInput=new fM(e,this._onOtherEvent,{enable:!1}),this.keyInput=new dM(e,this._onOtherEvent,{enable:!1,tabIndex:r.tabIndex}),this.contextmenuInput=new gM(e,this._onOtherEvent,{enable:!1});for(const[i,o]of this.events)o.isEmpty()||(this._toggleRecognizer(o.recognizerName,!0),this.manager.on(i,o.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,r,n){this._addEventHandler(e,r,n,!1)}once(e,r,n){this._addEventHandler(e,r,n,!0)}watch(e,r,n){this._addEventHandler(e,r,n,!1,!0)}off(e,r){this._removeEventHandler(e,r)}_toggleRecognizer(e,r){const{manager:n}=this;if(!n)return;const i=n.get(e);if(i&&i.options.enable!==r){i.set({enable:r});const o=rM[e];o&&!this.options.recognizers&&o.forEach(f=>{const p=n.get(f);r?(p.requireFailure(e),i.dropRequireFailure(f)):p.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,r),this.moveInput.enableEventType(e,r),this.keyInput.enableEventType(e,r),this.contextmenuInput.enableEventType(e,r)}_addEventHandler(e,r,n,i,o){if(typeof e!="string"){n=r;for(const R in e)this._addEventHandler(R,e[R],n,i,o);return}const{manager:f,events:p}=this,y=sm[e]||e;let T=p.get(y);T||(T=new bM(this),p.set(y,T),T.recognizerName=iM[y]||y,f&&f.on(y,T.handleEvent)),T.add(e,r,n,i,o),T.isEmpty()||this._toggleRecognizer(T.recognizerName,!0)}_removeEventHandler(e,r){if(typeof e!="string"){for(const f in e)this._removeEventHandler(f,e[f]);return}const{events:n}=this,i=sm[e]||e,o=n.get(i);if(o&&(o.remove(e,r),o.isEmpty())){const{recognizerName:f}=o;let p=!1;for(const y of n.values())if(y.recognizerName===f&&!y.isEmpty()){p=!0;break}p||this._toggleRecognizer(f,!1)}}}function Vs(){}const PM=({isDragging:t})=>t?"grabbing":"grab",ev={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,parameters:{},parent:null,device:null,deviceProps:{type:"webgl"},gl:null,glOptions:{},canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,widgets:[],onDeviceInitialized:Vs,onWebGLInitialized:Vs,onResize:Vs,onViewStateChange:Vs,onInteractionStateChange:Vs,onBeforeRender:Vs,onAfterRender:Vs,onLoad:Vs,onError:t=>tr.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:PM,getTooltip:null,debug:!1,drawPickingColors:!1};class Pg{constructor(e){this.width=0,this.height=0,this.userData={},this.device=null,this.canvas=null,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this.eventManager=null,this.widgetManager=null,this.tooltip=null,this.animationLoop=null,this.cursorState={isHovering:!1,isDragging:!1},this.stats=new Nf({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this._lastPointerDownInfo=null,this._onPointerMove=n=>{const{_pickRequest:i}=this;if(n.type==="pointerleave")i.x=-1,i.y=-1,i.radius=0;else{if(n.leftButton||n.rightButton)return;{const o=n.offsetCenter;if(!o)return;i.x=o.x,i.y=o.y,i.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:i.x,y:i.y}),i.event=n},this._onEvent=n=>{const i=bd[n.type],o=n.offsetCenter;if(!i||!o||!this.layerManager)return;const f=this.layerManager.getLayers(),p=this.deckPicker.getLastPickedObject({x:o.x,y:o.y,layers:f,viewports:this.getViewports(o)},this._lastPointerDownInfo),{layer:y}=p,T=y&&(y[i.handler]||y.props[i.handler]),R=this.props[i.handler];let x=!1;T&&(x=T.call(y,p,n)),x||(R==null||R(p,n),this.widgetManager.onEvent(p,n))},this._onPointerDown=n=>{const i=n.offsetCenter,o=this._pick("pickObject","pickObject Time",{x:i.x,y:i.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=o.result[0]||o.emptyInfo},this.props={...ev,...e},e=this.props,e.viewState&&e.initialViewState&&tr.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),this.viewState=this.props.initialViewState,e.device?this.device=e.device:e.gl&&(e.gl instanceof WebGLRenderingContext&&tr.error("WebGL1 context not supported.")(),this.device=Ll.attach(e.gl));let r=this.device;r||(oA.registerDevices([Ll]),r=oA.createDevice({...e.deviceProps,canvas:this._createCanvas(e)})),this.animationLoop=this._createAnimationLoop(r,e),this.setProps(e),e._typedArrayManagerProps&&mA.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,r,n,i,o,f,p,y,T,R;(e=this.animationLoop)==null||e.stop(),(r=this.animationLoop)==null||r.destroy(),this.animationLoop=null,this._lastPointerDownInfo=null,(n=this.layerManager)==null||n.finalize(),this.layerManager=null,(i=this.viewManager)==null||i.finalize(),this.viewManager=null,(o=this.effectManager)==null||o.finalize(),this.effectManager=null,(f=this.deckRenderer)==null||f.finalize(),this.deckRenderer=null,(p=this.deckPicker)==null||p.finalize(),this.deckPicker=null,(y=this.eventManager)==null||y.destroy(),this.eventManager=null,(T=this.widgetManager)==null||T.finalize(),this.widgetManager=null,!this.props.canvas&&!this.props.device&&!this.props.gl&&this.canvas&&((R=this.canvas.parentElement)==null||R.removeChild(this.canvas),this.canvas=null)}setProps(e){var n;this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&tr.removed("onLayerHover","onHover")(),"onLayerClick"in e&&tr.removed("onLayerClick","onClick")(),e.initialViewState&&!fi(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const r=Object.create(this.props);Object.assign(r,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),(n=this.animationLoop)==null||n.setProps(r),this.layerManager&&(this.viewManager.setProps(r),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(r),this.effectManager.setProps(r),this.deckRenderer.setProps(r),this.deckPicker.setProps(r),this.widgetManager.setProps(r)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let r=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const n=this.viewManager.needsRedraw(e),i=this.layerManager.needsRedraw(e),o=this.effectManager.needsRedraw(e),f=this.deckRenderer.needsRedraw(e);return r=r||n||i||o||f,r}redraw(e){if(!this.layerManager)return;let r=this.needsRedraw({clearRedrawFlags:!0});r=e||r,r&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(r):this._drawLayers(r))}get isInitialized(){return this.viewManager!==null}getViews(){return qr(this.viewManager),this.viewManager.views}getViewports(e){return qr(this.viewManager),this.viewManager.getViewports(e)}getCanvas(){return this.canvas}pickObject(e){const r=this._pick("pickObject","pickObject Time",e).result;return r.length?r[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,r=!1){for(const n in e)this.layerManager.resourceManager.add({resourceId:n,data:e[n],forceUpdate:r})}_removeResources(e){for(const r of e)this.layerManager.resourceManager.remove(r)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_addDefaultShaderModule(e){this.layerManager.addDefaultShaderModule(e)}_removeDefaultShaderModule(e){var r;(r=this.layerManager)==null||r.removeDefaultShaderModule(e)}_pick(e,r,n){qr(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(r).timeStart();const o=this.deckPicker[e]({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...n});return i.get(r).timeEnd(),o}_createCanvas(e){let r=e.canvas;return typeof r=="string"&&(r=document.getElementById(r),qr(r)),r||(r=document.createElement("canvas"),r.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(r)),Object.assign(r.style,e.style),r}_setCanvasSize(e){var i;if(!this.canvas)return;const{width:r,height:n}=e;if(r||r===0){const o=Number.isFinite(r)?`${r}px`:r;this.canvas.style.width=o}if(n||n===0){const o=Number.isFinite(n)?`${n}px`:n;this.canvas.style.position=((i=e.style)==null?void 0:i.position)||"absolute",this.canvas.style.height=o}}_updateCanvasSize(){var i,o;const{canvas:e}=this;if(!e)return;const r=e.clientWidth??e.width,n=e.clientHeight??e.height;(r!==this.width||n!==this.height)&&(this.width=r,this.height=n,(i=this.viewManager)==null||i.setProps({width:r,height:n}),(o=this.layerManager)==null||o.activateViewport(this.getViewports()[0]),this.props.onResize({width:r,height:n}))}_createAnimationLoop(e,r){const{gl:n,onError:i,useDevicePixels:o}=r;return new GP({device:e,useDevicePixels:o,autoResizeDrawingBuffer:!n,autoResizeViewport:!1,onInitialize:f=>this._setDevice(f.device),onRender:this._onRenderFrame.bind(this),onError:i})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){const{views:e}=this.props,r=Array.isArray(e)?e:e?[e]:[new Tg({id:"default-view"})];return r.length&&this.props.controller&&(r[0].props.controller=this.props.controller),r}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){var r,n,i;const{_pickRequest:e}=this;if(e.event){const{result:o,emptyInfo:f}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=o.length>0;let p=f,y=!1;for(const T of o)p=T,y=((r=T.layer)==null?void 0:r.onHover(T,e.event))||y;y||((i=(n=this.props).onHover)==null||i.call(n,p,e.event),this.widgetManager.onHover(p,e.event)),e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setDevice(e){var i,o;if(this.device=e,!this.animationLoop)return;this.canvas||(this.canvas=(i=this.device.canvasContext)==null?void 0:i.canvas),this.device.setParametersWebGL({blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onDeviceInitialized(this.device),this.device instanceof Ll&&this.props.onWebGLInitialized(this.device.gl);const r=new Oy;r.play(),this.animationLoop.attachTimeline(r),this.eventManager=new RM(this.props.parent||this.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const f in bd)this.eventManager.on(f,this._onEvent);this.viewManager=new p4({timeline:r,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const n=this.viewManager.getViewports()[0];this.layerManager=new g4(this.device,{deck:this,stats:this.stats,viewport:n,timeline:r}),this.effectManager=new N4({deck:this,device:this.device}),this.deckRenderer=new I4(this.device),this.deckPicker=new z4(this.device),this.widgetManager=new W4({deck:this,parentElement:(o=this.canvas)==null?void 0:o.parentElement}),this.widgetManager.addDefault(new $4),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,r){var f;const{device:n,gl:i}=this.layerManager.context;this.props.onBeforeRender({device:n,gl:i});const o={target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...r};(f=this.deckRenderer)==null||f.renderLayers(o),o.pass==="screen"&&this.widgetManager.onRedraw({viewports:o.viewports,layers:o.layers}),this.props.onAfterRender({device:n,gl:i})}_onRenderFrame(){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),tr.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const r=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:r},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const r=this.animationLoop.stats;e.get("GPU Time").addTime(r.get("GPU Time").lastTiming),e.get("CPU Time").addTime(r.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:r}=this;e.fps=r.get("frameRate").getHz(),e.setPropsTime=r.get("setProps Time").time,e.updateAttributesTime=r.get("Update Attributes").time,e.framesRedrawn=r.get("Redraw Count").count,e.pickTime=r.get("pickObject Time").time+r.get("pickMultipleObjects Time").time+r.get("pickObjects Time").time,e.pickCount=r.get("Pick Count").count,e.gpuTime=r.get("GPU Time").time,e.cpuTime=r.get("CPU Time").time,e.gpuTimePerFrame=r.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=r.get("CPU Time").getAverageTime();const n=oA.stats.get("Memory Usage");e.bufferMemory=n.get("Buffer Memory").count,e.textureMemory=n.get("Texture Memory").count,e.renderbufferMemory=n.get("Renderbuffer Memory").count,e.gpuMemory=n.get("GPU Memory").count}}Pg.defaultProps=ev;Pg.VERSION=fS;function kM(t){switch(t){case"float64":return Float64Array;case"uint8":case"unorm8":return Uint8ClampedArray;default:return ey(t)}}const xM=J1;function Pc(t,e){return{attribute:t,format:e.size>1?`${e.type}x${e.size}`:e.type,byteOffset:e.offset||0}}function qo(t){return t.stride||t.size*t.bytesPerElement}function MM(t,e){return t.type===e.type&&t.size===e.size&&qo(t)===qo(e)&&(t.offset||0)===(e.offset||0)}function Ud(t,e){e.offset&&tr.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const r=qo(t),n=e.vertexOffset!==void 0?e.vertexOffset:t.vertexOffset||0,i=e.elementOffset||0,o=n*r+i*t.bytesPerElement+(t.offset||0);return{...e,offset:o,stride:r}}function NM(t,e){const r=Ud(t,e);return{high:r,low:{...r,offset:r.offset+t.size*4}}}class OM{constructor(e,r,n){this._buffer=null,this.device=e,this.id=r.id||"",this.size=r.size||1;const i=r.logicalType||r.type,o=i==="float64";let{defaultValue:f}=r;f=Number.isFinite(f)?[f]:f||new Array(this.size).fill(0);let p;o?p="float32":!i&&r.isIndexed?p="uint32":p=i||"float32";let y=kM(i||p);this.doublePrecision=o,o&&r.fp64===!1&&(y=Float32Array),this.value=null,this.settings={...r,defaultType:y,defaultValue:f,logicalType:i,type:p,normalized:p.includes("norm"),size:this.size,bytesPerElement:y.BYTES_PER_ELEMENT},this.state={...n,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1}}get isConstant(){return this.state.constant}get buffer(){return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*qo(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),mA.release(this.state.allocatedValue)}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(e=this.id,r=null){const n={};if(this.state.constant){const i=this.value;if(r){const o=Ud(this.getAccessor(),r),f=o.offset/i.BYTES_PER_ELEMENT,p=o.size||this.size;n[e]=i.subarray(f,f+p)}else n[e]=i}else n[e]=this.getBuffer();return this.doublePrecision&&(this.value instanceof Float64Array?n[`${e}64Low`]=n[e]:n[`${e}64Low`]=new Float32Array(this.size)),n}_getBufferLayout(e=this.id,r=null){const n=this.getAccessor(),i=[],o={name:this.id,byteStride:qo(n),attributes:i};if(this.doublePrecision){const f=NM(n,r||{});i.push(Pc(e,{...n,...f.high}),Pc(`${e}64Low`,{...n,...f.low}))}else if(r){const f=Ud(n,r);i.push(Pc(e,{...n,...f}))}else i.push(Pc(e,n));return o}setAccessor(e){this.state.bufferAccessor=e}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const r=Array.from(this.value);e=[r,r]}else{const{value:r,numInstances:n,size:i}=this,o=n*i;if(r&&o&&r.length>=o){const f=new Array(i).fill(1/0),p=new Array(i).fill(-1/0);for(let y=0;y<o;)for(let T=0;T<i;T++){const R=r[y++];R<f[T]&&(f[T]=R),R>p[T]&&(p[T]=R)}e=[f,p]}}return this.state.bounds=e,e}setData(e){const{state:r}=this;let n;ArrayBuffer.isView(e)?n={value:e}:e instanceof Ar?n={buffer:e}:n=e;const i={...this.settings,...n};if(ArrayBuffer.isView(n.value)){if(!n.type)if(this.doublePrecision&&n.value instanceof Float64Array)i.type="float32";else{const f=xM(n.value);i.type=i.normalized?f.replace("int","norm"):f}i.bytesPerElement=n.value.BYTES_PER_ELEMENT,i.stride=qo(i)}if(r.bounds=null,n.constant){let o=n.value;if(o=this._normalizeValue(o,[],0),this.settings.normalized&&(o=this.normalizeConstant(o)),!(!r.constant||!this._areValuesEqual(o,this.value)))return!1;r.externalBuffer=null,r.constant=!0,this.value=ArrayBuffer.isView(o)?o:new Float32Array(o)}else if(n.buffer){const o=n.buffer;r.externalBuffer=o,r.constant=!1,this.value=n.value||null}else if(n.value){this._checkExternalBuffer(n);let o=n.value;r.externalBuffer=null,r.constant=!1,this.value=o;let{buffer:f}=this;const p=qo(i),y=(i.vertexOffset||0)*p;if(this.doublePrecision&&o instanceof Float64Array&&(o=Dh(o,i)),this.settings.isIndexed){const R=this.settings.defaultType;o.constructor!==R&&(o=new R(o))}const T=o.byteLength+y+p*2;(!f||f.byteLength<T)&&(f=this._createBuffer(T)),f.write(o,y)}return this.setAccessor(i),!0}updateSubBuffer(e={}){this.state.bounds=null;const r=this.value,{startOffset:n=0,endOffset:i}=e;this.buffer.write(this.doublePrecision&&r instanceof Float64Array?Dh(r,{size:this.size,startIndex:n,endIndex:i}):r.subarray(n,i),n*r.BYTES_PER_ELEMENT+this.byteOffset)}allocate(e,r=!1){const{state:n}=this,i=n.allocatedValue,o=mA.allocate(i,e+1,{size:this.size,type:this.settings.defaultType,copy:r});this.value=o;const{byteOffset:f}=this;let{buffer:p}=this;return(!p||p.byteLength<o.byteLength+f)&&(p=this._createBuffer(o.byteLength+f),r&&i&&p.write(i instanceof Float64Array?Dh(i,this):i,f)),n.allocatedValue=o,n.constant=!1,n.externalBuffer=null,this.setAccessor(this.settings),!0}_checkExternalBuffer(e){const{value:r}=e;if(!ArrayBuffer.isView(r))throw new Error(`Attribute ${this.id} value is not TypedArray`);const n=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=r.BYTES_PER_ELEMENT<4),i)throw new Error(`Attribute ${this.id} does not support ${r.constructor.name}`);!(r instanceof n)&&this.settings.normalized&&!("normalized"in e)&&tr.warn(`Attribute ${this.id} is normalized`)()}normalizeConstant(e){switch(this.settings.type){case"snorm8":return new Float32Array(e).map(r=>(r+128)/255*2-1);case"snorm16":return new Float32Array(e).map(r=>(r+32768)/65535*2-1);case"unorm8":return new Float32Array(e).map(r=>r/255);case"unorm16":return new Float32Array(e).map(r=>r/65535);default:return e}}_normalizeValue(e,r,n){const{defaultValue:i,size:o}=this.settings;if(Number.isFinite(e))return r[n]=e,r;if(!e){let f=o;for(;--f>=0;)r[n+f]=i[f];return r}switch(o){case 4:r[n+3]=Number.isFinite(e[3])?e[3]:i[3];case 3:r[n+2]=Number.isFinite(e[2])?e[2]:i[2];case 2:r[n+1]=Number.isFinite(e[1])?e[1]:i[1];case 1:r[n+0]=Number.isFinite(e[0])?e[0]:i[0];break;default:let f=o;for(;--f>=0;)r[n+f]=Number.isFinite(e[f])?e[f]:i[f]}return r}_areValuesEqual(e,r){if(!e||!r)return!1;const{size:n}=this;for(let i=0;i<n;i++)if(e[i]!==r[i])return!1;return!0}_createBuffer(e){var i;this._buffer&&this._buffer.destroy();const{isIndexed:r,type:n}=this.settings;return this._buffer=this.device.createBuffer({...(i=this._buffer)==null?void 0:i.props,id:this.id,usage:r?Ar.INDEX:Ar.VERTEX,indexType:r?n:void 0,byteLength:e}),this._buffer}}const mm=[],ym=[];function Vf(t,e=0,r=1/0){let n=mm;const i={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?n=t:t.length>0&&(ym.length=t.length,n=ym):n=mm,(e>0||Number.isFinite(r))&&(n=(Array.isArray(n)?n:Array.from(n)).slice(e,r),i.index=e-1),{iterable:n,objectInfo:i}}function tv(t){return t&&t[Symbol.asyncIterator]}function rv(t,e){const{size:r,stride:n,offset:i,startIndices:o,nested:f}=e,p=t.BYTES_PER_ELEMENT,y=n?n/p:r,T=i?i/p:0,R=Math.floor((t.length-T)/y);return(x,{index:M,target:U})=>{if(!o){const re=M*y+T;for(let se=0;se<r;se++)U[se]=t[re+se];return U}const W=o[M],j=o[M+1]||R;let G;if(f){G=new Array(j-W);for(let re=W;re<j;re++){const se=re*y+T;U=new Array(r);for(let ce=0;ce<r;ce++)U[ce]=t[se+ce];G[re-W]=U}}else if(y===r)G=t.subarray(W*r+T,j*r+T);else{G=new t.constructor((j-W)*r);let re=0;for(let se=W;se<j;se++){const ce=se*y+T;for(let we=0;we<r;we++)G[re++]=t[ce+we]}}return G}}const DM=[],Fc=[[0,1/0]];function IM(t,e){if(t===Fc||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const r=[],n=t.length;let i=0;for(let o=0;o<n;o++){const f=t[o];f[1]<e[0]?(r.push(f),i=o+1):f[0]>e[1]?r.push(f):e=[Math.min(f[0],e[0]),Math.max(f[1],e[1])]}return r.splice(i,0,e),r}const FM={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function nv(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const r=t.type||"interpolation";return{...FM[r],...e,...t,type:r}}class iv extends OM{constructor(e,r){super(e,r,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,layoutChanged:!1,updateRanges:Fc}),this.constant=!1,this.settings.update=r.update||(r.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const r=this.state.needsRedraw;return this.state.needsRedraw=r&&!e,r}layoutChanged(){return this.state.layoutChanged}setAccessor(e){var r;(r=this.state).layoutChanged||(r.layoutChanged=!MM(e,this.getAccessor())),super.setAccessor(e)}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:r}=this.settings,n=this.settings.transition,i=Array.isArray(r)?e[r.find(o=>e[o])]:e[r];return nv(i,n)}setNeedsUpdate(e=this.id,r){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),r){const{startRow:n=0,endRow:i=1/0}=r;this.state.updateRanges=IM(this.state.updateRanges,[n,i])}else this.state.updateRanges=Fc}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=DM}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:r,settings:n}=this;return n.noAlloc?!1:n.update?(super.allocate(e,r.updateRanges!==Fc),!0):!1}updateBuffer({numInstances:e,data:r,props:n,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:f,noAlloc:p}}=this;let y=!0;if(f){for(const[T,R]of o)f.call(i,this,{data:r,startRow:T,endRow:R,props:n,numInstances:e});if(this.value)if(this.constant||!this.buffer||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[T,R]of o){const x=Number.isFinite(T)?this.getVertexOffset(T):0,M=Number.isFinite(R)?this.getVertexOffset(R):p||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:x,endOffset:M})}this._checkAttributeArray()}else y=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),y}setConstantValue(e){return e===void 0||typeof e=="function"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:r}=this;return e?(this.clearNeedsUpdate(),r.lastExternalBuffer===e||(r.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(r.lastExternalBuffer=null,!1)}setBinaryValue(e,r=null){const{state:n,settings:i}=this;if(!e)return n.binaryValue=null,n.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(n.binaryValue===e)return this.clearNeedsUpdate(),!0;if(n.binaryValue=e,this.setNeedsRedraw(),i.transform||r!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const f=e;qr(ArrayBuffer.isView(f.value),`invalid ${i.accessor}`);const p=!!f.size&&f.size!==this.size;return n.binaryAccessor=rv(f.value,{size:f.size||this.size,stride:f.stride,offset:f.offset,startIndices:r,nested:p}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:r}=this;return(r?e<r.length?r[e]:this.numInstances:e)*this.size}getValue(){const e=this.settings.shaderAttributes,r=super.getValue();if(!e)return r;for(const n in e)Object.assign(r,super.getValue(n,e[n]));return r}getBufferLayout(e){this.state.layoutChanged=!1;const r=this.settings.shaderAttributes,n=super._getBufferLayout(),{stepMode:i}=this.settings;if(i==="dynamic"?n.stepMode=e?e.isInstanced?"instance":"vertex":"instance":n.stepMode=i??"vertex",!r)return n;for(const o in r){const f=super._getBufferLayout(o,r[o]);n.attributes.push(...f.attributes)}return n}_autoUpdater(e,{data:r,startRow:n,endRow:i,props:o,numInstances:f}){if(e.constant)return;const{settings:p,state:y,value:T,size:R,startIndices:x}=e,{accessor:M,transform:U}=p,W=y.binaryAccessor||(typeof M=="function"?M:o[M]);qr(typeof W=="function",`accessor "${M}" is not a function`);let j=e.getVertexOffset(n);const{iterable:G,objectInfo:re}=Vf(r,n,i);for(const se of G){re.index++;let ce=W(se,re);if(U&&(ce=U.call(this,ce)),x){const we=(re.index<x.length-1?x[re.index+1]:f)-x[re.index];if(ce&&Array.isArray(ce[0])){let be=j;for(const Pe of ce)e._normalizeValue(Pe,T,be),be+=R}else ce&&ce.length>R?T.set(ce,j):(e._normalizeValue(ce,re.target,0),u4({target:T,source:re.target,start:j,count:we}));j+=we*R}else e._normalizeValue(ce,T,j),j+=R}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error(`Attribute ${this.id} missing update or accessor`)}_checkAttributeArray(){const{value:e}=this,r=Math.min(4,this.size);if(e&&e.length>=r){let n=!0;switch(r){case 4:n=n&&Number.isFinite(e[3]);case 3:n=n&&Number.isFinite(e[2]);case 2:n=n&&Number.isFinite(e[1]);case 1:n=n&&Number.isFinite(e[0]);break;default:n=!1}if(!n)throw new Error(`Illegal attribute generated for ${this.id}`)}}}function Kh(t){const{source:e,target:r,start:n=0,size:i,getData:o}=t,f=t.end||r.length,p=e.length,y=f-n;if(p>y){r.set(e.subarray(0,y),n);return}if(r.set(e,n),!o)return;let T=p;for(;T<y;){const R=o(T,e);for(let x=0;x<i;x++)r[n+T]=R[x]||0,T++}}function LM({source:t,target:e,size:r,getData:n,sourceStartIndices:i,targetStartIndices:o}){if(!i||!o)return Kh({source:t,target:e,size:r,getData:n}),e;let f=0,p=0;const y=n&&((R,x)=>n(R+p,x)),T=Math.min(i.length,o.length);for(let R=1;R<T;R++){const x=i[R]*r,M=o[R]*r;Kh({source:t.subarray(f,x),target:e,start:p,end:M,size:r,getData:y}),f=x,p=M}return p<e.length&&Kh({source:[],target:e,start:p,size:r,getData:y}),e}function UM(t){const{device:e,settings:r,value:n}=t,i=new iv(e,r);return i.setData({value:n instanceof Float64Array?new Float64Array(0):new Float32Array(0),normalized:r.normalized}),i}function sv(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error(`No defined attribute type for size "${t}"`)}}function ov(t){switch(t){case 1:return"float32";case 2:return"float32x2";case 3:return"float32x3";case 4:return"float32x4";default:throw new Error("invalid type size")}}function av(t){t.push(t.shift())}function BM(t,e){const{doublePrecision:r,settings:n,value:i,size:o}=t,f=r&&i instanceof Float64Array?2:1;let p=0;const{shaderAttributes:y}=t.settings;if(y)for(const T of Object.values(y))p=Math.max(p,T.vertexOffset??0);return(n.noAlloc?i.length:(e+p)*o)*f}function Av({device:t,source:e,target:r}){return(!r||r.byteLength<e.byteLength)&&(r==null||r.destroy(),r=t.createBuffer({byteLength:e.byteLength,usage:e.usage})),r}function lv({device:t,buffer:e,attribute:r,fromLength:n,toLength:i,fromStartIndices:o,getData:f=p=>p}){const p=r.doublePrecision&&r.value instanceof Float64Array?2:1,y=r.size*p,T=r.byteOffset,R=r.settings.bytesPerElement<4?T/r.settings.bytesPerElement*4:T,x=r.startIndices,M=o&&x,U=r.isConstant;if(!M&&e&&n>=i)return e;const W=r.value instanceof Float64Array?Float32Array:r.value.constructor,j=U?r.value:new W(r.getBuffer().readSyncWebGL(T,i*W.BYTES_PER_ELEMENT).buffer);if(r.settings.normalized&&!U){const ce=f;f=(we,be)=>r.normalizeConstant(ce(we,be))}const G=U?(ce,we)=>f(j,we):(ce,we)=>f(j.subarray(ce+T,ce+T+y),we),re=e?new Float32Array(e.readSyncWebGL(R,n*4).buffer):new Float32Array(0),se=new Float32Array(i);return LM({source:re,target:se,sourceStartIndices:o,targetStartIndices:x,size:y,getData:G}),(!e||e.byteLength<se.byteLength+R)&&(e==null||e.destroy(),e=t.createBuffer({byteLength:se.byteLength+R,usage:35050})),e.write(se,R),e}class uv{constructor({device:e,attribute:r,timeline:n}){this.buffers=[],this.currentLength=0,this.device=e,this.transition=new Ff(n),this.attribute=r,this.attributeInTransition=UM(r),this.currentStartIndices=r.startIndices}get inProgress(){return this.transition.inProgress}start(e,r,n=1/0){this.settings=e,this.currentStartIndices=this.attribute.startIndices,this.currentLength=BM(this.attribute,r),this.transition.start({...e,duration:n})}update(){const e=this.transition.update();return e&&this.onUpdate(),e}setBuffer(e){this.attributeInTransition.setData({buffer:e,normalized:this.attribute.settings.normalized,value:this.attributeInTransition.value})}cancel(){this.transition.cancel()}delete(){this.cancel();for(const e of this.buffers)e.destroy();this.buffers.length=0}}class VM extends uv{constructor({device:e,attribute:r,timeline:n}){super({device:e,attribute:r,timeline:n}),this.type="interpolation",this.transform=jM(e,r)}start(e,r){const n=this.currentLength,i=this.currentStartIndices;if(super.start(e,r,e.duration),e.duration<=0){this.transition.cancel();return}const{buffers:o,attribute:f}=this;av(o),o[0]=lv({device:this.device,buffer:o[0],attribute:f,fromLength:n,toLength:this.currentLength,fromStartIndices:i,getData:e.enter}),o[1]=Av({device:this.device,source:o[0],target:o[1]}),this.setBuffer(o[1]);const{transform:p}=this,y=p.model;let T=Math.floor(this.currentLength/f.size);cv(f)&&(T/=2),y.setVertexCount(T),f.isConstant?(y.setAttributes({aFrom:o[0]}),y.setConstantAttributes({aTo:f.value})):y.setAttributes({aFrom:o[0],aTo:f.getBuffer()}),p.transformFeedback.setBuffers({vCurrent:o[1]})}onUpdate(){const{duration:e,easing:r}=this.settings,{time:n}=this.transition;let i=n/e;r&&(i=r(i));const{model:o}=this.transform;o.setUniforms({time:i}),this.transform.run({discard:!0})}delete(){super.delete(),this.transform.destroy()}}const zM=`#version 300 es
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
in ATTRIBUTE_TYPE aFrom;
in ATTRIBUTE_TYPE aTo;
out ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`,HM=`#version 300 es
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
in ATTRIBUTE_TYPE aFrom;
in ATTRIBUTE_TYPE aFrom64Low;
in ATTRIBUTE_TYPE aTo;
in ATTRIBUTE_TYPE aTo64Low;
out ATTRIBUTE_TYPE vCurrent;
out ATTRIBUTE_TYPE vCurrent64Low;

vec2 mix_fp64(vec2 a, vec2 b, float x) {
  vec2 range = sub_fp64(b, a);
  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));
}

void main(void) {
  for (int i=0; i<ATTRIBUTE_SIZE; i++) {
    vec2 value = mix_fp64(vec2(aFrom[i], aFrom64Low[i]), vec2(aTo[i], aTo64Low[i]), time);
    vCurrent[i] = value.x;
    vCurrent64Low[i] = value.y;
  }
  gl_Position = vec4(0.0);
}
`;function cv(t){return t.doublePrecision&&t.value instanceof Float64Array}function jM(t,e){const r=e.size,n=sv(r),i=ov(r),o=e.getBufferLayout();return cv(e)?new $l(t,{vs:HM,bufferLayout:[{name:"aFrom",byteStride:8*r,attributes:[{attribute:"aFrom",format:i,byteOffset:0},{attribute:"aFrom64Low",format:i,byteOffset:4*r}]},{name:"aTo",byteStride:8*r,attributes:[{attribute:"aTo",format:i,byteOffset:0},{attribute:"aTo64Low",format:i,byteOffset:4*r}]}],modules:[VC],defines:{ATTRIBUTE_TYPE:n,ATTRIBUTE_SIZE:r},moduleSettings:{},varyings:["vCurrent","vCurrent64Low"],bufferMode:35980,disableWarnings:!0}):new $l(t,{vs:zM,bufferLayout:[{name:"aFrom",format:i},{name:"aTo",format:o.attributes[0].format}],defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"],disableWarnings:!0})}class WM extends uv{constructor({device:e,attribute:r,timeline:n}){super({device:e,attribute:r,timeline:n}),this.type="spring",this.texture=YM(e),this.framebuffer=KM(e,this.texture),this.transform=QM(e,r)}start(e,r){const n=this.currentLength,i=this.currentStartIndices;super.start(e,r);const{buffers:o,attribute:f}=this;for(let y=0;y<2;y++)o[y]=lv({device:this.device,buffer:o[y],attribute:f,fromLength:n,toLength:this.currentLength,fromStartIndices:i,getData:e.enter});o[2]=Av({device:this.device,source:o[0],target:o[2]}),this.setBuffer(o[1]);const{model:p}=this.transform;p.setVertexCount(Math.floor(this.currentLength/f.size)),f.isConstant?p.setConstantAttributes({aTo:f.value}):p.setAttributes({aTo:f.getBuffer()})}onUpdate(){const{buffers:e,transform:r,framebuffer:n,transition:i}=this,o=this.settings;r.model.setAttributes({aPrev:e[0],aCur:e[1]}),r.transformFeedback.setBuffers({vNext:e[2]}),r.model.setUniforms({stiffness:o.stiffness,damping:o.damping}),r.run({framebuffer:n,discard:!1,parameters:{viewport:[0,0,1,1]},clearColor:[0,0,0,0]}),av(e),this.setBuffer(e[1]),this.device.readPixelsToArrayWebGL(n)[0]>0||i.end()}delete(){super.delete(),this.transform.destroy(),this.texture.destroy(),this.framebuffer.destroy()}}const XM=`#version 300 es
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
in ATTRIBUTE_TYPE aPrev;
in ATTRIBUTE_TYPE aCur;
in ATTRIBUTE_TYPE aTo;
out ATTRIBUTE_TYPE vNext;
out float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,$M=`#version 300 es
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

in float vIsTransitioningFlag;

out vec4 fragColor;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  fragColor = vec4(1.0);
}`;function QM(t,e){const r=sv(e.size),n=ov(e.size);return new $l(t,{vs:XM,fs:$M,bufferLayout:[{name:"aPrev",format:n},{name:"aCur",format:n},{name:"aTo",format:e.getBufferLayout().attributes[0].format}],varyings:["vNext"],defines:{ATTRIBUTE_TYPE:r},parameters:{depthCompare:"always",blendColorOperation:"max",blendColorSrcFactor:"one",blendColorDstFactor:"one",blendAlphaOperation:"max",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one"}})}function YM(t){return t.createTexture({data:new Uint8Array(4),format:"rgba8unorm",mipmaps:!1,width:1,height:1})}function KM(t,e){return t.createFramebuffer({id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,colorAttachments:[e]})}const ZM={interpolation:VM,spring:WM};class qM{constructor(e,{id:r,timeline:n}){if(!e)throw new Error("AttributeTransitionManager is constructed without device");this.id=r,this.device=e,this.timeline=n,this.transitions={},this.needsRedraw=!1,this.numInstances=1}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:r,numInstances:n}){this.numInstances=n||1;for(const i in e){const o=e[i],f=o.getTransitionSetting(r);f&&this._updateAttribute(i,o,f)}for(const i in this.transitions){const o=e[i];(!o||!o.getTransitionSetting(r))&&this._removeTransition(i)}}hasAttribute(e){const r=this.transitions[e];return r&&r.inProgress}getAttributes(){const e={};for(const r in this.transitions){const n=this.transitions[r];n.inProgress&&(e[r]=n.attributeInTransition)}return e}run(){if(this.numInstances===0)return!1;for(const r in this.transitions)this.transitions[r].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].delete(),delete this.transitions[e]}_updateAttribute(e,r,n){const i=this.transitions[e];let o=!i||i.type!==n.type;if(o){i&&this._removeTransition(e);const f=ZM[n.type];f?this.transitions[e]=new f({attribute:r,timeline:this.timeline,device:this.device}):(tr.error(`unsupported transition type '${n.type}'`)(),o=!1)}(o||r.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(n,this.numInstances))}}const vm="attributeManager.invalidate",GM="attributeManager.updateStart",JM="attributeManager.updateEnd",e6="attribute.updateStart",t6="attribute.allocate",r6="attribute.updateEnd";class n6{constructor(e,{id:r="attribute-manager",stats:n,timeline:i}={}){this.mergeBoundsMemoized=tu(zP),this.id=r,this.device=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new qM(e,{id:`${r}-transitions`,timeline:i}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const r=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,r&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{stepMode:"instance"})}remove(e){for(const r of e)this.attributes[r]!==void 0&&(this.attributes[r].delete(),delete this.attributes[r])}invalidate(e,r){const n=this._invalidateTrigger(e,r);ln(vm,this,e,n)}invalidateAll(e){for(const r in this.attributes)this.attributes[r].setNeedsUpdate(r,e);ln(vm,this,"all")}update({data:e,numInstances:r,startIndices:n=null,transitions:i,props:o={},buffers:f={},context:p={}}){let y=!1;ln(GM,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const T in this.attributes){const R=this.attributes[T],x=R.settings.accessor;R.startIndices=n,R.numInstances=r,o[T]&&tr.removed(`props.${T}`,`data.attributes.${T}`)(),R.setExternalBuffer(f[T])||R.setBinaryValue(typeof x=="string"?f[x]:void 0,e.startIndices)||typeof x=="string"&&!f[x]&&R.setConstantValue(o[x])||R.needsUpdate()&&(y=!0,this._updateAttribute({attribute:R,numInstances:r,data:e,props:o,context:p})),this.needsRedraw=this.needsRedraw||R.needsRedraw()}y&&ln(JM,this,r),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:r,transitions:i})}updateTransition(){const{attributeTransitionManager:e}=this,r=e.run();return this.needsRedraw=this.needsRedraw||r,r}getAttributes(){return{...this.attributes,...this.attributeTransitionManager.getAttributes()}}getBounds(e){const r=e.map(n=>{var i;return(i=this.attributes[n])==null?void 0:i.getBounds()});return this.mergeBoundsMemoized(r)}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:r,attributeTransitionManager:n}=this,i={...n.getAttributes()};for(const o in r){const f=r[o];f.needsRedraw(e)&&!n.hasAttribute(o)&&(i[o]=f)}return i}getBufferLayouts(e){return Object.values(this.getAttributes()).map(r=>r.getBufferLayout(e))}_add(e,r){for(const n in e){const i=e[n],o={...i,id:n,size:i.isIndexed&&1||i.size||1,...r};this.attributes[n]=new iv(this.device,o)}this._mapUpdateTriggersToAttributes()}_mapUpdateTriggersToAttributes(){const e={};for(const r in this.attributes)this.attributes[r].getUpdateTriggers().forEach(i=>{e[i]||(e[i]=[]),e[i].push(r)});this.updateTriggers=e}_invalidateTrigger(e,r){const{attributes:n,updateTriggers:i}=this,o=i[e];return o&&o.forEach(f=>{const p=n[f];p&&p.setNeedsUpdate(p.id,r)}),o}_updateAttribute(e){const{attribute:r,numInstances:n}=e;if(ln(e6,r),r.constant){r.setConstantValue(r.value);return}r.allocate(n)&&ln(t6,r,n),r.updateBuffer(e)&&(this.needsRedraw=!0,ln(r6,r,n))}}class i6 extends Ff{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:r,toValue:n,duration:i,easing:o}}=this,f=o(e/i);this._value=dA(r,n,f)}}const wm=1e-5;function Tm(t,e,r,n,i){const o=e-t,p=(r-e)*i,y=-o*n;return p+y+o+e}function s6(t,e,r,n,i){if(Array.isArray(r)){const o=[];for(let f=0;f<r.length;f++)o[f]=Tm(t[f],e[f],r[f],n,i);return o}return Tm(t,e,r,n,i)}function Em(t,e){if(Array.isArray(t)){let r=0;for(let n=0;n<t.length;n++){const i=t[n]-e[n];r+=i*i}return Math.sqrt(r)}return Math.abs(t-e)}class o6 extends Ff{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:r,damping:n,stiffness:i}=this.settings,{_prevValue:o=e,_currValue:f=e}=this;let p=s6(o,f,r,n,i);const y=Em(p,r),T=Em(p,f);y<wm&&T<wm&&(p=r,this.end()),this._prevValue=f,this._currValue=p}}const a6={interpolation:i6,spring:o6};class A6{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,r,n,i){const{transitions:o}=this;if(o.has(e)){const y=o.get(e),{value:T=y.settings.fromValue}=y;r=T,this.remove(e)}if(i=nv(i),!i)return;const f=a6[i.type];if(!f){tr.error(`unsupported transition type '${i.type}'`)();return}const p=new f(this.timeline);p.start({...i,fromValue:r,toValue:n}),o.set(e,p)}remove(e){const{transitions:r}=this;r.has(e)&&(r.get(e).cancel(),r.delete(e))}update(){const e={};for(const[r,n]of this.transitions)n.update(),e[r]=n.value,n.inProgress||this.remove(r);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function l6(t){const e=t[Qs];for(const r in e){const n=e[r],{validate:i}=n;if(i&&!i(t[r],n))throw new Error(`Invalid prop ${r}: ${t[r]}`)}}function u6(t,e){const r=fv({newProps:t,oldProps:e,propTypes:t[Qs],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),n=f6(t,e);let i=!1;return n||(i=h6(t,e)),{dataChanged:n,propsChanged:r,updateTriggersChanged:i,extensionsChanged:d6(t,e),transitionsChanged:c6(t,e)}}function c6(t,e){if(!t.transitions)return!1;const r={},n=t[Qs];let i=!1;for(const o in t.transitions){const f=n[o],p=f&&f.type;(p==="number"||p==="color"||p==="array")&&Bd(t[o],e[o],f)&&(r[o]=!0,i=!0)}return i?r:!1}function fv({newProps:t,oldProps:e,ignoreProps:r={},propTypes:n={},triggerName:i="props"}){if(e===t)return!1;if(typeof t!="object"||t===null)return`${i} changed shallowly`;if(typeof e!="object"||e===null)return`${i} changed shallowly`;for(const o of Object.keys(t))if(!(o in r)){if(!(o in e))return`${i}.${o} added`;const f=Bd(t[o],e[o],n[o]);if(f)return`${i}.${o} ${f}`}for(const o of Object.keys(e))if(!(o in r)){if(!(o in t))return`${i}.${o} dropped`;if(!Object.hasOwnProperty.call(t,o)){const f=Bd(t[o],e[o],n[o]);if(f)return`${i}.${o} ${f}`}}return!1}function Bd(t,e,r){let n=r&&r.equal;return n&&!n(t,e,r)||!n&&(n=t&&e&&t.equals,n&&!n.call(t,e))?"changed deeply":!n&&e!==t?"changed shallowly":null}function f6(t,e){if(e===null)return"oldProps is null, initial diff";let r=!1;const{dataComparator:n,_dataDiff:i}=t;return n?n(t.data,e.data)||(r="Data comparator detected a change"):t.data!==e.data&&(r="A new data container was supplied"),r&&i&&(r=i(t.data,e.data)||r),r}function h6(t,e){if(e===null)return{all:!0};if("all"in t.updateTriggers&&Sm(t,e,"all"))return{all:!0};const r={};let n=!1;for(const i in t.updateTriggers)i!=="all"&&Sm(t,e,i)&&(r[i]=!0,n=!0);return n?r:!1}function d6(t,e){if(e===null)return!0;const r=e.extensions,{extensions:n}=t;if(n===r)return!1;if(!r||!n||n.length!==r.length)return!0;for(let i=0;i<n.length;i++)if(!n[i].equals(r[i]))return!0;return!1}function Sm(t,e,r){let n=t.updateTriggers[r];n=n??{};let i=e.updateTriggers[r];return i=i??{},fv({oldProps:i,newProps:n,triggerName:r})}const g6="count(): argument not an object",p6="count(): argument not a container";function _6(t){if(!y6(t))throw new Error(g6);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(m6(t))return Object.keys(t).length;throw new Error(p6)}function m6(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function y6(t){return t!==null&&typeof t=="object"}function bm(t,e){if(!e)return t;const r={...t,...e};if("defines"in e&&(r.defines={...t.defines,...e.defines}),"modules"in e&&(r.modules=(t.modules||[]).concat(e.modules),e.modules.some(n=>n.name==="project64"))){const n=r.modules.findIndex(i=>i.name==="project32");n>=0&&r.modules.splice(n,1)}if("inject"in e)if(!t.inject)r.inject=e.inject;else{const n={...t.inject};for(const i in e.inject)n[i]=(n[i]||"")+e.inject[i];r.inject=n}return r}const v6={minFilter:"linear",mipmapFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},Vd={};function w6(t,e,r,n){if(r instanceof Qn)return r;r.constructor&&r.constructor.name!=="Object"&&(r={data:r});let i=null;r.compressed&&(i={minFilter:"linear",mipmapFilter:r.data.length>1?"nearest":"linear"});const o=e.createTexture({...r,sampler:{...v6,...i,...n}});return Vd[o.id]=t,o}function T6(t,e){!e||!(e instanceof Qn)||Vd[e.id]===t&&(e.delete(),delete Vd[e.id])}const E6={boolean:{validate(t,e){return!0},equal(t,e,r){return!!t==!!e}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||zd(t)&&(t.length===3||t.length===4)},equal(t,e,r){return fi(t,e,1)}},accessor:{validate(t,e){const r=cf(t);return r==="function"||r===cf(e.value)},equal(t,e,r){return typeof e=="function"?!0:fi(t,e,1)}},array:{validate(t,e){return e.optional&&!t||zd(t)},equal(t,e,r){const{compare:n}=r,i=Number.isInteger(n)?n:n?1:0;return n?fi(t,e,i):t===e}},object:{equal(t,e,r){if(r.ignore)return!0;const{compare:n}=r,i=Number.isInteger(n)?n:n?1:0;return n?fi(t,e,i):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t=="function"},equal(t,e,r){return!r.compare&&r.ignore!==!1||t===e}},data:{transform:(t,e,r)=>{if(!t)return t;const{dataTransform:n}=r.props;return n?n(t):typeof t.shape=="string"&&t.shape.endsWith("-table")&&Array.isArray(t.data)?t.data:t}},image:{transform:(t,e,r)=>{const n=r.context;return!n||!n.device?null:w6(r.id,n.device,t,{...e.parameters,...r.props.textureParameters})},release:(t,e,r)=>{T6(r.id,t)}}};function S6(t){const e={},r={},n={};for(const[i,o]of Object.entries(t)){const f=o==null?void 0:o.deprecatedFor;if(f)n[i]=Array.isArray(f)?f:[f];else{const p=b6(i,o);e[i]=p,r[i]=p.value}}return{propTypes:e,defaultProps:r,deprecatedProps:n}}function b6(t,e){switch(cf(e)){case"object":return bl(t,e);case"array":return bl(t,{type:"array",value:e,compare:!1});case"boolean":return bl(t,{type:"boolean",value:e});case"number":return bl(t,{type:"number",value:e});case"function":return bl(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function bl(t,e){return"type"in e?{name:t,...E6[e.type],...e}:"value"in e?{name:t,type:cf(e.value),...e}:{name:t,type:"object",value:e}}function zd(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function cf(t){return zd(t)?"array":t===null?"null":typeof t}function C6(t,e){let r;for(let o=e.length-1;o>=0;o--){const f=e[o];"extensions"in f&&(r=f.extensions)}const n=Hd(t.constructor,r),i=Object.create(n);i[lf]=t,i[na]={},i[Ws]={};for(let o=0;o<e.length;++o){const f=e[o];for(const p in f)i[p]=f[p]}return Object.freeze(i),i}const R6="_mergedDefaultProps";function Hd(t,e){if(!(t instanceof zf.constructor))return{};let r=R6;if(e)for(const i of e){const o=i.constructor;o&&(r+=`:${o.extensionName||o.name}`)}const n=hv(t,r);return n||(t[r]=P6(t,e||[]))}function P6(t,e){if(!t.prototype)return null;const n=Object.getPrototypeOf(t),i=Hd(n),o=hv(t,"defaultProps")||{},f=S6(o),p=Object.assign(Object.create(null),i,f.defaultProps),y=Object.assign(Object.create(null),i==null?void 0:i[Qs],f.propTypes),T=Object.assign(Object.create(null),i==null?void 0:i[Lh],f.deprecatedProps);for(const R of e){const x=Hd(R.constructor);x&&(Object.assign(p,x),Object.assign(y,x[Qs]),Object.assign(T,x[Lh]))}return k6(p,t),M6(p,y),x6(p,T),p[Qs]=y,p[Lh]=T,e.length===0&&!kg(t,"_propTypes")&&(t._propTypes=y),p}function k6(t,e){const r=O6(e);Object.defineProperties(t,{id:{writable:!0,value:r}})}function x6(t,e){for(const r in e)Object.defineProperty(t,r,{enumerable:!1,set(n){const i=`${this.id}: ${r}`;for(const o of e[r])kg(this,o)||(this[o]=n);tr.deprecated(i,e[r].join("/"))()}})}function M6(t,e){const r={},n={};for(const i in e){const o=e[i],{name:f,value:p}=o;o.async&&(r[f]=p,n[f]=N6(f))}t[lA]=r,t[na]={},Object.defineProperties(t,n)}function N6(t){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||tv(e)?this[na][t]=e:this[Ws][t]=e},get(){if(this[Ws]){if(t in this[Ws])return this[Ws][t]||this[lA][t];if(t in this[na]){const e=this[lf]&&this[lf].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[lA][t]}}return this[lA][t]}}}function kg(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function hv(t,e){return kg(t,e)&&t[e]}function O6(t){const e=t.componentName;return e||tr.warn(`${t.name}.componentName not specified`)(),e||t.name}let D6=0;class zf{constructor(...e){this.props=C6(this,e),this.id=this.props.id,this.count=D6++}clone(e){const{props:r}=this,n={};for(const i in r[lA])i in r[Ws]?n[i]=r[Ws][i]:i in r[na]&&(n[i]=r[na][i]);return new this.constructor({...r,...n,...e})}}zf.componentName="Component";zf.defaultProps={};const I6=Object.freeze({});class F6{constructor(e){this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const r=this.asyncProps[e];r&&r.type&&r.type.release&&r.type.release(r.resolvedValue,r.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||I6}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const r=this.asyncProps[e];return r&&r.resolvedValue}isAsyncPropLoading(e){if(e){const r=this.asyncProps[e];return!!(r&&r.pendingLoadCount>0&&r.pendingLoadCount!==r.resolvedLoadCount)}for(const r in this.asyncProps)if(this.isAsyncPropLoading(r))return!0;return!1}reloadAsyncProp(e,r){this._watchPromise(e,Promise.resolve(r))}setAsyncProps(e){this.component=e[lf]||this.component;const r=e[Ws]||{},n=e[na]||e,i=e[lA]||{};for(const o in r){const f=r[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,f),r[o]=this.getAsyncProp(o)}for(const o in n){const f=n[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,f)}}_fetch(e,r){return null}_onResolve(e,r){}_onError(e,r){}_updateAsyncProp(e,r){if(this._didAsyncInputValueChange(e,r)){if(typeof r=="string"&&(r=this._fetch(e,r)),r instanceof Promise){this._watchPromise(e,r);return}if(tv(r)){this._resolveAsyncIterable(e,r);return}this._setPropValue(e,r)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,r){const n=this.asyncProps[e];return r===n.resolvedValue||r===n.lastValue?!1:(n.lastValue=r,!0)}_setPropValue(e,r){this._freezeAsyncOldProps();const n=this.asyncProps[e];n&&(r=this._postProcessValue(n,r),n.resolvedValue=r,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}_setAsyncPropValue(e,r,n){const i=this.asyncProps[e];i&&n>=i.resolvedLoadCount&&r!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=r,i.resolvedLoadCount=n,this.onAsyncPropUpdated(e,r))}_watchPromise(e,r){const n=this.asyncProps[e];if(n){n.pendingLoadCount++;const i=n.pendingLoadCount;r.then(o=>{this.component&&(o=this._postProcessValue(n,o),this._setAsyncPropValue(e,o,i),this._onResolve(e,o))}).catch(o=>{this._onError(e,o)})}}async _resolveAsyncIterable(e,r){if(e!=="data"){this._setPropValue(e,r);return}const n=this.asyncProps[e];if(!n)return;n.pendingLoadCount++;const i=n.pendingLoadCount;let o=[],f=0;for await(const p of r){if(!this.component)return;const{dataTransform:y}=this.component.props;y?o=y(p,o):o=o.concat(p),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:f,endRow:o.length}]}),f=o.length,this._setAsyncPropValue(e,o,i)}this._onResolve(e,o)}_postProcessValue(e,r){const n=e.type;return n&&this.component&&(n.release&&n.release(e.resolvedValue,n,this.component),n.transform)?n.transform(r,n,this.component):r}_createAsyncPropData(e,r){if(!this.asyncProps[e]){const i=this.component&&this.component.props[Qs];this.asyncProps[e]={type:i&&i[e],lastValue:null,resolvedValue:r,pendingLoadCount:0,resolvedLoadCount:0}}}}class L6 extends F6{constructor({attributeManager:e,layer:r}){super(r),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,r){const n=this.layer,i=n==null?void 0:n.props.fetch;return i?i(r,{propName:e,layer:n}):super._fetch(e,r)}_onResolve(e,r){const n=this.layer;if(n){const i=n.props.onDataLoad;e==="data"&&i&&i(r,{propName:e,layer:n})}}_onError(e,r){const n=this.layer;n&&n.raiseError(r,`loading ${e} of ${this.layer}`)}}const U6="layer.changeFlag",B6="layer.initialize",V6="layer.update",z6="layer.finalize",H6="layer.matched",Cm=2**24-1,j6=Object.freeze([]),W6=tu(({oldViewport:t,viewport:e})=>t.equals(e));let Ii=new Uint8ClampedArray(0);const X6={data:{type:"data",value:j6,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:r,loaders:n,loadOptions:i,signal:o})=>{const{resourceManager:f}=r.context;i=i||r.getLoadOptions(),n=n||r.props.loaders,o&&(i={...i,fetch:{...i==null?void 0:i.fetch,signal:o}});let p=f.contains(t);return!p&&!i&&(f.add({resourceId:t,data:od(t,n),persistent:!1}),p=!0),p?f.subscribe({resourceId:t,onChange:y=>{var T;return(T=r.internalState)==null?void 0:T.reloadAsyncProp(e,y)},consumerId:r.id,requestId:e}):od(t,n,i)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:Qt.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,-t*100]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class ca extends zf{constructor(){super(...arguments),this.internalState=null,this.lifecycle=Ya.NO_STATE,this.parent=null}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){return`${this.constructor.layerName||this.constructor.name}({id: '${this.props.id}'})`}project(e){qr(this.internalState);const r=this.internalState.viewport||this.context.viewport,n=Ny(e,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,o,f]=ky(n,r.pixelProjectionMatrix);return e.length===2?[i,o]:[i,o,f]}unproject(e){return qr(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,r){qr(this.internalState);const n=this.internalState.viewport||this.context.viewport;return QP(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...r})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){const e=this.state;return e&&(e.models||e.model&&[e.model])||[]}setModuleParameters(e){for(const r of this.getModels())r.updateModuleSettings(e)}setShaderModuleProps(...e){for(const r of this.getModels())r.shaderInputs.setProps(...e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===Qt.DEFAULT||e===Qt.LNGLAT||e===Qt.CARTESIAN}onHover(e,r){return this.props.onHover&&this.props.onHover(e,r)||!1}onClick(e,r){return this.props.onClick&&this.props.onClick(e,r)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,r=[]){return r[0]=e+1&255,r[1]=e+1>>8&255,r[2]=e+1>>8>>8&255,r}decodePickingColor(e){qr(e instanceof Uint8Array);const[r,n,i]=e;return r+n*256+i*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:_6(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;return(e=this.getAttributeManager())==null?void 0:e.getBounds(["positions","instancePositions"])}getShaders(e){e=bm(e,{disableWarnings:!0,modules:this.context.defaultShaderModules});for(const r of this.props.extensions)e=bm(e,r.getShaders.call(this,r));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const r=this.getAttributeManager(),{dataChanged:n}=e.changeFlags;if(n&&r)if(Array.isArray(n))for(const i of n)r.invalidateAll(i);else r.invalidateAll();if(r){const{props:i}=e,o=this.internalState.hasPickingBuffer,f=Number.isInteger(i.highlightedObjectIndex)||i.pickable||i.extensions.some(p=>p.getNeedsPickingBuffer.call(this,p));if(o!==f){this.internalState.hasPickingBuffer=f;const{pickingColors:p,instancePickingColors:y}=r.attributes,T=p||y;T&&(f&&T.constant&&(T.constant=!1,r.invalidate(T.id)),!T.value&&!f&&(T.constant=!0,T.value=[0,0,0]))}}}finalizeState(e){for(const n of this.getModels())n.destroy();const r=this.getAttributeManager();r&&r.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const r of this.getModels())r.draw(e)}getPickingInfo({info:e,mode:r,sourceLayer:n}){const{index:i}=e;return i>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[i]),e}raiseError(e,r){var n,i,o,f;r&&(e=new Error(`${r}: ${e.message}`,{cause:e})),(i=(n=this.props).onError)!=null&&i.call(n,e)||(f=(o=this.context)==null?void 0:o.onError)==null||f.call(o,e,this)}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var e;return((e=this.internalState)==null?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const r=this.internalState.viewport;this.internalState.viewport=e,(!r||!W6({oldViewport:r,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const r=this.getAttributeManager();r&&(e==="all"?r.invalidateAll():r.invalidate(e))}updateAttributes(e){let r=!1;for(const n in e)e[n].layoutChanged()&&(r=!0);for(const n of this.getModels())this._setModelAttributes(n,e,r)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const r=this.props,n=this.getNumInstances(),i=this.getStartIndices();e.update({data:r.data,numInstances:n,startIndices:i,props:r,transitions:r.transitions,buffers:r.data.attributes,context:this});const o=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const r=e.update(),n=Object.create(this.props);for(const i in r)Object.defineProperty(n,i,{value:r[i]});return n}return this.props}calculateInstancePickingColors(e,{numInstances:r}){if(e.constant)return;const n=Math.floor(Ii.length/4);if(this.internalState.usesPickingColorCache=!0,n<r){r>Cm&&tr.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Ii=mA.allocate(Ii,r,{size:4,copy:!0,maxCount:Math.max(r,Cm)});const i=Math.floor(Ii.length/4),o=[];for(let f=n;f<i;f++)this.encodePickingColor(f,o),Ii[f*4+0]=o[0],Ii[f*4+1]=o[1],Ii[f*4+2]=o[2]}e.value=Ii.subarray(0,r*4)}_setModelAttributes(e,r,n=!1){var p;if(!Object.keys(r).length)return;if(n){const y=this.getAttributeManager();e.setBufferLayout(y.getBufferLayouts(e)),r=y.getAttributes()}const i=((p=e.userData)==null?void 0:p.excludeAttributes)||{},o={},f={};for(const y in r){if(i[y])continue;const T=r[y].getValue();for(const R in T){const x=T[R];x instanceof Ar?r[y].settings.isIndexed?e.setIndexBuffer(x):o[R]=x:x&&(f[R]=x)}}e.setAttributes(o),e.setConstantAttributes(f)}disablePickingIndex(e){const r=this.props.data;if(!("attributes"in r)){this._disablePickingIndex(e);return}const{pickingColors:n,instancePickingColors:i}=this.getAttributeManager().attributes,o=n||i,f=o&&r.attributes&&r.attributes[o.id];if(f&&f.value){const p=f.value,y=this.encodePickingColor(e);for(let T=0;T<r.length;T++){const R=o.getVertexOffset(T);p[R]===y[0]&&p[R+1]===y[1]&&p[R+2]===y[2]&&this._disablePickingIndex(T)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:r,instancePickingColors:n}=this.getAttributeManager().attributes,i=r||n;if(!i)return;const o=i.getVertexOffset(e),f=i.getVertexOffset(e+1);i.buffer.write(new Uint8Array(f-o),o)}restorePickingColors(){const{pickingColors:e,instancePickingColors:r}=this.getAttributeManager().attributes,n=e||r;n&&(this.internalState.usesPickingColorCache&&n.value.buffer!==Ii.buffer&&(n.value=Ii.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0}))}_initialize(){qr(!this.internalState),qr(Number.isFinite(this.props.coordinateSystem)),ln(B6,this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:"uint8",size:4,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new L6({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(tr.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new A6(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const r of this.props.extensions)r.initializeState.call(this,this.context,r);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){ln(H6,this,this===e);const{state:r,internalState:n}=e;this!==e&&(this.internalState=n,this.state=r,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(ln(V6,this,e),!e)return;const r=this.props,n=this.context,i=this.internalState,o=n.viewport,f=this._updateUniformTransition();i.propsInTransition=f,n.viewport=i.viewport||o,this.props=f;try{const p=this._getUpdateParams(),y=this.getModels();if(n.device)this.updateState(p);else try{this.updateState(p)}catch{}for(const R of this.props.extensions)R.updateState.call(this,p,R);const T=this.getModels()[0]!==y[0];this._postUpdate(p,T)}finally{n.viewport=o,this.props=r,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){ln(z6,this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer({renderPass:e,moduleParameters:r=null,uniforms:n={},parameters:i={}}){this._updateAttributeTransition();const o=this.props,f=this.context;this.props=this.internalState.propsInTransition||o;const p=this.props.opacity;n.opacity=Math.pow(p,1/2.2);try{if(r){const{isActive:R,isAttribute:x}=r.picking;this.setModuleParameters(r),this.setShaderModuleProps({picking:{isActive:R,isAttribute:x}})}const{getPolygonOffset:y}=this.props,T=y&&y(n)||[0,0];f.device.setParametersWebGL({polygonOffset:T});for(const R of this.getModels())R.setParameters(i);f.device.withParametersWebGL(i,()=>{const R={renderPass:e,moduleParameters:r,uniforms:n,parameters:i,context:f};for(const x of this.props.extensions)x.draw.call(this,R,x);this.draw(R)})}finally{this.props=o}}getChangeFlags(){var e;return(e=this.internalState)==null?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:r}=this.internalState;for(const i in e)if(e[i]){let o=!1;switch(i){case"dataChanged":const f=e[i],p=r[i];f&&Array.isArray(p)&&(r.dataChanged=Array.isArray(f)?p.concat(f):f,o=!0);default:r[i]||(r[i]=e[i],o=!0)}o&&ln(U6,this,i,e)}const n=!!(r.dataChanged||r.updateTriggersChanged||r.propsChanged||r.extensionsChanged);r.propsOrDataChanged=n,r.somethingChanged=n||r.viewportChanged||r.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,r){var i;const n=u6(e,r);if(n.updateTriggersChanged)for(const o in n.updateTriggersChanged)n.updateTriggersChanged[o]&&this.invalidateAttribute(o);if(n.transitionsChanged)for(const o in n.transitionsChanged)this.internalState.uniformTransitions.add(o,r[o],e[o],(i=e.transitions)==null?void 0:i[o]);return this.setChangeFlags(n)}validateProps(){l6(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const r={highlightedObjectColor:e.picked?e.color:null},{highlightColor:n}=this.props;e.picked&&typeof n=="function"&&(r.highlightColor=n(e)),this.setShaderModuleProps({picking:r}),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new n6(e.device,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,r){const{props:n,oldProps:i}=e;this.setNeedsRedraw(),this._updateAttributes();const o=this.state.model;o!=null&&o.isInstanced&&o.setInstanceCount(this.getNumInstances());const{autoHighlight:f,highlightedObjectIndex:p,highlightColor:y}=n;if(r||i.autoHighlight!==f||i.highlightedObjectIndex!==p||i.highlightColor!==y){const T={};Array.isArray(y)&&(T.highlightColor=y),(r||i.autoHighlight!==f||p!==i.highlightedObjectIndex)&&(T.highlightedObjectColor=Number.isFinite(p)&&p>=0?this.encodePickingColor(p):null),this.setShaderModuleProps({picking:T})}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let r=!1;r=r||this.internalState.needsRedraw&&this.id;const n=this.getAttributeManager(),i=n?n.getNeedsRedraw(e):!1;if(r=r||i,r)for(const o of this.props.extensions)o.onNeedsRedraw.call(this,o);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,r}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}ca.defaultProps=X6;ca.layerName="Layer";const $6="compositeLayer.renderLayers";class xg extends ca{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:r}=e;return r&&r.__source&&r.__source.parent&&r.__source.parent.id===this.id&&(e.object=r.__source.object,e.index=r.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,r){return r&&r.length}getSubLayerClass(e,r){const{_subLayerProps:n}=this.props;return n&&n[e]&&n[e].type||r}getSubLayerRow(e,r,n){return e.__source={parent:this,object:r,index:n},e}getSubLayerAccessor(e){if(typeof e=="function"){const r={index:-1,data:this.props.data,target:[]};return(n,i)=>n&&n.__source?(r.index=n.__source.index,e(n.__source.object,r)):e(n,i)}return e}getSubLayerProps(e={}){var Xe;const{opacity:r,pickable:n,visible:i,parameters:o,getPolygonOffset:f,highlightedObjectIndex:p,autoHighlight:y,highlightColor:T,coordinateSystem:R,coordinateOrigin:x,wrapLongitude:M,positionFormat:U,modelMatrix:W,extensions:j,fetch:G,operation:re,_subLayerProps:se}=this.props,ce={id:"",updateTriggers:{},opacity:r,pickable:n,visible:i,parameters:o,getPolygonOffset:f,highlightedObjectIndex:p,autoHighlight:y,highlightColor:T,coordinateSystem:R,coordinateOrigin:x,wrapLongitude:M,positionFormat:U,modelMatrix:W,extensions:j,fetch:G,operation:re},we=se&&e.id&&se[e.id],be=we&&we.updateTriggers,Pe=e.id||"sublayer";if(we){const nt=this.props[Qs],Ue=e.type?e.type._propTypes:{};for(const Je in we){const it=Ue[Je]||nt[Je];it&&it.type==="accessor"&&(we[Je]=this.getSubLayerAccessor(we[Je]))}}Object.assign(ce,e,we),ce.id=`${this.props.id}-${Pe}`,ce.updateTriggers={all:(Xe=this.props.updateTriggers)==null?void 0:Xe.all,...e.updateTriggers,...be};for(const nt of j){const Ue=nt.getSubLayerProps.call(this,nt);Ue&&Object.assign(ce,Ue,{updateTriggers:Object.assign(ce.updateTriggers,Ue.updateTriggers)})}return ce}_updateAutoHighlight(e){for(const r of this.getSubLayers())r.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,r){let n=this.internalState.subLayers;const i=!n||this.needsUpdate();if(i){const o=this.renderLayers();n=wg(o,Boolean),this.internalState.subLayers=n}ln($6,this,i,n);for(const o of n)o.parent=this}}xg.layerName="CompositeLayer";class dv{constructor(e){this.indexStarts=[0],this.vertexStarts=[0],this.vertexCount=0,this.instanceCount=0;const{attributes:r={}}=e;this.typedArrayManager=mA,this.attributes={},this._attributeDefs=r,this.opts=e,this.updateGeometry(e)}updateGeometry(e){Object.assign(this.opts,e);const{data:r,buffers:n={},getGeometry:i,geometryBuffer:o,positionFormat:f,dataChanged:p,normalize:y=!0}=this.opts;if(this.data=r,this.getGeometry=i,this.positionSize=o&&o.size||(f==="XY"?2:3),this.buffers=n,this.normalize=y,o&&(qr(r.startIndices),this.getGeometry=this.getGeometryFromBuffer(o),y||(n.vertexPositions=o)),this.geometryBuffer=n.vertexPositions,Array.isArray(p))for(const T of p)this._rebuildGeometry(T);else this._rebuildGeometry()}updatePartialGeometry({startRow:e,endRow:r}){this._rebuildGeometry({startRow:e,endRow:r})}getGeometryFromBuffer(e){const r=e.value||e;return ArrayBuffer.isView(r)?rv(r,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices}):null}_allocate(e,r){const{attributes:n,buffers:i,_attributeDefs:o,typedArrayManager:f}=this;for(const p in o)if(p in i)f.release(n[p]),n[p]=null;else{const y=o[p];y.copy=r,n[p]=f.allocate(n[p],e,y)}}_forEachGeometry(e,r,n){const{data:i,getGeometry:o}=this,{iterable:f,objectInfo:p}=Vf(i,r,n);for(const y of f){p.index++;const T=o?o(y,p):null;e(T,p.index)}}_rebuildGeometry(e){if(!this.data)return;let{indexStarts:r,vertexStarts:n,instanceCount:i}=this;const{data:o,geometryBuffer:f}=this,{startRow:p=0,endRow:y=1/0}=e||{},T={};if(e||(r=[0],n=[0]),this.normalize||!f)this._forEachGeometry((x,M)=>{const U=x&&this.normalizeGeometry(x);T[M]=U,n[M+1]=n[M]+(U?this.getGeometrySize(U):0)},p,y),i=n[n.length-1];else if(n=o.startIndices,i=n[o.length]||0,ArrayBuffer.isView(f))i=i||f.length/this.positionSize;else if(f instanceof Ar){const x=this.positionSize*4;i=i||f.byteLength/x}else if(f.buffer){const x=f.stride||this.positionSize*4;i=i||f.buffer.byteLength/x}else if(f.value){const x=f.value,M=f.stride/x.BYTES_PER_ELEMENT||this.positionSize;i=i||x.length/M}this._allocate(i,!!e),this.indexStarts=r,this.vertexStarts=n,this.instanceCount=i;const R={};this._forEachGeometry((x,M)=>{const U=T[M]||x;R.vertexStart=n[M],R.indexStart=r[M];const W=M<n.length-1?n[M+1]:i;R.geometrySize=W-n[M],R.geometryIndex=M,this.updateGeometryAttributes(U,R)},p,y),this.vertexCount=r[r.length-1]}}const Q6=typeof window<"u"?ye.useLayoutEffect:ye.useEffect;function ff(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}const Y6={position:"absolute",zIndex:-1};function gv(t,e){if(typeof t=="function")return t(e);if(Array.isArray(t))return t.map(r=>gv(r,e));if(Hf(t)){if(K6(t))return e.style=Y6,ye.cloneElement(t,e);if(Z6(t))return ye.cloneElement(t,e)}return t}function Hf(t){return t&&typeof t=="object"&&"type"in t||!1}function K6(t){var e;return(e=t.props)==null?void 0:e.mapStyle}function Z6(t){const e=t.type;return e&&e.deckGLViewProps}function jd(t){if(typeof t=="function")return ye.createElement(yA,{},t);if(Array.isArray(t))return t.map(jd);if(Hf(t)){if(t.type===ye.Fragment)return jd(t.props.children);if(ff(t.type,yA))return t}return t}function q6({children:t,layers:e=[],views:r=null}){const n=[],i=[],o={};return ye.Children.forEach(jd(t),f=>{if(Hf(f)){const p=f.type;if(ff(p,ca)){const y=G6(p,f.props);i.push(y)}else n.push(f);if(ff(p,yA)&&p!==yA&&f.props.id){const y=new p(f.props);o[y.id]=y}}else f&&n.push(f)}),Object.keys(o).length>0&&(Array.isArray(r)?r.forEach(f=>{o[f.id]=f}):r&&(o[r.id]=r),r=Object.values(o)),e=i.length>0?[...i,...e]:e,{layers:e,children:n,views:r}}function G6(t,e){const r={},n=t.defaultProps||{};for(const i in e)n[i]!==e[i]&&(r[i]=e[i]);return new t(r)}function J6({children:t,deck:e,ContextProvider:r}){const{viewManager:n}=e||{};if(!n||!n.views.length)return[];const i={},o=n.views[0].id;for(const f of t){let p=o,y=f;Hf(f)&&ff(f.type,yA)&&(p=f.props.id||o,y=f.props.children);const T=n.getViewport(p),R=n.getViewState(p);if(T){R.padding=T.padding;const{x,y:M,width:U,height:W}=T;y=gv(y,{x,y:M,width:U,height:W,viewport:T,viewState:R}),i[p]||(i[p]={viewport:T,children:[]}),i[p].children.push(y)}}return Object.keys(i).map(f=>{const{viewport:p,children:y}=i[f],{x:T,y:R,width:x,height:M}=p,U={position:"absolute",left:T,top:R,width:x,height:M},W=`view-${f}`,j=ye.createElement("div",{key:W,id:W,style:U},...y);if(r){const G={viewport:p,container:e.canvas.offsetParent,eventManager:e.eventManager,onViewStateChange:re=>{re.viewId=f,e._onViewStateChange(re)}};return ye.createElement(r,{key:W,value:G},j)}return j})}const e8={mixBlendMode:null};function t8({width:t,height:e,style:r}){const n={position:"absolute",zIndex:0,left:0,top:0,width:t,height:e},i={left:0,top:0};if(r)for(const o in r)o in e8?i[o]=r[o]:n[o]=r[o];return{containerStyle:n,canvasStyle:i}}function r8(t){return{get deck(){return t.deck},pickObject:e=>t.deck.pickObject(e),pickMultipleObjects:e=>t.deck.pickMultipleObjects(e),pickObjects:e=>t.deck.pickObjects(e)}}function pv(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}function n8(t,e,r){const n=new e({...r,_customRender:i=>{t.redrawReason=i;const o=n.getViewports();t.lastRenderedViewports!==o?t.forceUpdate():pv(t)}});return n}function i8(t,e){const[r,n]=ye.useState(0),o=ye.useRef({control:null,version:r,forceUpdate:()=>n(be=>be+1)}).current,f=ye.useRef(null),p=ye.useRef(null),y=ye.useMemo(()=>q6(t),[t.layers,t.views,t.children]);let T=!0;const R=be=>{var Pe;return T&&t.viewState?(o.viewStateUpdateRequested=be,null):(o.viewStateUpdateRequested=null,(Pe=t.onViewStateChange)==null?void 0:Pe.call(t,be))},x=be=>{var Pe;T?o.interactionStateUpdateRequested=be:(o.interactionStateUpdateRequested=null,(Pe=t.onInteractionStateChange)==null||Pe.call(t,be))},M=ye.useMemo(()=>{const be={...t,style:null,width:"100%",height:"100%",parent:f.current,canvas:p.current,layers:y.layers,views:y.views,onViewStateChange:R,onInteractionStateChange:x};return delete be._customRender,o.deck&&o.deck.setProps(be),be},[t]);ye.useEffect(()=>{const be=t.Deck||Pg;return o.deck=n8(o,be,{...M,parent:f.current,canvas:p.current}),()=>{var Pe;return(Pe=o.deck)==null?void 0:Pe.finalize()}},[]),Q6(()=>{pv(o);const{viewStateUpdateRequested:be,interactionStateUpdateRequested:Pe}=o;be&&R(be),Pe&&x(Pe)}),ye.useImperativeHandle(e,()=>r8(o),[]);const U=o.deck&&o.deck.isInitialized?o.deck.getViewports():void 0,{ContextProvider:W,width:j="100%",height:G="100%",id:re,style:se}=t,{containerStyle:ce,canvasStyle:we}=ye.useMemo(()=>t8({width:j,height:G,style:se}),[j,G,se]);if(!o.viewStateUpdateRequested&&o.lastRenderedViewports===U||o.version!==r){o.lastRenderedViewports=U,o.version=r;const be=J6({children:y.children,deck:o.deck,ContextProvider:W}),Pe=ye.createElement("canvas",{key:"canvas",id:re||"deckgl-overlay",ref:p,style:we});o.control=ye.createElement("div",{id:`${re||"deckgl"}-wrapper`,ref:f,style:ce},[Pe,be])}return T=!1,o.control}const s8=ye.forwardRef(i8),Mg={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function Ng(t,e,r={}){return o8(t,r)!==e?(A8(t,r),!0):!1}function o8(t,e={}){return Math.sign(a8(t,e))}const Rm={x:0,y:1,z:2};function a8(t,e={}){const{start:r=0,end:n=t.length,plane:i="xy"}=e,o=e.size||2;let f=0;const p=Rm[i[0]],y=Rm[i[1]];for(let T=r,R=n-o;T<n;T+=o)f+=(t[T+p]-t[R+p])*(t[T+y]+t[R+y]),R=T;return f/2}function A8(t,e){const{start:r=0,end:n=t.length,size:i=2}=e,o=(n-r)/i,f=Math.floor(o/2);for(let p=0;p<f;++p){const y=r+p*i,T=r+(o-1-p)*i;for(let R=0;R<i;++R){const x=t[y+R];t[y+R]=t[T+R],t[T+R]=x}}}function hi(t,e){const r=e.length,n=t.length;if(n>0){let i=!0;for(let o=0;o<r;o++)if(t[n-r+o]!==e[o]){i=!1;break}if(i)return!1}for(let i=0;i<r;i++)t[n+i]=e[i];return!0}function Wd(t,e){const r=e.length;for(let n=0;n<r;n++)t[n]=e[n]}function Yl(t,e,r,n,i=[]){const o=n+e*r;for(let f=0;f<r;f++)i[f]=t[o+f];return i}function Xd(t,e,r,n,i=[]){let o,f;if(r&8)o=(n[3]-t[1])/(e[1]-t[1]),f=3;else if(r&4)o=(n[1]-t[1])/(e[1]-t[1]),f=1;else if(r&2)o=(n[2]-t[0])/(e[0]-t[0]),f=2;else if(r&1)o=(n[0]-t[0])/(e[0]-t[0]),f=0;else return null;for(let p=0;p<t.length;p++)i[p]=(f&1)===p?n[f]:o*(e[p]-t[p])+t[p];return i}function Lc(t,e){let r=0;return t[0]<e[0]?r|=1:t[0]>e[2]&&(r|=2),t[1]<e[1]?r|=4:t[1]>e[3]&&(r|=8),r}function _v(t,e){const{size:r=2,broken:n=!1,gridResolution:i=10,gridOffset:o=[0,0],startIndex:f=0,endIndex:p=t.length}=e||{},y=(p-f)/r;let T=[];const R=[T],x=Yl(t,0,r,f);let M,U;const W=yv(x,i,o,[]),j=[];hi(T,x);for(let G=1;G<y;G++){for(M=Yl(t,G,r,f,M),U=Lc(M,W);U;){Xd(x,M,U,W,j);const re=Lc(j,W);re&&(Xd(x,j,re,W,j),U=re),hi(T,j),Wd(x,j),u8(W,i,U),n&&T.length>r&&(T=[],R.push(T),hi(T,x)),U=Lc(M,W)}hi(T,M),Wd(x,M)}return n?R:R[0]}const Pm=0,l8=1;function mv(t,e=null,r){if(!t.length)return[];const{size:n=2,gridResolution:i=10,gridOffset:o=[0,0],edgeTypes:f=!1}=r||{},p=[],y=[{pos:t,types:f?new Array(t.length/n).fill(l8):null,holes:e||[]}],T=[[],[]];let R=[];for(;y.length;){const{pos:x,types:M,holes:U}=y.shift();c8(x,n,U[0]||x.length,T),R=yv(T[0],i,o,R);const W=Lc(T[1],R);if(W){let j=km(x,M,n,0,U[0]||x.length,R,W);const G={pos:j[0].pos,types:j[0].types,holes:[]},re={pos:j[1].pos,types:j[1].types,holes:[]};y.push(G,re);for(let se=0;se<U.length;se++)j=km(x,M,n,U[se],U[se+1]||x.length,R,W),j[0]&&(G.holes.push(G.pos.length),G.pos=kc(G.pos,j[0].pos),f&&(G.types=kc(G.types,j[0].types))),j[1]&&(re.holes.push(re.pos.length),re.pos=kc(re.pos,j[1].pos),f&&(re.types=kc(re.types,j[1].types)))}else{const j={positions:x};f&&(j.edgeTypes=M),U.length&&(j.holeIndices=U),p.push(j)}}return p}function km(t,e,r,n,i,o,f){const p=(i-n)/r,y=[],T=[],R=[],x=[],M=[];let U,W,j;const G=Yl(t,p-1,r,n);let re=Math.sign(f&8?G[1]-o[3]:G[0]-o[2]),se=e&&e[p-1],ce=0,we=0;for(let be=0;be<p;be++)U=Yl(t,be,r,n,U),W=Math.sign(f&8?U[1]-o[3]:U[0]-o[2]),j=e&&e[n/r+be],W&&re&&re!==W&&(Xd(G,U,f,o,M),hi(y,M)&&R.push(se),hi(T,M)&&x.push(se)),W<=0?(hi(y,U)&&R.push(j),ce-=W):R.length&&(R[R.length-1]=Pm),W>=0?(hi(T,U)&&x.push(j),we+=W):x.length&&(x[x.length-1]=Pm),Wd(G,U),re=W,se=j;return[ce?{pos:y,types:e&&R}:null,we?{pos:T,types:e&&x}:null]}function yv(t,e,r,n){const i=Math.floor((t[0]-r[0])/e)*e+r[0],o=Math.floor((t[1]-r[1])/e)*e+r[1];return n[0]=i,n[1]=o,n[2]=i+e,n[3]=o+e,n}function u8(t,e,r){r&8?(t[1]+=e,t[3]+=e):r&4?(t[1]-=e,t[3]-=e):r&2?(t[0]+=e,t[2]+=e):r&1&&(t[0]-=e,t[2]-=e)}function c8(t,e,r,n){let i=1/0,o=-1/0,f=1/0,p=-1/0;for(let y=0;y<r;y+=e){const T=t[y],R=t[y+1];i=T<i?T:i,o=T>o?T:o,f=R<f?R:f,p=R>p?R:p}return n[0][0]=i,n[0][1]=f,n[1][0]=o,n[1][1]=p,n}function kc(t,e){for(let r=0;r<e.length;r++)t.push(e[r]);return t}const f8=85.051129;function h8(t,e){const{size:r=2,startIndex:n=0,endIndex:i=t.length,normalize:o=!0}=e,f=t.slice(n,i);vv(f,r,0,i-n);const p=_v(f,{size:r,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(o)for(const y of p)wv(y,r);return p}function d8(t,e=null,r){const{size:n=2,normalize:i=!0,edgeTypes:o=!1}=r;e=e||[];const f=[],p=[];let y=0,T=0;for(let x=0;x<=e.length;x++){const M=e[x]||t.length,U=T,W=g8(t,n,y,M);for(let j=W;j<M;j++)f[T++]=t[j];for(let j=y;j<W;j++)f[T++]=t[j];vv(f,n,U,T),p8(f,n,U,T,r==null?void 0:r.maxLatitude),y=M,p[x]=T}p.pop();const R=mv(f,p,{size:n,gridResolution:360,gridOffset:[-180,-180],edgeTypes:o});if(i)for(const x of R)wv(x.positions,n);return R}function g8(t,e,r,n){let i=-1,o=-1;for(let f=r+1;f<n;f+=e){const p=Math.abs(t[f]);p>i&&(i=p,o=f-1)}return o}function p8(t,e,r,n,i=f8){const o=t[r],f=t[n-e];if(Math.abs(o-f)>180){const p=Yl(t,0,e,r);p[0]+=Math.round((f-o)/360)*360,hi(t,p),p[1]=Math.sign(p[1])*i,hi(t,p),p[0]=o,hi(t,p)}}function vv(t,e,r,n){let i=t[0],o;for(let f=r;f<n;f+=e){o=t[f];const p=o-i;(p>180||p<-180)&&(o-=Math.round(p/360)*360),t[f]=i=o}}function wv(t,e){let r;const n=t.length/e;for(let o=0;o<n&&(r=t[o*e],(r+180)%360===0);o++);const i=-Math.round(r/360)*360;if(i!==0)for(let o=0;o<n;o++)t[o*e]+=i}class _8 extends Af{constructor(e){const{indices:r,attributes:n}=m8(e);super({...e,indices:r,attributes:n})}}function m8(t){const{radius:e,height:r=1,nradial:n=10}=t;let{vertices:i}=t;i&&(tr.assert(i.length>=n),i=i.flatMap(U=>[U[0],U[1]]),Ng(i,Mg.COUNTER_CLOCKWISE));const o=r>0,f=n+1,p=o?f*3+1:n,y=Math.PI*2/n,T=new Uint16Array(o?n*3*2:0),R=new Float32Array(p*3),x=new Float32Array(p*3);let M=0;if(o){for(let U=0;U<f;U++){const W=U*y,j=U%n,G=Math.sin(W),re=Math.cos(W);for(let se=0;se<2;se++)R[M+0]=i?i[j*2]:re*e,R[M+1]=i?i[j*2+1]:G*e,R[M+2]=(1/2-se)*r,x[M+0]=i?i[j*2]:re,x[M+1]=i?i[j*2+1]:G,M+=3}R[M+0]=R[M-3],R[M+1]=R[M-2],R[M+2]=R[M-1],M+=3}for(let U=o?0:1;U<f;U++){const W=Math.floor(U/2)*Math.sign(.5-U%2),j=W*y,G=(W+n)%n,re=Math.sin(j),se=Math.cos(j);R[M+0]=i?i[G*2]:se*e,R[M+1]=i?i[G*2+1]:re*e,R[M+2]=r/2,x[M+2]=1,M+=3}if(o){let U=0;for(let W=0;W<n;W++)T[U++]=W*2+0,T[U++]=W*2+2,T[U++]=W*2+0,T[U++]=W*2+1,T[U++]=W*2+1,T[U++]=W*2+3}return{indices:T,attributes:{POSITION:{size:3,value:R},NORMAL:{size:3,value:x}}}}const y8=`#version 300 es
#define SHADER_NAME column-layer-vertex-shader
in vec3 positions;
in vec3 normals;
in vec3 instancePositions;
in float instanceElevations;
in vec3 instancePositions64Low;
in vec4 instanceFillColors;
in vec4 instanceLineColors;
in float instanceStrokeWidths;
in vec3 instancePickingColors;
uniform float opacity;
uniform float radius;
uniform float angle;
uniform vec2 offset;
uniform bool extruded;
uniform bool stroked;
uniform bool isStroke;
uniform float coverage;
uniform float elevationScale;
uniform float edgeDistance;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform int radiusUnits;
uniform int widthUnits;
out vec4 vColor;
#ifdef FLAT_SHADING
out vec4 position_commonspace;
#endif
void main(void) {
geometry.worldPosition = instancePositions;
vec4 color = isStroke ? instanceLineColors : instanceFillColors;
mat2 rotationMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
float elevation = 0.0;
float strokeOffsetRatio = 1.0;
if (extruded) {
elevation = instanceElevations * (positions.z + 1.0) / 2.0 * elevationScale;
} else if (stroked) {
float widthPixels = clamp(
project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
widthMinPixels, widthMaxPixels) / 2.0;
float halfOffset = project_pixel_size(widthPixels) / project_size(edgeDistance * coverage * radius);
if (isStroke) {
strokeOffsetRatio -= sign(positions.z) * halfOffset;
} else {
strokeOffsetRatio -= halfOffset;
}
}
float shouldRender = float(color.a > 0.0 && instanceElevations >= 0.0);
float dotRadius = radius * coverage * shouldRender;
geometry.pickingColor = instancePickingColors;
vec3 centroidPosition = vec3(instancePositions.xy, instancePositions.z + elevation);
vec3 centroidPosition64Low = instancePositions64Low;
vec2 offset = (rotationMatrix * positions.xy * strokeOffsetRatio + offset) * dotRadius;
if (radiusUnits == UNIT_METERS) {
offset = project_size(offset);
}
vec3 pos = vec3(offset, 0.);
DECKGL_FILTER_SIZE(pos, geometry);
gl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64Low, pos, geometry.position);
geometry.normal = project_normal(vec3(rotationMatrix * normals.xy, normals.z));
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
if (extruded && !isStroke) {
#ifdef FLAT_SHADING
position_commonspace = geometry.position;
vColor = vec4(color.rgb, color.a * opacity);
#else
vec3 lightColor = lighting_getLightColor(color.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);
vColor = vec4(lightColor, color.a * opacity);
#endif
} else {
vColor = vec4(color.rgb, color.a * opacity);
}
DECKGL_FILTER_COLOR(vColor, geometry);
}
`,v8=`#version 300 es
#define SHADER_NAME column-layer-fragment-shader
precision highp float;
uniform vec3 project_uCameraPosition;
uniform bool extruded;
uniform bool isStroke;
out vec4 fragColor;
in vec4 vColor;
#ifdef FLAT_SHADING
in vec4 position_commonspace;
#endif
void main(void) {
fragColor = vColor;
geometry.uv = vec2(0.);
#ifdef FLAT_SHADING
if (extruded && !isStroke && !bool(picking.isActive)) {
vec3 normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));
fragColor.rgb = lighting_getLightColor(vColor.rgb, project_uCameraPosition, position_commonspace.xyz, normal);
}
#endif
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,hf=[0,0,0,255],w8={diskResolution:{type:"number",min:4,value:20},vertices:null,radius:{type:"number",min:0,value:1e3},angle:{type:"number",value:0},offset:{type:"array",value:[0,0]},coverage:{type:"number",min:0,max:1,value:1},elevationScale:{type:"number",min:0,value:1},radiusUnits:"meters",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,extruded:!0,wireframe:!1,filled:!0,stroked:!1,flatShading:!1,getPosition:{type:"accessor",value:t=>t.position},getFillColor:{type:"accessor",value:hf},getLineColor:{type:"accessor",value:hf},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0,getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class Og extends ca{getShaders(){const e={},{flatShading:r}=this.props;return r&&(e.FLAT_SHADING=1),super.getShaders({vs:y8,fs:v8,defines:e,modules:[pg,r?FR:wy,yg]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceElevations:{size:1,transition:!0,accessor:"getElevation"},instanceFillColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getFillColor",defaultValue:hf},instanceLineColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getLineColor",defaultValue:hf},instanceStrokeWidths:{size:1,accessor:"getLineWidth",transition:!0}})}updateState(e){var p;super.updateState(e);const{props:r,oldProps:n,changeFlags:i}=e,o=i.extensionsChanged||r.flatShading!==n.flatShading;o&&((p=this.state.models)==null||p.forEach(y=>y.destroy()),this.setState(this._getModels()),this.getAttributeManager().invalidateAll());const f=this.getNumInstances();this.state.fillModel.setInstanceCount(f),this.state.wireframeModel.setInstanceCount(f),(o||r.diskResolution!==n.diskResolution||r.vertices!==n.vertices||(r.extruded||r.stroked)!==(n.extruded||n.stroked))&&this._updateGeometry(r)}getGeometry(e,r,n){const i=new _8({radius:1,height:n?2:0,vertices:r,nradial:e});let o=0;if(r)for(let f=0;f<e;f++){const p=r[f],y=Math.sqrt(p[0]*p[0]+p[1]*p[1]);o+=y/e}else o=1;return this.setState({edgeDistance:Math.cos(Math.PI/e)*o}),i}_getModels(){const e=this.getShaders(),r=this.getAttributeManager().getBufferLayouts(),n=new Vi(this.context.device,{...e,id:`${this.props.id}-fill`,bufferLayout:r,isInstanced:!0}),i=new Vi(this.context.device,{...e,id:`${this.props.id}-wireframe`,bufferLayout:r,isInstanced:!0});return{fillModel:n,wireframeModel:i,models:[i,n]}}_updateGeometry({diskResolution:e,vertices:r,extruded:n,stroked:i}){const o=this.getGeometry(e,r,n||i);this.setState({fillVertexCount:o.attributes.POSITION.value.length/3});const f=this.state.fillModel,p=this.state.wireframeModel;f.setGeometry(o),f.setTopology("triangle-strip"),f.setIndexBuffer(null),p.setGeometry(o),p.setTopology("line-list")}draw({uniforms:e}){const{lineWidthUnits:r,lineWidthScale:n,lineWidthMinPixels:i,lineWidthMaxPixels:o,radiusUnits:f,elevationScale:p,extruded:y,filled:T,stroked:R,wireframe:x,offset:M,coverage:U,radius:W,angle:j}=this.props,G=this.state.fillModel,re=this.state.wireframeModel,{fillVertexCount:se,edgeDistance:ce}=this.state,we={...e,radius:W,angle:j/180*Math.PI,offset:M,extruded:y,stroked:R,coverage:U,elevationScale:p,edgeDistance:ce,radiusUnits:Xl[f],widthUnits:Xl[r],widthScale:n,widthMinPixels:i,widthMaxPixels:o};y&&x&&(re.setUniforms(we),re.setUniforms({isStroke:!0}),re.draw(this.context.renderPass)),G.setUniforms(we),T&&(G.setVertexCount(se),G.setUniforms({isStroke:!1}),G.draw(this.context.renderPass)),!y&&R&&(G.setVertexCount(se*2/3),G.setUniforms({isStroke:!0}),G.draw(this.context.renderPass))}}Og.layerName="ColumnLayer";Og.defaultProps=w8;function T8(t,e,r,n){let i;if(Array.isArray(t[0])){const o=t.length*e;i=new Array(o);for(let f=0;f<t.length;f++)for(let p=0;p<e;p++)i[f*e+p]=t[f][p]||0}else i=t;return r?_v(i,{size:e,gridResolution:r}):n?h8(i,{size:e}):i}const E8=1,S8=2,Zh=4;class b8 extends dv{constructor(e){super({...e,attributes:{positions:{size:3,padding:18,initialize:!0,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(e){return this.attributes[e]}getGeometryFromBuffer(e){return this.normalize?super.getGeometryFromBuffer(e):null}normalizeGeometry(e){return this.normalize?T8(e,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):e}getGeometrySize(e){if(xm(e)){let n=0;for(const i of e)n+=this.getGeometrySize(i);return n}const r=this.getPathLength(e);return r<2?0:this.isClosed(e)?r<3?0:r+2:r}updateGeometryAttributes(e,r){if(r.geometrySize!==0)if(e&&xm(e))for(const n of e){const i=this.getGeometrySize(n);r.geometrySize=i,this.updateGeometryAttributes(n,r),r.vertexStart+=i}else this._updateSegmentTypes(e,r),this._updatePositions(e,r)}_updateSegmentTypes(e,r){const n=this.attributes.segmentTypes,i=e?this.isClosed(e):!1,{vertexStart:o,geometrySize:f}=r;n.fill(0,o,o+f),i?(n[o]=Zh,n[o+f-2]=Zh):(n[o]+=E8,n[o+f-2]+=S8),n[o+f-1]=Zh}_updatePositions(e,r){const{positions:n}=this.attributes;if(!n||!e)return;const{vertexStart:i,geometrySize:o}=r,f=new Array(3);for(let p=i,y=0;y<o;p++,y++)this.getPointOnPath(e,y,f),n[p*3]=f[0],n[p*3+1]=f[1],n[p*3+2]=f[2]}getPathLength(e){return e.length/this.positionSize}getPointOnPath(e,r,n=[]){const{positionSize:i}=this;r*i>=e.length&&(r+=1-e.length/i);const o=r*i;return n[0]=e[o],n[1]=e[o+1],n[2]=i===3&&e[o+2]||0,n}isClosed(e){if(!this.normalize)return!!this.opts.loop;const{positionSize:r}=this,n=e.length-r;return e[0]===e[n]&&e[1]===e[n+1]&&(r===2||e[2]===e[n+2])}}function xm(t){return Array.isArray(t[0])}const C8=`#version 300 es
#define SHADER_NAME path-layer-vertex-shader
in vec2 positions;
in float instanceTypes;
in vec3 instanceStartPositions;
in vec3 instanceEndPositions;
in vec3 instanceLeftPositions;
in vec3 instanceRightPositions;
in vec3 instanceLeftPositions64Low;
in vec3 instanceStartPositions64Low;
in vec3 instanceEndPositions64Low;
in vec3 instanceRightPositions64Low;
in float instanceStrokeWidths;
in vec4 instanceColors;
in vec3 instancePickingColors;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float jointType;
uniform float capType;
uniform float miterLimit;
uniform bool billboard;
uniform int widthUnits;
uniform float opacity;
out vec4 vColor;
out vec2 vCornerOffset;
out float vMiterLength;
out vec2 vPathPosition;
out float vPathLength;
out float vJointType;
const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);
float flipIfTrue(bool flag) {
return -(float(flag) * 2. - 1.);
}
vec3 getLineJoinOffset(
vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
vec2 width
) {
bool isEnd = positions.x > 0.0;
float sideOfPath = positions.y;
float isJoint = float(sideOfPath == 0.0);
vec3 deltaA3 = (currPoint - prevPoint);
vec3 deltaB3 = (nextPoint - currPoint);
mat3 rotationMatrix;
bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);
if (needsRotation) {
deltaA3 = deltaA3 * rotationMatrix;
deltaB3 = deltaB3 * rotationMatrix;
}
vec2 deltaA = deltaA3.xy / width;
vec2 deltaB = deltaB3.xy / width;
float lenA = length(deltaA);
float lenB = length(deltaB);
vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);
vec2 perpA = vec2(-dirA.y, dirA.x);
vec2 perpB = vec2(-dirB.y, dirB.x);
vec2 tangent = dirA + dirB;
tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
vec2 miterVec = vec2(-tangent.y, tangent.x);
vec2 dir = isEnd ? dirA : dirB;
vec2 perp = isEnd ? perpA : perpB;
float L = isEnd ? lenA : lenB;
float sinHalfA = abs(dot(miterVec, perp));
float cosHalfA = abs(dot(dirA, miterVec));
float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);
float cornerPosition = sideOfPath * turnDirection;
float miterSize = 1.0 / max(sinHalfA, EPSILON);
miterSize = mix(
min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
miterSize,
step(0.0, cornerPosition)
);
vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
* (sideOfPath + isJoint * turnDirection);
bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
bool isCap = isStartCap || isEndCap;
if (isCap) {
offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);
vJointType = capType;
} else {
vJointType = jointType;
}
vPathLength = L;
vCornerOffset = offsetVec;
vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
vMiterLength = isCap ? isJoint : vMiterLength;
vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
vPathPosition = vec2(
dot(offsetFromStartOfPath, perp),
dot(offsetFromStartOfPath, dir)
);
geometry.uv = vPathPosition;
float isValid = step(instanceTypes, 3.5);
vec3 offset = vec3(offsetVec * width * isValid, 0.0);
if (needsRotation) {
offset = rotationMatrix * offset;
}
return offset;
}
void clipLine(inout vec4 position, vec4 refPosition) {
if (position.w < EPSILON) {
float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
position = refPosition + (position - refPosition) * r;
}
}
void main() {
geometry.pickingColor = instancePickingColors;
vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);
float isEnd = positions.x;
vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);
vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);
vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);
geometry.worldPosition = currPosition;
vec2 widthPixels = vec2(clamp(
project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
widthMinPixels, widthMaxPixels) / 2.0);
vec3 width;
if (billboard) {
vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);
clipLine(prevPositionScreen, currPositionScreen);
clipLine(nextPositionScreen, currPositionScreen);
clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));
width = vec3(widthPixels, 0.0);
DECKGL_FILTER_SIZE(width, geometry);
vec3 offset = getLineJoinOffset(
prevPositionScreen.xyz / prevPositionScreen.w,
currPositionScreen.xyz / currPositionScreen.w,
nextPositionScreen.xyz / nextPositionScreen.w,
project_pixel_size_to_clipspace(width.xy)
);
DECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);
gl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);
} else {
prevPosition = project_position(prevPosition, prevPosition64Low);
currPosition = project_position(currPosition, currPosition64Low);
nextPosition = project_position(nextPosition, nextPosition64Low);
width = vec3(project_pixel_size(widthPixels), 0.0);
DECKGL_FILTER_SIZE(width, geometry);
vec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);
geometry.position = vec4(currPosition + offset, 1.0);
gl_Position = project_common_position_to_clipspace(geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
DECKGL_FILTER_COLOR(vColor, geometry);
}
`,R8=`#version 300 es
#define SHADER_NAME path-layer-fragment-shader
precision highp float;
uniform float miterLimit;
in vec4 vColor;
in vec2 vCornerOffset;
in float vMiterLength;
in vec2 vPathPosition;
in float vPathLength;
in float vJointType;
out vec4 fragColor;
void main(void) {
geometry.uv = vPathPosition;
if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
discard;
}
if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {
discard;
}
}
fragColor = vColor;
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,Tv=[0,0,0,255],P8={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:t=>t.path},getColor:{type:"accessor",value:Tv},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},qh={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class Dg extends ca{getShaders(){return super.getShaders({vs:C8,fs:R8,modules:[pg,yg]})}get wrapLongitude(){return!1}getBounds(){var e;return(e=this.getAttributeManager())==null?void 0:e.getBounds(["vertexPositions"])}initializeState(){this.getAttributeManager().addInstanced({vertexPositions:{size:3,vertexOffset:1,type:"float64",fp64:this.use64bitPositions(),transition:qh,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:"uint8",update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:qh,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",accessor:"getColor",transition:qh,defaultValue:Tv},instancePickingColors:{size:4,type:"uint8",accessor:(n,{index:i,target:o})=>this.encodePickingColor(n&&n.__source?n.__source.index:i,o)}}),this.setState({pathTesselator:new b8({fp64:this.use64bitPositions()})})}updateState(e){var f;super.updateState(e);const{props:r,changeFlags:n}=e,i=this.getAttributeManager();if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPath)){const{pathTesselator:p}=this.state,y=r.data.attributes||{};p.updateGeometry({data:r.data,geometryBuffer:y.getPath,buffers:y,normalize:!r._pathType,loop:r._pathType==="loop",getGeometry:r.getPath,positionFormat:r.positionFormat,wrapLongitude:r.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:n.dataChanged}),this.setState({numInstances:p.instanceCount,startIndices:p.vertexStarts}),n.dataChanged||i.invalidateAll()}n.extensionsChanged&&((f=this.state.model)==null||f.destroy(),this.state.model=this._getModel(),i.invalidateAll())}getPickingInfo(e){const r=super.getPickingInfo(e),{index:n}=r,i=this.props.data;return i[0]&&i[0].__source&&(r.object=i.find(o=>o.__source.index===n)),r}disablePickingIndex(e){const r=this.props.data;if(r[0]&&r[0].__source)for(let n=0;n<r.length;n++)r[n].__source.index===e&&this._disablePickingIndex(n);else super.disablePickingIndex(e)}draw({uniforms:e}){const{jointRounded:r,capRounded:n,billboard:i,miterLimit:o,widthUnits:f,widthScale:p,widthMinPixels:y,widthMaxPixels:T}=this.props,R=this.state.model;R.setUniforms(e),R.setUniforms({jointType:Number(r),capType:Number(n),billboard:i,widthUnits:Xl[f],widthScale:p,miterLimit:o,widthMinPixels:y,widthMaxPixels:T}),R.draw(this.context.renderPass)}_getModel(){const e=[0,1,2,1,4,2,1,3,4,3,5,4],r=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new Vi(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new Af({topology:"triangle-list",attributes:{indices:new Uint16Array(e),positions:{value:new Float32Array(r),size:2}}}),isInstanced:!0})}calculatePositions(e){const{pathTesselator:r}=this.state;e.startIndices=r.vertexStarts,e.value=r.get("positions")}calculateSegmentTypes(e){const{pathTesselator:r}=this.state;e.startIndices=r.vertexStarts,e.value=r.get("segmentTypes")}}Dg.defaultProps=P8;Dg.layerName="PathLayer";var xc={exports:{}},Mm;function k8(){if(Mm)return xc.exports;Mm=1,xc.exports=t,xc.exports.default=t;function t(q,ae,Q){Q=Q||2;var de=ae&&ae.length,ue=de?ae[0]*Q:q.length,X=e(q,0,ue,Q,!0),te=[];if(!X||X.next===X.prev)return te;var ke,Ve,je,ot,Ye,Ke,et;if(de&&(X=y(q,ae,X,Q)),q.length>80*Q){ke=je=q[0],Ve=ot=q[1];for(var At=Q;At<ue;At+=Q)Ye=q[At],Ke=q[At+1],Ye<ke&&(ke=Ye),Ke<Ve&&(Ve=Ke),Ye>je&&(je=Ye),Ke>ot&&(ot=Ke);et=Math.max(je-ke,ot-Ve),et=et!==0?32767/et:0}return n(X,te,Q,ke,Ve,et,0),te}function e(q,ae,Q,de,ue){var X,te;if(ue===Vt(q,ae,Q,de)>0)for(X=ae;X<Q;X+=de)te=mt(X,q[X],q[X+1],te);else for(X=Q-de;X>=ae;X-=de)te=mt(X,q[X],q[X+1],te);return te&&we(te,te.next)&&(_t(te),te=te.next),te}function r(q,ae){if(!q)return q;ae||(ae=q);var Q=q,de;do if(de=!1,!Q.steiner&&(we(Q,Q.next)||ce(Q.prev,Q,Q.next)===0)){if(_t(Q),Q=ae=Q.prev,Q===Q.next)break;de=!0}else Q=Q.next;while(de||Q!==ae);return ae}function n(q,ae,Q,de,ue,X,te){if(q){!te&&X&&U(q,de,ue,X);for(var ke=q,Ve,je;q.prev!==q.next;){if(Ve=q.prev,je=q.next,X?o(q,de,ue,X):i(q)){ae.push(Ve.i/Q|0),ae.push(q.i/Q|0),ae.push(je.i/Q|0),_t(q),q=je.next,ke=je.next;continue}if(q=je,q===ke){te?te===1?(q=f(r(q),ae,Q),n(q,ae,Q,de,ue,X,2)):te===2&&p(q,ae,Q,de,ue,X):n(r(q),ae,Q,de,ue,X,1);break}}}}function i(q){var ae=q.prev,Q=q,de=q.next;if(ce(ae,Q,de)>=0)return!1;for(var ue=ae.x,X=Q.x,te=de.x,ke=ae.y,Ve=Q.y,je=de.y,ot=ue<X?ue<te?ue:te:X<te?X:te,Ye=ke<Ve?ke<je?ke:je:Ve<je?Ve:je,Ke=ue>X?ue>te?ue:te:X>te?X:te,et=ke>Ve?ke>je?ke:je:Ve>je?Ve:je,At=de.next;At!==ae;){if(At.x>=ot&&At.x<=Ke&&At.y>=Ye&&At.y<=et&&re(ue,ke,X,Ve,te,je,At.x,At.y)&&ce(At.prev,At,At.next)>=0)return!1;At=At.next}return!0}function o(q,ae,Q,de){var ue=q.prev,X=q,te=q.next;if(ce(ue,X,te)>=0)return!1;for(var ke=ue.x,Ve=X.x,je=te.x,ot=ue.y,Ye=X.y,Ke=te.y,et=ke<Ve?ke<je?ke:je:Ve<je?Ve:je,At=ot<Ye?ot<Ke?ot:Ke:Ye<Ke?Ye:Ke,Hr=ke>Ve?ke>je?ke:je:Ve>je?Ve:je,Jr=ot>Ye?ot>Ke?ot:Ke:Ye>Ke?Ye:Ke,un=j(et,At,ae,Q,de),pn=j(Hr,Jr,ae,Q,de),Ft=q.prevZ,Pt=q.nextZ;Ft&&Ft.z>=un&&Pt&&Pt.z<=pn;){if(Ft.x>=et&&Ft.x<=Hr&&Ft.y>=At&&Ft.y<=Jr&&Ft!==ue&&Ft!==te&&re(ke,ot,Ve,Ye,je,Ke,Ft.x,Ft.y)&&ce(Ft.prev,Ft,Ft.next)>=0||(Ft=Ft.prevZ,Pt.x>=et&&Pt.x<=Hr&&Pt.y>=At&&Pt.y<=Jr&&Pt!==ue&&Pt!==te&&re(ke,ot,Ve,Ye,je,Ke,Pt.x,Pt.y)&&ce(Pt.prev,Pt,Pt.next)>=0))return!1;Pt=Pt.nextZ}for(;Ft&&Ft.z>=un;){if(Ft.x>=et&&Ft.x<=Hr&&Ft.y>=At&&Ft.y<=Jr&&Ft!==ue&&Ft!==te&&re(ke,ot,Ve,Ye,je,Ke,Ft.x,Ft.y)&&ce(Ft.prev,Ft,Ft.next)>=0)return!1;Ft=Ft.prevZ}for(;Pt&&Pt.z<=pn;){if(Pt.x>=et&&Pt.x<=Hr&&Pt.y>=At&&Pt.y<=Jr&&Pt!==ue&&Pt!==te&&re(ke,ot,Ve,Ye,je,Ke,Pt.x,Pt.y)&&ce(Pt.prev,Pt,Pt.next)>=0)return!1;Pt=Pt.nextZ}return!0}function f(q,ae,Q){var de=q;do{var ue=de.prev,X=de.next.next;!we(ue,X)&&be(ue,de,de.next,X)&&Ue(ue,X)&&Ue(X,ue)&&(ae.push(ue.i/Q|0),ae.push(de.i/Q|0),ae.push(X.i/Q|0),_t(de),_t(de.next),de=q=X),de=de.next}while(de!==q);return r(de)}function p(q,ae,Q,de,ue,X){var te=q;do{for(var ke=te.next.next;ke!==te.prev;){if(te.i!==ke.i&&se(te,ke)){var Ve=it(te,ke);te=r(te,te.next),Ve=r(Ve,Ve.next),n(te,ae,Q,de,ue,X,0),n(Ve,ae,Q,de,ue,X,0);return}ke=ke.next}te=te.next}while(te!==q)}function y(q,ae,Q,de){var ue=[],X,te,ke,Ve,je;for(X=0,te=ae.length;X<te;X++)ke=ae[X]*de,Ve=X<te-1?ae[X+1]*de:q.length,je=e(q,ke,Ve,de,!1),je===je.next&&(je.steiner=!0),ue.push(G(je));for(ue.sort(T),X=0;X<ue.length;X++)Q=R(ue[X],Q);return Q}function T(q,ae){return q.x-ae.x}function R(q,ae){var Q=x(q,ae);if(!Q)return ae;var de=it(Q,q);return r(de,de.next),r(Q,Q.next)}function x(q,ae){var Q=ae,de=q.x,ue=q.y,X=-1/0,te;do{if(ue<=Q.y&&ue>=Q.next.y&&Q.next.y!==Q.y){var ke=Q.x+(ue-Q.y)*(Q.next.x-Q.x)/(Q.next.y-Q.y);if(ke<=de&&ke>X&&(X=ke,te=Q.x<Q.next.x?Q:Q.next,ke===de))return te}Q=Q.next}while(Q!==ae);if(!te)return null;var Ve=te,je=te.x,ot=te.y,Ye=1/0,Ke;Q=te;do de>=Q.x&&Q.x>=je&&de!==Q.x&&re(ue<ot?de:X,ue,je,ot,ue<ot?X:de,ue,Q.x,Q.y)&&(Ke=Math.abs(ue-Q.y)/(de-Q.x),Ue(Q,q)&&(Ke<Ye||Ke===Ye&&(Q.x>te.x||Q.x===te.x&&M(te,Q)))&&(te=Q,Ye=Ke)),Q=Q.next;while(Q!==Ve);return te}function M(q,ae){return ce(q.prev,q,ae.prev)<0&&ce(ae.next,q,q.next)<0}function U(q,ae,Q,de){var ue=q;do ue.z===0&&(ue.z=j(ue.x,ue.y,ae,Q,de)),ue.prevZ=ue.prev,ue.nextZ=ue.next,ue=ue.next;while(ue!==q);ue.prevZ.nextZ=null,ue.prevZ=null,W(ue)}function W(q){var ae,Q,de,ue,X,te,ke,Ve,je=1;do{for(Q=q,q=null,X=null,te=0;Q;){for(te++,de=Q,ke=0,ae=0;ae<je&&(ke++,de=de.nextZ,!!de);ae++);for(Ve=je;ke>0||Ve>0&&de;)ke!==0&&(Ve===0||!de||Q.z<=de.z)?(ue=Q,Q=Q.nextZ,ke--):(ue=de,de=de.nextZ,Ve--),X?X.nextZ=ue:q=ue,ue.prevZ=X,X=ue;Q=de}X.nextZ=null,je*=2}while(te>1);return q}function j(q,ae,Q,de,ue){return q=(q-Q)*ue|0,ae=(ae-de)*ue|0,q=(q|q<<8)&16711935,q=(q|q<<4)&252645135,q=(q|q<<2)&858993459,q=(q|q<<1)&1431655765,ae=(ae|ae<<8)&16711935,ae=(ae|ae<<4)&252645135,ae=(ae|ae<<2)&858993459,ae=(ae|ae<<1)&1431655765,q|ae<<1}function G(q){var ae=q,Q=q;do(ae.x<Q.x||ae.x===Q.x&&ae.y<Q.y)&&(Q=ae),ae=ae.next;while(ae!==q);return Q}function re(q,ae,Q,de,ue,X,te,ke){return(ue-te)*(ae-ke)>=(q-te)*(X-ke)&&(q-te)*(de-ke)>=(Q-te)*(ae-ke)&&(Q-te)*(X-ke)>=(ue-te)*(de-ke)}function se(q,ae){return q.next.i!==ae.i&&q.prev.i!==ae.i&&!nt(q,ae)&&(Ue(q,ae)&&Ue(ae,q)&&Je(q,ae)&&(ce(q.prev,q,ae.prev)||ce(q,ae.prev,ae))||we(q,ae)&&ce(q.prev,q,q.next)>0&&ce(ae.prev,ae,ae.next)>0)}function ce(q,ae,Q){return(ae.y-q.y)*(Q.x-ae.x)-(ae.x-q.x)*(Q.y-ae.y)}function we(q,ae){return q.x===ae.x&&q.y===ae.y}function be(q,ae,Q,de){var ue=Xe(ce(q,ae,Q)),X=Xe(ce(q,ae,de)),te=Xe(ce(Q,de,q)),ke=Xe(ce(Q,de,ae));return!!(ue!==X&&te!==ke||ue===0&&Pe(q,Q,ae)||X===0&&Pe(q,de,ae)||te===0&&Pe(Q,q,de)||ke===0&&Pe(Q,ae,de))}function Pe(q,ae,Q){return ae.x<=Math.max(q.x,Q.x)&&ae.x>=Math.min(q.x,Q.x)&&ae.y<=Math.max(q.y,Q.y)&&ae.y>=Math.min(q.y,Q.y)}function Xe(q){return q>0?1:q<0?-1:0}function nt(q,ae){var Q=q;do{if(Q.i!==q.i&&Q.next.i!==q.i&&Q.i!==ae.i&&Q.next.i!==ae.i&&be(Q,Q.next,q,ae))return!0;Q=Q.next}while(Q!==q);return!1}function Ue(q,ae){return ce(q.prev,q,q.next)<0?ce(q,ae,q.next)>=0&&ce(q,q.prev,ae)>=0:ce(q,ae,q.prev)<0||ce(q,q.next,ae)<0}function Je(q,ae){var Q=q,de=!1,ue=(q.x+ae.x)/2,X=(q.y+ae.y)/2;do Q.y>X!=Q.next.y>X&&Q.next.y!==Q.y&&ue<(Q.next.x-Q.x)*(X-Q.y)/(Q.next.y-Q.y)+Q.x&&(de=!de),Q=Q.next;while(Q!==q);return de}function it(q,ae){var Q=new ct(q.i,q.x,q.y),de=new ct(ae.i,ae.x,ae.y),ue=q.next,X=ae.prev;return q.next=ae,ae.prev=q,Q.next=ue,ue.prev=Q,de.next=Q,Q.prev=de,X.next=de,de.prev=X,de}function mt(q,ae,Q,de){var ue=new ct(q,ae,Q);return de?(ue.next=de.next,ue.prev=de,de.next.prev=ue,de.next=ue):(ue.prev=ue,ue.next=ue),ue}function _t(q){q.next.prev=q.prev,q.prev.next=q.next,q.prevZ&&(q.prevZ.nextZ=q.nextZ),q.nextZ&&(q.nextZ.prevZ=q.prevZ)}function ct(q,ae,Q){this.i=q,this.x=ae,this.y=Q,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}t.deviation=function(q,ae,Q,de){var ue=ae&&ae.length,X=ue?ae[0]*Q:q.length,te=Math.abs(Vt(q,0,X,Q));if(ue)for(var ke=0,Ve=ae.length;ke<Ve;ke++){var je=ae[ke]*Q,ot=ke<Ve-1?ae[ke+1]*Q:q.length;te-=Math.abs(Vt(q,je,ot,Q))}var Ye=0;for(ke=0;ke<de.length;ke+=3){var Ke=de[ke]*Q,et=de[ke+1]*Q,At=de[ke+2]*Q;Ye+=Math.abs((q[Ke]-q[At])*(q[et+1]-q[Ke+1])-(q[Ke]-q[et])*(q[At+1]-q[Ke+1]))}return te===0&&Ye===0?0:Math.abs((Ye-te)/te)};function Vt(q,ae,Q,de){for(var ue=0,X=ae,te=Q-de;X<Q;X+=de)ue+=(q[te]-q[X])*(q[X+1]+q[te+1]),te=X;return ue}return t.flatten=function(q){for(var ae=q[0][0].length,Q={vertices:[],holes:[],dimensions:ae},de=0,ue=0;ue<q.length;ue++){for(var X=0;X<q[ue].length;X++)for(var te=0;te<ae;te++)Q.vertices.push(q[ue][X][te]);ue>0&&(de+=q[ue-1].length,Q.holes.push(de))}return Q},xc.exports}var x8=k8();const M8=$d(x8),Mc=Mg.CLOCKWISE,Nm=Mg.COUNTER_CLOCKWISE,$s={isClosed:!0};function N8(t){if(t=t&&t.positions||t,!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error("invalid polygon")}function Nl(t){return"positions"in t?t.positions:t}function Uc(t){return"holeIndices"in t?t.holeIndices:null}function O8(t){return Array.isArray(t[0])}function D8(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}function I8(t){const e=t[0],r=t[t.length-1];return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]}function F8(t,e,r,n){for(let i=0;i<e;i++)if(t[r+i]!==t[n-e+i])return!1;return!0}function Om(t,e,r,n,i){let o=e;const f=r.length;for(let p=0;p<f;p++)for(let y=0;y<n;y++)t[o++]=r[p][y]||0;if(!I8(r))for(let p=0;p<n;p++)t[o++]=r[0][p]||0;return $s.start=e,$s.end=o,$s.size=n,Ng(t,i,$s),o}function Dm(t,e,r,n,i=0,o,f){o=o||r.length;const p=o-i;if(p<=0)return e;let y=e;for(let T=0;T<p;T++)t[y++]=r[i+T];if(!F8(r,n,i,o))for(let T=0;T<n;T++)t[y++]=r[i+T];return $s.start=e,$s.end=y,$s.size=n,Ng(t,f,$s),y}function Ev(t,e){N8(t);const r=[],n=[];if("positions"in t){const{positions:i,holeIndices:o}=t;if(o){let f=0;for(let p=0;p<=o.length;p++)f=Dm(r,f,i,e,o[p-1],o[p],p===0?Mc:Nm),n.push(f);return n.pop(),{positions:r,holeIndices:n}}t=i}if(!O8(t))return Dm(r,0,t,e,0,r.length,Mc),r;if(!D8(t)){let i=0;for(const[o,f]of t.entries())i=Om(r,i,f,e,o===0?Mc:Nm),n.push(i);return n.pop(),{positions:r,holeIndices:n}}return Om(r,0,t,e,Mc),r}function Gh(t,e,r){const n=t.length/3;let i=0;for(let o=0;o<n;o++){const f=(o+1)%n;i+=t[o*3+e]*t[f*3+r],i-=t[f*3+e]*t[o*3+r]}return Math.abs(i/2)}function Im(t,e,r,n){const i=t.length/3;for(let o=0;o<i;o++){const f=o*3,p=t[f+0],y=t[f+1],T=t[f+2];t[f+e]=p,t[f+r]=y,t[f+n]=T}}function L8(t,e,r,n){let i=Uc(t);i&&(i=i.map(p=>p/e));let o=Nl(t);const f=n&&e===3;if(r){const p=o.length;o=o.slice();const y=[];for(let T=0;T<p;T+=e){y[0]=o[T],y[1]=o[T+1],f&&(y[2]=o[T+2]);const R=r(y);o[T]=R[0],o[T+1]=R[1],f&&(o[T+2]=R[2])}}if(f){const p=Gh(o,0,1),y=Gh(o,0,2),T=Gh(o,1,2);if(!p&&!y&&!T)return[];p>y&&p>T||(y>T?(r||(o=o.slice()),Im(o,0,2,1)):(r||(o=o.slice()),Im(o,2,0,1)))}return M8(o,i,e)}class U8 extends dv{constructor(e){const{fp64:r,IndexType:n=Uint32Array}=e;super({...e,attributes:{positions:{size:3,type:r?Float64Array:Float32Array},vertexValid:{type:Uint16Array,size:1},indices:{type:n,size:1}}})}get(e){const{attributes:r}=this;return e==="indices"?r.indices&&r.indices.subarray(0,this.vertexCount):r[e]}updateGeometry(e){super.updateGeometry(e);const r=this.buffers.indices;if(r)this.vertexCount=(r.value||r).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(e){if(this.normalize){const r=Ev(e,this.positionSize);return this.opts.resolution?mv(Nl(r),Uc(r),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?d8(Nl(r),Uc(r),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):r}return e}getGeometrySize(e){if(Fm(e)){let r=0;for(const n of e)r+=this.getGeometrySize(n);return r}return Nl(e).length/this.positionSize}getGeometryFromBuffer(e){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(e):null}updateGeometryAttributes(e,r){if(e&&Fm(e))for(const n of e){const i=this.getGeometrySize(n);r.geometrySize=i,this.updateGeometryAttributes(n,r),r.vertexStart+=i,r.indexStart=this.indexStarts[r.geometryIndex+1]}else{const n=e;this._updateIndices(n,r),this._updatePositions(n,r),this._updateVertexValid(n,r)}}_updateIndices(e,{geometryIndex:r,vertexStart:n,indexStart:i}){const{attributes:o,indexStarts:f,typedArrayManager:p}=this;let y=o.indices;if(!y||!e)return;let T=i;const R=L8(e,this.positionSize,this.opts.preproject,this.opts.full3d);y=p.allocate(y,i+R.length,{copy:!0});for(let x=0;x<R.length;x++)y[T++]=R[x]+n;f[r+1]=i+R.length,o.indices=y}_updatePositions(e,{vertexStart:r,geometrySize:n}){const{attributes:{positions:i},positionSize:o}=this;if(!i||!e)return;const f=Nl(e);for(let p=r,y=0;y<n;p++,y++){const T=f[y*o],R=f[y*o+1],x=o>2?f[y*o+2]:0;i[p*3]=T,i[p*3+1]=R,i[p*3+2]=x}}_updateVertexValid(e,{vertexStart:r,geometrySize:n}){const{positionSize:i}=this,o=this.attributes.vertexValid,f=e&&Uc(e);if(e&&e.edgeTypes?o.set(e.edgeTypes,r):o.fill(1,r,r+n),f)for(let p=0;p<f.length;p++)o[r+f[p]/i-1]=0;o[r+n-1]=0}}function Fm(t){return Array.isArray(t)&&t.length>0&&!Number.isFinite(t[0])}const Sv=`uniform bool extruded;
uniform bool isWireframe;
uniform float elevationScale;
uniform float opacity;
in vec4 fillColors;
in vec4 lineColors;
in vec3 pickingColors;
out vec4 vColor;
struct PolygonProps {
vec3 positions;
vec3 positions64Low;
vec3 normal;
float elevations;
};
vec3 project_offset_normal(vec3 vector) {
if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {
return normalize(vector * project_uCommonUnitsPerWorldUnit);
}
return project_normal(vector);
}
void calculatePosition(PolygonProps props) {
vec3 pos = props.positions;
vec3 pos64Low = props.positions64Low;
vec3 normal = props.normal;
vec4 colors = isWireframe ? lineColors : fillColors;
geometry.worldPosition = props.positions;
geometry.pickingColor = pickingColors;
if (extruded) {
pos.z += props.elevations * elevationScale;
}
gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
if (extruded) {
#ifdef IS_SIDE_VERTEX
normal = project_offset_normal(normal);
#else
normal = project_normal(normal);
#endif
geometry.normal = normal;
vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);
vColor = vec4(lightColor, colors.a * opacity);
} else {
vColor = vec4(colors.rgb, colors.a * opacity);
}
DECKGL_FILTER_COLOR(vColor, geometry);
}
`,B8=`#version 300 es
#define SHADER_NAME solid-polygon-layer-vertex-shader
in vec3 vertexPositions;
in vec3 vertexPositions64Low;
in float elevations;
${Sv}
void main(void) {
PolygonProps props;
props.positions = vertexPositions;
props.positions64Low = vertexPositions64Low;
props.elevations = elevations;
props.normal = vec3(0.0, 0.0, 1.0);
calculatePosition(props);
}
`,V8=`#version 300 es
#define SHADER_NAME solid-polygon-layer-vertex-shader-side
#define IS_SIDE_VERTEX
in vec2 positions;
in vec3 vertexPositions;
in vec3 nextVertexPositions;
in vec3 vertexPositions64Low;
in vec3 nextVertexPositions64Low;
in float elevations;
in float instanceVertexValid;
${Sv}
void main(void) {
if(instanceVertexValid < 0.5){
gl_Position = vec4(0.);
return;
}
PolygonProps props;
vec3 pos;
vec3 pos64Low;
vec3 nextPos;
vec3 nextPos64Low;
#if RING_WINDING_ORDER_CW == 1
pos = vertexPositions;
pos64Low = vertexPositions64Low;
nextPos = nextVertexPositions;
nextPos64Low = nextVertexPositions64Low;
#else
pos = nextVertexPositions;
pos64Low = nextVertexPositions64Low;
nextPos = vertexPositions;
nextPos64Low = vertexPositions64Low;
#endif
props.positions = mix(pos, nextPos, positions.x);
props.positions64Low = mix(pos64Low, nextPos64Low, positions.x);
props.normal = vec3(
pos.y - nextPos.y + (pos64Low.y - nextPos64Low.y),
nextPos.x - pos.x + (nextPos64Low.x - pos64Low.x),
0.0);
props.elevations = elevations * positions.y;
calculatePosition(props);
}
`,z8=`#version 300 es
#define SHADER_NAME solid-polygon-layer-fragment-shader
precision highp float;
in vec4 vColor;
out vec4 fragColor;
void main(void) {
fragColor = vColor;
geometry.uv = vec2(0.);
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,df=[0,0,0,255],H8={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",_full3d:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:t=>t.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:df},getLineColor:{type:"accessor",value:df},material:!0},Nc={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class Ig extends ca{getShaders(e){return super.getShaders({vs:e==="top"?B8:V8,fs:z8,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder==="CCW"?0:1},modules:[pg,wy,yg]})}get wrapLongitude(){return!1}getBounds(){var e;return(e=this.getAttributeManager())==null?void 0:e.getBounds(["vertexPositions"])}initializeState(){const{viewport:e}=this.context;let{coordinateSystem:r}=this.props;const{_full3d:n}=this.props;e.isGeospatial&&r===Qt.DEFAULT&&(r=Qt.LNGLAT);let i;r===Qt.LNGLAT&&(n?i=e.projectPosition.bind(e):i=e.projectFlat.bind(e)),this.setState({numInstances:0,polygonTesselator:new U8({preproject:i,fp64:this.use64bitPositions(),IndexType:Uint32Array})});const o=this.getAttributeManager(),f=!0;o.remove(["instancePickingColors"]),o.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:f},vertexPositions:{size:3,type:"float64",stepMode:"dynamic",fp64:this.use64bitPositions(),transition:Nc,accessor:"getPolygon",update:this.calculatePositions,noAlloc:f,shaderAttributes:{nextVertexPositions:{vertexOffset:1}}},instanceVertexValid:{size:1,type:"uint16",stepMode:"instance",update:this.calculateVertexValid,noAlloc:f},elevations:{size:1,stepMode:"dynamic",transition:Nc,accessor:"getElevation"},fillColors:{size:this.props.colorFormat.length,type:"unorm8",stepMode:"dynamic",transition:Nc,accessor:"getFillColor",defaultValue:df},lineColors:{size:this.props.colorFormat.length,type:"unorm8",stepMode:"dynamic",transition:Nc,accessor:"getLineColor",defaultValue:df},pickingColors:{size:4,type:"uint8",stepMode:"dynamic",accessor:(p,{index:y,target:T})=>this.encodePickingColor(p&&p.__source?p.__source.index:y,T)}})}getPickingInfo(e){const r=super.getPickingInfo(e),{index:n}=r,i=this.props.data;return i[0]&&i[0].__source&&(r.object=i.find(o=>o.__source.index===n)),r}disablePickingIndex(e){const r=this.props.data;if(r[0]&&r[0].__source)for(let n=0;n<r.length;n++)r[n].__source.index===e&&this._disablePickingIndex(n);else super.disablePickingIndex(e)}draw({uniforms:e}){const{extruded:r,filled:n,wireframe:i,elevationScale:o}=this.props,{topModel:f,sideModel:p,wireframeModel:y,polygonTesselator:T}=this.state,R={...e,extruded:!!r,elevationScale:o};y&&i&&(y.setInstanceCount(T.instanceCount-1),y.setUniforms(R),y.draw(this.context.renderPass)),p&&n&&(p.setInstanceCount(T.instanceCount-1),p.setUniforms(R),p.draw(this.context.renderPass)),f&&n&&(f.setVertexCount(T.vertexCount),f.setUniforms(R),f.draw(this.context.renderPass))}updateState(e){var p;super.updateState(e),this.updateGeometry(e);const{props:r,oldProps:n,changeFlags:i}=e,o=this.getAttributeManager();(i.extensionsChanged||r.filled!==n.filled||r.extruded!==n.extruded)&&((p=this.state.models)==null||p.forEach(y=>y.destroy()),this.setState(this._getModels()),o.invalidateAll())}updateGeometry({props:e,oldProps:r,changeFlags:n}){if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon)){const{polygonTesselator:o}=this.state,f=e.data.attributes||{};o.updateGeometry({data:e.data,normalize:e._normalize,geometryBuffer:f.getPolygon,buffers:f,getGeometry:e.getPolygon,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:n.dataChanged,full3d:e._full3d}),this.setState({numInstances:o.instanceCount,startIndices:o.vertexStarts}),n.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(){const{id:e,filled:r,extruded:n}=this.props;let i,o,f;if(r){const p=this.getShaders("top");p.defines.NON_INSTANCED_MODEL=1;const y=this.getAttributeManager().getBufferLayouts({isInstanced:!1});i=new Vi(this.context.device,{...p,id:`${e}-top`,topology:"triangle-list",uniforms:{isWireframe:!1},bufferLayout:y,isIndexed:!0,userData:{excludeAttributes:{instanceVertexValid:!0}}})}if(n){const p=this.getAttributeManager().getBufferLayouts({isInstanced:!0});o=new Vi(this.context.device,{...this.getShaders("side"),id:`${e}-side`,bufferLayout:p,uniforms:{isWireframe:!1},geometry:new Af({topology:"triangle-strip",attributes:{positions:{size:2,value:new Float32Array([1,0,0,0,1,1,0,1])}}}),isInstanced:!0,userData:{excludeAttributes:{indices:!0}}}),f=new Vi(this.context.device,{...this.getShaders("side"),id:`${e}-wireframe`,bufferLayout:p,uniforms:{isWireframe:!0},geometry:new Af({topology:"line-strip",attributes:{positions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),isInstanced:!0,userData:{excludeAttributes:{indices:!0}}})}return{models:[o,f,i].filter(Boolean),topModel:i,sideModel:o,wireframeModel:f}}calculateIndices(e){const{polygonTesselator:r}=this.state;e.startIndices=r.indexStarts,e.value=r.get("indices")}calculatePositions(e){const{polygonTesselator:r}=this.state;e.startIndices=r.vertexStarts,e.value=r.get("positions")}calculateVertexValid(e){e.value=this.state.polygonTesselator.get("vertexValid")}}Ig.defaultProps=H8;Ig.layerName="SolidPolygonLayer";function j8({data:t,getIndex:e,dataRange:r,replace:n}){const{startRow:i=0,endRow:o=1/0}=r,f=t.length;let p=f,y=f;for(let M=0;M<f;M++){const U=e(t[M]);if(p>M&&U>=i&&(p=M),U>=o){y=M;break}}let T=p;const x=y-p!==n.length?t.slice(y):void 0;for(let M=0;M<n.length;M++)t[T++]=n[M];if(x){for(let M=0;M<x.length;M++)t[T++]=x[M];t.length=T}return{startRow:p,endRow:p+n.length}}const bv=[0,0,0,255],W8=[0,0,0,255],X8={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,_normalize:!0,_windingOrder:"CW",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,getPolygon:{type:"accessor",value:t=>t.polygon},getFillColor:{type:"accessor",value:W8},getLineColor:{type:"accessor",value:bv},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0};class jf extends xg{initializeState(){this.state={paths:[],pathsDiff:null},this.props.getLineDashArray&&tr.removed("getLineDashArray","PathStyleExtension")()}updateState({changeFlags:e}){const r=e.dataChanged||e.updateTriggersChanged&&(e.updateTriggersChanged.all||e.updateTriggersChanged.getPolygon);if(r&&Array.isArray(e.dataChanged)){const n=this.state.paths.slice(),i=e.dataChanged.map(o=>j8({data:n,getIndex:f=>f.__source.index,dataRange:o,replace:this._getPaths(o)}));this.setState({paths:n,pathsDiff:i})}else r&&this.setState({paths:this._getPaths(),pathsDiff:null})}_getPaths(e={}){const{data:r,getPolygon:n,positionFormat:i,_normalize:o}=this.props,f=[],p=i==="XY"?2:3,{startRow:y,endRow:T}=e,{iterable:R,objectInfo:x}=Vf(r,y,T);for(const M of R){x.index++;let U=n(M,x);o&&(U=Ev(U,p));const{holeIndices:W}=U,j=U.positions||U;if(W)for(let G=0;G<=W.length;G++){const re=j.slice(W[G-1]||0,W[G]||j.length);f.push(this.getSubLayerRow({path:re},M,x.index))}else f.push(this.getSubLayerRow({path:j},M,x.index))}return f}renderLayers(){const{data:e,_dataDiff:r,stroked:n,filled:i,extruded:o,wireframe:f,_normalize:p,_windingOrder:y,elevationScale:T,transitions:R,positionFormat:x}=this.props,{lineWidthUnits:M,lineWidthScale:U,lineWidthMinPixels:W,lineWidthMaxPixels:j,lineJointRounded:G,lineMiterLimit:re,lineDashJustified:se}=this.props,{getFillColor:ce,getLineColor:we,getLineWidth:be,getLineDashArray:Pe,getElevation:Xe,getPolygon:nt,updateTriggers:Ue,material:Je}=this.props,{paths:it,pathsDiff:mt}=this.state,_t=this.getSubLayerClass("fill",Ig),ct=this.getSubLayerClass("stroke",Dg),Vt=this.shouldRenderSubLayer("fill",it)&&new _t({_dataDiff:r,extruded:o,elevationScale:T,filled:i,wireframe:f,_normalize:p,_windingOrder:y,getElevation:Xe,getFillColor:ce,getLineColor:o&&f?we:bv,material:Je,transitions:R},this.getSubLayerProps({id:"fill",updateTriggers:Ue&&{getPolygon:Ue.getPolygon,getElevation:Ue.getElevation,getFillColor:Ue.getFillColor,lineColors:o&&f,getLineColor:Ue.getLineColor}}),{data:e,positionFormat:x,getPolygon:nt}),q=!o&&n&&this.shouldRenderSubLayer("stroke",it)&&new ct({_dataDiff:mt&&(()=>mt),widthUnits:M,widthScale:U,widthMinPixels:W,widthMaxPixels:j,jointRounded:G,miterLimit:re,dashJustified:se,_pathType:"loop",transitions:R&&{getWidth:R.getLineWidth,getColor:R.getLineColor,getPath:R.getPolygon},getColor:this.getSubLayerAccessor(we),getWidth:this.getSubLayerAccessor(be),getDashArray:this.getSubLayerAccessor(Pe)},this.getSubLayerProps({id:"stroke",updateTriggers:Ue&&{getWidth:Ue.getLineWidth,getColor:Ue.getLineColor,getDashArray:Ue.getLineDashArray}}),{data:it,positionFormat:x,getPath:ae=>ae.path});return[!o&&Vt,q,o&&Vt]}}jf.layerName="PolygonLayer";jf.defaultProps=X8;var Lt=function(t){t=t||{};var e=typeof t<"u"?t:{},r={},n;for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);var i="";function o(he){return e.locateFile?e.locateFile(he,i):i+he}var f;typeof document<"u"&&document.currentScript&&(i=document.currentScript.src),i.indexOf("blob:")!==0?i=i.substr(0,i.lastIndexOf("/")+1):i="",f=function(Re,He,ft){var u=new XMLHttpRequest;u.open("GET",Re,!0),u.responseType="arraybuffer",u.onload=function(){if(u.status==200||u.status==0&&u.response){He(u.response);return}var Mt=$i(Re);if(Mt){He(Mt.buffer);return}ft()},u.onerror=ft,u.send(null)};var p=e.print||console.log.bind(console),y=e.printErr||console.warn.bind(console);for(n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);r=null,e.arguments&&e.arguments;var T=0,R=function(he){T=he},x=function(){return T},M=8;function U(he,Re,He,ft){switch(He=He||"i8",He.charAt(He.length-1)==="*"&&(He="i32"),He){case"i1":mt[he>>0]=Re;break;case"i8":mt[he>>0]=Re;break;case"i16":ct[he>>1]=Re;break;case"i32":Vt[he>>2]=Re;break;case"i64":As=[Re>>>0,(qn=Re,+un(qn)>=1?qn>0?(Pt(+Ft(qn/4294967296),4294967295)|0)>>>0:~~+pn((qn-+(~~qn>>>0))/4294967296)>>>0:0)],Vt[he>>2]=As[0],Vt[he+4>>2]=As[1];break;case"float":q[he>>2]=Re;break;case"double":ae[he>>3]=Re;break;default:en("invalid type for setValue: "+He)}}function W(he,Re,He){switch(Re=Re||"i8",Re.charAt(Re.length-1)==="*"&&(Re="i32"),Re){case"i1":return mt[he>>0];case"i8":return mt[he>>0];case"i16":return ct[he>>1];case"i32":return Vt[he>>2];case"i64":return Vt[he>>2];case"float":return q[he>>2];case"double":return ae[he>>3];default:en("invalid type for getValue: "+Re)}return null}var j=!1;function G(he,Re){he||en("Assertion failed: "+Re)}function re(he){var Re=e["_"+he];return G(Re,"Cannot call unknown function "+he+", make sure it is exported"),Re}function se(he,Re,He,ft,u){var B={string:function(vt){var tn=0;if(vt!=null&&vt!==0){var hs=(vt.length<<2)+1;tn=io(hs),nt(vt,tn,hs)}return tn},array:function(vt){var tn=io(vt.length);return Ue(vt,tn),tn}};function Mt(vt){return Re==="string"?Pe(vt):Re==="boolean"?!!vt:vt}var jt=re(he),sr=[],yt=0;if(ft)for(var Nt=0;Nt<ft.length;Nt++){var jr=B[He[Nt]];jr?(yt===0&&(yt=so()),sr[Nt]=jr(ft[Nt])):sr[Nt]=ft[Nt]}var Ut=jt.apply(null,sr);return Ut=Mt(Ut),yt!==0&&_a(yt),Ut}function ce(he,Re,He,ft){He=He||[];var u=He.every(function(Mt){return Mt==="number"}),B=Re!=="string";return B&&u&&!ft?re(he):function(){return se(he,Re,He,arguments)}}var we=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function be(he,Re,He){for(var ft=Re+He,u=Re;he[u]&&!(u>=ft);)++u;if(u-Re>16&&he.subarray&&we)return we.decode(he.subarray(Re,u));for(var B="";Re<u;){var Mt=he[Re++];if(!(Mt&128)){B+=String.fromCharCode(Mt);continue}var jt=he[Re++]&63;if((Mt&224)==192){B+=String.fromCharCode((Mt&31)<<6|jt);continue}var sr=he[Re++]&63;if((Mt&240)==224?Mt=(Mt&15)<<12|jt<<6|sr:Mt=(Mt&7)<<18|jt<<12|sr<<6|he[Re++]&63,Mt<65536)B+=String.fromCharCode(Mt);else{var yt=Mt-65536;B+=String.fromCharCode(55296|yt>>10,56320|yt&1023)}}return B}function Pe(he,Re){return he?be(_t,he,Re):""}function Xe(he,Re,He,ft){if(!(ft>0))return 0;for(var u=He,B=He+ft-1,Mt=0;Mt<he.length;++Mt){var jt=he.charCodeAt(Mt);if(jt>=55296&&jt<=57343){var sr=he.charCodeAt(++Mt);jt=65536+((jt&1023)<<10)|sr&1023}if(jt<=127){if(He>=B)break;Re[He++]=jt}else if(jt<=2047){if(He+1>=B)break;Re[He++]=192|jt>>6,Re[He++]=128|jt&63}else if(jt<=65535){if(He+2>=B)break;Re[He++]=224|jt>>12,Re[He++]=128|jt>>6&63,Re[He++]=128|jt&63}else{if(He+3>=B)break;Re[He++]=240|jt>>18,Re[He++]=128|jt>>12&63,Re[He++]=128|jt>>6&63,Re[He++]=128|jt&63}}return Re[He]=0,He-u}function nt(he,Re,He){return Xe(he,_t,Re,He)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function Ue(he,Re){mt.set(he,Re)}function Je(he,Re){return he%Re>0&&(he+=Re-he%Re),he}var it,mt,_t,ct,Vt,q,ae;function Q(he){it=he,e.HEAP8=mt=new Int8Array(he),e.HEAP16=ct=new Int16Array(he),e.HEAP32=Vt=new Int32Array(he),e.HEAPU8=_t=new Uint8Array(he),e.HEAPU16=new Uint16Array(he),e.HEAPU32=new Uint32Array(he),e.HEAPF32=q=new Float32Array(he),e.HEAPF64=ae=new Float64Array(he)}var de=5267040,ue=24128,X=e.TOTAL_MEMORY||33554432;e.buffer?it=e.buffer:it=new ArrayBuffer(X),X=it.byteLength,Q(it),Vt[ue>>2]=de;function te(he){for(;he.length>0;){var Re=he.shift();if(typeof Re=="function"){Re();continue}var He=Re.func;typeof He=="number"?Re.arg===void 0?e.dynCall_v(He):e.dynCall_vi(He,Re.arg):He(Re.arg===void 0?null:Re.arg)}}var ke=[],Ve=[],je=[],ot=[];function Ye(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)Hr(e.preRun.shift());te(ke)}function Ke(){te(Ve)}function et(){te(je)}function At(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)Jr(e.postRun.shift());te(ot)}function Hr(he){ke.unshift(he)}function Jr(he){ot.unshift(he)}var un=Math.abs,pn=Math.ceil,Ft=Math.floor,Pt=Math.min,xr=0,Zn=null;function as(he){xr++,e.monitorRunDependencies&&e.monitorRunDependencies(xr)}function Nn(he){if(xr--,e.monitorRunDependencies&&e.monitorRunDependencies(xr),xr==0&&Zn){var Re=Zn;Zn=null,Re()}}e.preloadedImages={},e.preloadedAudios={};var Kt=null,Xi="data:application/octet-stream;base64,";function to(he){return String.prototype.startsWith?he.startsWith(Xi):he.indexOf(Xi)===0}var qn,As;Kt="data:application/octet-stream;base64,AAAAAAAAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAAAQAAAAQAAAADAAAABgAAAAUAAAACAAAAAAAAAAIAAAADAAAAAQAAAAQAAAAGAAAAAAAAAAUAAAADAAAABgAAAAQAAAAFAAAAAAAAAAEAAAACAAAABAAAAAUAAAAGAAAAAAAAAAIAAAADAAAAAQAAAAUAAAACAAAAAAAAAAEAAAADAAAABgAAAAQAAAAGAAAAAAAAAAUAAAACAAAAAQAAAAQAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAAAAAAEAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAYAAAAAAAAABQAAAAAAAAAAAAAABAAAAAUAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAYAAAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAYAAAAAAAAAAwAAAAIAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAFAAAABAAAAAAAAAABAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAYAAAAAAAAABAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAgAAAAQAAAADAAAACAAAAAEAAAAHAAAABgAAAAkAAAAAAAAAAwAAAAIAAAACAAAABgAAAAoAAAALAAAAAAAAAAEAAAAFAAAAAwAAAA0AAAABAAAABwAAAAQAAAAMAAAAAAAAAAQAAAB/AAAADwAAAAgAAAADAAAAAAAAAAwAAAAFAAAAAgAAABIAAAAKAAAACAAAAAAAAAAQAAAABgAAAA4AAAALAAAAEQAAAAEAAAAJAAAAAgAAAAcAAAAVAAAACQAAABMAAAADAAAADQAAAAEAAAAIAAAABQAAABYAAAAQAAAABAAAAAAAAAAPAAAACQAAABMAAAAOAAAAFAAAAAEAAAAHAAAABgAAAAoAAAALAAAAGAAAABcAAAAFAAAAAgAAABIAAAALAAAAEQAAABcAAAAZAAAAAgAAAAYAAAAKAAAADAAAABwAAAANAAAAGgAAAAQAAAAPAAAAAwAAAA0AAAAaAAAAFQAAAB0AAAADAAAADAAAAAcAAAAOAAAAfwAAABEAAAAbAAAACQAAABQAAAAGAAAADwAAABYAAAAcAAAAHwAAAAQAAAAIAAAADAAAABAAAAASAAAAIQAAAB4AAAAIAAAABQAAABYAAAARAAAACwAAAA4AAAAGAAAAIwAAABkAAAAbAAAAEgAAABgAAAAeAAAAIAAAAAUAAAAKAAAAEAAAABMAAAAiAAAAFAAAACQAAAAHAAAAFQAAAAkAAAAUAAAADgAAABMAAAAJAAAAKAAAABsAAAAkAAAAFQAAACYAAAATAAAAIgAAAA0AAAAdAAAABwAAABYAAAAQAAAAKQAAACEAAAAPAAAACAAAAB8AAAAXAAAAGAAAAAsAAAAKAAAAJwAAACUAAAAZAAAAGAAAAH8AAAAgAAAAJQAAAAoAAAAXAAAAEgAAABkAAAAXAAAAEQAAAAsAAAAtAAAAJwAAACMAAAAaAAAAKgAAAB0AAAArAAAADAAAABwAAAANAAAAGwAAACgAAAAjAAAALgAAAA4AAAAUAAAAEQAAABwAAAAfAAAAKgAAACwAAAAMAAAADwAAABoAAAAdAAAAKwAAACYAAAAvAAAADQAAABoAAAAVAAAAHgAAACAAAAAwAAAAMgAAABAAAAASAAAAIQAAAB8AAAApAAAALAAAADUAAAAPAAAAFgAAABwAAAAgAAAAHgAAABgAAAASAAAANAAAADIAAAAlAAAAIQAAAB4AAAAxAAAAMAAAABYAAAAQAAAAKQAAACIAAAATAAAAJgAAABUAAAA2AAAAJAAAADMAAAAjAAAALgAAAC0AAAA4AAAAEQAAABsAAAAZAAAAJAAAABQAAAAiAAAAEwAAADcAAAAoAAAANgAAACUAAAAnAAAANAAAADkAAAAYAAAAFwAAACAAAAAmAAAAfwAAACIAAAAzAAAAHQAAAC8AAAAVAAAAJwAAACUAAAAZAAAAFwAAADsAAAA5AAAALQAAACgAAAAbAAAAJAAAABQAAAA8AAAALgAAADcAAAApAAAAMQAAADUAAAA9AAAAFgAAACEAAAAfAAAAKgAAADoAAAArAAAAPgAAABwAAAAsAAAAGgAAACsAAAA+AAAALwAAAEAAAAAaAAAAKgAAAB0AAAAsAAAANQAAADoAAABBAAAAHAAAAB8AAAAqAAAALQAAACcAAAAjAAAAGQAAAD8AAAA7AAAAOAAAAC4AAAA8AAAAOAAAAEQAAAAbAAAAKAAAACMAAAAvAAAAJgAAACsAAAAdAAAARQAAADMAAABAAAAAMAAAADEAAAAeAAAAIQAAAEMAAABCAAAAMgAAADEAAAB/AAAAPQAAAEIAAAAhAAAAMAAAACkAAAAyAAAAMAAAACAAAAAeAAAARgAAAEMAAAA0AAAAMwAAAEUAAAA2AAAARwAAACYAAAAvAAAAIgAAADQAAAA5AAAARgAAAEoAAAAgAAAAJQAAADIAAAA1AAAAPQAAAEEAAABLAAAAHwAAACkAAAAsAAAANgAAAEcAAAA3AAAASQAAACIAAAAzAAAAJAAAADcAAAAoAAAANgAAACQAAABIAAAAPAAAAEkAAAA4AAAARAAAAD8AAABNAAAAIwAAAC4AAAAtAAAAOQAAADsAAABKAAAATgAAACUAAAAnAAAANAAAADoAAAB/AAAAPgAAAEwAAAAsAAAAQQAAACoAAAA7AAAAPwAAAE4AAABPAAAAJwAAAC0AAAA5AAAAPAAAAEgAAABEAAAAUAAAACgAAAA3AAAALgAAAD0AAAA1AAAAMQAAACkAAABRAAAASwAAAEIAAAA+AAAAKwAAADoAAAAqAAAAUgAAAEAAAABMAAAAPwAAAH8AAAA4AAAALQAAAE8AAAA7AAAATQAAAEAAAAAvAAAAPgAAACsAAABUAAAARQAAAFIAAABBAAAAOgAAADUAAAAsAAAAVgAAAEwAAABLAAAAQgAAAEMAAABRAAAAVQAAADEAAAAwAAAAPQAAAEMAAABCAAAAMgAAADAAAABXAAAAVQAAAEYAAABEAAAAOAAAADwAAAAuAAAAWgAAAE0AAABQAAAARQAAADMAAABAAAAALwAAAFkAAABHAAAAVAAAAEYAAABDAAAANAAAADIAAABTAAAAVwAAAEoAAABHAAAAWQAAAEkAAABbAAAAMwAAAEUAAAA2AAAASAAAAH8AAABJAAAANwAAAFAAAAA8AAAAWAAAAEkAAABbAAAASAAAAFgAAAA2AAAARwAAADcAAABKAAAATgAAAFMAAABcAAAANAAAADkAAABGAAAASwAAAEEAAAA9AAAANQAAAF4AAABWAAAAUQAAAEwAAABWAAAAUgAAAGAAAAA6AAAAQQAAAD4AAABNAAAAPwAAAEQAAAA4AAAAXQAAAE8AAABaAAAATgAAAEoAAAA7AAAAOQAAAF8AAABcAAAATwAAAE8AAABOAAAAPwAAADsAAABdAAAAXwAAAE0AAABQAAAARAAAAEgAAAA8AAAAYwAAAFoAAABYAAAAUQAAAFUAAABeAAAAZQAAAD0AAABCAAAASwAAAFIAAABgAAAAVAAAAGIAAAA+AAAATAAAAEAAAABTAAAAfwAAAEoAAABGAAAAZAAAAFcAAABcAAAAVAAAAEUAAABSAAAAQAAAAGEAAABZAAAAYgAAAFUAAABXAAAAZQAAAGYAAABCAAAAQwAAAFEAAABWAAAATAAAAEsAAABBAAAAaAAAAGAAAABeAAAAVwAAAFMAAABmAAAAZAAAAEMAAABGAAAAVQAAAFgAAABIAAAAWwAAAEkAAABjAAAAUAAAAGkAAABZAAAAYQAAAFsAAABnAAAARQAAAFQAAABHAAAAWgAAAE0AAABQAAAARAAAAGoAAABdAAAAYwAAAFsAAABJAAAAWQAAAEcAAABpAAAAWAAAAGcAAABcAAAAUwAAAE4AAABKAAAAbAAAAGQAAABfAAAAXQAAAE8AAABaAAAATQAAAG0AAABfAAAAagAAAF4AAABWAAAAUQAAAEsAAABrAAAAaAAAAGUAAABfAAAAXAAAAE8AAABOAAAAbQAAAGwAAABdAAAAYAAAAGgAAABiAAAAbgAAAEwAAABWAAAAUgAAAGEAAAB/AAAAYgAAAFQAAABnAAAAWQAAAG8AAABiAAAAbgAAAGEAAABvAAAAUgAAAGAAAABUAAAAYwAAAFAAAABpAAAAWAAAAGoAAABaAAAAcQAAAGQAAABmAAAAUwAAAFcAAABsAAAAcgAAAFwAAABlAAAAZgAAAGsAAABwAAAAUQAAAFUAAABeAAAAZgAAAGUAAABXAAAAVQAAAHIAAABwAAAAZAAAAGcAAABbAAAAYQAAAFkAAAB0AAAAaQAAAG8AAABoAAAAawAAAG4AAABzAAAAVgAAAF4AAABgAAAAaQAAAFgAAABnAAAAWwAAAHEAAABjAAAAdAAAAGoAAABdAAAAYwAAAFoAAAB1AAAAbQAAAHEAAABrAAAAfwAAAGUAAABeAAAAcwAAAGgAAABwAAAAbAAAAGQAAABfAAAAXAAAAHYAAAByAAAAbQAAAG0AAABsAAAAXQAAAF8AAAB1AAAAdgAAAGoAAABuAAAAYgAAAGgAAABgAAAAdwAAAG8AAABzAAAAbwAAAGEAAABuAAAAYgAAAHQAAABnAAAAdwAAAHAAAABrAAAAZgAAAGUAAAB4AAAAcwAAAHIAAABxAAAAYwAAAHQAAABpAAAAdQAAAGoAAAB5AAAAcgAAAHAAAABkAAAAZgAAAHYAAAB4AAAAbAAAAHMAAABuAAAAawAAAGgAAAB4AAAAdwAAAHAAAAB0AAAAZwAAAHcAAABvAAAAcQAAAGkAAAB5AAAAdQAAAH8AAABtAAAAdgAAAHEAAAB5AAAAagAAAHYAAAB4AAAAbAAAAHIAAAB1AAAAeQAAAG0AAAB3AAAAbwAAAHMAAABuAAAAeQAAAHQAAAB4AAAAeAAAAHMAAAByAAAAcAAAAHkAAAB3AAAAdgAAAHkAAAB0AAAAeAAAAHcAAAB1AAAAcQAAAHYAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAACAAAABQAAAAEAAAAAAAAA/////wEAAAAAAAAAAwAAAAQAAAACAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAUAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABAAAAAUAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAUAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAD//////////wEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAAAAAAAAAAABAAAAAgAAAAYAAAAEAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAAAAAAAAAAAAQAAAAEAAAAFAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAAAAAAAAAAABAAAAAwAAAAcAAAAGAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADgAAAAIAAAAAAAAAAAAAAAEAAAAAAAAACQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAAAAAAAAAAAAAEAAAAEAAAACAAAAAoAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAAAAAAAAAAAAQAAAAsAAAAPAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAIAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAAAAAAAAAAAAQAAAAwAAAAQAAAADAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAAAAAAAAAAABAAAACgAAABMAAAAIAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAAAAAAAAAAAAAEAAAANAAAAEQAAAA0AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAACAAAAAAAAAAAAAAABAAAADgAAABIAAAAPAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAADwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABIAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAAAAAAAAQAAAP//////////EwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAASAAAAAAAAABgAAAAAAAAAIQAAAAAAAAAeAAAAAAAAACAAAAADAAAAMQAAAAEAAAAwAAAAAwAAADIAAAADAAAACAAAAAAAAAAFAAAABQAAAAoAAAAFAAAAFgAAAAAAAAAQAAAAAAAAABIAAAAAAAAAKQAAAAEAAAAhAAAAAAAAAB4AAAAAAAAABAAAAAAAAAAAAAAABQAAAAIAAAAFAAAADwAAAAEAAAAIAAAAAAAAAAUAAAAFAAAAHwAAAAEAAAAWAAAAAAAAABAAAAAAAAAAAgAAAAAAAAAGAAAAAAAAAA4AAAAAAAAACgAAAAAAAAALAAAAAAAAABEAAAADAAAAGAAAAAEAAAAXAAAAAwAAABkAAAADAAAAAAAAAAAAAAABAAAABQAAAAkAAAAFAAAABQAAAAAAAAACAAAAAAAAAAYAAAAAAAAAEgAAAAEAAAAKAAAAAAAAAAsAAAAAAAAABAAAAAEAAAADAAAABQAAAAcAAAAFAAAACAAAAAEAAAAAAAAAAAAAAAEAAAAFAAAAEAAAAAEAAAAFAAAAAAAAAAIAAAAAAAAABwAAAAAAAAAVAAAAAAAAACYAAAAAAAAACQAAAAAAAAATAAAAAAAAACIAAAADAAAADgAAAAEAAAAUAAAAAwAAACQAAAADAAAAAwAAAAAAAAANAAAABQAAAB0AAAAFAAAAAQAAAAAAAAAHAAAAAAAAABUAAAAAAAAABgAAAAEAAAAJAAAAAAAAABMAAAAAAAAABAAAAAIAAAAMAAAABQAAABoAAAAFAAAAAAAAAAEAAAADAAAAAAAAAA0AAAAFAAAAAgAAAAEAAAABAAAAAAAAAAcAAAAAAAAAGgAAAAAAAAAqAAAAAAAAADoAAAAAAAAAHQAAAAAAAAArAAAAAAAAAD4AAAADAAAAJgAAAAEAAAAvAAAAAwAAAEAAAAADAAAADAAAAAAAAAAcAAAABQAAACwAAAAFAAAADQAAAAAAAAAaAAAAAAAAACoAAAAAAAAAFQAAAAEAAAAdAAAAAAAAACsAAAAAAAAABAAAAAMAAAAPAAAABQAAAB8AAAAFAAAAAwAAAAEAAAAMAAAAAAAAABwAAAAFAAAABwAAAAEAAAANAAAAAAAAABoAAAAAAAAAHwAAAAAAAAApAAAAAAAAADEAAAAAAAAALAAAAAAAAAA1AAAAAAAAAD0AAAADAAAAOgAAAAEAAABBAAAAAwAAAEsAAAADAAAADwAAAAAAAAAWAAAABQAAACEAAAAFAAAAHAAAAAAAAAAfAAAAAAAAACkAAAAAAAAAKgAAAAEAAAAsAAAAAAAAADUAAAAAAAAABAAAAAQAAAAIAAAABQAAABAAAAAFAAAADAAAAAEAAAAPAAAAAAAAABYAAAAFAAAAGgAAAAEAAAAcAAAAAAAAAB8AAAAAAAAAMgAAAAAAAAAwAAAAAAAAADEAAAADAAAAIAAAAAAAAAAeAAAAAwAAACEAAAADAAAAGAAAAAMAAAASAAAAAwAAABAAAAADAAAARgAAAAAAAABDAAAAAAAAAEIAAAADAAAANAAAAAMAAAAyAAAAAAAAADAAAAAAAAAAJQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAUwAAAAAAAABXAAAAAwAAAFUAAAADAAAASgAAAAMAAABGAAAAAAAAAEMAAAAAAAAAOQAAAAEAAAA0AAAAAwAAADIAAAAAAAAAGQAAAAAAAAAXAAAAAAAAABgAAAADAAAAEQAAAAAAAAALAAAAAwAAAAoAAAADAAAADgAAAAMAAAAGAAAAAwAAAAIAAAADAAAALQAAAAAAAAAnAAAAAAAAACUAAAADAAAAIwAAAAMAAAAZAAAAAAAAABcAAAAAAAAAGwAAAAMAAAARAAAAAAAAAAsAAAADAAAAPwAAAAAAAAA7AAAAAwAAADkAAAADAAAAOAAAAAMAAAAtAAAAAAAAACcAAAAAAAAALgAAAAMAAAAjAAAAAwAAABkAAAAAAAAAJAAAAAAAAAAUAAAAAAAAAA4AAAADAAAAIgAAAAAAAAATAAAAAwAAAAkAAAADAAAAJgAAAAMAAAAVAAAAAwAAAAcAAAADAAAANwAAAAAAAAAoAAAAAAAAABsAAAADAAAANgAAAAMAAAAkAAAAAAAAABQAAAAAAAAAMwAAAAMAAAAiAAAAAAAAABMAAAADAAAASAAAAAAAAAA8AAAAAwAAAC4AAAADAAAASQAAAAMAAAA3AAAAAAAAACgAAAAAAAAARwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAQAAAAAAAAAAvAAAAAAAAACYAAAADAAAAPgAAAAAAAAArAAAAAwAAAB0AAAADAAAAOgAAAAMAAAAqAAAAAwAAABoAAAADAAAAVAAAAAAAAABFAAAAAAAAADMAAAADAAAAUgAAAAMAAABAAAAAAAAAAC8AAAAAAAAATAAAAAMAAAA+AAAAAAAAACsAAAADAAAAYQAAAAAAAABZAAAAAwAAAEcAAAADAAAAYgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAYAAAAAMAAABSAAAAAwAAAEAAAAAAAAAASwAAAAAAAABBAAAAAAAAADoAAAADAAAAPQAAAAAAAAA1AAAAAwAAACwAAAADAAAAMQAAAAMAAAApAAAAAwAAAB8AAAADAAAAXgAAAAAAAABWAAAAAAAAAEwAAAADAAAAUQAAAAMAAABLAAAAAAAAAEEAAAAAAAAAQgAAAAMAAAA9AAAAAAAAADUAAAADAAAAawAAAAAAAABoAAAAAwAAAGAAAAADAAAAZQAAAAMAAABeAAAAAAAAAFYAAAAAAAAAVQAAAAMAAABRAAAAAwAAAEsAAAAAAAAAOQAAAAAAAAA7AAAAAAAAAD8AAAADAAAASgAAAAAAAABOAAAAAwAAAE8AAAADAAAAUwAAAAMAAABcAAAAAwAAAF8AAAADAAAAJQAAAAAAAAAnAAAAAwAAAC0AAAADAAAANAAAAAAAAAA5AAAAAAAAADsAAAAAAAAARgAAAAMAAABKAAAAAAAAAE4AAAADAAAAGAAAAAAAAAAXAAAAAwAAABkAAAADAAAAIAAAAAMAAAAlAAAAAAAAACcAAAADAAAAMgAAAAMAAAA0AAAAAAAAADkAAAAAAAAALgAAAAAAAAA8AAAAAAAAAEgAAAADAAAAOAAAAAAAAABEAAAAAwAAAFAAAAADAAAAPwAAAAMAAABNAAAAAwAAAFoAAAADAAAAGwAAAAAAAAAoAAAAAwAAADcAAAADAAAAIwAAAAAAAAAuAAAAAAAAADwAAAAAAAAALQAAAAMAAAA4AAAAAAAAAEQAAAADAAAADgAAAAAAAAAUAAAAAwAAACQAAAADAAAAEQAAAAMAAAAbAAAAAAAAACgAAAADAAAAGQAAAAMAAAAjAAAAAAAAAC4AAAAAAAAARwAAAAAAAABZAAAAAAAAAGEAAAADAAAASQAAAAAAAABbAAAAAwAAAGcAAAADAAAASAAAAAMAAABYAAAAAwAAAGkAAAADAAAAMwAAAAAAAABFAAAAAwAAAFQAAAADAAAANgAAAAAAAABHAAAAAAAAAFkAAAAAAAAANwAAAAMAAABJAAAAAAAAAFsAAAADAAAAJgAAAAAAAAAvAAAAAwAAAEAAAAADAAAAIgAAAAMAAAAzAAAAAAAAAEUAAAADAAAAJAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAYAAAAAAAAABoAAAAAAAAAGsAAAADAAAAYgAAAAAAAABuAAAAAwAAAHMAAAADAAAAYQAAAAMAAABvAAAAAwAAAHcAAAADAAAATAAAAAAAAABWAAAAAwAAAF4AAAADAAAAUgAAAAAAAABgAAAAAAAAAGgAAAAAAAAAVAAAAAMAAABiAAAAAAAAAG4AAAADAAAAOgAAAAAAAABBAAAAAwAAAEsAAAADAAAAPgAAAAMAAABMAAAAAAAAAFYAAAADAAAAQAAAAAMAAABSAAAAAAAAAGAAAAAAAAAAVQAAAAAAAABXAAAAAAAAAFMAAAADAAAAZQAAAAAAAABmAAAAAwAAAGQAAAADAAAAawAAAAMAAABwAAAAAwAAAHIAAAADAAAAQgAAAAAAAABDAAAAAwAAAEYAAAADAAAAUQAAAAAAAABVAAAAAAAAAFcAAAAAAAAAXgAAAAMAAABlAAAAAAAAAGYAAAADAAAAMQAAAAAAAAAwAAAAAwAAADIAAAADAAAAPQAAAAMAAABCAAAAAAAAAEMAAAADAAAASwAAAAMAAABRAAAAAAAAAFUAAAAAAAAAXwAAAAAAAABcAAAAAAAAAFMAAAAAAAAATwAAAAAAAABOAAAAAAAAAEoAAAADAAAAPwAAAAEAAAA7AAAAAwAAADkAAAADAAAAbQAAAAAAAABsAAAAAAAAAGQAAAAFAAAAXQAAAAEAAABfAAAAAAAAAFwAAAAAAAAATQAAAAEAAABPAAAAAAAAAE4AAAAAAAAAdQAAAAQAAAB2AAAABQAAAHIAAAAFAAAAagAAAAEAAABtAAAAAAAAAGwAAAAAAAAAWgAAAAEAAABdAAAAAQAAAF8AAAAAAAAAWgAAAAAAAABNAAAAAAAAAD8AAAAAAAAAUAAAAAAAAABEAAAAAAAAADgAAAADAAAASAAAAAEAAAA8AAAAAwAAAC4AAAADAAAAagAAAAAAAABdAAAAAAAAAE8AAAAFAAAAYwAAAAEAAABaAAAAAAAAAE0AAAAAAAAAWAAAAAEAAABQAAAAAAAAAEQAAAAAAAAAdQAAAAMAAABtAAAABQAAAF8AAAAFAAAAcQAAAAEAAABqAAAAAAAAAF0AAAAAAAAAaQAAAAEAAABjAAAAAQAAAFoAAAAAAAAAaQAAAAAAAABYAAAAAAAAAEgAAAAAAAAAZwAAAAAAAABbAAAAAAAAAEkAAAADAAAAYQAAAAEAAABZAAAAAwAAAEcAAAADAAAAcQAAAAAAAABjAAAAAAAAAFAAAAAFAAAAdAAAAAEAAABpAAAAAAAAAFgAAAAAAAAAbwAAAAEAAABnAAAAAAAAAFsAAAAAAAAAdQAAAAIAAABqAAAABQAAAFoAAAAFAAAAeQAAAAEAAABxAAAAAAAAAGMAAAAAAAAAdwAAAAEAAAB0AAAAAQAAAGkAAAAAAAAAdwAAAAAAAABvAAAAAAAAAGEAAAAAAAAAcwAAAAAAAABuAAAAAAAAAGIAAAADAAAAawAAAAEAAABoAAAAAwAAAGAAAAADAAAAeQAAAAAAAAB0AAAAAAAAAGcAAAAFAAAAeAAAAAEAAAB3AAAAAAAAAG8AAAAAAAAAcAAAAAEAAABzAAAAAAAAAG4AAAAAAAAAdQAAAAEAAABxAAAABQAAAGkAAAAFAAAAdgAAAAEAAAB5AAAAAAAAAHQAAAAAAAAAcgAAAAEAAAB4AAAAAQAAAHcAAAAAAAAAcgAAAAAAAABwAAAAAAAAAGsAAAAAAAAAZAAAAAAAAABmAAAAAAAAAGUAAAADAAAAUwAAAAEAAABXAAAAAwAAAFUAAAADAAAAdgAAAAAAAAB4AAAAAAAAAHMAAAAFAAAAbAAAAAEAAAByAAAAAAAAAHAAAAAAAAAAXAAAAAEAAABkAAAAAAAAAGYAAAAAAAAAdQAAAAAAAAB5AAAABQAAAHcAAAAFAAAAbQAAAAEAAAB2AAAAAAAAAHgAAAAAAAAAXwAAAAEAAABsAAAAAQAAAHIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAGAAAAAgAAAAUAAAABAAAABAAAAAAAAAAAAAAABQAAAAMAAAABAAAABgAAAAQAAAACAAAAAAAAAH6iBfbytuk/Gq6akm/58z/Xrm0Liez0P5doSdOpSwRAWs602ULg8D/dT7Rcbo/1v1N1RQHFNOM/g9Snx7HW3L8HWsP8Q3jfP6VwOLosutk/9rjk1YQcxj+gnmKMsNn6P/HDeuPFY+M/YHwDjqKhB0Ci19/fCVrbP4UxKkDWOP6/pvljWa09tL9wi7wrQXjnv/Z6yLImkM2/3yTlOzY14D+m+WNZrT20PzwKVQnrQwNA9nrIsiaQzT/g40rFrRQFwPa45NWEHMa/kbslHEZq97/xw3rjxWPjv4cLC2SMBci/otff3wla27+rKF5oIAv0P1N1RQHFNOO/iDJPGyWHBUAHWsP8Q3jfvwQf/by16gXAfqIF9vK26b8XrO0Vh0r+v9eubQuJ7PS/BxLrA0ZZ479azrTZQuDwv1MK1EuItPw/yscgV9Z6FkAwHBR2WjQMQJNRzXsQ5vY/GlUHVJYKF0DONuFv2lMNQNCGZ28QJfk/0WUwoIL36D8ggDOMQuATQNqMOeAy/wZAWFYOYM+M2z/LWC4uH3oSQDE+LyTsMgRAkJzhRGWFGEDd4soovCQQQKqk0DJMEP8/rGmNdwOLBUAW2X/9xCbjP4hu3dcqJhNAzuYItRvdB0CgzW3zJW/sPxotm/Y2TxRAQAk9XmdDDEC1Kx9MKgT3P1M+NctcghZAFVqcLlb0C0Bgzd3sB2b2P77mZDPUWhZAFROHJpUGCEDAfma5CxXtPz1DWq/zYxRAmhYY5824F0DOuQKWSbAOQNCMqrvu3fs/L6DR22K2wT9nAAxPBU8RQGiN6mW43AFAZhu25b633D8c1YgmzowSQNM25BRKWARArGS08/lNxD+LFssHwmMRQLC5aNcxBgJABL9HT0WRF0CjCmJmOGEOQHsuaVzMP/s/TWJCaGGwBUCeu1PAPLzjP9nqN9DZOBNAKE4JcydbCkCGtbd1qjPzP8dgm9U8jhVAtPeKTkVwDkCeCLss5l37P401XMPLmBdAFd29VMVQDUBg0yA55h75Pz6odcYLCRdApBM4rBrkAkDyAVWgQxbRP4XDMnK20hFAymLlF7EmzD8GUgo9XBHlP3lbK7T9COc/k+OhPthhy7+YGEpnrOvCPzBFhLs15u4/epbqB6H4uz9IuuLF5svev6lzLKY31es/CaQ0envF5z8ZY0xlUADXv7zaz7HYEuI/CfbK1sn16T8uAQfWwxLWPzKn/YuFN94/5KdbC1AFu793fyCSnlfvPzK2y4doAMY/NRg5t1/X6b/shq4QJaHDP5yNIAKPOeI/vpn7BSE30r/X4YQrO6nrv78Ziv/Thto/DqJ1Y6+y5z9l51NaxFrlv8QlA65HOLS/86dxiEc96z+Hj0+LFjneP6LzBZ8LTc2/DaJ1Y6+y579l51NaxFrlP8QlA65HOLQ/8qdxiEc967+Jj0+LFjnev6LzBZ8LTc0/1qdbC1AFuz93fyCSnlfvvzK2y4doAMa/NRg5t1/X6T/vhq4QJaHDv5yNIAKPOeK/wJn7BSE30j/W4YQrO6nrP78Ziv/Thtq/CaQ0envF578XY0xlUADXP7zaz7HYEuK/CvbK1sn16b8rAQfWwxLWvzKn/YuFN96/zWLlF7EmzL8GUgo9XBHlv3lbK7T9COe/kOOhPthhyz+cGEpnrOvCvzBFhLs15u6/c5bqB6H4u79IuuLF5sveP6lzLKY31eu/AQAAAP////8HAAAA/////zEAAAD/////VwEAAP////9hCQAA/////6dBAAD/////kcsBAP/////3kAwA/////8H2VwAAAAAAAAAAAAAAAAACAAAA/////w4AAAD/////YgAAAP////+uAgAA/////8ISAAD/////ToMAAP////8ilwMA/////+4hGQD/////gu2vAAAAAAAAAAAAAAAAAAAAAAACAAAA//////////8BAAAAAwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////AgAAAP//////////AQAAAAAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD/////////////////////AQAAAP///////////////wIAAAD///////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP///////////////////////////////wIAAAD///////////////8BAAAA/////////////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAABAAAA//////////8CAAAA//////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAAAQAAAP//////////AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAACAAAAAAAAAAIAAAABAAAAAQAAAAIAAAACAAAAAAAAAAUAAAAFAAAAAAAAAAIAAAACAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAgAAAAEAAAACAAAAAgAAAAIAAAAAAAAABQAAAAYAAAAAAAAAAgAAAAIAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAAAAAACAAAAAQAAAAMAAAACAAAAAgAAAAAAAAAFAAAABwAAAAAAAAACAAAAAgAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAACAAAAAAAAAAIAAAABAAAABAAAAAIAAAACAAAAAAAAAAUAAAAIAAAAAAAAAAIAAAACAAAAAwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAIAAAAAAAAAAgAAAAEAAAAAAAAAAgAAAAIAAAAAAAAABQAAAAkAAAAAAAAAAgAAAAIAAAADAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAIAAAAAAAAAAwAAAA4AAAACAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAgAAAAMAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAgAAAAAAAAADAAAACgAAAAIAAAAAAAAAAgAAAAMAAAABAAAAAAAAAAIAAAACAAAAAwAAAAcAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAACAAAAAAAAAAMAAAALAAAAAgAAAAAAAAACAAAAAwAAAAIAAAAAAAAAAgAAAAIAAAADAAAACAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAIAAAAAAAAAAwAAAAwAAAACAAAAAAAAAAIAAAADAAAAAwAAAAAAAAACAAAAAgAAAAMAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAACAAAAAgAAAAAAAAADAAAADQAAAAIAAAAAAAAAAgAAAAMAAAAEAAAAAAAAAAIAAAACAAAAAwAAAAoAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAACAAAAAAAAAAMAAAAGAAAAAgAAAAAAAAACAAAAAwAAAA8AAAAAAAAAAgAAAAIAAAADAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAIAAAAAAAAAAwAAAAcAAAACAAAAAAAAAAIAAAADAAAAEAAAAAAAAAACAAAAAgAAAAMAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAgAAAAAAAAADAAAACAAAAAIAAAAAAAAAAgAAAAMAAAARAAAAAAAAAAIAAAACAAAAAwAAAA0AAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAACAAAAAAAAAAMAAAAJAAAAAgAAAAAAAAACAAAAAwAAABIAAAAAAAAAAgAAAAIAAAADAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAgAAAAIAAAAAAAAAAwAAAAUAAAACAAAAAAAAAAIAAAADAAAAEwAAAAAAAAACAAAAAgAAAAMAAAAPAAAAAAAAAAAAAAAAAAAAAAAAABAAAAACAAAAAAAAAAIAAAABAAAAEwAAAAIAAAACAAAAAAAAAAUAAAAKAAAAAAAAAAIAAAACAAAAAwAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAIAAAAAAAAAAgAAAAEAAAAPAAAAAgAAAAIAAAAAAAAABQAAAAsAAAAAAAAAAgAAAAIAAAADAAAAEQAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAgAAAAAAAAACAAAAAQAAABAAAAACAAAAAgAAAAAAAAAFAAAADAAAAAAAAAACAAAAAgAAAAMAAAASAAAAAAAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAIAAAABAAAAEQAAAAIAAAACAAAAAAAAAAUAAAANAAAAAAAAAAIAAAACAAAAAwAAABMAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAIAAAAAAAAAAgAAAAEAAAASAAAAAgAAAAIAAAAAAAAABQAAAA4AAAAAAAAAAgAAAAIAAAADAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAOgehWlKfUEEz1zLi+JsiQa2og3wcMfVAWCbHorc0yEDi+Yn/Y6mbQJ11/mfsnG9At6bnG4UQQkBvMCQWKqUUQJVmwwswmOc/3hVgVBL3uj//qqOEOdGOPw/WDN4gnGE/H3ANkCUgND+AA8btKgAHPwTXBqJVSdo+XfRQAqsKrj4fc+zLYbSPQklEmCZHv2FCUP+uDso1NEKYtPhwphUHQptxnyFXYdpB7CddZAMmrkGAt1AxSTqBQUibBVdTsFNBSuX3MV+AJkFocv82SLf5QAqmgj7AY81A23VDSEnLoEDGEJVSeDFzQDYrqvBk70VA8U157pcRGUBWfEF+ZKbsP7KBdLHZTpFAqKYk69AqekDbeGY41MdjQD8AZzHK501A1vcrrjubNkD5LnquvBYhQCbiRRD71QlAqt72EbOH8z8Eu+jL1YbdP4uaox/xUcY/abedg1XfsD+BsUdzJ4KZP5wE9YFySIM/rW1kAKMpbT+rZFthVRhWPy4PKlXIs0A/qMZLlwDnMEHByqEF0I0ZQQYSFD8lUQNBPpY+dFs07UAH8BZImBPWQN9RY0I0sMBA2T7kLfc6qUByFYvfhBKTQMq+0Mis1XxA0XQbeQXMZUBJJ5aEGXpQQP7/SY0a6ThAaMD92b/UIkAs8s8yqXoMQNIegOvCk/U/aOi7NZJP4D8AAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAD/////AAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAA/////wAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAP////8AAAAABQAAAAAAAAAAAAAAAAAAAAAAAAD/////BQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAEAAQAAAQEAAAAAAAEAAAABAAAAAQABAAAAAAAAAAAAAAAAAAAAAAcAAAAHAAAAAQAAAAIAAAAEAAAAAwAAAAAAAAAAAAAABwAAAAMAAAABAAAAAgAAAAUAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAGAAAAAgAAAAMAAAAFAAAABAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAwAAAAEAAAAFAAAABAAAAAAAAAAAAAAABwAAAAUAAAADAAAABAAAAAEAAAAAAAAAAgAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAGFsZ29zLmMAaDNOZWlnaGJvclJvdGF0aW9ucwBjb29yZGlqay5jAF91cEFwN0NoZWNrZWQAX3VwQXA3ckNoZWNrZWQAZGlyZWN0ZWRFZGdlLmMAZGlyZWN0ZWRFZGdlVG9Cb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0NlbGxCb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbY2VudGVySUpLLmZhY2VdW2ZhY2UyXSA9PSBLSQBfZmFjZUlqa1RvQ2VsbEJvdW5kYXJ5AGgzSW5kZXguYwBjb21wYWN0Q2VsbHMAbGF0TG5nVG9DZWxsAGNlbGxUb0NoaWxkUG9zAHZhbGlkYXRlQ2hpbGRQb3MAbGF0TG5nLmMAY2VsbEFyZWFSYWRzMgBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGNlbGxUb0xvY2FsSWprAGJhc2VDZWxsICE9IG9yaWdpbkJhc2VDZWxsACEob3JpZ2luT25QZW50ICYmIGluZGV4T25QZW50KQBiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvQ2VsbAAhX2lzQmFzZUNlbGxQZW50YWdvbihiYXNlQ2VsbCkAYmFzZUNlbGxSb3RhdGlvbnMgPj0gMABncmlkUGF0aENlbGxzADAAdmVydGV4LmMAY2VsbFRvVmVydGV4AGdyYXBoLT5idWNrZXRzICE9IE5VTEwAdmVydGV4R3JhcGguYwBpbml0VmVydGV4R3JhcGgAbm9kZSAhPSBOVUxMAGFkZFZlcnRleE5vZGU=";var ha=24144;function ls(he){return he}function gi(he){var Re=/\b__Z[\w\d_]+/g;return he.replace(Re,function(He){var ft=He;return He===ft?He:ft+" ["+He+"]"})}function us(){var he=new Error;if(!he.stack){try{throw new Error(0)}catch(Re){he=Re}if(!he.stack)return"(no stack trace available)"}return he.stack.toString()}function pi(){var he=us();return e.extraStackTrace&&(he+=`
`+e.extraStackTrace()),gi(he)}function On(he,Re,He,ft){en("Assertion failed: "+Pe(he)+", at: "+[Re?Pe(Re):"unknown filename",He,ft?Pe(ft):"unknown function"])}function cs(){return mt.length}function da(he,Re,He){_t.set(_t.subarray(Re,Re+He),he)}function ga(he){return e.___errno_location&&(Vt[e.___errno_location()>>2]=he),he}function bA(he){en("OOM")}function fs(he){try{var Re=new ArrayBuffer(he);return Re.byteLength!=he?void 0:(new Int8Array(Re).set(mt),pa(Re),Q(Re),1)}catch{}}function ro(he){var Re=cs(),He=16777216,ft=2147483648-He;if(he>ft)return!1;for(var u=16777216,B=Math.max(Re,u);B<he;)B<=536870912?B=Je(2*B,He):B=Math.min(Je((3*B+2147483648)/4,He),ft);var Mt=fs(B);return!!Mt}var _i=typeof atob=="function"?atob:function(he){var Re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",He="",ft,u,B,Mt,jt,sr,yt,Nt=0;he=he.replace(/[^A-Za-z0-9\+\/\=]/g,"");do Mt=Re.indexOf(he.charAt(Nt++)),jt=Re.indexOf(he.charAt(Nt++)),sr=Re.indexOf(he.charAt(Nt++)),yt=Re.indexOf(he.charAt(Nt++)),ft=Mt<<2|jt>>4,u=(jt&15)<<4|sr>>2,B=(sr&3)<<6|yt,He=He+String.fromCharCode(ft),sr!==64&&(He=He+String.fromCharCode(u)),yt!==64&&(He=He+String.fromCharCode(B));while(Nt<he.length);return He};function no(he){try{for(var Re=_i(he),He=new Uint8Array(Re.length),ft=0;ft<Re.length;++ft)He[ft]=Re.charCodeAt(ft);return He}catch{throw new Error("Converting base64 string to bytes failed.")}}function $i(he){if(to(he))return no(he.slice(Xi.length))}var Gn={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},Jn={a:en,b:R,c:x,d:On,e:ga,f:cs,g:da,h:ro,i:bA,j:ls,k:gi,l:fs,m:us,n:pi,o:ha,p:ue},Oe=function(he,Re,He){"almost asm";var ft=new he.Int8Array(He),u=new he.Int32Array(He);new he.Uint8Array(He),new he.Float32Array(He);var B=new he.Float64Array(He),Mt=Re.o|0,jt=Re.p|0,sr=he.Math.floor,yt=he.Math.abs,Nt=he.Math.sqrt,jr=he.Math.pow,Ut=he.Math.cos,vt=he.Math.sin,tn=he.Math.tan,hs=he.Math.acos,qt=he.Math.asin,Dr=he.Math.atan,ur=he.Math.atan2,Ir=he.Math.ceil,or=he.Math.imul,ti=he.Math.min,cn=he.Math.max,pr=he.Math.clz32,lt=Re.b,z=Re.c,qe=Re.d,rn=Re.e,ds=Re.f,Ao=Re.g,yi=Re.h,vi=Re.i,L=24160;function ri(A){return ft=new Int8Array(A),u=new Int32Array(A),B=new Float64Array(A),He=A,!0}function In(A){A=A|0;var a=0;return a=L,L=L+A|0,L=L+15&-16,a|0}function CA(){return L|0}function gs(A){A=A|0,L=A}function ps(A,a){A=A|0,L=A}function _s(A,a){A=A|0,a=a|0;var c=0,h=0,d=0;return(A|0)<0?(a=2,a|0):(A|0)>13780509?(a=WA(15,a)|0,a|0):(c=((A|0)<0)<<31>>31,d=Er(A|0,c|0,3,0)|0,h=z()|0,c=Dt(A|0,c|0,1,0)|0,c=Er(d|0,h|0,c|0,z()|0)|0,c=Dt(c|0,z()|0,1,0)|0,A=z()|0,u[a>>2]=c,u[a+4>>2]=A,a=0,a|0)}function wi(A,a,c,h){return A=A|0,a=a|0,c=c|0,h=h|0,ma(A,a,c,h,0)|0}function ma(A,a,c,h,d){A=A|0,a=a|0,c=c|0,h=h|0,d=d|0;var _=0,m=0,w=0,S=0,k=0;if(S=L,L=L+16|0,m=S,!(D(A,a,c,h,d)|0))return h=0,L=S,h|0;do if((c|0)>=0){if((c|0)>13780509){if(_=WA(15,m)|0,_|0)break;w=m,m=u[w>>2]|0,w=u[w+4>>2]|0}else _=((c|0)<0)<<31>>31,k=Er(c|0,_|0,3,0)|0,w=z()|0,_=Dt(c|0,_|0,1,0)|0,_=Er(k|0,w|0,_|0,z()|0)|0,_=Dt(_|0,z()|0,1,0)|0,w=z()|0,u[m>>2]=_,u[m+4>>2]=w,m=_;if(yn(h|0,0,m<<3|0)|0,d|0){yn(d|0,0,m<<2|0)|0,_=I(A,a,c,h,d,m,w,0)|0;break}_=Cr(m,4)|0,_?(k=I(A,a,c,h,_,m,w,0)|0,ht(_),_=k):_=13}else _=2;while(!1);return k=_,L=S,k|0}function D(A,a,c,h,d){A=A|0,a=a|0,c=c|0,h=h|0,d=d|0;var _=0,m=0,w=0,S=0,k=0,N=0,V=0,Z=0,J=0,$=0,ne=0;if(ne=L,L=L+16|0,J=ne,$=ne+8|0,Z=J,u[Z>>2]=A,u[Z+4>>2]=a,(c|0)<0)return $=2,L=ne,$|0;if(_=h,u[_>>2]=A,u[_+4>>2]=a,_=(d|0)!=0,_&&(u[d>>2]=0),Gt(A,a)|0)return $=9,L=ne,$|0;u[$>>2]=0;e:do if((c|0)>=1)if(_)for(N=1,k=0,V=0,Z=1,_=A;;){if(!(k|V)){if(_=K(_,a,4,$,J)|0,_|0)break e;if(a=J,_=u[a>>2]|0,a=u[a+4>>2]|0,Gt(_,a)|0){_=9;break e}}if(_=K(_,a,u[22384+(V<<2)>>2]|0,$,J)|0,_|0)break e;if(a=J,_=u[a>>2]|0,a=u[a+4>>2]|0,A=h+(N<<3)|0,u[A>>2]=_,u[A+4>>2]=a,u[d+(N<<2)>>2]=Z,A=k+1|0,m=(A|0)==(Z|0),w=V+1|0,S=(w|0)==6,Gt(_,a)|0){_=9;break e}if(Z=Z+(S&m&1)|0,(Z|0)>(c|0)){_=0;break}else N=N+1|0,k=m?0:A,V=m?S?0:w:V}else for(N=1,k=0,V=0,Z=1,_=A;;){if(!(k|V)){if(_=K(_,a,4,$,J)|0,_|0)break e;if(a=J,_=u[a>>2]|0,a=u[a+4>>2]|0,Gt(_,a)|0){_=9;break e}}if(_=K(_,a,u[22384+(V<<2)>>2]|0,$,J)|0,_|0)break e;if(a=J,_=u[a>>2]|0,a=u[a+4>>2]|0,A=h+(N<<3)|0,u[A>>2]=_,u[A+4>>2]=a,A=k+1|0,m=(A|0)==(Z|0),w=V+1|0,S=(w|0)==6,Gt(_,a)|0){_=9;break e}if(Z=Z+(S&m&1)|0,(Z|0)>(c|0)){_=0;break}else N=N+1|0,k=m?0:A,V=m?S?0:w:V}else _=0;while(!1);return $=_,L=ne,$|0}function I(A,a,c,h,d,_,m,w){A=A|0,a=a|0,c=c|0,h=h|0,d=d|0,_=_|0,m=m|0,w=w|0;var S=0,k=0,N=0,V=0,Z=0,J=0,$=0,ne=0,Se=0,Te=0;if(ne=L,L=L+16|0,J=ne+8|0,$=ne,S=Rn(A|0,a|0,_|0,m|0)|0,N=z()|0,V=h+(S<<3)|0,Se=V,Te=u[Se>>2]|0,Se=u[Se+4>>2]|0,k=(Te|0)==(A|0)&(Se|0)==(a|0),!((Te|0)==0&(Se|0)==0|k))do S=Dt(S|0,N|0,1,0)|0,S=Cs(S|0,z()|0,_|0,m|0)|0,N=z()|0,V=h+(S<<3)|0,Te=V,Se=u[Te>>2]|0,Te=u[Te+4>>2]|0,k=(Se|0)==(A|0)&(Te|0)==(a|0);while(!((Se|0)==0&(Te|0)==0|k));if(S=d+(S<<2)|0,k&&(u[S>>2]|0)<=(w|0)||(Te=V,u[Te>>2]=A,u[Te+4>>2]=a,u[S>>2]=w,(w|0)>=(c|0)))return Te=0,L=ne,Te|0;switch(k=w+1|0,u[J>>2]=0,S=K(A,a,2,J,$)|0,S|0){case 9:{Z=9;break}case 0:{S=$,S=I(u[S>>2]|0,u[S+4>>2]|0,c,h,d,_,m,k)|0,S||(Z=9);break}}e:do if((Z|0)==9){switch(u[J>>2]=0,S=K(A,a,3,J,$)|0,S|0){case 9:break;case 0:{if(S=$,S=I(u[S>>2]|0,u[S+4>>2]|0,c,h,d,_,m,k)|0,S|0)break e;break}default:break e}switch(u[J>>2]=0,S=K(A,a,1,J,$)|0,S|0){case 9:break;case 0:{if(S=$,S=I(u[S>>2]|0,u[S+4>>2]|0,c,h,d,_,m,k)|0,S|0)break e;break}default:break e}switch(u[J>>2]=0,S=K(A,a,5,J,$)|0,S|0){case 9:break;case 0:{if(S=$,S=I(u[S>>2]|0,u[S+4>>2]|0,c,h,d,_,m,k)|0,S|0)break e;break}default:break e}switch(u[J>>2]=0,S=K(A,a,4,J,$)|0,S|0){case 9:break;case 0:{if(S=$,S=I(u[S>>2]|0,u[S+4>>2]|0,c,h,d,_,m,k)|0,S|0)break e;break}default:break e}switch(u[J>>2]=0,S=K(A,a,6,J,$)|0,S|0){case 9:break;case 0:{if(S=$,S=I(u[S>>2]|0,u[S+4>>2]|0,c,h,d,_,m,k)|0,S|0)break e;break}default:break e}return Te=0,L=ne,Te|0}while(!1);return Te=S,L=ne,Te|0}function K(A,a,c,h,d){A=A|0,a=a|0,c=c|0,h=h|0,d=d|0;var _=0,m=0,w=0,S=0,k=0,N=0,V=0,Z=0,J=0,$=0;if(c>>>0>6)return d=1,d|0;if(V=(u[h>>2]|0)%6|0,u[h>>2]=V,(V|0)>0){_=0;do c=_n(c)|0,_=_+1|0;while((_|0)<(u[h>>2]|0))}if(V=Ce(A|0,a|0,45)|0,z()|0,N=V&127,N>>>0>121)return d=5,d|0;S=Xr(A,a)|0,_=Ce(A|0,a|0,52)|0,z()|0,_=_&15;e:do if(!_)k=8;else{for(;;){if(m=(15-_|0)*3|0,w=Ce(A|0,a|0,m|0)|0,z()|0,w=w&7,(w|0)==7){a=5;break}if($=(fn(_)|0)==0,_=_+-1|0,Z=xe(7,0,m|0)|0,a=a&~(z()|0),J=xe(u[($?432:16)+(w*28|0)+(c<<2)>>2]|0,0,m|0)|0,m=z()|0,c=u[($?640:224)+(w*28|0)+(c<<2)>>2]|0,A=J|A&~Z,a=m|a,!c){c=0;break e}if(!_){k=8;break e}}return a|0}while(!1);(k|0)==8&&($=u[848+(N*28|0)+(c<<2)>>2]|0,J=xe($|0,0,45)|0,A=J|A,a=z()|0|a&-1040385,c=u[4272+(N*28|0)+(c<<2)>>2]|0,($&127|0)==127&&($=xe(u[848+(N*28|0)+20>>2]|0,0,45)|0,a=z()|0|a&-1040385,c=u[4272+(N*28|0)+20>>2]|0,A=mn($|A,a)|0,a=z()|0,u[h>>2]=(u[h>>2]|0)+1)),w=Ce(A|0,a|0,45)|0,z()|0,w=w&127;e:do if(kt(w)|0){t:do if((Xr(A,a)|0)==1){if((N|0)!=(w|0))if(su(w,u[7696+(N*28|0)>>2]|0)|0){A=UA(A,a)|0,m=1,a=z()|0;break}else qe(23313,22416,436,22424);switch(S|0){case 3:{A=mn(A,a)|0,a=z()|0,u[h>>2]=(u[h>>2]|0)+1,m=0;break t}case 5:{A=UA(A,a)|0,a=z()|0,u[h>>2]=(u[h>>2]|0)+5,m=0;break t}case 0:return $=9,$|0;default:return $=1,$|0}}else m=0;while(!1);if((c|0)>0){_=0;do A=Ea(A,a)|0,a=z()|0,_=_+1|0;while((_|0)!=(c|0))}if((N|0)!=(w|0)){if(!(Fn(w)|0)){if((m|0)!=0|(Xr(A,a)|0)!=5)break;u[h>>2]=(u[h>>2]|0)+1;break}switch(V&127){case 8:case 118:break e}(Xr(A,a)|0)!=3&&(u[h>>2]=(u[h>>2]|0)+1)}}else if((c|0)>0){_=0;do A=mn(A,a)|0,a=z()|0,_=_+1|0;while((_|0)!=(c|0))}while(!1);return u[h>>2]=((u[h>>2]|0)+c|0)%6|0,$=d,u[$>>2]=A,u[$+4>>2]=a,$=0,$|0}function ve(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var d=0,_=0,m=0,w=0,S=0,k=0;for(w=L,L=L+16|0,_=w,m=w+8|0,d=(Gt(A,a)|0)==0,d=d?1:2;;){if(u[m>>2]=0,k=(K(A,a,d,m,_)|0)==0,S=_,k&((u[S>>2]|0)==(c|0)?(u[S+4>>2]|0)==(h|0):0)){A=4;break}if(d=d+1|0,d>>>0>=7){d=7,A=4;break}}return(A|0)==4?(L=w,d|0):0}function Me(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var d=0,_=0,m=0,w=0,S=0,k=0,N=0,V=0,Z=0,J=0,$=0;if($=L,L=L+16|0,Z=$,J=$+8|0,V=Z,u[V>>2]=A,u[V+4>>2]=a,!c)return J=h,u[J>>2]=A,u[J+4>>2]=a,J=0,L=$,J|0;u[J>>2]=0;e:do if(Gt(A,a)|0)A=9;else{if(_=(c|0)>0,_){d=0,V=A;do{if(A=K(V,a,4,J,Z)|0,A|0)break e;if(a=Z,V=u[a>>2]|0,a=u[a+4>>2]|0,d=d+1|0,Gt(V,a)|0){A=9;break e}}while((d|0)<(c|0));if(N=h,u[N>>2]=V,u[N+4>>2]=a,N=c+-1|0,_){k=0,A=1;do{if(d=22384+(k<<2)|0,(k|0)==5)for(m=u[d>>2]|0,_=0,d=A;;){if(A=Z,A=K(u[A>>2]|0,u[A+4>>2]|0,m,J,Z)|0,A|0)break e;if((_|0)!=(N|0))if(S=Z,w=u[S>>2]|0,S=u[S+4>>2]|0,A=h+(d<<3)|0,u[A>>2]=w,u[A+4>>2]=S,!(Gt(w,S)|0))A=d+1|0;else{A=9;break e}else A=d;if(_=_+1|0,(_|0)>=(c|0))break;d=A}else for(m=Z,S=u[d>>2]|0,w=0,d=A,_=u[m>>2]|0,m=u[m+4>>2]|0;;){if(A=K(_,m,S,J,Z)|0,A|0)break e;if(m=Z,_=u[m>>2]|0,m=u[m+4>>2]|0,A=h+(d<<3)|0,u[A>>2]=_,u[A+4>>2]=m,A=d+1|0,Gt(_,m)|0){A=9;break e}if(w=w+1|0,(w|0)>=(c|0))break;d=A}k=k+1|0}while(k>>>0<6);A=Z,m=V,d=u[A>>2]|0,_=a,A=u[A+4>>2]|0}else m=V,d=V,_=a,A=a}else m=h,u[m>>2]=A,u[m+4>>2]=a,m=A,d=A,_=a,A=a;A=(m|0)==(d|0)&(_|0)==(A|0)?0:9}while(!1);return J=A,L=$,J|0}function Qe(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var d=0,_=0,m=0,w=0,S=0,k=0;if(w=L,L=L+48|0,d=w+16|0,_=w+8|0,m=w,c|0)return m=15,L=w,m|0;if(k=A,S=u[k+4>>2]|0,c=_,u[c>>2]=u[k>>2],u[c+4>>2]=S,ku(_,d),a=au(d,a,m)|0,!a){if(c=u[_>>2]|0,_=u[A+8>>2]|0,(_|0)>0){d=u[A+12>>2]|0,a=0;do c=(u[d+(a<<3)>>2]|0)+c|0,a=a+1|0;while((a|0)<(_|0))}a=m,d=u[a>>2]|0,a=u[a+4>>2]|0,_=((c|0)<0)<<31>>31,(a|0)<(_|0)|(a|0)==(_|0)&d>>>0<c>>>0?(a=m,u[a>>2]=c,u[a+4>>2]=_,a=_):c=d,S=Dt(c|0,a|0,12,0)|0,k=z()|0,a=m,u[a>>2]=S,u[a+4>>2]=k,a=h,u[a>>2]=S,u[a+4>>2]=k,a=0}return k=a,L=w,k|0}function Ot(A,a,c,h,d,_,m){A=A|0,a=a|0,c=c|0,h=h|0,d=d|0,_=_|0,m=m|0;var w=0,S=0,k=0,N=0,V=0,Z=0,J=0,$=0,ne=0,Se=0,Te=0,fe=0,_e=0,le=0,We=0,$e=0,Ie=0,Le=0,ut=0,Et=0,zt=0,xt=0,wt=0,St=0,Xt=0,dt=0,Yt=0,mr=0,xa=0;if(Xt=L,L=L+64|0,zt=Xt+48|0,xt=Xt+32|0,wt=Xt+24|0,We=Xt+8|0,$e=Xt,S=u[A>>2]|0,(S|0)<=0)return St=0,L=Xt,St|0;for(Ie=A+4|0,Le=zt+8|0,ut=xt+8|0,Et=We+8|0,w=0,_e=0;;){k=u[Ie>>2]|0,fe=k+(_e<<4)|0,u[zt>>2]=u[fe>>2],u[zt+4>>2]=u[fe+4>>2],u[zt+8>>2]=u[fe+8>>2],u[zt+12>>2]=u[fe+12>>2],(_e|0)==(S+-1|0)?(u[xt>>2]=u[k>>2],u[xt+4>>2]=u[k+4>>2],u[xt+8>>2]=u[k+8>>2],u[xt+12>>2]=u[k+12>>2]):(fe=k+(_e+1<<4)|0,u[xt>>2]=u[fe>>2],u[xt+4>>2]=u[fe+4>>2],u[xt+8>>2]=u[fe+8>>2],u[xt+12>>2]=u[fe+12>>2]),S=fo(zt,xt,h,wt)|0;e:do if(S)k=0,w=S;else if(k=wt,S=u[k>>2]|0,k=u[k+4>>2]|0,(k|0)>0|(k|0)==0&S>>>0>0){Te=0,fe=0;t:for(;;){if(xa=+B[zt>>3],Se=Lr(S|0,k|0,Te|0,fe|0)|0,mr=+(Se>>>0)+4294967296*+(z()|0),dt=+(S>>>0)+4294967296*+(k|0),Yt=+(Te>>>0)+4294967296*+(fe|0),B[We>>3]=xa*mr/dt+ +B[xt>>3]*Yt/dt,B[Et>>3]=+B[Le>>3]*mr/dt+ +B[ut>>3]*Yt/dt,S=BA(We,h,$e)|0,S|0){w=S;break}Se=$e,ne=u[Se>>2]|0,Se=u[Se+4>>2]|0,Z=Rn(ne|0,Se|0,a|0,c|0)|0,N=z()|0,S=m+(Z<<3)|0,V=S,k=u[V>>2]|0,V=u[V+4>>2]|0;r:do if((k|0)==0&(V|0)==0)le=S,St=16;else for(J=0,$=0;;){if((J|0)>(c|0)|(J|0)==(c|0)&$>>>0>a>>>0){w=1;break t}if((k|0)==(ne|0)&(V|0)==(Se|0))break r;if(S=Dt(Z|0,N|0,1,0)|0,Z=Cs(S|0,z()|0,a|0,c|0)|0,N=z()|0,$=Dt($|0,J|0,1,0)|0,J=z()|0,S=m+(Z<<3)|0,V=S,k=u[V>>2]|0,V=u[V+4>>2]|0,(k|0)==0&(V|0)==0){le=S,St=16;break}}while(!1);if((St|0)==16&&(St=0,!((ne|0)==0&(Se|0)==0))&&($=le,u[$>>2]=ne,u[$+4>>2]=Se,$=_+(u[d>>2]<<3)|0,u[$>>2]=ne,u[$+4>>2]=Se,$=d,$=Dt(u[$>>2]|0,u[$+4>>2]|0,1,0)|0,ne=z()|0,Se=d,u[Se>>2]=$,u[Se+4>>2]=ne),Te=Dt(Te|0,fe|0,1,0)|0,fe=z()|0,k=wt,S=u[k>>2]|0,k=u[k+4>>2]|0,!((k|0)>(fe|0)|(k|0)==(fe|0)&S>>>0>Te>>>0)){k=1;break e}}k=0}else k=1;while(!1);if(_e=_e+1|0,!k){St=21;break}if(S=u[A>>2]|0,(_e|0)>=(S|0)){w=0,St=21;break}}return(St|0)==21?(L=Xt,w|0):0}function cr(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var d=0,_=0,m=0,w=0,S=0,k=0,N=0,V=0,Z=0,J=0,$=0,ne=0,Se=0,Te=0,fe=0,_e=0,le=0,We=0,$e=0,Ie=0,Le=0,ut=0,Et=0,zt=0,xt=0,wt=0,St=0,Xt=0,dt=0,Yt=0,mr=0;if(mr=L,L=L+112|0,St=mr+80|0,S=mr+72|0,Xt=mr,dt=mr+56|0,c|0)return Yt=15,L=mr,Yt|0;if(k=A+8|0,Yt=Tr((u[k>>2]<<5)+32|0)|0,!Yt)return Yt=13,L=mr,Yt|0;if(Mo(A,Yt),xt=A,wt=u[xt+4>>2]|0,c=S,u[c>>2]=u[xt>>2],u[c+4>>2]=wt,ku(S,St),c=au(St,a,Xt)|0,c)xt=0,wt=0;else{if(c=u[S>>2]|0,_=u[k>>2]|0,(_|0)>0){m=u[A+12>>2]|0,d=0;do c=(u[m+(d<<3)>>2]|0)+c|0,d=d+1|0;while((d|0)!=(_|0));d=c}else d=c;c=Xt,_=u[c>>2]|0,c=u[c+4>>2]|0,m=((d|0)<0)<<31>>31,(c|0)<(m|0)|(c|0)==(m|0)&_>>>0<d>>>0?(c=Xt,u[c>>2]=d,u[c+4>>2]=m,c=m):d=_,xt=Dt(d|0,c|0,12,0)|0,wt=z()|0,c=Xt,u[c>>2]=xt,u[c+4>>2]=wt,c=0}if(c|0)return ht(Yt),Yt=c,L=mr,Yt|0;if(d=Cr(xt,8)|0,!d)return ht(Yt),Yt=13,L=mr,Yt|0;if(w=Cr(xt,8)|0,!w)return ht(Yt),ht(d),Yt=13,L=mr,Yt|0;Et=St,u[Et>>2]=0,u[Et+4>>2]=0,Et=A,zt=u[Et+4>>2]|0,c=S,u[c>>2]=u[Et>>2],u[c+4>>2]=zt,c=Ot(S,xt,wt,a,St,d,w)|0;e:do if(c)ht(d),ht(w),ht(Yt);else{t:do if((u[k>>2]|0)>0){for(m=A+12|0,_=0;c=Ot((u[m>>2]|0)+(_<<3)|0,xt,wt,a,St,d,w)|0,_=_+1|0,!(c|0);)if((_|0)>=(u[k>>2]|0))break t;ht(d),ht(w),ht(Yt);break e}while(!1);(wt|0)>0|(wt|0)==0&xt>>>0>0&&yn(w|0,0,xt<<3|0)|0,zt=St,Et=u[zt+4>>2]|0;t:do if((Et|0)>0|(Et|0)==0&(u[zt>>2]|0)>>>0>0){Ie=d,Le=w,ut=d,Et=w,zt=d,c=d,le=d,We=w,$e=w,d=w;r:for(;;){for(Se=0,Te=0,fe=0,_e=0,_=0,m=0;;){w=Xt,S=w+56|0;do u[w>>2]=0,w=w+4|0;while((w|0)<(S|0));if(a=Ie+(Se<<3)|0,k=u[a>>2]|0,a=u[a+4>>2]|0,D(k,a,1,Xt,0)|0){w=Xt,S=w+56|0;do u[w>>2]=0,w=w+4|0;while((w|0)<(S|0));w=Cr(7,4)|0,w|0&&(I(k,a,1,Xt,w,7,0,0)|0,ht(w))}for(ne=0;;){$=Xt+(ne<<3)|0,J=u[$>>2]|0,$=u[$+4>>2]|0;n:do if((J|0)==0&($|0)==0)w=_,S=m;else{if(N=Rn(J|0,$|0,xt|0,wt|0)|0,k=z()|0,w=h+(N<<3)|0,a=w,S=u[a>>2]|0,a=u[a+4>>2]|0,!((S|0)==0&(a|0)==0)){V=0,Z=0;do{if((V|0)>(wt|0)|(V|0)==(wt|0)&Z>>>0>xt>>>0)break r;if((S|0)==(J|0)&(a|0)==($|0)){w=_,S=m;break n}w=Dt(N|0,k|0,1,0)|0,N=Cs(w|0,z()|0,xt|0,wt|0)|0,k=z()|0,Z=Dt(Z|0,V|0,1,0)|0,V=z()|0,w=h+(N<<3)|0,a=w,S=u[a>>2]|0,a=u[a+4>>2]|0}while(!((S|0)==0&(a|0)==0))}(J|0)==0&($|0)==0?(w=_,S=m):(bo(J,$,dt)|0,c0(A,Yt,dt)|0&&(Z=Dt(_|0,m|0,1,0)|0,m=z()|0,V=w,u[V>>2]=J,u[V+4>>2]=$,_=Le+(_<<3)|0,u[_>>2]=J,u[_+4>>2]=$,_=Z),w=_,S=m)}while(!1);if(ne=ne+1|0,ne>>>0>=7)break;_=w,m=S}if(Se=Dt(Se|0,Te|0,1,0)|0,Te=z()|0,fe=Dt(fe|0,_e|0,1,0)|0,_e=z()|0,m=St,_=u[m>>2]|0,m=u[m+4>>2]|0,(_e|0)<(m|0)|(_e|0)==(m|0)&fe>>>0<_>>>0)_=w,m=S;else break}if((m|0)>0|(m|0)==0&_>>>0>0){_=0,m=0;do _e=Ie+(_<<3)|0,u[_e>>2]=0,u[_e+4>>2]=0,_=Dt(_|0,m|0,1,0)|0,m=z()|0,_e=St,fe=u[_e+4>>2]|0;while((m|0)<(fe|0)|((m|0)==(fe|0)?_>>>0<(u[_e>>2]|0)>>>0:0))}if(_e=St,u[_e>>2]=w,u[_e+4>>2]=S,(S|0)>0|(S|0)==0&w>>>0>0)ne=d,Se=$e,Te=zt,fe=We,_e=Le,d=le,$e=c,We=ut,le=ne,c=Se,zt=Et,Et=Te,ut=fe,Le=Ie,Ie=_e;else break t}ht(ut),ht(Et),ht(Yt),c=1;break e}else c=w;while(!1);ht(Yt),ht(d),ht(c),c=0}while(!1);return Yt=c,L=mr,Yt|0}function fr(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0,_=0,m=0,w=0,S=0,k=0,N=0;if(N=L,L=L+176|0,S=N,(a|0)<1)return Pa(c,0,0),k=0,L=N,k|0;for(w=A,w=Ce(u[w>>2]|0,u[w+4>>2]|0,52)|0,z()|0,Pa(c,(a|0)>6?a:6,w&15),w=0;h=A+(w<<3)|0,h=Si(u[h>>2]|0,u[h+4>>2]|0,S)|0,!(h|0);){if(h=u[S>>2]|0,(h|0)>0){m=0;do _=S+8+(m<<4)|0,m=m+1|0,h=S+8+(((m|0)%(h|0)|0)<<4)|0,d=g0(c,h,_)|0,d?rl(c,d)|0:d0(c,_,h)|0,h=u[S>>2]|0;while((m|0)<(h|0))}if(w=w+1|0,(w|0)>=(a|0)){h=0,k=13;break}}return(k|0)==13?(L=N,h|0):(ka(c),k=h,L=N,k|0)}function _r(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0,_=0,m=0;if(_=L,L=L+32|0,h=_,d=_+16|0,A=fr(A,a,d)|0,A|0)return c=A,L=_,c|0;if(u[c>>2]=0,u[c+4>>2]=0,u[c+8>>2]=0,A=Ou(d)|0,A|0)do{a=Es(c)|0;do QA(a,A)|0,m=A+16|0,u[h>>2]=u[m>>2],u[h+4>>2]=u[m+4>>2],u[h+8>>2]=u[m+8>>2],u[h+12>>2]=u[m+12>>2],rl(d,A)|0,A=nl(d,h)|0;while(A|0);A=Ou(d)|0}while(A|0);return ka(d),A=ba(c)|0,A?(YA(c),m=A,L=_,m|0):(m=0,L=_,m|0)}function kt(A){return A=A|0,A>>>0>121?(A=0,A|0):(A=u[7696+(A*28|0)+16>>2]|0,A|0)}function Fn(A){return A=A|0,(A|0)==4|(A|0)==117|0}function ni(A){return A=A|0,u[11120+((u[A>>2]|0)*216|0)+((u[A+4>>2]|0)*72|0)+((u[A+8>>2]|0)*24|0)+(u[A+12>>2]<<3)>>2]|0}function lo(A){return A=A|0,u[11120+((u[A>>2]|0)*216|0)+((u[A+4>>2]|0)*72|0)+((u[A+8>>2]|0)*24|0)+(u[A+12>>2]<<3)+4>>2]|0}function uo(A,a){A=A|0,a=a|0,A=7696+(A*28|0)|0,u[a>>2]=u[A>>2],u[a+4>>2]=u[A+4>>2],u[a+8>>2]=u[A+8>>2],u[a+12>>2]=u[A+12>>2]}function Ti(A,a){A=A|0,a=a|0;var c=0,h=0;if(a>>>0>20)return a=-1,a|0;do if((u[11120+(a*216|0)>>2]|0)!=(A|0))if((u[11120+(a*216|0)+8>>2]|0)!=(A|0))if((u[11120+(a*216|0)+16>>2]|0)!=(A|0))if((u[11120+(a*216|0)+24>>2]|0)!=(A|0))if((u[11120+(a*216|0)+32>>2]|0)!=(A|0))if((u[11120+(a*216|0)+40>>2]|0)!=(A|0))if((u[11120+(a*216|0)+48>>2]|0)!=(A|0))if((u[11120+(a*216|0)+56>>2]|0)!=(A|0))if((u[11120+(a*216|0)+64>>2]|0)!=(A|0))if((u[11120+(a*216|0)+72>>2]|0)!=(A|0))if((u[11120+(a*216|0)+80>>2]|0)!=(A|0))if((u[11120+(a*216|0)+88>>2]|0)!=(A|0))if((u[11120+(a*216|0)+96>>2]|0)!=(A|0))if((u[11120+(a*216|0)+104>>2]|0)!=(A|0))if((u[11120+(a*216|0)+112>>2]|0)!=(A|0))if((u[11120+(a*216|0)+120>>2]|0)!=(A|0))if((u[11120+(a*216|0)+128>>2]|0)!=(A|0))if((u[11120+(a*216|0)+136>>2]|0)==(A|0))A=2,c=1,h=2;else{if((u[11120+(a*216|0)+144>>2]|0)==(A|0)){A=0,c=2,h=0;break}if((u[11120+(a*216|0)+152>>2]|0)==(A|0)){A=0,c=2,h=1;break}if((u[11120+(a*216|0)+160>>2]|0)==(A|0)){A=0,c=2,h=2;break}if((u[11120+(a*216|0)+168>>2]|0)==(A|0)){A=1,c=2,h=0;break}if((u[11120+(a*216|0)+176>>2]|0)==(A|0)){A=1,c=2,h=1;break}if((u[11120+(a*216|0)+184>>2]|0)==(A|0)){A=1,c=2,h=2;break}if((u[11120+(a*216|0)+192>>2]|0)==(A|0)){A=2,c=2,h=0;break}if((u[11120+(a*216|0)+200>>2]|0)==(A|0)){A=2,c=2,h=1;break}if((u[11120+(a*216|0)+208>>2]|0)==(A|0)){A=2,c=2,h=2;break}else A=-1;return A|0}else A=2,c=1,h=1;else A=2,c=1,h=0;else A=1,c=1,h=2;else A=1,c=1,h=1;else A=1,c=1,h=0;else A=0,c=1,h=2;else A=0,c=1,h=1;else A=0,c=1,h=0;else A=2,c=0,h=2;else A=2,c=0,h=1;else A=2,c=0,h=0;else A=1,c=0,h=2;else A=1,c=0,h=1;else A=1,c=0,h=0;else A=0,c=0,h=2;else A=0,c=0,h=1;else A=0,c=0,h=0;while(!1);return a=u[11120+(a*216|0)+(c*72|0)+(A*24|0)+(h<<3)+4>>2]|0,a|0}function su(A,a){return A=A|0,a=a|0,(u[7696+(A*28|0)+20>>2]|0)==(a|0)?(a=1,a|0):(a=(u[7696+(A*28|0)+24>>2]|0)==(a|0),a|0)}function ya(A,a){return A=A|0,a=a|0,u[848+(A*28|0)+(a<<2)>>2]|0}function Yi(A,a){return A=A|0,a=a|0,(u[848+(A*28|0)>>2]|0)==(a|0)?(a=0,a|0):(u[848+(A*28|0)+4>>2]|0)==(a|0)?(a=1,a|0):(u[848+(A*28|0)+8>>2]|0)==(a|0)?(a=2,a|0):(u[848+(A*28|0)+12>>2]|0)==(a|0)?(a=3,a|0):(u[848+(A*28|0)+16>>2]|0)==(a|0)?(a=4,a|0):(u[848+(A*28|0)+20>>2]|0)==(a|0)?(a=5,a|0):((u[848+(A*28|0)+24>>2]|0)==(a|0)?6:7)|0}function Qf(){return 122}function ou(A){A=A|0;var a=0,c=0,h=0;a=0;do xe(a|0,0,45)|0,h=z()|0|134225919,c=A+(a<<3)|0,u[c>>2]=-1,u[c+4>>2]=h,a=a+1|0;while((a|0)!=122);return 0}function co(A){return A=A|0,+B[A+16>>3]<+B[A+24>>3]|0}function RA(A,a){A=A|0,a=a|0;var c=0,h=0,d=0;return c=+B[a>>3],!(c>=+B[A+8>>3])||!(c<=+B[A>>3])?(a=0,a|0):(h=+B[A+16>>3],c=+B[A+24>>3],d=+B[a+8>>3],a=d>=c,A=d<=h&1,h<c?a&&(A=1):a||(A=0),a=(A|0)!=0,a|0)}function au(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0,_=0,m=0,w=0,S=0,k=0,N=0,V=0,Z=0,J=0,$=0,ne=0,Se=0;$=L,L=L+288|0,N=$+264|0,V=$+96|0,k=$,w=k,S=w+96|0;do u[w>>2]=0,w=w+4|0;while((w|0)<(S|0));return a=Co(a,k)|0,a|0?(J=a,L=$,J|0):(S=k,k=u[S>>2]|0,S=u[S+4>>2]|0,bo(k,S,N)|0,Si(k,S,V)|0,m=+Po(N,V+8|0),B[N>>3]=+B[A>>3],S=N+8|0,B[S>>3]=+B[A+16>>3],B[V>>3]=+B[A+8>>3],k=V+8|0,B[k>>3]=+B[A+24>>3],d=+Po(N,V),Se=+B[S>>3]-+B[k>>3],_=+yt(+Se),ne=+B[N>>3]-+B[V>>3],h=+yt(+ne),!(Se==0|ne==0)&&(Se=+oi(+_,+h),Se=+Ir(+(d*d/+Rr(+(Se/+Rr(+_,+h)),3)/(m*(m*2.59807621135)*.8))),B[Mt>>3]=Se,Z=~~Se>>>0,J=+yt(Se)>=1?Se>0?~~+ti(+sr(Se/4294967296),4294967295)>>>0:~~+Ir((Se-+(~~Se>>>0))/4294967296)>>>0:0,(u[Mt+4>>2]&2146435072|0)!=2146435072)?(V=(Z|0)==0&(J|0)==0,a=c,u[a>>2]=V?1:Z,u[a+4>>2]=V?0:J,a=0):a=1,J=a,L=$,J|0)}function fo(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var d=0,_=0,m=0,w=0,S=0,k=0,N=0;k=L,L=L+288|0,m=k+264|0,w=k+96|0,S=k,d=S,_=d+96|0;do u[d>>2]=0,d=d+4|0;while((d|0)<(_|0));return c=Co(c,S)|0,c|0?(h=c,L=k,h|0):(c=S,d=u[c>>2]|0,c=u[c+4>>2]|0,bo(d,c,m)|0,Si(d,c,w)|0,N=+Po(m,w+8|0),N=+Ir(+(+Po(A,a)/(N*2))),B[Mt>>3]=N,c=~~N>>>0,d=+yt(N)>=1?N>0?~~+ti(+sr(N/4294967296),4294967295)>>>0:~~+Ir((N-+(~~N>>>0))/4294967296)>>>0:0,(u[Mt+4>>2]&2146435072|0)==2146435072?(h=1,L=k,h|0):(S=(c|0)==0&(d|0)==0,u[h>>2]=S?1:c,u[h+4>>2]=S?0:d,h=0,L=k,h|0))}function ho(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0,u[A>>2]=a,u[A+4>>2]=c,u[A+8>>2]=h}function ms(A,a){A=A|0,a=a|0;var c=0,h=0,d=0,_=0,m=0,w=0,S=0,k=0,N=0,V=0,Z=0;V=a+8|0,u[V>>2]=0,S=+B[A>>3],m=+yt(+S),k=+B[A+8>>3],w=+yt(+k)/.8660254037844386,m=m+w*.5,c=~~m,A=~~w,m=m-+(c|0),w=w-+(A|0);do if(m<.5)if(m<.3333333333333333)if(u[a>>2]=c,w<(m+1)*.5){u[a+4>>2]=A;break}else{A=A+1|0,u[a+4>>2]=A;break}else if(Z=1-m,A=(!(w<Z)&1)+A|0,u[a+4>>2]=A,Z<=w&w<m*2){c=c+1|0,u[a>>2]=c;break}else{u[a>>2]=c;break}else{if(!(m<.6666666666666666))if(c=c+1|0,u[a>>2]=c,w<m*.5){u[a+4>>2]=A;break}else{A=A+1|0,u[a+4>>2]=A;break}if(w<1-m){if(u[a+4>>2]=A,m*2+-1<w){u[a>>2]=c;break}}else A=A+1|0,u[a+4>>2]=A;c=c+1|0,u[a>>2]=c}while(!1);do if(S<0)if(A&1){N=(A+1|0)/2|0,N=Lr(c|0,((c|0)<0)<<31>>31|0,N|0,((N|0)<0)<<31>>31|0)|0,c=~~(+(c|0)-((+(N>>>0)+4294967296*+(z()|0))*2+1)),u[a>>2]=c;break}else{N=(A|0)/2|0,N=Lr(c|0,((c|0)<0)<<31>>31|0,N|0,((N|0)<0)<<31>>31|0)|0,c=~~(+(c|0)-(+(N>>>0)+4294967296*+(z()|0))*2),u[a>>2]=c;break}while(!1);N=a+4|0,k<0&&(c=c-((A<<1|1|0)/2|0)|0,u[a>>2]=c,A=0-A|0,u[N>>2]=A),h=A-c|0,(c|0)<0?(d=0-c|0,u[N>>2]=h,u[V>>2]=d,u[a>>2]=0,A=h,c=0):d=0,(A|0)<0&&(c=c-A|0,u[a>>2]=c,d=d-A|0,u[V>>2]=d,u[N>>2]=0,A=0),_=c-d|0,h=A-d|0,(d|0)<0&&(u[a>>2]=_,u[N>>2]=h,u[V>>2]=0,A=h,c=_,d=0),h=(A|0)<(c|0)?A:c,h=(d|0)<(h|0)?d:h,!((h|0)<=0)&&(u[a>>2]=c-h,u[N>>2]=A-h,u[V>>2]=d-h)}function wr(A){A=A|0;var a=0,c=0,h=0,d=0,_=0,m=0;a=u[A>>2]|0,m=A+4|0,c=u[m>>2]|0,(a|0)<0&&(c=c-a|0,u[m>>2]=c,_=A+8|0,u[_>>2]=(u[_>>2]|0)-a,u[A>>2]=0,a=0),(c|0)<0?(a=a-c|0,u[A>>2]=a,_=A+8|0,d=(u[_>>2]|0)-c|0,u[_>>2]=d,u[m>>2]=0,c=0):(d=A+8|0,_=d,d=u[d>>2]|0),(d|0)<0&&(a=a-d|0,u[A>>2]=a,c=c-d|0,u[m>>2]=c,u[_>>2]=0,d=0),h=(c|0)<(a|0)?c:a,h=(d|0)<(h|0)?d:h,!((h|0)<=0)&&(u[A>>2]=a-h,u[m>>2]=c-h,u[_>>2]=d-h)}function Ki(A,a){A=A|0,a=a|0;var c=0,h=0;h=u[A+8>>2]|0,c=+((u[A+4>>2]|0)-h|0),B[a>>3]=+((u[A>>2]|0)-h|0)-c*.5,B[a+8>>3]=c*.8660254037844386}function Wr(A,a,c){A=A|0,a=a|0,c=c|0,u[c>>2]=(u[a>>2]|0)+(u[A>>2]|0),u[c+4>>2]=(u[a+4>>2]|0)+(u[A+4>>2]|0),u[c+8>>2]=(u[a+8>>2]|0)+(u[A+8>>2]|0)}function go(A,a,c){A=A|0,a=a|0,c=c|0,u[c>>2]=(u[A>>2]|0)-(u[a>>2]|0),u[c+4>>2]=(u[A+4>>2]|0)-(u[a+4>>2]|0),u[c+8>>2]=(u[A+8>>2]|0)-(u[a+8>>2]|0)}function po(A,a){A=A|0,a=a|0;var c=0,h=0;c=or(u[A>>2]|0,a)|0,u[A>>2]=c,c=A+4|0,h=or(u[c>>2]|0,a)|0,u[c>>2]=h,A=A+8|0,a=or(u[A>>2]|0,a)|0,u[A>>2]=a}function ys(A){A=A|0;var a=0,c=0,h=0,d=0,_=0,m=0,w=0;m=u[A>>2]|0,w=(m|0)<0,h=(u[A+4>>2]|0)-(w?m:0)|0,_=(h|0)<0,d=(_?0-h|0:0)+((u[A+8>>2]|0)-(w?m:0))|0,c=(d|0)<0,A=c?0:d,a=(_?0:h)-(c?d:0)|0,d=(w?0:m)-(_?h:0)-(c?d:0)|0,c=(a|0)<(d|0)?a:d,c=(A|0)<(c|0)?A:c,h=(c|0)>0,A=A-(h?c:0)|0,a=a-(h?c:0)|0;e:do switch(d-(h?c:0)|0){case 0:switch(a|0){case 0:return w=A|0?(A|0)==1?1:7:0,w|0;case 1:return w=A|0?(A|0)==1?3:7:2,w|0;default:break e}case 1:switch(a|0){case 0:return w=A|0?(A|0)==1?5:7:4,w|0;case 1:{if(!A)A=6;else break e;return A|0}default:break e}}while(!1);return w=7,w|0}function Au(A){A=A|0;var a=0,c=0,h=0,d=0,_=0,m=0,w=0;m=A+8|0,d=u[m>>2]|0,_=(u[A>>2]|0)-d|0,w=A+4|0,d=(u[w>>2]|0)-d|0;do if(_>>>0>715827881|d>>>0>715827881){if(c=(_|0)>0,c){if((2147483647-_|0)<(_|0)||(2147483647-(_<<1)|0)<(_|0))return w=1,w|0}else if((-2147483648-_|0)>(_|0)||(-2147483648-(_<<1)|0)>(_|0))return w=1,w|0;if(a=_*3|0,(d|0)>0){if((2147483647-d|0)<(d|0))return w=1,w|0}else if((-2147483648-d|0)>(d|0))return w=1,w|0;if(h=d<<1,(_|0)>-1){if((a|-2147483648|0)>=(d|0))return w=1,w|0}else if((a^-2147483648|0)<(d|0))return w=1,w|0;if(c){if((2147483647-_|0)<(h|0))a=1;else{c=h;break}return a|0}else{if((-2147483648-_|0)>(h|0))a=1;else{c=h;break}return a|0}}else c=d<<1,a=_*3|0;while(!1);h=hn(+(a-d|0)/7)|0,u[A>>2]=h,d=hn(+(c+_|0)/7)|0,u[w>>2]=d,u[m>>2]=0,c=(d|0)<(h|0),a=c?h:d,c=c?d:h;do if((c|0)<0){if((a|0)>0){if((a|-2147483648|0)<(c|0)&((c|0)!=-2147483648&(2147483647-a|0)>=(c|0)))break;qe(23313,22444,355,22455)}if((c|0)==-2147483648|(-2147483648-a|0)>(c|0)&&qe(23313,22444,355,22455),(a|0)>-1){if((a|-2147483648|0)<(c|0))break;qe(23313,22444,355,22455)}else{if((a^-2147483648|0)>=(c|0))break;qe(23313,22444,355,22455)}}while(!1);return a=d-h|0,(h|0)<0?(c=0-h|0,u[w>>2]=a,u[m>>2]=c,u[A>>2]=0,h=0):(a=d,c=0),(a|0)<0&&(h=h-a|0,u[A>>2]=h,c=c-a|0,u[m>>2]=c,u[w>>2]=0,a=0),_=h-c|0,d=a-c|0,(c|0)<0?(u[A>>2]=_,u[w>>2]=d,u[m>>2]=0,a=d,d=_,c=0):d=h,h=(a|0)<(d|0)?a:d,h=(c|0)<(h|0)?c:h,(h|0)<=0?(w=0,w|0):(u[A>>2]=d-h,u[w>>2]=a-h,u[m>>2]=c-h,w=0,w|0)}function Ei(A){A=A|0;var a=0,c=0,h=0,d=0,_=0,m=0,w=0;m=A+8|0,d=u[m>>2]|0,_=(u[A>>2]|0)-d|0,w=A+4|0,d=(u[w>>2]|0)-d|0;do if(_>>>0>715827881|d>>>0>715827881){if(c=(_|0)>0,c){if((2147483647-_|0)<(_|0))return w=1,w|0}else if((-2147483648-_|0)>(_|0))return w=1,w|0;if(a=_<<1,(d|0)>0){if((2147483647-d|0)<(d|0)||(2147483647-(d<<1)|0)<(d|0))return w=1,w|0}else if((-2147483648-d|0)>(d|0)||(-2147483648-(d<<1)|0)>(d|0))return w=1,w|0;if(h=d*3|0,c){if((2147483647-a|0)<(d|0))return w=1,w|0}else if((-2147483648-a|0)>(d|0))return w=1,w|0;if((d|0)>-1){if((h|-2147483648|0)<(_|0)){c=h;break}else a=1;return a|0}else{if((h^-2147483648|0)<(_|0))a=1;else{c=h;break}return a|0}}else c=d*3|0,a=_<<1;while(!1);h=hn(+(a+d|0)/7)|0,u[A>>2]=h,d=hn(+(c-_|0)/7)|0,u[w>>2]=d,u[m>>2]=0,c=(d|0)<(h|0),a=c?h:d,c=c?d:h;do if((c|0)<0){if((a|0)>0){if((a|-2147483648|0)<(c|0)&((c|0)!=-2147483648&(2147483647-a|0)>=(c|0)))break;qe(23313,22444,404,22469)}if((c|0)==-2147483648|(-2147483648-a|0)>(c|0)&&qe(23313,22444,404,22469),(a|0)>-1){if((a|-2147483648|0)<(c|0))break;qe(23313,22444,404,22469)}else{if((a^-2147483648|0)>=(c|0))break;qe(23313,22444,404,22469)}}while(!1);return a=d-h|0,(h|0)<0?(c=0-h|0,u[w>>2]=a,u[m>>2]=c,u[A>>2]=0,h=0):(a=d,c=0),(a|0)<0&&(h=h-a|0,u[A>>2]=h,c=c-a|0,u[m>>2]=c,u[w>>2]=0,a=0),_=h-c|0,d=a-c|0,(c|0)<0?(u[A>>2]=_,u[w>>2]=d,u[m>>2]=0,a=d,d=_,c=0):d=h,h=(a|0)<(d|0)?a:d,h=(c|0)<(h|0)?c:h,(h|0)<=0?(w=0,w|0):(u[A>>2]=d-h,u[w>>2]=a-h,u[m>>2]=c-h,w=0,w|0)}function PA(A){A=A|0;var a=0,c=0,h=0,d=0,_=0,m=0,w=0;m=A+8|0,c=u[m>>2]|0,a=(u[A>>2]|0)-c|0,w=A+4|0,c=(u[w>>2]|0)-c|0,h=hn(+((a*3|0)-c|0)/7)|0,u[A>>2]=h,a=hn(+((c<<1)+a|0)/7)|0,u[w>>2]=a,u[m>>2]=0,c=a-h|0,(h|0)<0?(_=0-h|0,u[w>>2]=c,u[m>>2]=_,u[A>>2]=0,a=c,h=0,c=_):c=0,(a|0)<0&&(h=h-a|0,u[A>>2]=h,c=c-a|0,u[m>>2]=c,u[w>>2]=0,a=0),_=h-c|0,d=a-c|0,(c|0)<0?(u[A>>2]=_,u[w>>2]=d,u[m>>2]=0,a=d,d=_,c=0):d=h,h=(a|0)<(d|0)?a:d,h=(c|0)<(h|0)?c:h,!((h|0)<=0)&&(u[A>>2]=d-h,u[w>>2]=a-h,u[m>>2]=c-h)}function _o(A){A=A|0;var a=0,c=0,h=0,d=0,_=0,m=0,w=0;m=A+8|0,c=u[m>>2]|0,a=(u[A>>2]|0)-c|0,w=A+4|0,c=(u[w>>2]|0)-c|0,h=hn(+((a<<1)+c|0)/7)|0,u[A>>2]=h,a=hn(+((c*3|0)-a|0)/7)|0,u[w>>2]=a,u[m>>2]=0,c=a-h|0,(h|0)<0?(_=0-h|0,u[w>>2]=c,u[m>>2]=_,u[A>>2]=0,a=c,h=0,c=_):c=0,(a|0)<0&&(h=h-a|0,u[A>>2]=h,c=c-a|0,u[m>>2]=c,u[w>>2]=0,a=0),_=h-c|0,d=a-c|0,(c|0)<0?(u[A>>2]=_,u[w>>2]=d,u[m>>2]=0,a=d,d=_,c=0):d=h,h=(a|0)<(d|0)?a:d,h=(c|0)<(h|0)?c:h,!((h|0)<=0)&&(u[A>>2]=d-h,u[w>>2]=a-h,u[m>>2]=c-h)}function mo(A){A=A|0;var a=0,c=0,h=0,d=0,_=0,m=0,w=0;a=u[A>>2]|0,m=A+4|0,c=u[m>>2]|0,w=A+8|0,h=u[w>>2]|0,d=c+(a*3|0)|0,u[A>>2]=d,c=h+(c*3|0)|0,u[m>>2]=c,a=(h*3|0)+a|0,u[w>>2]=a,h=c-d|0,(d|0)<0?(a=a-d|0,u[m>>2]=h,u[w>>2]=a,u[A>>2]=0,c=h,h=0):h=d,(c|0)<0&&(h=h-c|0,u[A>>2]=h,a=a-c|0,u[w>>2]=a,u[m>>2]=0,c=0),_=h-a|0,d=c-a|0,(a|0)<0?(u[A>>2]=_,u[m>>2]=d,u[w>>2]=0,h=_,a=0):d=c,c=(d|0)<(h|0)?d:h,c=(a|0)<(c|0)?a:c,!((c|0)<=0)&&(u[A>>2]=h-c,u[m>>2]=d-c,u[w>>2]=a-c)}function Ln(A){A=A|0;var a=0,c=0,h=0,d=0,_=0,m=0,w=0;d=u[A>>2]|0,m=A+4|0,a=u[m>>2]|0,w=A+8|0,c=u[w>>2]|0,h=(a*3|0)+d|0,d=c+(d*3|0)|0,u[A>>2]=d,u[m>>2]=h,a=(c*3|0)+a|0,u[w>>2]=a,c=h-d|0,(d|0)<0?(a=a-d|0,u[m>>2]=c,u[w>>2]=a,u[A>>2]=0,d=0):c=h,(c|0)<0&&(d=d-c|0,u[A>>2]=d,a=a-c|0,u[w>>2]=a,u[m>>2]=0,c=0),_=d-a|0,h=c-a|0,(a|0)<0?(u[A>>2]=_,u[m>>2]=h,u[w>>2]=0,d=_,a=0):h=c,c=(h|0)<(d|0)?h:d,c=(a|0)<(c|0)?a:c,!((c|0)<=0)&&(u[A>>2]=d-c,u[m>>2]=h-c,u[w>>2]=a-c)}function yo(A,a){A=A|0,a=a|0;var c=0,h=0,d=0,_=0,m=0,w=0;(a+-1|0)>>>0>=6||(d=(u[15440+(a*12|0)>>2]|0)+(u[A>>2]|0)|0,u[A>>2]=d,w=A+4|0,h=(u[15440+(a*12|0)+4>>2]|0)+(u[w>>2]|0)|0,u[w>>2]=h,m=A+8|0,a=(u[15440+(a*12|0)+8>>2]|0)+(u[m>>2]|0)|0,u[m>>2]=a,c=h-d|0,(d|0)<0?(a=a-d|0,u[w>>2]=c,u[m>>2]=a,u[A>>2]=0,h=0):(c=h,h=d),(c|0)<0&&(h=h-c|0,u[A>>2]=h,a=a-c|0,u[m>>2]=a,u[w>>2]=0,c=0),_=h-a|0,d=c-a|0,(a|0)<0?(u[A>>2]=_,u[w>>2]=d,u[m>>2]=0,h=_,a=0):d=c,c=(d|0)<(h|0)?d:h,c=(a|0)<(c|0)?a:c,!((c|0)<=0)&&(u[A>>2]=h-c,u[w>>2]=d-c,u[m>>2]=a-c))}function kA(A){A=A|0;var a=0,c=0,h=0,d=0,_=0,m=0,w=0;d=u[A>>2]|0,m=A+4|0,a=u[m>>2]|0,w=A+8|0,c=u[w>>2]|0,h=a+d|0,d=c+d|0,u[A>>2]=d,u[m>>2]=h,a=c+a|0,u[w>>2]=a,c=h-d|0,(d|0)<0?(a=a-d|0,u[m>>2]=c,u[w>>2]=a,u[A>>2]=0,h=0):(c=h,h=d),(c|0)<0&&(h=h-c|0,u[A>>2]=h,a=a-c|0,u[w>>2]=a,u[m>>2]=0,c=0),_=h-a|0,d=c-a|0,(a|0)<0?(u[A>>2]=_,u[m>>2]=d,u[w>>2]=0,h=_,a=0):d=c,c=(d|0)<(h|0)?d:h,c=(a|0)<(c|0)?a:c,!((c|0)<=0)&&(u[A>>2]=h-c,u[m>>2]=d-c,u[w>>2]=a-c)}function Fr(A){A=A|0;var a=0,c=0,h=0,d=0,_=0,m=0,w=0;a=u[A>>2]|0,m=A+4|0,h=u[m>>2]|0,w=A+8|0,c=u[w>>2]|0,d=h+a|0,u[A>>2]=d,h=c+h|0,u[m>>2]=h,a=c+a|0,u[w>>2]=a,c=h-d|0,(d|0)<0?(a=a-d|0,u[m>>2]=c,u[w>>2]=a,u[A>>2]=0,h=0):(c=h,h=d),(c|0)<0&&(h=h-c|0,u[A>>2]=h,a=a-c|0,u[w>>2]=a,u[m>>2]=0,c=0),_=h-a|0,d=c-a|0,(a|0)<0?(u[A>>2]=_,u[m>>2]=d,u[w>>2]=0,h=_,a=0):d=c,c=(d|0)<(h|0)?d:h,c=(a|0)<(c|0)?a:c,!((c|0)<=0)&&(u[A>>2]=h-c,u[m>>2]=d-c,u[w>>2]=a-c)}function _n(A){switch(A=A|0,A|0){case 1:{A=5;break}case 5:{A=4;break}case 4:{A=6;break}case 6:{A=2;break}case 2:{A=3;break}case 3:{A=1;break}}return A|0}function Un(A){switch(A=A|0,A|0){case 1:{A=3;break}case 3:{A=2;break}case 2:{A=6;break}case 6:{A=4;break}case 4:{A=5;break}case 5:{A=1;break}}return A|0}function vs(A){A=A|0;var a=0,c=0,h=0,d=0,_=0,m=0,w=0;a=u[A>>2]|0,m=A+4|0,c=u[m>>2]|0,w=A+8|0,h=u[w>>2]|0,d=c+(a<<1)|0,u[A>>2]=d,c=h+(c<<1)|0,u[m>>2]=c,a=(h<<1)+a|0,u[w>>2]=a,h=c-d|0,(d|0)<0?(a=a-d|0,u[m>>2]=h,u[w>>2]=a,u[A>>2]=0,c=h,h=0):h=d,(c|0)<0&&(h=h-c|0,u[A>>2]=h,a=a-c|0,u[w>>2]=a,u[m>>2]=0,c=0),_=h-a|0,d=c-a|0,(a|0)<0?(u[A>>2]=_,u[m>>2]=d,u[w>>2]=0,h=_,a=0):d=c,c=(d|0)<(h|0)?d:h,c=(a|0)<(c|0)?a:c,!((c|0)<=0)&&(u[A>>2]=h-c,u[m>>2]=d-c,u[w>>2]=a-c)}function lu(A){A=A|0;var a=0,c=0,h=0,d=0,_=0,m=0,w=0;d=u[A>>2]|0,m=A+4|0,a=u[m>>2]|0,w=A+8|0,c=u[w>>2]|0,h=(a<<1)+d|0,d=c+(d<<1)|0,u[A>>2]=d,u[m>>2]=h,a=(c<<1)+a|0,u[w>>2]=a,c=h-d|0,(d|0)<0?(a=a-d|0,u[m>>2]=c,u[w>>2]=a,u[A>>2]=0,d=0):c=h,(c|0)<0&&(d=d-c|0,u[A>>2]=d,a=a-c|0,u[w>>2]=a,u[m>>2]=0,c=0),_=d-a|0,h=c-a|0,(a|0)<0?(u[A>>2]=_,u[m>>2]=h,u[w>>2]=0,d=_,a=0):h=c,c=(h|0)<(d|0)?h:d,c=(a|0)<(c|0)?a:c,!((c|0)<=0)&&(u[A>>2]=d-c,u[m>>2]=h-c,u[w>>2]=a-c)}function vo(A,a){A=A|0,a=a|0;var c=0,h=0,d=0,_=0,m=0,w=0;return m=(u[A>>2]|0)-(u[a>>2]|0)|0,w=(m|0)<0,h=(u[A+4>>2]|0)-(u[a+4>>2]|0)-(w?m:0)|0,_=(h|0)<0,d=(w?0-m|0:0)+(u[A+8>>2]|0)-(u[a+8>>2]|0)+(_?0-h|0:0)|0,A=(d|0)<0,a=A?0:d,c=(_?0:h)-(A?d:0)|0,d=(w?0:m)-(_?h:0)-(A?d:0)|0,A=(c|0)<(d|0)?c:d,A=(a|0)<(A|0)?a:A,h=(A|0)>0,a=a-(h?A:0)|0,c=c-(h?A:0)|0,A=d-(h?A:0)|0,A=(A|0)>-1?A:0-A|0,c=(c|0)>-1?c:0-c|0,a=(a|0)>-1?a:0-a|0,a=(c|0)>(a|0)?c:a,((A|0)>(a|0)?A:a)|0}function xA(A,a){A=A|0,a=a|0;var c=0;c=u[A+8>>2]|0,u[a>>2]=(u[A>>2]|0)-c,u[a+4>>2]=(u[A+4>>2]|0)-c}function wo(A,a){A=A|0,a=a|0;var c=0,h=0,d=0,_=0,m=0,w=0;h=u[A>>2]|0,u[a>>2]=h,d=u[A+4>>2]|0,m=a+4|0,u[m>>2]=d,w=a+8|0,u[w>>2]=0,c=(d|0)<(h|0),A=c?h:d,c=c?d:h;do if((c|0)<0){if((A|0)>0){if((A|-2147483648|0)<(c|0)&((c|0)!=-2147483648&(2147483647-A|0)>=(c|0)))break;return A=1,A|0}if((c|0)==-2147483648|(-2147483648-A|0)>(c|0))return a=1,a|0;if((A|0)>-1){if((A|-2147483648|0)<(c|0))break;return A=1,A|0}else{if((A^-2147483648|0)<(c|0))A=1;else break;return A|0}}while(!1);return A=d-h|0,(h|0)<0?(c=0-h|0,u[m>>2]=A,u[w>>2]=c,u[a>>2]=0,h=0):(A=d,c=0),(A|0)<0&&(h=h-A|0,u[a>>2]=h,c=c-A|0,u[w>>2]=c,u[m>>2]=0,A=0),_=h-c|0,d=A-c|0,(c|0)<0?(u[a>>2]=_,u[m>>2]=d,u[w>>2]=0,A=d,d=_,c=0):d=h,h=(A|0)<(d|0)?A:d,h=(c|0)<(h|0)?c:h,(h|0)<=0?(a=0,a|0):(u[a>>2]=d-h,u[m>>2]=A-h,u[w>>2]=c-h,a=0,a|0)}function To(A){A=A|0;var a=0,c=0,h=0,d=0;a=A+8|0,d=u[a>>2]|0,c=d-(u[A>>2]|0)|0,u[A>>2]=c,h=A+4|0,A=(u[h>>2]|0)-d|0,u[h>>2]=A,u[a>>2]=0-(A+c)}function uu(A){A=A|0;var a=0,c=0,h=0,d=0,_=0,m=0,w=0;c=u[A>>2]|0,a=0-c|0,u[A>>2]=a,m=A+8|0,u[m>>2]=0,w=A+4|0,h=u[w>>2]|0,d=h+c|0,(c|0)>0?(u[w>>2]=d,u[m>>2]=c,u[A>>2]=0,a=0,h=d):c=0,(h|0)<0?(_=a-h|0,u[A>>2]=_,c=c-h|0,u[m>>2]=c,u[w>>2]=0,d=_-c|0,a=0-c|0,(c|0)<0?(u[A>>2]=d,u[w>>2]=a,u[m>>2]=0,h=a,c=0):(h=0,d=_)):d=a,a=(h|0)<(d|0)?h:d,a=(c|0)<(a|0)?c:a,!((a|0)<=0)&&(u[A>>2]=d-a,u[w>>2]=h-a,u[m>>2]=c-a)}function Yf(A,a,c,h,d){A=A|0,a=a|0,c=c|0,h=h|0,d=d|0;var _=0,m=0,w=0,S=0,k=0,N=0,V=0;if(V=L,L=L+64|0,N=V,w=V+56|0,!(!0&(a&2013265920|0)==134217728&(!0&(h&2013265920|0)==134217728)))return d=5,L=V,d|0;if((A|0)==(c|0)&(a|0)==(h|0))return u[d>>2]=0,d=0,L=V,d|0;if(m=Ce(A|0,a|0,52)|0,z()|0,m=m&15,k=Ce(c|0,h|0,52)|0,z()|0,(m|0)!=(k&15|0))return d=12,L=V,d|0;if(_=m+-1|0,m>>>0>1){FA(A,a,_,N)|0,FA(c,h,_,w)|0,k=N,S=u[k>>2]|0,k=u[k+4>>2]|0;e:do if((S|0)==(u[w>>2]|0)&&(k|0)==(u[w+4>>2]|0)){m=(m^15)*3|0,_=Ce(A|0,a|0,m|0)|0,z()|0,_=_&7,m=Ce(c|0,h|0,m|0)|0,z()|0,m=m&7;do if((_|0)==0|(m|0)==0)u[d>>2]=1,_=0;else if((_|0)==7)_=5;else{if((_|0)==1|(m|0)==1&&Gt(S,k)|0){_=5;break}if((u[15536+(_<<2)>>2]|0)!=(m|0)&&(u[15568+(_<<2)>>2]|0)!=(m|0))break e;u[d>>2]=1,_=0}while(!1);return d=_,L=V,d|0}while(!1)}_=N,m=_+56|0;do u[_>>2]=0,_=_+4|0;while((_|0)<(m|0));return wi(A,a,1,N)|0,a=N,!((u[a>>2]|0)==(c|0)&&(u[a+4>>2]|0)==(h|0))&&(a=N+8|0,!((u[a>>2]|0)==(c|0)&&(u[a+4>>2]|0)==(h|0)))&&(a=N+16|0,!((u[a>>2]|0)==(c|0)&&(u[a+4>>2]|0)==(h|0)))&&(a=N+24|0,!((u[a>>2]|0)==(c|0)&&(u[a+4>>2]|0)==(h|0)))&&(a=N+32|0,!((u[a>>2]|0)==(c|0)&&(u[a+4>>2]|0)==(h|0)))&&(a=N+40|0,!((u[a>>2]|0)==(c|0)&&(u[a+4>>2]|0)==(h|0)))?(_=N+48|0,_=((u[_>>2]|0)==(c|0)?(u[_+4>>2]|0)==(h|0):0)&1):_=1,u[d>>2]=_,d=0,L=V,d|0}function Kf(A,a,c,h,d){return A=A|0,a=a|0,c=c|0,h=h|0,d=d|0,c=ve(A,a,c,h)|0,(c|0)==7?(d=11,d|0):(h=xe(c|0,0,56)|0,a=a&-2130706433|(z()|0)|268435456,u[d>>2]=A|h,u[d+4>>2]=a,d=0,d|0)}function Zf(A,a,c){return A=A|0,a=a|0,c=c|0,!0&(a&2013265920|0)==268435456?(u[c>>2]=A,u[c+4>>2]=a&-2130706433|134217728,c=0,c|0):(c=6,c|0)}function MA(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0,_=0;return d=L,L=L+16|0,h=d,u[h>>2]=0,!0&(a&2013265920|0)==268435456?(_=Ce(A|0,a|0,56)|0,z()|0,h=K(A,a&-2130706433|134217728,_&7,h,c)|0,L=d,h|0):(h=6,L=d,h|0)}function qf(A,a){A=A|0,a=a|0;var c=0;switch(c=Ce(A|0,a|0,56)|0,z()|0,c&7){case 0:case 7:return c=0,c|0}return c=a&-2130706433|134217728,!(!0&(a&2013265920|0)==268435456)||!0&(a&117440512|0)==16777216&(Gt(A,c)|0)!=0?(c=0,c|0):(c=IA(A,c)|0,c|0)}function Gf(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0,_=0,m=0;return d=L,L=L+16|0,h=d,!0&(a&2013265920|0)==268435456?(_=a&-2130706433|134217728,m=c,u[m>>2]=A,u[m+4>>2]=_,u[h>>2]=0,a=Ce(A|0,a|0,56)|0,z()|0,h=K(A,_,a&7,h,c+8|0)|0,L=d,h|0):(h=6,L=d,h|0)}function Jf(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0;return d=(Gt(A,a)|0)==0,a=a&-2130706433,h=c,u[h>>2]=d?A:0,u[h+4>>2]=d?a|285212672:0,h=c+8|0,u[h>>2]=A,u[h+4>>2]=a|301989888,h=c+16|0,u[h>>2]=A,u[h+4>>2]=a|318767104,h=c+24|0,u[h>>2]=A,u[h+4>>2]=a|335544320,h=c+32|0,u[h>>2]=A,u[h+4>>2]=a|352321536,c=c+40|0,u[c>>2]=A,u[c+4>>2]=a|369098752,0}function va(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0,_=0,m=0;return m=L,L=L+16|0,d=m,_=a&-2130706433|134217728,!0&(a&2013265920|0)==268435456?(h=Ce(A|0,a|0,56)|0,z()|0,h=h0(A,_,h&7)|0,(h|0)==-1?(u[c>>2]=0,_=6,L=m,_|0):(Bn(A,_,d)|0&&qe(23313,22484,282,22499),a=Ce(A|0,a|0,52)|0,z()|0,a=a&15,Gt(A,_)|0?NA(d,a,h,2,c):OA(d,a,h,2,c),_=0,L=m,_|0)):(_=6,L=m,_|0)}function e0(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0;h=L,L=L+16|0,d=h,cu(A,a,c,d),ms(d,c+4|0),L=h}function cu(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var d=0,_=0,m=0,w=0,S=0;if(w=L,L=L+16|0,S=w,t0(A,c,S),_=+hs(+(1-+B[S>>3]*.5)),_<1e-16){u[h>>2]=0,u[h+4>>2]=0,u[h+8>>2]=0,u[h+12>>2]=0,L=w;return}if(S=u[c>>2]|0,d=+B[15920+(S*24|0)>>3],d=+Ro(d-+Ro(+ko(15600+(S<<4)|0,A))),fn(a)|0?m=+Ro(d+-.3334731722518321):m=d,d=+tn(+_)/.381966011250105,(a|0)>0){A=0;do d=d*2.6457513110645907,A=A+1|0;while((A|0)!=(a|0))}_=+Ut(+m)*d,B[h>>3]=_,m=+vt(+m)*d,B[h+8>>3]=m,L=w}function t0(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0,_=0;if(_=L,L=L+32|0,d=_,f0(A,d),u[a>>2]=0,B[c>>3]=5,h=+hr(16400,d),h<+B[c>>3]&&(u[a>>2]=0,B[c>>3]=h),h=+hr(16424,d),h<+B[c>>3]&&(u[a>>2]=1,B[c>>3]=h),h=+hr(16448,d),h<+B[c>>3]&&(u[a>>2]=2,B[c>>3]=h),h=+hr(16472,d),h<+B[c>>3]&&(u[a>>2]=3,B[c>>3]=h),h=+hr(16496,d),h<+B[c>>3]&&(u[a>>2]=4,B[c>>3]=h),h=+hr(16520,d),h<+B[c>>3]&&(u[a>>2]=5,B[c>>3]=h),h=+hr(16544,d),h<+B[c>>3]&&(u[a>>2]=6,B[c>>3]=h),h=+hr(16568,d),h<+B[c>>3]&&(u[a>>2]=7,B[c>>3]=h),h=+hr(16592,d),h<+B[c>>3]&&(u[a>>2]=8,B[c>>3]=h),h=+hr(16616,d),h<+B[c>>3]&&(u[a>>2]=9,B[c>>3]=h),h=+hr(16640,d),h<+B[c>>3]&&(u[a>>2]=10,B[c>>3]=h),h=+hr(16664,d),h<+B[c>>3]&&(u[a>>2]=11,B[c>>3]=h),h=+hr(16688,d),h<+B[c>>3]&&(u[a>>2]=12,B[c>>3]=h),h=+hr(16712,d),h<+B[c>>3]&&(u[a>>2]=13,B[c>>3]=h),h=+hr(16736,d),h<+B[c>>3]&&(u[a>>2]=14,B[c>>3]=h),h=+hr(16760,d),h<+B[c>>3]&&(u[a>>2]=15,B[c>>3]=h),h=+hr(16784,d),h<+B[c>>3]&&(u[a>>2]=16,B[c>>3]=h),h=+hr(16808,d),h<+B[c>>3]&&(u[a>>2]=17,B[c>>3]=h),h=+hr(16832,d),h<+B[c>>3]&&(u[a>>2]=18,B[c>>3]=h),h=+hr(16856,d),!(h<+B[c>>3])){L=_;return}u[a>>2]=19,B[c>>3]=h,L=_}function Eo(A,a,c,h,d){A=A|0,a=a|0,c=c|0,h=h|0,d=d|0;var _=0,m=0;if(_=+Oo(A),_<1e-16){a=15600+(a<<4)|0,u[d>>2]=u[a>>2],u[d+4>>2]=u[a+4>>2],u[d+8>>2]=u[a+8>>2],u[d+12>>2]=u[a+12>>2];return}if(m=+ur(+ +B[A+8>>3],+ +B[A>>3]),(c|0)>0){A=0;do _=_/2.6457513110645907,A=A+1|0;while((A|0)!=(c|0))}h?(_=_/3,c=(fn(c)|0)==0,_=+Dr(+((c?_:_/2.6457513110645907)*.381966011250105))):(_=+Dr(+(_*.381966011250105)),fn(c)|0&&(m=+Ro(m+.3334731722518321))),yu(15600+(a<<4)|0,+Ro(+B[15920+(a*24|0)>>3]-m),_,d)}function r0(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0;h=L,L=L+16|0,d=h,Ki(A+4|0,d),Eo(d,u[A>>2]|0,a,0,c),L=h}function NA(A,a,c,h,d){A=A|0,a=a|0,c=c|0,h=h|0,d=d|0;var _=0,m=0,w=0,S=0,k=0,N=0,V=0,Z=0,J=0,$=0,ne=0,Se=0,Te=0,fe=0,_e=0,le=0,We=0,$e=0,Ie=0,Le=0,ut=0,Et=0,zt=0,xt=0,wt=0,St=0,Xt=0,dt=0;if(St=L,L=L+272|0,_=St+256|0,fe=St+240|0,zt=St,xt=St+224|0,wt=St+208|0,_e=St+176|0,le=St+160|0,We=St+192|0,$e=St+144|0,Ie=St+128|0,Le=St+112|0,ut=St+96|0,Et=St+80|0,u[_>>2]=a,u[fe>>2]=u[A>>2],u[fe+4>>2]=u[A+4>>2],u[fe+8>>2]=u[A+8>>2],u[fe+12>>2]=u[A+12>>2],wa(fe,_,zt),u[d>>2]=0,fe=h+c+((h|0)==5&1)|0,(fe|0)<=(c|0)){L=St;return}S=u[_>>2]|0,k=xt+4|0,N=_e+4|0,V=c+5|0,Z=16880+(S<<2)|0,J=16960+(S<<2)|0,$=Ie+8|0,ne=Le+8|0,Se=ut+8|0,Te=wt+4|0,w=c;e:for(;;){m=zt+(((w|0)%5|0)<<4)|0,u[wt>>2]=u[m>>2],u[wt+4>>2]=u[m+4>>2],u[wt+8>>2]=u[m+8>>2],u[wt+12>>2]=u[m+12>>2];do;while((ws(wt,S,0,1)|0)==2);if((w|0)>(c|0)&(fn(a)|0)!=0){if(u[_e>>2]=u[wt>>2],u[_e+4>>2]=u[wt+4>>2],u[_e+8>>2]=u[wt+8>>2],u[_e+12>>2]=u[wt+12>>2],Ki(k,le),h=u[_e>>2]|0,_=u[17040+(h*80|0)+(u[xt>>2]<<2)>>2]|0,u[_e>>2]=u[18640+(h*80|0)+(_*20|0)>>2],m=u[18640+(h*80|0)+(_*20|0)+16>>2]|0,(m|0)>0){A=0;do kA(N),A=A+1|0;while((A|0)<(m|0))}switch(m=18640+(h*80|0)+(_*20|0)+4|0,u[We>>2]=u[m>>2],u[We+4>>2]=u[m+4>>2],u[We+8>>2]=u[m+8>>2],po(We,(u[Z>>2]|0)*3|0),Wr(N,We,N),wr(N),Ki(N,$e),Xt=+(u[J>>2]|0),B[Ie>>3]=Xt*3,B[$>>3]=0,dt=Xt*-1.5,B[Le>>3]=dt,B[ne>>3]=Xt*2.598076211353316,B[ut>>3]=dt,B[Se>>3]=Xt*-2.598076211353316,u[17040+((u[_e>>2]|0)*80|0)+(u[wt>>2]<<2)>>2]|0){case 1:{A=Le,h=Ie;break}case 3:{A=ut,h=Le;break}case 2:{A=Ie,h=ut;break}default:{A=12;break e}}Do(le,$e,h,A,Et),Eo(Et,u[_e>>2]|0,S,1,d+8+(u[d>>2]<<4)|0),u[d>>2]=(u[d>>2]|0)+1}if((w|0)<(V|0)&&(Ki(Te,_e),Eo(_e,u[wt>>2]|0,S,1,d+8+(u[d>>2]<<4)|0),u[d>>2]=(u[d>>2]|0)+1),u[xt>>2]=u[wt>>2],u[xt+4>>2]=u[wt+4>>2],u[xt+8>>2]=u[wt+8>>2],u[xt+12>>2]=u[wt+12>>2],w=w+1|0,(w|0)>=(fe|0)){A=3;break}}if((A|0)==3){L=St;return}else(A|0)==12&&qe(22522,22569,571,22579)}function wa(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0,_=0,m=0,w=0,S=0;S=L,L=L+128|0,h=S+64|0,d=S,_=h,m=20240,w=_+60|0;do u[_>>2]=u[m>>2],_=_+4|0,m=m+4|0;while((_|0)<(w|0));_=d,m=20304,w=_+60|0;do u[_>>2]=u[m>>2],_=_+4|0,m=m+4|0;while((_|0)<(w|0));w=(fn(u[a>>2]|0)|0)==0,h=w?h:d,d=A+4|0,vs(d),lu(d),fn(u[a>>2]|0)|0&&(Ln(d),u[a>>2]=(u[a>>2]|0)+1),u[c>>2]=u[A>>2],a=c+4|0,Wr(d,h,a),wr(a),u[c+16>>2]=u[A>>2],a=c+20|0,Wr(d,h+12|0,a),wr(a),u[c+32>>2]=u[A>>2],a=c+36|0,Wr(d,h+24|0,a),wr(a),u[c+48>>2]=u[A>>2],a=c+52|0,Wr(d,h+36|0,a),wr(a),u[c+64>>2]=u[A>>2],c=c+68|0,Wr(d,h+48|0,c),wr(c),L=S}function ws(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var d=0,_=0,m=0,w=0,S=0,k=0,N=0,V=0,Z=0,J=0,$=0;if($=L,L=L+32|0,Z=$+12|0,w=$,J=A+4|0,V=u[16960+(a<<2)>>2]|0,N=(h|0)!=0,V=N?V*3|0:V,d=u[J>>2]|0,k=A+8|0,m=u[k>>2]|0,N){if(_=A+12|0,h=u[_>>2]|0,d=m+d+h|0,(d|0)==(V|0))return J=1,L=$,J|0;S=_}else S=A+12|0,h=u[S>>2]|0,d=m+d+h|0;if((d|0)<=(V|0))return J=0,L=$,J|0;do if((h|0)>0){if(h=u[A>>2]|0,(m|0)>0){_=18640+(h*80|0)+60|0,h=A;break}h=18640+(h*80|0)+40|0,c?(ho(Z,V,0,0),go(J,Z,w),Fr(w),Wr(w,Z,J),_=h,h=A):(_=h,h=A)}else _=18640+((u[A>>2]|0)*80|0)+20|0,h=A;while(!1);if(u[h>>2]=u[_>>2],d=_+16|0,(u[d>>2]|0)>0){h=0;do kA(J),h=h+1|0;while((h|0)<(u[d>>2]|0))}return A=_+4|0,u[Z>>2]=u[A>>2],u[Z+4>>2]=u[A+4>>2],u[Z+8>>2]=u[A+8>>2],a=u[16880+(a<<2)>>2]|0,po(Z,N?a*3|0:a),Wr(J,Z,J),wr(J),N?h=((u[k>>2]|0)+(u[J>>2]|0)+(u[S>>2]|0)|0)==(V|0)?1:2:h=2,J=h,L=$,J|0}function n0(A,a){A=A|0,a=a|0;var c=0;do c=ws(A,a,0,1)|0;while((c|0)==2);return c|0}function OA(A,a,c,h,d){A=A|0,a=a|0,c=c|0,h=h|0,d=d|0;var _=0,m=0,w=0,S=0,k=0,N=0,V=0,Z=0,J=0,$=0,ne=0,Se=0,Te=0,fe=0,_e=0,le=0,We=0,$e=0,Ie=0,Le=0,ut=0,Et=0,zt=0;if(ut=L,L=L+240|0,_=ut+224|0,We=ut+208|0,$e=ut,Ie=ut+192|0,Le=ut+176|0,Se=ut+160|0,Te=ut+144|0,fe=ut+128|0,_e=ut+112|0,le=ut+96|0,u[_>>2]=a,u[We>>2]=u[A>>2],u[We+4>>2]=u[A+4>>2],u[We+8>>2]=u[A+8>>2],u[We+12>>2]=u[A+12>>2],DA(We,_,$e),u[d>>2]=0,ne=h+c+((h|0)==6&1)|0,(ne|0)<=(c|0)){L=ut;return}S=u[_>>2]|0,k=c+6|0,N=16960+(S<<2)|0,V=Te+8|0,Z=fe+8|0,J=_e+8|0,$=Ie+4|0,m=0,w=c,h=-1;e:for(;;){if(_=(w|0)%6|0,A=$e+(_<<4)|0,u[Ie>>2]=u[A>>2],u[Ie+4>>2]=u[A+4>>2],u[Ie+8>>2]=u[A+8>>2],u[Ie+12>>2]=u[A+12>>2],A=m,m=ws(Ie,S,0,1)|0,(w|0)>(c|0)&(fn(a)|0)!=0&&(A|0)!=1&&(u[Ie>>2]|0)!=(h|0)){switch(Ki($e+(((_+5|0)%6|0)<<4)+4|0,Le),Ki($e+(_<<4)+4|0,Se),Et=+(u[N>>2]|0),B[Te>>3]=Et*3,B[V>>3]=0,zt=Et*-1.5,B[fe>>3]=zt,B[Z>>3]=Et*2.598076211353316,B[_e>>3]=zt,B[J>>3]=Et*-2.598076211353316,_=u[We>>2]|0,u[17040+(_*80|0)+(((h|0)==(_|0)?u[Ie>>2]|0:h)<<2)>>2]|0){case 1:{A=fe,h=Te;break}case 3:{A=_e,h=fe;break}case 2:{A=Te,h=_e;break}default:{A=8;break e}}Do(Le,Se,h,A,le),!(qi(Le,le)|0)&&!(qi(Se,le)|0)&&(Eo(le,u[We>>2]|0,S,1,d+8+(u[d>>2]<<4)|0),u[d>>2]=(u[d>>2]|0)+1)}if((w|0)<(k|0)&&(Ki($,Le),Eo(Le,u[Ie>>2]|0,S,1,d+8+(u[d>>2]<<4)|0),u[d>>2]=(u[d>>2]|0)+1),w=w+1|0,(w|0)>=(ne|0)){A=3;break}else h=u[Ie>>2]|0}if((A|0)==3){L=ut;return}else(A|0)==8&&qe(22606,22569,736,22651)}function DA(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0,_=0,m=0,w=0,S=0;S=L,L=L+160|0,h=S+80|0,d=S,_=h,m=20368,w=_+72|0;do u[_>>2]=u[m>>2],_=_+4|0,m=m+4|0;while((_|0)<(w|0));_=d,m=20448,w=_+72|0;do u[_>>2]=u[m>>2],_=_+4|0,m=m+4|0;while((_|0)<(w|0));w=(fn(u[a>>2]|0)|0)==0,h=w?h:d,d=A+4|0,vs(d),lu(d),fn(u[a>>2]|0)|0&&(Ln(d),u[a>>2]=(u[a>>2]|0)+1),u[c>>2]=u[A>>2],a=c+4|0,Wr(d,h,a),wr(a),u[c+16>>2]=u[A>>2],a=c+20|0,Wr(d,h+12|0,a),wr(a),u[c+32>>2]=u[A>>2],a=c+36|0,Wr(d,h+24|0,a),wr(a),u[c+48>>2]=u[A>>2],a=c+52|0,Wr(d,h+36|0,a),wr(a),u[c+64>>2]=u[A>>2],a=c+68|0,Wr(d,h+48|0,a),wr(a),u[c+80>>2]=u[A>>2],c=c+84|0,Wr(d,h+60|0,c),wr(c),L=S}function i0(A,a){return A=A|0,a=a|0,a=Ce(A|0,a|0,52)|0,z()|0,a&15|0}function fu(A,a){return A=A|0,a=a|0,a=Ce(A|0,a|0,45)|0,z()|0,a&127|0}function IA(A,a){A=A|0,a=a|0;var c=0,h=0,d=0,_=0,m=0,w=0;if(!(!0&(a&-16777216|0)==134217728)||(m=Ce(A|0,a|0,45)|0,z()|0,m=m&127,m>>>0>121))return a=0,a|0;c=Ce(A|0,a|0,52)|0,z()|0,c=c&15;do if(c|0){for(d=1,h=0;;){if(_=Ce(A|0,a|0,(15-d|0)*3|0)|0,z()|0,_=_&7,(_|0)!=0&(h^1))if((_|0)==1&(kt(m)|0)!=0){w=0,h=13;break}else h=1;if((_|0)==7){w=0,h=13;break}if(d>>>0<c>>>0)d=d+1|0;else{h=9;break}}if((h|0)==9){if((c|0)==15)w=1;else break;return w|0}else if((h|0)==13)return w|0}while(!1);for(;;){if(w=Ce(A|0,a|0,(14-c|0)*3|0)|0,z()|0,!((w&7|0)==7&!0)){w=0,h=13;break}if(c>>>0<14)c=c+1|0;else{w=1,h=13;break}}return(h|0)==13?w|0:0}function FA(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var d=0,_=0;if(_=Ce(A|0,a|0,52)|0,z()|0,_=_&15,c>>>0>15)return h=4,h|0;if((_|0)<(c|0))return h=12,h|0;if((_|0)==(c|0))return u[h>>2]=A,u[h+4>>2]=a,h=0,h|0;if(d=xe(c|0,0,52)|0,d=d|A,A=z()|0|a&-15728641,(_|0)>(c|0))do a=xe(7,0,(14-c|0)*3|0)|0,c=c+1|0,d=a|d,A=z()|0|A;while((c|0)<(_|0));return u[h>>2]=d,u[h+4>>2]=A,h=0,h|0}function Ta(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var d=0,_=0,m=0;if(_=Ce(A|0,a|0,52)|0,z()|0,_=_&15,!((c|0)<16&(_|0)<=(c|0)))return h=4,h|0;d=c-_|0,c=Ce(A|0,a|0,45)|0,z()|0;e:do if(!(kt(c&127)|0))c=zn(7,0,d,((d|0)<0)<<31>>31)|0,d=z()|0;else{t:do if(_|0){for(c=1;m=xe(7,0,(15-c|0)*3|0)|0,!!((m&A|0)==0&((z()|0)&a|0)==0);)if(c>>>0<_>>>0)c=c+1|0;else break t;c=zn(7,0,d,((d|0)<0)<<31>>31)|0,d=z()|0;break e}while(!1);c=zn(7,0,d,((d|0)<0)<<31>>31)|0,c=Er(c|0,z()|0,5,0)|0,c=Dt(c|0,z()|0,-5,-1)|0,c=Cn(c|0,z()|0,6,0)|0,c=Dt(c|0,z()|0,1,0)|0,d=z()|0}while(!1);return m=h,u[m>>2]=c,u[m+4>>2]=d,m=0,m|0}function Gt(A,a){A=A|0,a=a|0;var c=0,h=0,d=0;if(d=Ce(A|0,a|0,45)|0,z()|0,!(kt(d&127)|0))return d=0,d|0;d=Ce(A|0,a|0,52)|0,z()|0,d=d&15;e:do if(!d)c=0;else for(h=1;;){if(c=Ce(A|0,a|0,(15-h|0)*3|0)|0,z()|0,c=c&7,c|0)break e;if(h>>>0<d>>>0)h=h+1|0;else{c=0;break}}while(!1);return d=(c|0)==0&1,d|0}function s0(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var d=0,_=0,m=0,w=0;if(m=L,L=L+16|0,_=m,HA(_,A,a,c),a=_,A=u[a>>2]|0,a=u[a+4>>2]|0,(A|0)==0&(a|0)==0)return L=m,0;d=0,c=0;do w=h+(d<<3)|0,u[w>>2]=A,u[w+4>>2]=a,d=Dt(d|0,c|0,1,0)|0,c=z()|0,mu(_),w=_,A=u[w>>2]|0,a=u[w+4>>2]|0;while(!((A|0)==0&(a|0)==0));return L=m,0}function LA(A,a,c,h){return A=A|0,a=a|0,c=c|0,h=h|0,(h|0)<(c|0)?(c=a,h=A,lt(c|0),h|0):(c=xe(-1,-1,((h-c|0)*3|0)+3|0)|0,h=xe(~c|0,~(z()|0)|0,(15-h|0)*3|0)|0,c=~(z()|0)&a,h=~h&A,lt(c|0),h|0)}function So(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var d=0;return d=Ce(A|0,a|0,52)|0,z()|0,d=d&15,(c|0)<16&(d|0)<=(c|0)?((d|0)<(c|0)&&(d=xe(-1,-1,((c+-1-d|0)*3|0)+3|0)|0,d=xe(~d|0,~(z()|0)|0,(15-c|0)*3|0)|0,a=~(z()|0)&a,A=~d&A),d=xe(c|0,0,52)|0,c=a&-15728641|(z()|0),u[h>>2]=A|d,u[h+4>>2]=c,h=0,h|0):(h=4,h|0)}function o0(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var d=0,_=0,m=0,w=0,S=0,k=0,N=0,V=0,Z=0,J=0,$=0,ne=0,Se=0,Te=0,fe=0,_e=0,le=0,We=0,$e=0,Ie=0,Le=0;if((c|0)==0&(h|0)==0)return Ie=0,Ie|0;if(d=A,_=u[d>>2]|0,d=u[d+4>>2]|0,!0&(d&15728640|0)==0){if(!((h|0)>0|(h|0)==0&c>>>0>0)||(Ie=a,u[Ie>>2]=_,u[Ie+4>>2]=d,(c|0)==1&(h|0)==0))return Ie=0,Ie|0;d=1;do We=A+(d<<3)|0,$e=u[We+4>>2]|0,Ie=a+(d<<3)|0,u[Ie>>2]=u[We>>2],u[Ie+4>>2]=$e,d=d+1|0;while(0<(h|0)|(h|0)==0&d>>>0<c>>>0);return d=0,d|0}if(le=c<<3,$e=Tr(le)|0,!$e)return Ie=13,Ie|0;if(Hn($e|0,A|0,le|0)|0,We=Cr(c,8)|0,!We)return ht($e),Ie=13,Ie|0;e:do if(c|0){t:for(;;){d=$e,Te=u[d>>2]|0,d=u[d+4>>2]|0,fe=Ce(Te|0,d|0,52)|0,z()|0,fe=fe&15,_e=fe+-1|0,Se=(c|0)>0;r:do if((fe|0)!=0&Se){if(J=((c|0)<0)<<31>>31,$=xe(_e|0,0,52)|0,ne=z()|0,_e>>>0>15){if(!((Te|0)==0&(d|0)==0)){Ie=17;break t}for(_=0;;){if(_=_+1|0,(_|0)>=(c|0))break r;if(h=$e+(_<<3)|0,ne=u[h>>2]|0,h=u[h+4>>2]|0,!((ne|0)==0&(h|0)==0)){d=h,Ie=17;break t}}}for(_=0,A=Te,h=d;;){if(!((A|0)==0&(h|0)==0)){if(!(!0&(h&117440512|0)==0)){Ie=22;break t}if(w=Ce(A|0,h|0,52)|0,z()|0,w=w&15,(w|0)<(_e|0)){d=12,Ie=28;break t}if((w|0)!=(_e|0)&&(A=A|$,h=h&-15728641|ne,w>>>0>=fe>>>0)){m=_e;do Z=xe(7,0,(14-m|0)*3|0)|0,m=m+1|0,A=Z|A,h=z()|0|h;while(m>>>0<w>>>0)}if(m=Rn(A|0,h|0,c|0,J|0)|0,z()|0,k=We+(m<<3)|0,w=k,S=u[w>>2]|0,w=u[w+4>>2]|0,(S|0)==0&(w|0)==0)m=k;else for(Z=0;;){if((Z|0)>(c|0)){Ie=32;break t}if((S|0)==(A|0)&(w&-117440513|0)==(h|0)){N=Ce(S|0,w|0,56)|0,z()|0,N=N&7,V=N+1|0,Le=Ce(S|0,w|0,45)|0,z()|0;n:do if(!(kt(Le&127)|0))w=7;else{if(S=Ce(S|0,w|0,52)|0,z()|0,S=S&15,!S){w=6;break}for(w=1;;){if(Le=xe(7,0,(15-w|0)*3|0)|0,!((Le&A|0)==0&((z()|0)&h|0)==0)){w=7;break n}if(w>>>0<S>>>0)w=w+1|0;else{w=6;break}}}while(!1);if((N+2|0)>>>0>w>>>0){Ie=42;break t}Le=xe(V|0,0,56)|0,h=z()|0|h&-117440513,V=k,u[V>>2]=0,u[V+4>>2]=0,A=Le|A}else m=(m+1|0)%(c|0)|0;if(k=We+(m<<3)|0,w=k,S=u[w>>2]|0,w=u[w+4>>2]|0,(S|0)==0&(w|0)==0){m=k;break}else Z=Z+1|0}Le=m,u[Le>>2]=A,u[Le+4>>2]=h}if(_=_+1|0,(_|0)>=(c|0))break r;h=$e+(_<<3)|0,A=u[h>>2]|0,h=u[h+4>>2]|0}}while(!1);if((c+5|0)>>>0<11){Ie=85;break}if(ne=Cr((c|0)/6|0,8)|0,!ne){Ie=49;break}r:do if(Se){Z=0,V=0;do{if(w=We+(Z<<3)|0,h=w,_=u[h>>2]|0,h=u[h+4>>2]|0,!((_|0)==0&(h|0)==0)){S=Ce(_|0,h|0,56)|0,z()|0,S=S&7,A=S+1|0,k=h&-117440513,Le=Ce(_|0,h|0,45)|0,z()|0;n:do if(kt(Le&127)|0){if(N=Ce(_|0,h|0,52)|0,z()|0,N=N&15,N|0)for(m=1;;){if(Le=xe(7,0,(15-m|0)*3|0)|0,!((_&Le|0)==0&(k&(z()|0)|0)==0))break n;if(m>>>0<N>>>0)m=m+1|0;else break}h=xe(A|0,0,56)|0,_=h|_,h=z()|0|k,A=w,u[A>>2]=_,u[A+4>>2]=h,A=S+2|0}while(!1);(A|0)==7&&(Le=ne+(V<<3)|0,u[Le>>2]=_,u[Le+4>>2]=h&-117440513,V=V+1|0)}Z=Z+1|0}while((Z|0)!=(c|0));if(Se){if(Z=((c|0)<0)<<31>>31,J=xe(_e|0,0,52)|0,$=z()|0,_e>>>0>15){if(!((Te|0)==0&(d|0)==0)){d=4,Ie=84;break t}for(d=0;;){if(d=d+1|0,(d|0)>=(c|0)){_=0,d=V;break r}if(Le=$e+(d<<3)|0,!((u[Le>>2]|0)==0&(u[Le+4>>2]|0)==0)){d=4,Ie=84;break t}}}for(N=0,_=0,k=Te;;){do if(!((k|0)==0&(d|0)==0)){if(w=Ce(k|0,d|0,52)|0,z()|0,w=w&15,(w|0)<(_e|0)){d=12,Ie=84;break t}do if((w|0)==(_e|0))h=k,w=d;else{if(h=k|J,A=d&-15728641|$,w>>>0<fe>>>0){w=A;break}m=_e;do Le=xe(7,0,(14-m|0)*3|0)|0,m=m+1|0,h=Le|h,A=z()|0|A;while(m>>>0<w>>>0);w=A}while(!1);for(m=Rn(h|0,w|0,c|0,Z|0)|0,z()|0,A=0;;){if((A|0)>(c|0)){Ie=77;break t}if(Le=We+(m<<3)|0,S=u[Le+4>>2]|0,(S&-117440513|0)==(w|0)&&(u[Le>>2]|0)==(h|0)){Ie=79;break}if(m=(m+1|0)%(c|0)|0,Le=We+(m<<3)|0,(u[Le>>2]|0)==(h|0)&&(u[Le+4>>2]|0)==(w|0))break;A=A+1|0}if((Ie|0)==79&&(Ie=0,!0&(S&117440512|0)==100663296))break;Le=a+(_<<3)|0,u[Le>>2]=k,u[Le+4>>2]=d,_=_+1|0}while(!1);if(d=N+1|0,(d|0)>=(c|0)){d=V;break r}Le=$e+(d<<3)|0,N=d,k=u[Le>>2]|0,d=u[Le+4>>2]|0}}else _=0,d=V}else _=0,d=0;while(!1);if(yn(We|0,0,le|0)|0,Hn($e|0,ne|0,d<<3|0)|0,ht(ne),d)a=a+(_<<3)|0,c=d;else break e}if((Ie|0)==17)!0&(d&117440512|0)==0?(d=4,Ie=28):Ie=22;else if((Ie|0)==32)qe(23313,22674,362,22684);else{if((Ie|0)==42)return ht($e),ht(We),Le=10,Le|0;if((Ie|0)==49)return ht($e),ht(We),Le=13,Le|0;if((Ie|0)==77)qe(23313,22674,462,22684);else{if((Ie|0)==84)return ht(ne),ht($e),ht(We),Le=d,Le|0;if((Ie|0)==85){Hn(a|0,$e|0,c<<3|0)|0;break}}}if((Ie|0)==22)return ht($e),ht(We),Le=5,Le|0;if((Ie|0)==28)return ht($e),ht(We),Le=d,Le|0}while(!1);return ht($e),ht(We),Le=0,Le|0}function hu(A,a,c,h,d,_,m){A=A|0,a=a|0,c=c|0,h=h|0,d=d|0,_=_|0,m=m|0;var w=0,S=0,k=0,N=0,V=0,Z=0,J=0,$=0,ne=0;if(ne=L,L=L+16|0,$=ne,!((c|0)>0|(c|0)==0&a>>>0>0))return $=0,L=ne,$|0;if((m|0)>=16)return $=12,L=ne,$|0;Z=0,J=0,V=0,w=0;e:for(;;){if(k=A+(Z<<3)|0,S=u[k>>2]|0,k=u[k+4>>2]|0,N=Ce(S|0,k|0,52)|0,z()|0,(N&15|0)>(m|0)){w=12,S=11;break}if(HA($,S,k,m),N=$,k=u[N>>2]|0,N=u[N+4>>2]|0,(k|0)==0&(N|0)==0)S=V;else{S=V;do{if(!((w|0)<(_|0)|(w|0)==(_|0)&S>>>0<d>>>0)){S=10;break e}V=h+(S<<3)|0,u[V>>2]=k,u[V+4>>2]=N,S=Dt(S|0,w|0,1,0)|0,w=z()|0,mu($),V=$,k=u[V>>2]|0,N=u[V+4>>2]|0}while(!((k|0)==0&(N|0)==0))}if(Z=Dt(Z|0,J|0,1,0)|0,J=z()|0,(J|0)<(c|0)|(J|0)==(c|0)&Z>>>0<a>>>0)V=S;else{w=0,S=11;break}}return(S|0)==10?($=14,L=ne,$|0):(S|0)==11?(L=ne,w|0):0}function du(A,a,c,h,d){A=A|0,a=a|0,c=c|0,h=h|0,d=d|0;var _=0,m=0,w=0,S=0,k=0,N=0,V=0,Z=0;Z=L,L=L+16|0,V=Z;e:do if((c|0)>0|(c|0)==0&a>>>0>0){for(k=0,m=0,_=0,N=0;;){if(S=A+(k<<3)|0,w=u[S>>2]|0,S=u[S+4>>2]|0,!((w|0)==0&(S|0)==0)&&(S=(Ta(w,S,h,V)|0)==0,w=V,m=Dt(u[w>>2]|0,u[w+4>>2]|0,m|0,_|0)|0,_=z()|0,!S)){_=12;break}if(k=Dt(k|0,N|0,1,0)|0,N=z()|0,!((N|0)<(c|0)|(N|0)==(c|0)&k>>>0<a>>>0))break e}return L=Z,_|0}else m=0,_=0;while(!1);return u[d>>2]=m,u[d+4>>2]=_,d=0,L=Z,d|0}function gu(A,a){return A=A|0,a=a|0,a=Ce(A|0,a|0,52)|0,z()|0,a&1|0}function Xr(A,a){A=A|0,a=a|0;var c=0,h=0,d=0;if(d=Ce(A|0,a|0,52)|0,z()|0,d=d&15,!d)return d=0,d|0;for(h=1;;){if(c=Ce(A|0,a|0,(15-h|0)*3|0)|0,z()|0,c=c&7,c|0){h=5;break}if(h>>>0<d>>>0)h=h+1|0;else{c=0,h=5;break}}return(h|0)==5?c|0:0}function Ea(A,a){A=A|0,a=a|0;var c=0,h=0,d=0,_=0,m=0,w=0,S=0;if(S=Ce(A|0,a|0,52)|0,z()|0,S=S&15,!S)return w=a,S=A,lt(w|0),S|0;for(w=1,c=0;;){_=(15-w|0)*3|0,h=xe(7,0,_|0)|0,d=z()|0,m=Ce(A|0,a|0,_|0)|0,z()|0,_=xe(_n(m&7)|0,0,_|0)|0,m=z()|0,A=_|A&~h,a=m|a&~d;e:do if(!c)if((_&h|0)==0&(m&d|0)==0)c=0;else if(h=Ce(A|0,a|0,52)|0,z()|0,h=h&15,!h)c=1;else{c=1;t:for(;;){switch(m=Ce(A|0,a|0,(15-c|0)*3|0)|0,z()|0,m&7){case 1:break t;case 0:break;default:{c=1;break e}}if(c>>>0<h>>>0)c=c+1|0;else{c=1;break e}}for(c=1;;)if(m=(15-c|0)*3|0,d=Ce(A|0,a|0,m|0)|0,z()|0,_=xe(7,0,m|0)|0,a=a&~(z()|0),m=xe(_n(d&7)|0,0,m|0)|0,A=A&~_|m,a=a|(z()|0),c>>>0<h>>>0)c=c+1|0;else{c=1;break}}while(!1);if(w>>>0<S>>>0)w=w+1|0;else break}return lt(a|0),A|0}function mn(A,a){A=A|0,a=a|0;var c=0,h=0,d=0,_=0,m=0;if(h=Ce(A|0,a|0,52)|0,z()|0,h=h&15,!h)return c=a,h=A,lt(c|0),h|0;for(c=1;_=(15-c|0)*3|0,m=Ce(A|0,a|0,_|0)|0,z()|0,d=xe(7,0,_|0)|0,a=a&~(z()|0),_=xe(_n(m&7)|0,0,_|0)|0,A=_|A&~d,a=z()|0|a,c>>>0<h>>>0;)c=c+1|0;return lt(a|0),A|0}function a0(A,a){A=A|0,a=a|0;var c=0,h=0,d=0,_=0,m=0,w=0,S=0;if(S=Ce(A|0,a|0,52)|0,z()|0,S=S&15,!S)return w=a,S=A,lt(w|0),S|0;for(w=1,c=0;;){_=(15-w|0)*3|0,h=xe(7,0,_|0)|0,d=z()|0,m=Ce(A|0,a|0,_|0)|0,z()|0,_=xe(Un(m&7)|0,0,_|0)|0,m=z()|0,A=_|A&~h,a=m|a&~d;e:do if(!c)if((_&h|0)==0&(m&d|0)==0)c=0;else if(h=Ce(A|0,a|0,52)|0,z()|0,h=h&15,!h)c=1;else{c=1;t:for(;;){switch(m=Ce(A|0,a|0,(15-c|0)*3|0)|0,z()|0,m&7){case 1:break t;case 0:break;default:{c=1;break e}}if(c>>>0<h>>>0)c=c+1|0;else{c=1;break e}}for(c=1;;)if(d=(15-c|0)*3|0,_=xe(7,0,d|0)|0,m=a&~(z()|0),a=Ce(A|0,a|0,d|0)|0,z()|0,a=xe(Un(a&7)|0,0,d|0)|0,A=A&~_|a,a=m|(z()|0),c>>>0<h>>>0)c=c+1|0;else{c=1;break}}while(!1);if(w>>>0<S>>>0)w=w+1|0;else break}return lt(a|0),A|0}function UA(A,a){A=A|0,a=a|0;var c=0,h=0,d=0,_=0,m=0;if(h=Ce(A|0,a|0,52)|0,z()|0,h=h&15,!h)return c=a,h=A,lt(c|0),h|0;for(c=1;m=(15-c|0)*3|0,_=xe(7,0,m|0)|0,d=a&~(z()|0),a=Ce(A|0,a|0,m|0)|0,z()|0,a=xe(Un(a&7)|0,0,m|0)|0,A=a|A&~_,a=z()|0|d,c>>>0<h>>>0;)c=c+1|0;return lt(a|0),A|0}function A0(A,a){A=A|0,a=a|0;var c=0,h=0,d=0,_=0,m=0,w=0,S=0,k=0,N=0;if(S=L,L=L+64|0,w=S+40|0,h=S+24|0,d=S+12|0,_=S,xe(a|0,0,52)|0,c=z()|0|134225919,!a)return(u[A+4>>2]|0)>2||(u[A+8>>2]|0)>2||(u[A+12>>2]|0)>2?(m=0,w=0,lt(m|0),L=S,w|0):(xe(ni(A)|0,0,45)|0,m=z()|0|c,w=-1,lt(m|0),L=S,w|0);if(u[w>>2]=u[A>>2],u[w+4>>2]=u[A+4>>2],u[w+8>>2]=u[A+8>>2],u[w+12>>2]=u[A+12>>2],m=w+4|0,(a|0)>0)for(A=-1;u[h>>2]=u[m>>2],u[h+4>>2]=u[m+4>>2],u[h+8>>2]=u[m+8>>2],a&1?(PA(m),u[d>>2]=u[m>>2],u[d+4>>2]=u[m+4>>2],u[d+8>>2]=u[m+8>>2],mo(d)):(_o(m),u[d>>2]=u[m>>2],u[d+4>>2]=u[m+4>>2],u[d+8>>2]=u[m+8>>2],Ln(d)),go(h,d,_),wr(_),N=(15-a|0)*3|0,k=xe(7,0,N|0)|0,c=c&~(z()|0),N=xe(ys(_)|0,0,N|0)|0,A=N|A&~k,c=z()|0|c,(a|0)>1;)a=a+-1|0;else A=-1;e:do if((u[m>>2]|0)<=2&&(u[w+8>>2]|0)<=2&&(u[w+12>>2]|0)<=2){if(h=ni(w)|0,a=xe(h|0,0,45)|0,a=a|A,A=z()|0|c&-1040385,_=lo(w)|0,!(kt(h)|0)){if((_|0)<=0)break;for(d=0;;){if(h=Ce(a|0,A|0,52)|0,z()|0,h=h&15,h)for(c=1;N=(15-c|0)*3|0,w=Ce(a|0,A|0,N|0)|0,z()|0,k=xe(7,0,N|0)|0,A=A&~(z()|0),N=xe(_n(w&7)|0,0,N|0)|0,a=a&~k|N,A=A|(z()|0),c>>>0<h>>>0;)c=c+1|0;if(d=d+1|0,(d|0)==(_|0))break e}}d=Ce(a|0,A|0,52)|0,z()|0,d=d&15;t:do if(d){c=1;r:for(;;){switch(N=Ce(a|0,A|0,(15-c|0)*3|0)|0,z()|0,N&7){case 1:break r;case 0:break;default:break t}if(c>>>0<d>>>0)c=c+1|0;else break t}if(su(h,u[w>>2]|0)|0)for(c=1;w=(15-c|0)*3|0,k=xe(7,0,w|0)|0,N=A&~(z()|0),A=Ce(a|0,A|0,w|0)|0,z()|0,A=xe(Un(A&7)|0,0,w|0)|0,a=a&~k|A,A=N|(z()|0),c>>>0<d>>>0;)c=c+1|0;else for(c=1;N=(15-c|0)*3|0,w=Ce(a|0,A|0,N|0)|0,z()|0,k=xe(7,0,N|0)|0,A=A&~(z()|0),N=xe(_n(w&7)|0,0,N|0)|0,a=a&~k|N,A=A|(z()|0),c>>>0<d>>>0;)c=c+1|0}while(!1);if((_|0)>0){c=0;do a=Ea(a,A)|0,A=z()|0,c=c+1|0;while((c|0)!=(_|0))}}else a=0,A=0;while(!1);return k=A,N=a,lt(k|0),L=S,N|0}function fn(A){return A=A|0,(A|0)%2|0|0}function BA(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0;return d=L,L=L+16|0,h=d,a>>>0>15?(h=4,L=d,h|0):(u[A+4>>2]&2146435072|0)==2146435072||(u[A+8+4>>2]&2146435072|0)==2146435072?(h=3,L=d,h|0):(e0(A,a,h),a=A0(h,a)|0,h=z()|0,u[c>>2]=a,u[c+4>>2]=h,(a|0)==0&(h|0)==0&&qe(23313,22674,786,22697),h=0,L=d,h|0)}function Zi(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0,_=0,m=0;if(d=c+4|0,_=Ce(A|0,a|0,52)|0,z()|0,_=_&15,m=Ce(A|0,a|0,45)|0,z()|0,h=(_|0)==0,kt(m&127)|0){if(h)return m=1,m|0;h=1}else{if(h)return m=0,m|0;!(u[d>>2]|0)&&!(u[c+8>>2]|0)?h=(u[c+12>>2]|0)!=0&1:h=1}for(c=1;c&1?mo(d):Ln(d),m=Ce(A|0,a|0,(15-c|0)*3|0)|0,z()|0,yo(d,m&7),c>>>0<_>>>0;)c=c+1|0;return h|0}function Bn(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0,_=0,m=0,w=0,S=0,k=0,N=0;if(N=L,L=L+16|0,S=N,k=Ce(A|0,a|0,45)|0,z()|0,k=k&127,k>>>0>121)return u[c>>2]=0,u[c+4>>2]=0,u[c+8>>2]=0,u[c+12>>2]=0,k=5,L=N,k|0;e:do if(kt(k)|0&&(_=Ce(A|0,a|0,52)|0,z()|0,_=_&15,(_|0)!=0)){h=1;t:for(;;){switch(w=Ce(A|0,a|0,(15-h|0)*3|0)|0,z()|0,w&7){case 5:break t;case 0:break;default:{h=a;break e}}if(h>>>0<_>>>0)h=h+1|0;else{h=a;break e}}for(d=1,h=a;a=(15-d|0)*3|0,m=xe(7,0,a|0)|0,w=h&~(z()|0),h=Ce(A|0,h|0,a|0)|0,z()|0,h=xe(Un(h&7)|0,0,a|0)|0,A=A&~m|h,h=w|(z()|0),d>>>0<_>>>0;)d=d+1|0}else h=a;while(!1);if(w=7696+(k*28|0)|0,u[c>>2]=u[w>>2],u[c+4>>2]=u[w+4>>2],u[c+8>>2]=u[w+8>>2],u[c+12>>2]=u[w+12>>2],!(Zi(A,h,c)|0))return k=0,L=N,k|0;if(m=c+4|0,u[S>>2]=u[m>>2],u[S+4>>2]=u[m+4>>2],u[S+8>>2]=u[m+8>>2],_=Ce(A|0,h|0,52)|0,z()|0,w=_&15,_&1?(Ln(m),_=w+1|0):_=w,!(kt(k)|0))h=0;else{e:do if(!w)h=0;else for(a=1;;){if(d=Ce(A|0,h|0,(15-a|0)*3|0)|0,z()|0,d=d&7,d|0){h=d;break e}if(a>>>0<w>>>0)a=a+1|0;else{h=0;break}}while(!1);h=(h|0)==4&1}if(!(ws(c,_,h,0)|0))(_|0)!=(w|0)&&(u[m>>2]=u[S>>2],u[m+4>>2]=u[S+4>>2],u[m+8>>2]=u[S+8>>2]);else{if(kt(k)|0)do;while(ws(c,_,0,0)|0);(_|0)!=(w|0)&&_o(m)}return k=0,L=N,k|0}function bo(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0,_=0;return _=L,L=L+16|0,h=_,d=Bn(A,a,h)|0,d|0?(L=_,d|0):(d=Ce(A|0,a|0,52)|0,z()|0,r0(h,d&15,c),d=0,L=_,d|0)}function Si(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0,_=0,m=0,w=0;if(m=L,L=L+16|0,_=m,h=Bn(A,a,_)|0,h|0)return _=h,L=m,_|0;h=Ce(A|0,a|0,45)|0,z()|0,h=(kt(h&127)|0)==0,d=Ce(A|0,a|0,52)|0,z()|0,d=d&15;e:do if(!h){if(d|0)for(h=1;;){if(w=xe(7,0,(15-h|0)*3|0)|0,!((w&A|0)==0&((z()|0)&a|0)==0))break e;if(h>>>0<d>>>0)h=h+1|0;else break}return NA(_,d,0,5,c),w=0,L=m,w|0}while(!1);return OA(_,d,0,6,c),w=0,L=m,w|0}function l0(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0,_=0;if(d=Ce(A|0,a|0,45)|0,z()|0,!(kt(d&127)|0))return d=2,u[c>>2]=d,0;if(d=Ce(A|0,a|0,52)|0,z()|0,d=d&15,!d)return d=5,u[c>>2]=d,0;for(h=1;;){if(_=xe(7,0,(15-h|0)*3|0)|0,!((_&A|0)==0&((z()|0)&a|0)==0)){h=2,A=6;break}if(h>>>0<d>>>0)h=h+1|0;else{h=5,A=6;break}}return(A|0)==6&&(u[c>>2]=h),0}function VA(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0,_=0,m=0,w=0,S=0,k=0,N=0,V=0;V=L,L=L+128|0,k=V+112|0,_=V+96|0,N=V,d=Ce(A|0,a|0,52)|0,z()|0,w=d&15,u[k>>2]=w,m=Ce(A|0,a|0,45)|0,z()|0,m=m&127;e:do if(kt(m)|0){if(w|0)for(h=1;;){if(S=xe(7,0,(15-h|0)*3|0)|0,!((S&A|0)==0&((z()|0)&a|0)==0)){d=0;break e}if(h>>>0<w>>>0)h=h+1|0;else break}if(d&1)d=1;else return S=xe(w+1|0,0,52)|0,N=z()|0|a&-15728641,k=xe(7,0,(14-w|0)*3|0)|0,N=VA((S|A)&~k,N&~(z()|0),c)|0,L=V,N|0}else d=0;while(!1);if(h=Bn(A,a,_)|0,!h){d?(wa(_,k,N),S=5):(DA(_,k,N),S=6);e:do if(kt(m)|0)if(!w)A=5;else for(h=1;;){if(m=xe(7,0,(15-h|0)*3|0)|0,!((m&A|0)==0&((z()|0)&a|0)==0)){A=2;break e}if(h>>>0<w>>>0)h=h+1|0;else{A=5;break}}else A=2;while(!1);yn(c|0,-1,A<<2|0)|0;e:do if(d)for(_=0;;){if(m=N+(_<<4)|0,n0(m,u[k>>2]|0)|0,m=u[m>>2]|0,w=u[c>>2]|0,(w|0)==-1|(w|0)==(m|0))h=c;else{d=0;do{if(d=d+1|0,d>>>0>=A>>>0){h=1;break e}h=c+(d<<2)|0,w=u[h>>2]|0}while(!((w|0)==-1|(w|0)==(m|0)))}if(u[h>>2]=m,_=_+1|0,_>>>0>=S>>>0){h=0;break}}else for(_=0;;){if(m=N+(_<<4)|0,ws(m,u[k>>2]|0,0,1)|0,m=u[m>>2]|0,w=u[c>>2]|0,(w|0)==-1|(w|0)==(m|0))h=c;else{d=0;do{if(d=d+1|0,d>>>0>=A>>>0){h=1;break e}h=c+(d<<2)|0,w=u[h>>2]|0}while(!((w|0)==-1|(w|0)==(m|0)))}if(u[h>>2]=m,_=_+1|0,_>>>0>=S>>>0){h=0;break}}while(!1)}return N=h,L=V,N|0}function zA(){return 12}function Co(A,a){A=A|0,a=a|0;var c=0,h=0,d=0,_=0,m=0,w=0,S=0;if(A>>>0>15)return w=4,w|0;if(xe(A|0,0,52)|0,w=z()|0|134225919,!A){c=0,h=0;do kt(h)|0&&(xe(h|0,0,45)|0,m=w|(z()|0),A=a+(c<<3)|0,u[A>>2]=-1,u[A+4>>2]=m,c=c+1|0),h=h+1|0;while((h|0)!=122);return c=0,c|0}c=0,m=0;do{if(kt(m)|0){for(xe(m|0,0,45)|0,h=1,d=-1,_=w|(z()|0);S=xe(7,0,(15-h|0)*3|0)|0,d=d&~S,_=_&~(z()|0),(h|0)!=(A|0);)h=h+1|0;S=a+(c<<3)|0,u[S>>2]=d,u[S+4>>2]=_,c=c+1|0}m=m+1|0}while((m|0)!=122);return c=0,c|0}function pu(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var d=0,_=0,m=0,w=0,S=0,k=0,N=0,V=0,Z=0,J=0,$=0,ne=0,Se=0,Te=0,fe=0;if(fe=L,L=L+16|0,Se=fe,Te=Ce(A|0,a|0,52)|0,z()|0,Te=Te&15,c>>>0>15)return Te=4,L=fe,Te|0;if((Te|0)<(c|0))return Te=12,L=fe,Te|0;if((Te|0)!=(c|0))if(_=xe(c|0,0,52)|0,_=_|A,w=z()|0|a&-15728641,(Te|0)>(c|0)){S=c;do ne=xe(7,0,(14-S|0)*3|0)|0,S=S+1|0,_=ne|_,w=z()|0|w;while((S|0)<(Te|0));ne=_}else ne=_;else ne=A,w=a;$=Ce(ne|0,w|0,45)|0,z()|0;e:do if(kt($&127)|0){if(S=Ce(ne|0,w|0,52)|0,z()|0,S=S&15,S|0)for(_=1;;){if($=xe(7,0,(15-_|0)*3|0)|0,!(($&ne|0)==0&((z()|0)&w|0)==0)){k=33;break e}if(_>>>0<S>>>0)_=_+1|0;else break}if($=h,u[$>>2]=0,u[$+4>>2]=0,(Te|0)>(c|0)){for($=a&-15728641,J=Te;;){if(Z=J,J=J+-1|0,J>>>0>15|(Te|0)<(J|0)){k=19;break}if((Te|0)!=(J|0))if(_=xe(J|0,0,52)|0,_=_|A,S=z()|0|$,(Te|0)<(Z|0))V=_;else{k=J;do V=xe(7,0,(14-k|0)*3|0)|0,k=k+1|0,_=V|_,S=z()|0|S;while((k|0)<(Te|0));V=_}else V=A,S=a;if(N=Ce(V|0,S|0,45)|0,z()|0,!(kt(N&127)|0))_=0;else{N=Ce(V|0,S|0,52)|0,z()|0,N=N&15;t:do if(!N)_=0;else for(k=1;;){if(_=Ce(V|0,S|0,(15-k|0)*3|0)|0,z()|0,_=_&7,_|0)break t;if(k>>>0<N>>>0)k=k+1|0;else{_=0;break}}while(!1);_=(_|0)==0&1}if(S=Ce(A|0,a|0,(15-Z|0)*3|0)|0,z()|0,S=S&7,(S|0)==7){d=5,k=42;break}if(_=(_|0)!=0,(S|0)==1&_){d=5,k=42;break}if(V=S+(((S|0)!=0&_)<<31>>31)|0,V|0&&(k=Te-Z|0,k=zn(7,0,k,((k|0)<0)<<31>>31)|0,N=z()|0,_?(_=Er(k|0,N|0,5,0)|0,_=Dt(_|0,z()|0,-5,-1)|0,_=Cn(_|0,z()|0,6,0)|0,_=Dt(_|0,z()|0,1,0)|0,S=z()|0):(_=k,S=N),Z=V+-1|0,Z=Er(k|0,N|0,Z|0,((Z|0)<0)<<31>>31|0)|0,Z=Dt(_|0,S|0,Z|0,z()|0)|0,V=z()|0,N=h,N=Dt(Z|0,V|0,u[N>>2]|0,u[N+4>>2]|0)|0,V=z()|0,Z=h,u[Z>>2]=N,u[Z+4>>2]=V),(J|0)<=(c|0)){k=37;break}}if((k|0)==19)qe(23313,22674,1099,22710);else if((k|0)==37){m=h,d=u[m+4>>2]|0,m=u[m>>2]|0;break}else if((k|0)==42)return L=fe,d|0}else d=0,m=0}else k=33;while(!1);e:do if((k|0)==33)if($=h,u[$>>2]=0,u[$+4>>2]=0,(Te|0)>(c|0)){for(_=Te;;){if(d=Ce(A|0,a|0,(15-_|0)*3|0)|0,z()|0,d=d&7,(d|0)==7){d=5;break}if(m=Te-_|0,m=zn(7,0,m,((m|0)<0)<<31>>31)|0,d=Er(m|0,z()|0,d|0,0)|0,m=z()|0,$=h,m=Dt(u[$>>2]|0,u[$+4>>2]|0,d|0,m|0)|0,d=z()|0,$=h,u[$>>2]=m,u[$+4>>2]=d,_=_+-1|0,(_|0)<=(c|0))break e}return L=fe,d|0}else d=0,m=0;while(!1);return Ta(ne,w,Te,Se)|0&&qe(23313,22674,1063,22725),Te=Se,Se=u[Te+4>>2]|0,((d|0)>-1|(d|0)==-1&m>>>0>4294967295)&((Se|0)>(d|0)|((Se|0)==(d|0)?(u[Te>>2]|0)>>>0>m>>>0:0))?(Te=0,L=fe,Te|0):(qe(23313,22674,1139,22710),0)}function _u(A,a,c,h,d,_){A=A|0,a=a|0,c=c|0,h=h|0,d=d|0,_=_|0;var m=0,w=0,S=0,k=0,N=0,V=0,Z=0,J=0,$=0,ne=0;if(V=L,L=L+16|0,m=V,d>>>0>15)return _=4,L=V,_|0;if(w=Ce(c|0,h|0,52)|0,z()|0,w=w&15,(w|0)>(d|0))return _=12,L=V,_|0;if(Ta(c,h,d,m)|0&&qe(23313,22674,1063,22725),N=m,k=u[N+4>>2]|0,!(((a|0)>-1|(a|0)==-1&A>>>0>4294967295)&((k|0)>(a|0)|((k|0)==(a|0)?(u[N>>2]|0)>>>0>A>>>0:0))))return _=2,L=V,_|0;N=d-w|0,d=xe(d|0,0,52)|0,S=z()|0|h&-15728641,k=_,u[k>>2]=d|c,u[k+4>>2]=S,k=Ce(c|0,h|0,45)|0,z()|0;e:do if(kt(k&127)|0){if(w|0)for(m=1;;){if(k=xe(7,0,(15-m|0)*3|0)|0,!((k&c|0)==0&((z()|0)&h|0)==0))break e;if(m>>>0<w>>>0)m=m+1|0;else break}if((N|0)<1)return _=0,L=V,_|0;for(k=w^15,h=-1,S=1,m=1;;){w=N-S|0,w=zn(7,0,w,((w|0)<0)<<31>>31)|0,c=z()|0;do if(m)if(m=Er(w|0,c|0,5,0)|0,m=Dt(m|0,z()|0,-5,-1)|0,m=Cn(m|0,z()|0,6,0)|0,d=z()|0,(a|0)>(d|0)|(a|0)==(d|0)&A>>>0>m>>>0){a=Dt(A|0,a|0,-1,-1)|0,a=Lr(a|0,z()|0,m|0,d|0)|0,m=z()|0,Z=_,$=u[Z>>2]|0,Z=u[Z+4>>2]|0,ne=(k+h|0)*3|0,J=xe(7,0,ne|0)|0,Z=Z&~(z()|0),h=Cn(a|0,m|0,w|0,c|0)|0,A=z()|0,d=Dt(h|0,A|0,2,0)|0,ne=xe(d|0,z()|0,ne|0)|0,Z=z()|0|Z,d=_,u[d>>2]=ne|$&~J,u[d+4>>2]=Z,A=Er(h|0,A|0,w|0,c|0)|0,A=Lr(a|0,m|0,A|0,z()|0)|0,m=0,a=z()|0;break}else{ne=_,J=u[ne>>2]|0,ne=u[ne+4>>2]|0,$=xe(7,0,(k+h|0)*3|0)|0,ne=ne&~(z()|0),m=_,u[m>>2]=J&~$,u[m+4>>2]=ne,m=1;break}else J=_,d=u[J>>2]|0,J=u[J+4>>2]|0,h=(k+h|0)*3|0,Z=xe(7,0,h|0)|0,J=J&~(z()|0),ne=Cn(A|0,a|0,w|0,c|0)|0,m=z()|0,h=xe(ne|0,m|0,h|0)|0,J=z()|0|J,$=_,u[$>>2]=h|d&~Z,u[$+4>>2]=J,m=Er(ne|0,m|0,w|0,c|0)|0,A=Lr(A|0,a|0,m|0,z()|0)|0,m=0,a=z()|0;while(!1);if((N|0)>(S|0))h=~S,S=S+1|0;else{a=0;break}}return L=V,a|0}while(!1);if((N|0)<1)return ne=0,L=V,ne|0;for(d=w^15,m=1;;)if($=N-m|0,$=zn(7,0,$,(($|0)<0)<<31>>31)|0,ne=z()|0,S=_,c=u[S>>2]|0,S=u[S+4>>2]|0,w=(d-m|0)*3|0,h=xe(7,0,w|0)|0,S=S&~(z()|0),Z=Cn(A|0,a|0,$|0,ne|0)|0,J=z()|0,w=xe(Z|0,J|0,w|0)|0,S=z()|0|S,k=_,u[k>>2]=w|c&~h,u[k+4>>2]=S,ne=Er(Z|0,J|0,$|0,ne|0)|0,A=Lr(A|0,a|0,ne|0,z()|0)|0,a=z()|0,(N|0)<=(m|0)){a=0;break}else m=m+1|0;return L=V,a|0}function HA(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var d=0,_=0;d=Ce(a|0,c|0,52)|0,z()|0,d=d&15,(a|0)==0&(c|0)==0|((h|0)>15|(d|0)>(h|0))?(h=-1,d=-1,a=0,c=0):(_=LA(a,c,d+1|0,h)|0,c=(z()|0)&-15728641,a=xe(h|0,0,52)|0,a=_|a,c=c|(z()|0),_=(Gt(a,c)|0)==0,h=_?-1:h),_=A,u[_>>2]=a,u[_+4>>2]=c,u[A+8>>2]=d,u[A+12>>2]=h}function mu(A){A=A|0;var a=0,c=0,h=0,d=0,_=0,m=0,w=0,S=0,k=0;if(c=A,a=u[c>>2]|0,c=u[c+4>>2]|0,!((a|0)==0&(c|0)==0)&&(h=Ce(a|0,c|0,52)|0,z()|0,h=h&15,w=xe(1,0,(h^15)*3|0)|0,a=Dt(w|0,z()|0,a|0,c|0)|0,c=z()|0,w=A,u[w>>2]=a,u[w+4>>2]=c,w=A+8|0,m=u[w>>2]|0,!((h|0)<(m|0)))){for(S=A+12|0,_=h;;){if((_|0)==(m|0)){h=5;break}if(k=(_|0)==(u[S>>2]|0),d=(15-_|0)*3|0,h=Ce(a|0,c|0,d|0)|0,z()|0,h=h&7,k&((h|0)==1&!0)){h=7;break}if(!((h|0)==7&!0)){h=10;break}if(k=xe(1,0,d|0)|0,a=Dt(a|0,c|0,k|0,z()|0)|0,c=z()|0,k=A,u[k>>2]=a,u[k+4>>2]=c,(_|0)>(m|0))_=_+-1|0;else{h=10;break}}if((h|0)==5){k=A,u[k>>2]=0,u[k+4>>2]=0,u[w>>2]=-1,u[S>>2]=-1;return}else if((h|0)==7){m=xe(1,0,d|0)|0,m=Dt(a|0,c|0,m|0,z()|0)|0,w=z()|0,k=A,u[k>>2]=m,u[k+4>>2]=w,u[S>>2]=_+-1;return}else if((h|0)==10)return}}function Ro(A){A=+A;var a=0;return a=A<0?A+6.283185307179586:A,+(A>=6.283185307179586?a+-6.283185307179586:a)}function Ts(A,a){return A=A|0,a=a|0,+yt(+(+B[A>>3]-+B[a>>3]))<17453292519943298e-27?(a=+yt(+(+B[A+8>>3]-+B[a+8>>3]))<17453292519943298e-27,a|0):(a=0,a|0)}function u0(A,a){A=A|0,a=a|0;var c=0,h=0,d=0,_=0;return d=+B[a>>3],h=+B[A>>3],_=+vt(+((d-h)*.5)),c=+vt(+((+B[a+8>>3]-+B[A+8>>3])*.5)),c=_*_+c*(+Ut(+d)*+Ut(+h)*c),+(+ur(+ +Nt(+c),+ +Nt(+(1-c)))*2)}function Po(A,a){A=A|0,a=a|0;var c=0,h=0,d=0,_=0;return d=+B[a>>3],h=+B[A>>3],_=+vt(+((d-h)*.5)),c=+vt(+((+B[a+8>>3]-+B[A+8>>3])*.5)),c=_*_+c*(+Ut(+d)*+Ut(+h)*c),+(+ur(+ +Nt(+c),+ +Nt(+(1-c)))*2*6371.007180918475)}function bn(A,a){A=A|0,a=a|0;var c=0,h=0,d=0,_=0;return d=+B[a>>3],h=+B[A>>3],_=+vt(+((d-h)*.5)),c=+vt(+((+B[a+8>>3]-+B[A+8>>3])*.5)),c=_*_+c*(+Ut(+d)*+Ut(+h)*c),+(+ur(+ +Nt(+c),+ +Nt(+(1-c)))*2*6371.007180918475*1e3)}function ko(A,a){A=A|0,a=a|0;var c=0,h=0,d=0,_=0,m=0;return _=+B[a>>3],h=+Ut(+_),d=+B[a+8>>3]-+B[A+8>>3],m=h*+vt(+d),c=+B[A>>3],+ +ur(+m,+(+vt(+_)*+Ut(+c)-+Ut(+d)*(h*+vt(+c))))}function yu(A,a,c,h){A=A|0,a=+a,c=+c,h=h|0;var d=0,_=0,m=0,w=0;if(c<1e-16){u[h>>2]=u[A>>2],u[h+4>>2]=u[A+4>>2],u[h+8>>2]=u[A+8>>2],u[h+12>>2]=u[A+12>>2];return}_=a<0?a+6.283185307179586:a,_=a>=6.283185307179586?_+-6.283185307179586:_;do if(_<1e-16)a=+B[A>>3]+c,B[h>>3]=a,d=h;else{if(d=+yt(+(_+-3.141592653589793))<1e-16,a=+B[A>>3],d){a=a-c,B[h>>3]=a,d=h;break}if(m=+Ut(+c),c=+vt(+c),a=m*+vt(+a)+ +Ut(+_)*(c*+Ut(+a)),a=a>1?1:a,a=+qt(+(a<-1?-1:a)),B[h>>3]=a,+yt(+(a+-1.5707963267948966))<1e-16){B[h>>3]=1.5707963267948966,B[h+8>>3]=0;return}if(+yt(+(a+1.5707963267948966))<1e-16){B[h>>3]=-1.5707963267948966,B[h+8>>3]=0;return}if(w=+Ut(+a),_=c*+vt(+_)/w,c=+B[A>>3],a=(m-+vt(+a)*+vt(+c))/+Ut(+c)/w,m=_>1?1:_,a=a>1?1:a,a=+B[A+8>>3]+ +ur(+(m<-1?-1:m),+(a<-1?-1:a)),a>3.141592653589793)do a=a+-6.283185307179586;while(a>3.141592653589793);if(a<-3.141592653589793)do a=a+6.283185307179586;while(a<-3.141592653589793);B[h+8>>3]=a;return}while(!1);if(+yt(+(a+-1.5707963267948966))<1e-16){B[d>>3]=1.5707963267948966,B[h+8>>3]=0;return}if(+yt(+(a+1.5707963267948966))<1e-16){B[d>>3]=-1.5707963267948966,B[h+8>>3]=0;return}if(a=+B[A+8>>3],a>3.141592653589793)do a=a+-6.283185307179586;while(a>3.141592653589793);if(a<-3.141592653589793)do a=a+6.283185307179586;while(a<-3.141592653589793);B[h+8>>3]=a}function vu(A,a){return A=A|0,a=a|0,A>>>0>15?(a=4,a|0):(B[a>>3]=+B[20528+(A<<3)>>3],a=0,a|0)}function wu(A,a){return A=A|0,a=a|0,A>>>0>15?(a=4,a|0):(B[a>>3]=+B[20656+(A<<3)>>3],a=0,a|0)}function Tu(A,a){return A=A|0,a=a|0,A>>>0>15?(a=4,a|0):(B[a>>3]=+B[20784+(A<<3)>>3],a=0,a|0)}function jA(A,a){return A=A|0,a=a|0,A>>>0>15?(a=4,a|0):(B[a>>3]=+B[20912+(A<<3)>>3],a=0,a|0)}function WA(A,a){A=A|0,a=a|0;var c=0;return A>>>0>15?(a=4,a|0):(c=zn(7,0,A,((A|0)<0)<<31>>31)|0,c=Er(c|0,z()|0,120,0)|0,A=z()|0,u[a>>2]=c|2,u[a+4>>2]=A,a=0,a|0)}function Eu(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0,_=0,m=0,w=0,S=0,k=0,N=0,V=0,Z=0;return Z=+B[a>>3],N=+B[A>>3],S=+vt(+((Z-N)*.5)),_=+B[a+8>>3],k=+B[A+8>>3],m=+vt(+((_-k)*.5)),w=+Ut(+N),V=+Ut(+Z),m=S*S+m*(V*w*m),m=+ur(+ +Nt(+m),+ +Nt(+(1-m)))*2,S=+B[c>>3],Z=+vt(+((S-Z)*.5)),h=+B[c+8>>3],_=+vt(+((h-_)*.5)),d=+Ut(+S),_=Z*Z+_*(V*d*_),_=+ur(+ +Nt(+_),+ +Nt(+(1-_)))*2,S=+vt(+((N-S)*.5)),h=+vt(+((k-h)*.5)),h=S*S+h*(w*d*h),h=+ur(+ +Nt(+h),+ +Nt(+(1-h)))*2,d=(m+_+h)*.5,+(+Dr(+ +Nt(+(+tn(+(d*.5))*+tn(+((d-m)*.5))*+tn(+((d-_)*.5))*+tn(+((d-h)*.5)))))*4)}function bi(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0,_=0,m=0,w=0;if(w=L,L=L+192|0,_=w+168|0,m=w,d=bo(A,a,_)|0,d|0)return c=d,L=w,c|0;if(Si(A,a,m)|0&&qe(23313,22742,386,22751),a=u[m>>2]|0,(a|0)>0){if(h=+Eu(m+8|0,m+8+(((a|0)!=1&1)<<4)|0,_)+0,(a|0)!=1){A=1;do d=A,A=A+1|0,h=h+ +Eu(m+8+(d<<4)|0,m+8+(((A|0)%(a|0)|0)<<4)|0,_);while((A|0)<(a|0))}}else h=0;return B[c>>3]=h,c=0,L=w,c|0}function XA(A,a,c){return A=A|0,a=a|0,c=c|0,A=bi(A,a,c)|0,A|0||(B[c>>3]=+B[c>>3]*6371.007180918475*6371.007180918475),A|0}function xo(A,a,c){return A=A|0,a=a|0,c=c|0,A=bi(A,a,c)|0,A|0||(B[c>>3]=+B[c>>3]*6371.007180918475*6371.007180918475*1e3*1e3),A|0}function $A(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0,_=0,m=0,w=0,S=0,k=0,N=0;if(w=L,L=L+176|0,m=w,A=va(A,a,m)|0,A|0)return m=A,L=w,m|0;if(B[c>>3]=0,A=u[m>>2]|0,(A|0)<=1)return m=0,L=w,m|0;a=A+-1|0,A=0,h=+B[m+8>>3],d=+B[m+16>>3],_=0;do A=A+1|0,k=h,h=+B[m+8+(A<<4)>>3],N=+vt(+((h-k)*.5)),S=d,d=+B[m+8+(A<<4)+8>>3],S=+vt(+((d-S)*.5)),S=N*N+S*(+Ut(+h)*+Ut(+k)*S),_=_+ +ur(+ +Nt(+S),+ +Nt(+(1-S)))*2;while((A|0)<(a|0));return B[c>>3]=_,m=0,L=w,m|0}function Su(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0,_=0,m=0,w=0,S=0,k=0,N=0;if(w=L,L=L+176|0,m=w,A=va(A,a,m)|0,A|0)return m=A,_=+B[c>>3],_=_*6371.007180918475,B[c>>3]=_,L=w,m|0;if(B[c>>3]=0,A=u[m>>2]|0,(A|0)<=1)return m=0,_=0,_=_*6371.007180918475,B[c>>3]=_,L=w,m|0;a=A+-1|0,A=0,h=+B[m+8>>3],d=+B[m+16>>3],_=0;do A=A+1|0,k=h,h=+B[m+8+(A<<4)>>3],N=+vt(+((h-k)*.5)),S=d,d=+B[m+8+(A<<4)+8>>3],S=+vt(+((d-S)*.5)),S=N*N+S*(+Ut(+k)*+Ut(+h)*S),_=_+ +ur(+ +Nt(+S),+ +Nt(+(1-S)))*2;while((A|0)!=(a|0));return B[c>>3]=_,m=0,N=_,N=N*6371.007180918475,B[c>>3]=N,L=w,m|0}function Sa(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0,_=0,m=0,w=0,S=0,k=0,N=0;if(w=L,L=L+176|0,m=w,A=va(A,a,m)|0,A|0)return m=A,_=+B[c>>3],_=_*6371.007180918475,_=_*1e3,B[c>>3]=_,L=w,m|0;if(B[c>>3]=0,A=u[m>>2]|0,(A|0)<=1)return m=0,_=0,_=_*6371.007180918475,_=_*1e3,B[c>>3]=_,L=w,m|0;a=A+-1|0,A=0,h=+B[m+8>>3],d=+B[m+16>>3],_=0;do A=A+1|0,k=h,h=+B[m+8+(A<<4)>>3],N=+vt(+((h-k)*.5)),S=d,d=+B[m+8+(A<<4)+8>>3],S=+vt(+((d-S)*.5)),S=N*N+S*(+Ut(+k)*+Ut(+h)*S),_=_+ +ur(+ +Nt(+S),+ +Nt(+(1-S)))*2;while((A|0)!=(a|0));return B[c>>3]=_,m=0,N=_,N=N*6371.007180918475,N=N*1e3,B[c>>3]=N,L=w,m|0}function Es(A){A=A|0;var a=0,c=0,h=0;return a=Cr(1,12)|0,a||qe(22832,22787,49,22845),c=A+4|0,h=u[c>>2]|0,h|0?(h=h+8|0,u[h>>2]=a,u[c>>2]=a,a|0):(u[A>>2]|0&&qe(22862,22787,61,22885),h=A,u[h>>2]=a,u[c>>2]=a,a|0)}function QA(A,a){A=A|0,a=a|0;var c=0,h=0;return h=Tr(24)|0,h||qe(22899,22787,78,22913),u[h>>2]=u[a>>2],u[h+4>>2]=u[a+4>>2],u[h+8>>2]=u[a+8>>2],u[h+12>>2]=u[a+12>>2],u[h+16>>2]=0,a=A+4|0,c=u[a>>2]|0,c|0?(u[c+16>>2]=h,u[a>>2]=h,h|0):(u[A>>2]|0&&qe(22928,22787,82,22913),u[A>>2]=h,u[a>>2]=h,h|0)}function YA(A){A=A|0;var a=0,c=0,h=0,d=0;if(A)for(h=1;;){if(a=u[A>>2]|0,a|0)do{if(c=u[a>>2]|0,c|0)do d=c,c=u[c+16>>2]|0,ht(d);while(c|0);d=a,a=u[a+8>>2]|0,ht(d)}while(a|0);if(a=A,A=u[A+8>>2]|0,h||ht(a),A)h=0;else break}}function ba(A){A=A|0;var a=0,c=0,h=0,d=0,_=0,m=0,w=0,S=0,k=0,N=0,V=0,Z=0,J=0,$=0,ne=0,Se=0,Te=0,fe=0,_e=0,le=0,We=0,$e=0,Ie=0,Le=0,ut=0,Et=0,zt=0,xt=0,wt=0,St=0,Xt=0,dt=0;if(d=A+8|0,u[d>>2]|0)return dt=1,dt|0;if(h=u[A>>2]|0,!h)return dt=0,dt|0;a=h,c=0;do c=c+1|0,a=u[a+8>>2]|0;while(a|0);if(c>>>0<2)return dt=0,dt|0;St=Tr(c<<2)|0,St||qe(22948,22787,317,22967),wt=Tr(c<<5)|0,wt||qe(22989,22787,321,22967),u[A>>2]=0,$e=A+4|0,u[$e>>2]=0,u[d>>2]=0,c=0,xt=0,We=0,V=0;e:for(;;){if(N=u[h>>2]|0,N){_=0,m=N;do{if(S=+B[m+8>>3],a=m,m=u[m+16>>2]|0,k=(m|0)==0,d=k?N:m,w=+B[d+8>>3],+yt(+(S-w))>3.141592653589793){dt=14;break}_=_+(w-S)*(+B[a>>3]+ +B[d>>3])}while(!k);if((dt|0)==14){dt=0,_=0,a=N;do le=+B[a+8>>3],zt=a+16|0,Et=u[zt>>2]|0,Et=Et|0?Et:N,_e=+B[Et+8>>3],_=_+(+B[a>>3]+ +B[Et>>3])*((_e<0?_e+6.283185307179586:_e)-(le<0?le+6.283185307179586:le)),a=u[(a|0?zt:h)>>2]|0;while(a|0)}_>0?(u[St+(xt<<2)>>2]=h,xt=xt+1|0,d=We,a=V):dt=19}else dt=19;if((dt|0)==19){dt=0;do if(c){if(a=c+8|0,u[a>>2]|0){dt=21;break e}if(c=Cr(1,12)|0,!c){dt=23;break e}u[a>>2]=c,d=c+4|0,m=c,a=V}else if(V){d=$e,m=V+8|0,a=h,c=A;break}else if(u[A>>2]|0){dt=27;break e}else{d=$e,m=A,a=h,c=A;break}while(!1);if(u[m>>2]=h,u[d>>2]=h,m=wt+(We<<5)|0,k=u[h>>2]|0,k){for(N=wt+(We<<5)+8|0,B[N>>3]=17976931348623157e292,V=wt+(We<<5)+24|0,B[V>>3]=17976931348623157e292,B[m>>3]=-17976931348623157e292,Z=wt+(We<<5)+16|0,B[Z>>3]=-17976931348623157e292,Te=17976931348623157e292,fe=-17976931348623157e292,d=0,J=k,S=17976931348623157e292,ne=17976931348623157e292,Se=-17976931348623157e292,w=-17976931348623157e292;_=+B[J>>3],le=+B[J+8>>3],J=u[J+16>>2]|0,$=(J|0)==0,_e=+B[($?k:J)+8>>3],_<S&&(B[N>>3]=_,S=_),le<ne&&(B[V>>3]=le,ne=le),_>Se?B[m>>3]=_:_=Se,le>w&&(B[Z>>3]=le,w=le),Te=le>0&le<Te?le:Te,fe=le<0&le>fe?le:fe,d=d|+yt(+(le-_e))>3.141592653589793,!$;)Se=_;d&&(B[Z>>3]=fe,B[V>>3]=Te)}else u[m>>2]=0,u[m+4>>2]=0,u[m+8>>2]=0,u[m+12>>2]=0,u[m+16>>2]=0,u[m+20>>2]=0,u[m+24>>2]=0,u[m+28>>2]=0;d=We+1|0}if(zt=h+8|0,h=u[zt>>2]|0,u[zt>>2]=0,h)We=d,V=a;else{dt=45;break}}if((dt|0)==21)qe(22765,22787,35,22799);else if((dt|0)==23)qe(22819,22787,37,22799);else if((dt|0)==27)qe(22862,22787,61,22885);else if((dt|0)==45){e:do if((xt|0)>0){for(zt=(d|0)==0,ut=d<<2,Et=(A|0)==0,Le=0,a=0;;){if(Ie=u[St+(Le<<2)>>2]|0,zt)dt=73;else{if(We=Tr(ut)|0,!We){dt=50;break}if($e=Tr(ut)|0,!$e){dt=52;break}t:do if(Et)c=0;else{for(d=0,c=0,m=A;h=wt+(d<<5)|0,KA(u[m>>2]|0,h,u[Ie>>2]|0)|0?(u[We+(c<<2)>>2]=m,u[$e+(c<<2)>>2]=h,$=c+1|0):$=c,m=u[m+8>>2]|0,m;)d=d+1|0,c=$;if(($|0)>0)if(h=u[We>>2]|0,($|0)==1)c=h;else for(Z=0,J=-1,c=h,V=h;;){for(k=u[V>>2]|0,h=0,m=0;d=u[u[We+(m<<2)>>2]>>2]|0,(d|0)==(k|0)?N=h:N=h+((KA(d,u[$e+(m<<2)>>2]|0,u[k>>2]|0)|0)&1)|0,m=m+1|0,(m|0)!=($|0);)h=N;if(d=(N|0)>(J|0),c=d?V:c,h=Z+1|0,(h|0)==($|0))break t;Z=h,J=d?N:J,V=u[We+(h<<2)>>2]|0}else c=0}while(!1);if(ht(We),ht($e),c){if(d=c+4|0,h=u[d>>2]|0,h)c=h+8|0;else if(u[c>>2]|0){dt=70;break}u[c>>2]=Ie,u[d>>2]=Ie}else dt=73}if((dt|0)==73){if(dt=0,a=u[Ie>>2]|0,a|0)do $e=a,a=u[a+16>>2]|0,ht($e);while(a|0);ht(Ie),a=1}if(Le=Le+1|0,(Le|0)>=(xt|0)){Xt=a;break e}}(dt|0)==50?qe(23004,22787,249,23023):(dt|0)==52?qe(23042,22787,252,23023):(dt|0)==70&&qe(22862,22787,61,22885)}else Xt=0;while(!1);return ht(St),ht(wt),dt=Xt,dt|0}return 0}function KA(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0,_=0,m=0,w=0,S=0,k=0,N=0;if(!(RA(a,c)|0)||(a=co(a)|0,h=+B[c>>3],d=+B[c+8>>3],d=a&d<0?d+6.283185307179586:d,A=u[A>>2]|0,!A))return A=0,A|0;if(a){a=0,k=d,c=A;e:for(;;){for(;m=+B[c>>3],d=+B[c+8>>3],c=c+16|0,N=u[c>>2]|0,N=N|0?N:A,_=+B[N>>3],w=+B[N+8>>3],m>_?(S=m,m=w):(S=_,_=m,m=d,d=w),h=h==_|h==S?h+2220446049250313e-31:h,!!(h<_|h>S);)if(c=u[c>>2]|0,!c){c=22;break e}if(w=m<0?m+6.283185307179586:m,m=d<0?d+6.283185307179586:d,k=w==k|m==k?k+-2220446049250313e-31:k,S=w+(m-w)*((h-_)/(S-_)),(S<0?S+6.283185307179586:S)>k&&(a=a^1),c=u[c>>2]|0,!c){c=22;break}}if((c|0)==22)return a|0}else{a=0,k=d,c=A;e:for(;;){for(;m=+B[c>>3],d=+B[c+8>>3],c=c+16|0,N=u[c>>2]|0,N=N|0?N:A,_=+B[N>>3],w=+B[N+8>>3],m>_?(S=m,m=w):(S=_,_=m,m=d,d=w),h=h==_|h==S?h+2220446049250313e-31:h,!!(h<_|h>S);)if(c=u[c>>2]|0,!c){c=22;break e}if(k=m==k|d==k?k+-2220446049250313e-31:k,m+(d-m)*((h-_)/(S-_))>k&&(a=a^1),c=u[c>>2]|0,!c){c=22;break}}if((c|0)==22)return a|0}return 0}function Vn(A,a,c,h,d){A=A|0,a=a|0,c=c|0,h=h|0,d=d|0;var _=0,m=0,w=0,S=0,k=0,N=0,V=0,Z=0,J=0,$=0,ne=0,Se=0,Te=0,fe=0;if(fe=L,L=L+32|0,Te=fe+16|0,Se=fe,_=Ce(A|0,a|0,52)|0,z()|0,_=_&15,J=Ce(c|0,h|0,52)|0,z()|0,(_|0)!=(J&15|0))return Te=12,L=fe,Te|0;if(k=Ce(A|0,a|0,45)|0,z()|0,k=k&127,N=Ce(c|0,h|0,45)|0,z()|0,N=N&127,k>>>0>121|N>>>0>121)return Te=5,L=fe,Te|0;if(J=(k|0)!=(N|0),J){if(w=Yi(k,N)|0,(w|0)==7)return Te=1,L=fe,Te|0;S=Yi(N,k)|0,(S|0)==7?qe(23066,23090,161,23100):($=w,m=S)}else $=0,m=0;V=kt(k)|0,Z=kt(N)|0,u[Te>>2]=0,u[Te+4>>2]=0,u[Te+8>>2]=0,u[Te+12>>2]=0;do if($){if(N=u[4272+(k*28|0)+($<<2)>>2]|0,w=(N|0)>0,Z)if(w){k=0,S=c,w=h;do S=a0(S,w)|0,w=z()|0,m=Un(m)|0,(m|0)==1&&(m=Un(1)|0),k=k+1|0;while((k|0)!=(N|0));N=m,k=S,S=w}else N=m,k=c,S=h;else if(w){k=0,S=c,w=h;do S=UA(S,w)|0,w=z()|0,m=Un(m)|0,k=k+1|0;while((k|0)!=(N|0));N=m,k=S,S=w}else N=m,k=c,S=h;if(Zi(k,S,Te)|0,J||qe(23115,23090,191,23100),w=(V|0)!=0,m=(Z|0)!=0,w&m&&qe(23142,23090,192,23100),w){if(m=Xr(A,a)|0,(m|0)==7){_=5;break}if(ft[21872+(m*7|0)+$>>0]|0){_=1;break}S=u[21040+(m*28|0)+($<<2)>>2]|0,k=S}else if(m){if(m=Xr(k,S)|0,(m|0)==7){_=5;break}if(ft[21872+(m*7|0)+N>>0]|0){_=1;break}k=0,S=u[21040+(N*28|0)+(m<<2)>>2]|0}else k=0,S=0;if((k|S|0)<0)_=5;else{if((S|0)>0){w=Te+4|0,m=0;do Fr(w),m=m+1|0;while((m|0)!=(S|0))}if(u[Se>>2]=0,u[Se+4>>2]=0,u[Se+8>>2]=0,yo(Se,$),_|0)for(;fn(_)|0?mo(Se):Ln(Se),(_|0)>1;)_=_+-1|0;if((k|0)>0){_=0;do Fr(Se),_=_+1|0;while((_|0)!=(k|0))}ne=Te+4|0,Wr(ne,Se,ne),wr(ne),ne=51}}else if(Zi(c,h,Te)|0,(V|0)!=0&(Z|0)!=0)if((N|0)!=(k|0)&&qe(23173,23090,261,23100),m=Xr(A,a)|0,_=Xr(c,h)|0,(m|0)==7|(_|0)==7)_=5;else if(ft[21872+(m*7|0)+_>>0]|0)_=1;else if(m=u[21040+(m*28|0)+(_<<2)>>2]|0,(m|0)>0){w=Te+4|0,_=0;do Fr(w),_=_+1|0;while((_|0)!=(m|0));ne=51}else ne=51;else ne=51;while(!1);return(ne|0)==51&&(_=Te+4|0,u[d>>2]=u[_>>2],u[d+4>>2]=u[_+4>>2],u[d+8>>2]=u[_+8>>2],_=0),Te=_,L=fe,Te|0}function ZA(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var d=0,_=0,m=0,w=0,S=0,k=0,N=0,V=0,Z=0,J=0,$=0,ne=0,Se=0,Te=0,fe=0,_e=0;if(ne=L,L=L+48|0,k=ne+36|0,m=ne+24|0,w=ne+12|0,S=ne,d=Ce(A|0,a|0,52)|0,z()|0,d=d&15,Z=Ce(A|0,a|0,45)|0,z()|0,Z=Z&127,Z>>>0>121)return h=5,L=ne,h|0;if(N=kt(Z)|0,xe(d|0,0,52)|0,Se=z()|0|134225919,_=h,u[_>>2]=-1,u[_+4>>2]=Se,!d)return d=ys(c)|0,(d|0)==7||(d=ya(Z,d)|0,(d|0)==127)?(Se=1,L=ne,Se|0):(J=xe(d|0,0,45)|0,$=z()|0,Z=h,$=u[Z+4>>2]&-1040385|$,Se=h,u[Se>>2]=u[Z>>2]|J,u[Se+4>>2]=$,Se=0,L=ne,Se|0);for(u[k>>2]=u[c>>2],u[k+4>>2]=u[c+4>>2],u[k+8>>2]=u[c+8>>2],c=d;;){if(_=c,c=c+-1|0,u[m>>2]=u[k>>2],u[m+4>>2]=u[k+4>>2],u[m+8>>2]=u[k+8>>2],fn(_)|0){if(d=Au(k)|0,d|0){c=13;break}u[w>>2]=u[k>>2],u[w+4>>2]=u[k+4>>2],u[w+8>>2]=u[k+8>>2],mo(w)}else{if(d=Ei(k)|0,d|0){c=13;break}u[w>>2]=u[k>>2],u[w+4>>2]=u[k+4>>2],u[w+8>>2]=u[k+8>>2],Ln(w)}if(go(m,w,S),wr(S),d=h,fe=u[d>>2]|0,d=u[d+4>>2]|0,_e=(15-_|0)*3|0,Te=xe(7,0,_e|0)|0,d=d&~(z()|0),_e=xe(ys(S)|0,0,_e|0)|0,d=z()|0|d,Se=h,u[Se>>2]=_e|fe&~Te,u[Se+4>>2]=d,(_|0)<=1){c=14;break}}e:do if((c|0)!=13&&(c|0)==14)if((u[k>>2]|0)<=1&&(u[k+4>>2]|0)<=1&&(u[k+8>>2]|0)<=1){c=ys(k)|0,d=ya(Z,c)|0,(d|0)==127?S=0:S=kt(d)|0;t:do if(c){if(N){if(d=Xr(A,a)|0,(d|0)==7){d=5;break e}if(_=u[21248+(d*28|0)+(c<<2)>>2]|0,(_|0)>0){d=c,c=0;do d=_n(d)|0,c=c+1|0;while((c|0)!=(_|0))}else d=c;if((d|0)==1){d=9;break e}c=ya(Z,d)|0,(c|0)==127&&qe(23200,23090,411,23230),kt(c)|0?qe(23245,23090,412,23230):($=c,J=_,V=d)}else $=d,J=0,V=c;if(w=u[4272+(Z*28|0)+(V<<2)>>2]|0,(w|0)<=-1&&qe(23276,23090,419,23230),!S){if((J|0)<0){d=5;break e}if(J|0){_=h,d=0,c=u[_>>2]|0,_=u[_+4>>2]|0;do c=mn(c,_)|0,_=z()|0,_e=h,u[_e>>2]=c,u[_e+4>>2]=_,d=d+1|0;while((d|0)<(J|0))}if((w|0)<=0){d=$,c=58;break}for(_=h,d=0,c=u[_>>2]|0,_=u[_+4>>2]|0;;)if(c=mn(c,_)|0,_=z()|0,_e=h,u[_e>>2]=c,u[_e+4>>2]=_,d=d+1|0,(d|0)==(w|0)){d=$,c=58;break t}}if(m=Yi($,Z)|0,(m|0)==7&&qe(23066,23090,428,23230),d=h,c=u[d>>2]|0,d=u[d+4>>2]|0,(w|0)>0){_=0;do c=mn(c,d)|0,d=z()|0,_e=h,u[_e>>2]=c,u[_e+4>>2]=d,_=_+1|0;while((_|0)!=(w|0))}if(d=Xr(c,d)|0,(d|0)==7&&qe(23313,23090,440,23230),c=Fn($)|0,c=u[(c?21664:21456)+(m*28|0)+(d<<2)>>2]|0,(c|0)<0&&qe(23313,23090,454,23230),!c)d=$,c=58;else{m=h,d=0,_=u[m>>2]|0,m=u[m+4>>2]|0;do _=Ea(_,m)|0,m=z()|0,_e=h,u[_e>>2]=_,u[_e+4>>2]=m,d=d+1|0;while((d|0)<(c|0));d=$,c=58}}else if((N|0)!=0&(S|0)!=0){if(c=Xr(A,a)|0,_=h,_=Xr(u[_>>2]|0,u[_+4>>2]|0)|0,(c|0)==7|(_|0)==7){d=5;break e}if(_=u[21248+(c*28|0)+(_<<2)>>2]|0,(_|0)<0){d=5;break e}if(!_)c=59;else{w=h,c=0,m=u[w>>2]|0,w=u[w+4>>2]|0;do m=mn(m,w)|0,w=z()|0,_e=h,u[_e>>2]=m,u[_e+4>>2]=w,c=c+1|0;while((c|0)<(_|0));c=58}}else c=58;while(!1);if((c|0)==58&&S&&(c=59),(c|0)==59&&(_e=h,(Xr(u[_e>>2]|0,u[_e+4>>2]|0)|0)==1)){d=9;break}_e=h,Te=u[_e>>2]|0,_e=u[_e+4>>2]&-1040385,fe=xe(d|0,0,45)|0,_e=_e|(z()|0),d=h,u[d>>2]=Te|fe,u[d+4>>2]=_e,d=0}else d=1;while(!1);return _e=d,L=ne,_e|0}function bu(A,a,c,h,d,_){A=A|0,a=a|0,c=c|0,h=h|0,d=d|0,_=_|0;var m=0,w=0;return w=L,L=L+16|0,m=w,d?A=15:(A=Vn(A,a,c,h,m)|0,A||(xA(m,_),A=0)),L=w,A|0}function Cu(A,a,c,h,d){A=A|0,a=a|0,c=c|0,h=h|0,d=d|0;var _=0,m=0;return m=L,L=L+16|0,_=m,h?c=15:(c=wo(c,_)|0,c||(c=ZA(A,a,_,d)|0)),L=m,c|0}function Ru(A,a,c,h,d){A=A|0,a=a|0,c=c|0,h=h|0,d=d|0;var _=0,m=0,w=0,S=0;return S=L,L=L+32|0,m=S+12|0,w=S,_=Vn(A,a,A,a,m)|0,_|0?(w=_,L=S,w|0):(A=Vn(A,a,c,h,w)|0,A|0?(w=A,L=S,w|0):(m=vo(m,w)|0,w=d,u[w>>2]=m,u[w+4>>2]=((m|0)<0)<<31>>31,w=0,L=S,w|0))}function Ci(A,a,c,h,d){A=A|0,a=a|0,c=c|0,h=h|0,d=d|0;var _=0,m=0,w=0,S=0;return S=L,L=L+32|0,m=S+12|0,w=S,_=Vn(A,a,A,a,m)|0,!_&&(_=Vn(A,a,c,h,w)|0,!_)?(h=vo(m,w)|0,h=Dt(h|0,((h|0)<0)<<31>>31|0,1,0)|0,m=z()|0,w=d,u[w>>2]=h,u[w+4>>2]=m,w=0,L=S,w|0):(w=_,L=S,w|0)}function qA(A,a,c,h,d){A=A|0,a=a|0,c=c|0,h=h|0,d=d|0;var _=0,m=0,w=0,S=0,k=0,N=0,V=0,Z=0,J=0,$=0,ne=0,Se=0,Te=0,fe=0,_e=0,le=0,We=0,$e=0,Ie=0,Le=0;if(Ie=L,L=L+48|0,m=Ie+24|0,w=Ie+12|0,$e=Ie,_=Vn(A,a,A,a,m)|0,!_&&(_=Vn(A,a,c,h,w)|0,!_)){le=vo(m,w)|0,We=((le|0)<0)<<31>>31,u[m>>2]=0,u[m+4>>2]=0,u[m+8>>2]=0,u[w>>2]=0,u[w+4>>2]=0,u[w+8>>2]=0,Vn(A,a,A,a,m)|0&&qe(23313,23090,691,23299),Vn(A,a,c,h,w)|0&&qe(23313,23090,696,23299),To(m),To(w),le?(V=u[m>>2]|0,$=+(le|0),Te=m+4|0,Z=u[Te>>2]|0,fe=m+8|0,J=u[fe>>2]|0,_e=m,h=V,_=Z,c=J,ne=+((u[w>>2]|0)-V|0)/$,Se=+((u[w+4>>2]|0)-Z|0)/$,$=+((u[w+8>>2]|0)-J|0)/$):(_=m+4|0,c=m+8|0,Te=_,fe=c,_e=m,h=u[m>>2]|0,_=u[_>>2]|0,c=u[c>>2]|0,ne=0,Se=0,$=0),u[$e>>2]=h,J=$e+4|0,u[J>>2]=_,Z=$e+8|0,u[Z>>2]=c;e:do if((le|0)<0)_=0;else for(N=0,V=0,_=h;;){k=+(V>>>0)+4294967296*+(N|0),Le=ne*k+ +(_|0),S=Se*k+ +(u[Te>>2]|0),k=$*k+ +(u[fe>>2]|0),c=~~+Mr(+Le),m=~~+Mr(+S),_=~~+Mr(+k),Le=+yt(+(+(c|0)-Le)),S=+yt(+(+(m|0)-S)),k=+yt(+(+(_|0)-k));do if(Le>S&Le>k)c=0-(m+_)|0,h=m;else if(w=0-c|0,S>k){h=w-_|0;break}else{h=m,_=w-m|0;break}while(!1);if(u[$e>>2]=c,u[J>>2]=h,u[Z>>2]=_,uu($e),_=ZA(A,a,$e,d+(V<<3)|0)|0,_|0)break e;if(!((N|0)<(We|0)|(N|0)==(We|0)&V>>>0<le>>>0)){_=0;break e}_=Dt(V|0,N|0,1,0)|0,w=z()|0,N=w,V=_,_=u[_e>>2]|0}while(!1);return $e=_,L=Ie,$e|0}return $e=_,L=Ie,$e|0}function zn(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var d=0,_=0,m=0;if((c|0)==0&(h|0)==0)return d=0,_=1,lt(d|0),_|0;_=A,d=a,A=1,a=0;do m=(c&1|0)==0&!0,A=Er((m?1:_)|0,(m?0:d)|0,A|0,a|0)|0,a=z()|0,c=si(c|0,h|0,1)|0,h=z()|0,_=Er(_|0,d|0,_|0,d|0)|0,d=z()|0;while(!((c|0)==0&(h|0)==0));return lt(a|0),A|0}function Pu(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0,_=0,m=0,w=0,S=0,k=0,N=0,V=0,Z=0;if(!(RA(a,c)|0)||(a=co(a)|0,h=+B[c>>3],d=+B[c+8>>3],d=a&d<0?d+6.283185307179586:d,Z=u[A>>2]|0,(Z|0)<=0))return Z=0,Z|0;if(V=u[A+4>>2]|0,a){a=0,N=d,c=-1,A=0;e:for(;;){for(k=A;m=+B[V+(k<<4)>>3],d=+B[V+(k<<4)+8>>3],A=(c+2|0)%(Z|0)|0,_=+B[V+(A<<4)>>3],w=+B[V+(A<<4)+8>>3],m>_?(S=m,m=w):(S=_,_=m,m=d,d=w),h=h==_|h==S?h+2220446049250313e-31:h,!!(h<_|h>S);)if(c=k+1|0,(c|0)>=(Z|0)){c=22;break e}else A=k,k=c,c=A;if(w=m<0?m+6.283185307179586:m,m=d<0?d+6.283185307179586:d,N=w==N|m==N?N+-2220446049250313e-31:N,S=w+(m-w)*((h-_)/(S-_)),(S<0?S+6.283185307179586:S)>N&&(a=a^1),A=k+1|0,(A|0)>=(Z|0)){c=22;break}else c=k}if((c|0)==22)return a|0}else{a=0,N=d,c=-1,A=0;e:for(;;){for(k=A;m=+B[V+(k<<4)>>3],d=+B[V+(k<<4)+8>>3],A=(c+2|0)%(Z|0)|0,_=+B[V+(A<<4)>>3],w=+B[V+(A<<4)+8>>3],m>_?(S=m,m=w):(S=_,_=m,m=d,d=w),h=h==_|h==S?h+2220446049250313e-31:h,!!(h<_|h>S);)if(c=k+1|0,(c|0)>=(Z|0)){c=22;break e}else A=k,k=c,c=A;if(N=m==N|d==N?N+-2220446049250313e-31:N,m+(d-m)*((h-_)/(S-_))>N&&(a=a^1),A=k+1|0,(A|0)>=(Z|0)){c=22;break}else c=k}if((c|0)==22)return a|0}return 0}function ku(A,a){A=A|0,a=a|0;var c=0,h=0,d=0,_=0,m=0,w=0,S=0,k=0,N=0,V=0,Z=0,J=0,$=0,ne=0,Se=0,Te=0,fe=0;if($=u[A>>2]|0,!$){u[a>>2]=0,u[a+4>>2]=0,u[a+8>>2]=0,u[a+12>>2]=0,u[a+16>>2]=0,u[a+20>>2]=0,u[a+24>>2]=0,u[a+28>>2]=0;return}if(ne=a+8|0,B[ne>>3]=17976931348623157e292,Se=a+24|0,B[Se>>3]=17976931348623157e292,B[a>>3]=-17976931348623157e292,Te=a+16|0,B[Te>>3]=-17976931348623157e292,!(($|0)<=0)){for(Z=u[A+4>>2]|0,k=17976931348623157e292,N=-17976931348623157e292,V=0,A=-1,_=17976931348623157e292,m=17976931348623157e292,S=-17976931348623157e292,h=-17976931348623157e292,J=0;c=+B[Z+(J<<4)>>3],w=+B[Z+(J<<4)+8>>3],A=A+2|0,d=+B[Z+(((A|0)==($|0)?0:A)<<4)+8>>3],c<_&&(B[ne>>3]=c,_=c),w<m&&(B[Se>>3]=w,m=w),c>S?B[a>>3]=c:c=S,w>h&&(B[Te>>3]=w,h=w),k=w>0&w<k?w:k,N=w<0&w>N?w:N,V=V|+yt(+(w-d))>3.141592653589793,A=J+1|0,(A|0)!=($|0);)fe=J,S=c,J=A,A=fe;V&&(B[Te>>3]=N,B[Se>>3]=k)}}function Mo(A,a){A=A|0,a=a|0;var c=0,h=0,d=0,_=0,m=0,w=0,S=0,k=0,N=0,V=0,Z=0,J=0,$=0,ne=0,Se=0,Te=0,fe=0,_e=0,le=0,We=0,$e=0,Ie=0;if($=u[A>>2]|0,$){if(ne=a+8|0,B[ne>>3]=17976931348623157e292,Se=a+24|0,B[Se>>3]=17976931348623157e292,B[a>>3]=-17976931348623157e292,Te=a+16|0,B[Te>>3]=-17976931348623157e292,($|0)>0){for(d=u[A+4>>2]|0,Z=17976931348623157e292,J=-17976931348623157e292,h=0,c=-1,S=17976931348623157e292,k=17976931348623157e292,V=-17976931348623157e292,m=-17976931348623157e292,fe=0;_=+B[d+(fe<<4)>>3],N=+B[d+(fe<<4)+8>>3],$e=c+2|0,w=+B[d+((($e|0)==($|0)?0:$e)<<4)+8>>3],_<S&&(B[ne>>3]=_,S=_),N<k&&(B[Se>>3]=N,k=N),_>V?B[a>>3]=_:_=V,N>m&&(B[Te>>3]=N,m=N),Z=N>0&N<Z?N:Z,J=N<0&N>J?N:J,h=h|+yt(+(N-w))>3.141592653589793,c=fe+1|0,(c|0)!=($|0);)$e=fe,V=_,fe=c,c=$e;h&&(B[Te>>3]=J,B[Se>>3]=Z)}}else u[a>>2]=0,u[a+4>>2]=0,u[a+8>>2]=0,u[a+12>>2]=0,u[a+16>>2]=0,u[a+20>>2]=0,u[a+24>>2]=0,u[a+28>>2]=0;if($e=A+8|0,c=u[$e>>2]|0,!((c|0)<=0)){We=A+12|0,le=0;do if(d=u[We>>2]|0,h=le,le=le+1|0,Se=a+(le<<5)|0,Te=u[d+(h<<3)>>2]|0,Te){if(fe=a+(le<<5)+8|0,B[fe>>3]=17976931348623157e292,A=a+(le<<5)+24|0,B[A>>3]=17976931348623157e292,B[Se>>3]=-17976931348623157e292,_e=a+(le<<5)+16|0,B[_e>>3]=-17976931348623157e292,(Te|0)>0){for($=u[d+(h<<3)+4>>2]|0,Z=17976931348623157e292,J=-17976931348623157e292,d=0,h=-1,ne=0,S=17976931348623157e292,k=17976931348623157e292,N=-17976931348623157e292,m=-17976931348623157e292;_=+B[$+(ne<<4)>>3],V=+B[$+(ne<<4)+8>>3],h=h+2|0,w=+B[$+(((h|0)==(Te|0)?0:h)<<4)+8>>3],_<S&&(B[fe>>3]=_,S=_),V<k&&(B[A>>3]=V,k=V),_>N?B[Se>>3]=_:_=N,V>m&&(B[_e>>3]=V,m=V),Z=V>0&V<Z?V:Z,J=V<0&V>J?V:J,d=d|+yt(+(V-w))>3.141592653589793,h=ne+1|0,(h|0)!=(Te|0);)Ie=ne,ne=h,N=_,h=Ie;d&&(B[_e>>3]=J,B[A>>3]=Z)}}else u[Se>>2]=0,u[Se+4>>2]=0,u[Se+8>>2]=0,u[Se+12>>2]=0,u[Se+16>>2]=0,u[Se+20>>2]=0,u[Se+24>>2]=0,u[Se+28>>2]=0,c=u[$e>>2]|0;while((le|0)<(c|0))}}function c0(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0,_=0;if(!(Pu(A,a,c)|0))return d=0,d|0;if(d=A+8|0,(u[d>>2]|0)<=0)return d=1,d|0;for(h=A+12|0,A=0;;){if(_=A,A=A+1|0,Pu((u[h>>2]|0)+(_<<3)|0,a+(A<<5)|0,c)|0){A=0,h=6;break}if((A|0)>=(u[d>>2]|0)){A=1,h=6;break}}return(h|0)==6?A|0:0}function xu(){return 8}function Mu(){return 16}function nr(){return 168}function GA(){return 8}function Ca(){return 16}function No(){return 12}function Nu(){return 8}function JA(A){return A=A|0,+(+((u[A>>2]|0)>>>0)+4294967296*+(u[A+4>>2]|0))}function Oo(A){A=A|0;var a=0,c=0;return c=+B[A>>3],a=+B[A+8>>3],+ +Nt(+(c*c+a*a))}function Do(A,a,c,h,d){A=A|0,a=a|0,c=c|0,h=h|0,d=d|0;var _=0,m=0,w=0,S=0,k=0,N=0,V=0,Z=0;k=+B[A>>3],S=+B[a>>3]-k,w=+B[A+8>>3],m=+B[a+8>>3]-w,V=+B[c>>3],_=+B[h>>3]-V,Z=+B[c+8>>3],N=+B[h+8>>3]-Z,_=(_*(w-Z)-(k-V)*N)/(S*N-m*_),B[d>>3]=k+S*_,B[d+8>>3]=w+m*_}function qi(A,a){return A=A|0,a=a|0,+yt(+(+B[A>>3]-+B[a>>3]))<11920928955078125e-23?(a=+yt(+(+B[A+8>>3]-+B[a+8>>3]))<11920928955078125e-23,a|0):(a=0,a|0)}function hr(A,a){A=A|0,a=a|0;var c=0,h=0,d=0;return d=+B[A>>3]-+B[a>>3],h=+B[A+8>>3]-+B[a+8>>3],c=+B[A+16>>3]-+B[a+16>>3],+(d*d+h*h+c*c)}function f0(A,a){A=A|0,a=a|0;var c=0,h=0,d=0;c=+B[A>>3],h=+Ut(+c),c=+vt(+c),B[a+16>>3]=c,c=+B[A+8>>3],d=h*+Ut(+c),B[a>>3]=d,c=h*+vt(+c),B[a+8>>3]=c}function h0(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0,_=0;if(_=L,L=L+16|0,d=_,h=Gt(A,a)|0,(c+-1|0)>>>0>5||(h=(h|0)!=0,(c|0)==1&h))return d=-1,L=_,d|0;do if(Ss(A,a,d)|0)h=-1;else if(h){h=((u[21936+(c<<2)>>2]|0)+5-(u[d>>2]|0)|0)%5|0;break}else{h=((u[21968+(c<<2)>>2]|0)+6-(u[d>>2]|0)|0)%6|0;break}while(!1);return d=h,L=_,d|0}function Ss(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0,_=0,m=0,w=0,S=0,k=0;if(k=L,L=L+32|0,m=k+16|0,w=k,h=Bn(A,a,m)|0,h|0)return c=h,L=k,c|0;_=fu(A,a)|0,S=Xr(A,a)|0,uo(_,w),h=Ti(_,u[m>>2]|0)|0;e:do if(kt(_)|0){do switch(_|0){case 4:{A=0;break}case 14:{A=1;break}case 24:{A=2;break}case 38:{A=3;break}case 49:{A=4;break}case 58:{A=5;break}case 63:{A=6;break}case 72:{A=7;break}case 83:{A=8;break}case 97:{A=9;break}case 107:{A=10;break}case 117:{A=11;break}default:{h=1;break e}}while(!1);if(d=u[22e3+(A*24|0)+8>>2]|0,a=u[22e3+(A*24|0)+16>>2]|0,A=u[m>>2]|0,(A|0)!=(u[w>>2]|0)&&(w=Fn(_)|0,A=u[m>>2]|0,w|(A|0)==(a|0)&&(h=(h+1|0)%6|0)),(S|0)==3&(A|0)==(a|0)){h=(h+5|0)%6|0,d=22;break}(S|0)==5&(A|0)==(d|0)&&(h=(h+1|0)%6|0),d=22}else d=22;while(!1);return(d|0)==22&&(u[c>>2]=h,h=0),c=h,L=k,c|0}function $r(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var d=0,_=0,m=0,w=0,S=0,k=0,N=0,V=0,Z=0,J=0,$=0,ne=0,Se=0,Te=0,fe=0,_e=0;if(_e=L,L=L+32|0,fe=_e+24|0,Se=_e+20|0,$=_e+8|0,J=_e+16|0,Z=_e,S=(Gt(A,a)|0)==0,S=S?6:5,N=Ce(A|0,a|0,52)|0,z()|0,N=N&15,S>>>0<=c>>>0)return h=2,L=_e,h|0;V=(N|0)==0,!V&&(ne=xe(7,0,(N^15)*3|0)|0,(ne&A|0)==0&((z()|0)&a|0)==0)?d=c:_=4;e:do if((_|0)==4){if(d=(Gt(A,a)|0)!=0,((d?4:5)|0)<(c|0)||Ss(A,a,fe)|0||(_=(u[fe>>2]|0)+c|0,d?d=22288+(((_|0)%5|0)<<2)|0:d=22320+(((_|0)%6|0)<<2)|0,ne=u[d>>2]|0,(ne|0)==7))return h=1,L=_e,h|0;u[Se>>2]=0,d=K(A,a,ne,Se,$)|0;do if(!d){if(w=$,k=u[w>>2]|0,w=u[w+4>>2]|0,m=w>>>0<a>>>0|(w|0)==(a|0)&k>>>0<A>>>0,_=m?k:A,m=m?w:a,!V&&(V=xe(7,0,(N^15)*3|0)|0,(k&V|0)==0&(w&(z()|0)|0)==0))d=c;else{if(w=(c+-1+S|0)%(S|0)|0,d=Gt(A,a)|0,(w|0)<0&&qe(23313,23315,245,23324),S=(d|0)!=0,((S?4:5)|0)<(w|0)&&qe(23313,23315,245,23324),Ss(A,a,fe)|0&&qe(23313,23315,245,23324),d=(u[fe>>2]|0)+w|0,S?d=22288+(((d|0)%5|0)<<2)|0:d=22320+(((d|0)%6|0)<<2)|0,w=u[d>>2]|0,(w|0)==7&&qe(23313,23315,245,23324),u[J>>2]=0,d=K(A,a,w,J,Z)|0,d|0)break;k=Z,S=u[k>>2]|0,k=u[k+4>>2]|0;do if(k>>>0<m>>>0|(k|0)==(m|0)&S>>>0<_>>>0){if(Gt(S,k)|0?_=ve(S,k,A,a)|0:_=u[22384+((((u[J>>2]|0)+(u[22352+(w<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,d=Gt(S,k)|0,(_+-1|0)>>>0>5){d=-1,_=S,m=k;break}if(d=(d|0)!=0,(_|0)==1&d){d=-1,_=S,m=k;break}do if(Ss(S,k,fe)|0)d=-1;else if(d){d=((u[21936+(_<<2)>>2]|0)+5-(u[fe>>2]|0)|0)%5|0;break}else{d=((u[21968+(_<<2)>>2]|0)+6-(u[fe>>2]|0)|0)%6|0;break}while(!1);_=S,m=k}else d=c;while(!1);w=$,k=u[w>>2]|0,w=u[w+4>>2]|0}if((_|0)==(k|0)&(m|0)==(w|0)){if(S=(Gt(k,w)|0)!=0,S?A=ve(k,w,A,a)|0:A=u[22384+((((u[Se>>2]|0)+(u[22352+(ne<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,d=Gt(k,w)|0,(A+-1|0)>>>0<=5&&(Te=(d|0)!=0,!((A|0)==1&Te)))do if(Ss(k,w,fe)|0)d=-1;else if(Te){d=((u[21936+(A<<2)>>2]|0)+5-(u[fe>>2]|0)|0)%5|0;break}else{d=((u[21968+(A<<2)>>2]|0)+6-(u[fe>>2]|0)|0)%6|0;break}while(!1);else d=-1;d=d+1|0,d=(d|0)==6|S&(d|0)==5?0:d}a=m,A=_;break e}while(!1);return h=d,L=_e,h|0}while(!1);return Te=xe(d|0,0,56)|0,fe=z()|0|a&-2130706433|536870912,u[h>>2]=Te|A,u[h+4>>2]=fe,h=0,L=_e,h|0}function Ra(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0,_=0;return _=(Gt(A,a)|0)==0,h=$r(A,a,0,c)|0,d=(h|0)==0,_?!d||(h=$r(A,a,1,c+8|0)|0,h|0)||(h=$r(A,a,2,c+16|0)|0,h|0)||(h=$r(A,a,3,c+24|0)|0,h|0)||(h=$r(A,a,4,c+32|0)|0,h)?(_=h,_|0):$r(A,a,5,c+40|0)|0:!d||(h=$r(A,a,1,c+8|0)|0,h|0)||(h=$r(A,a,2,c+16|0)|0,h|0)||(h=$r(A,a,3,c+24|0)|0,h|0)||(h=$r(A,a,4,c+32|0)|0,h|0)?(_=h,_|0):(_=c+40|0,u[_>>2]=0,u[_+4>>2]=0,_=0,_|0)}function el(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0,_=0,m=0,w=0,S=0;return S=L,L=L+192|0,d=S,_=S+168|0,m=Ce(A|0,a|0,56)|0,z()|0,m=m&7,w=a&-2130706433|134217728,h=Bn(A,w,_)|0,h|0?(w=h,L=S,w|0):(a=Ce(A|0,a|0,52)|0,z()|0,a=a&15,Gt(A,w)|0?NA(_,a,m,1,d):OA(_,a,m,1,d),w=d+8|0,u[c>>2]=u[w>>2],u[c+4>>2]=u[w+4>>2],u[c+8>>2]=u[w+8>>2],u[c+12>>2]=u[w+12>>2],w=0,L=S,w|0)}function tl(A,a){A=A|0,a=a|0;var c=0,h=0,d=0,_=0;return d=L,L=L+16|0,c=d,!(!0&(a&2013265920|0)==536870912)||(h=a&-2130706433|134217728,!(IA(A,h)|0))?(h=0,L=d,h|0):(_=Ce(A|0,a|0,56)|0,z()|0,_=($r(A,h,_&7,c)|0)==0,h=c,h=_&((u[h>>2]|0)==(A|0)?(u[h+4>>2]|0)==(a|0):0)&1,L=d,h|0)}function Pa(A,a,c){A=A|0,a=a|0,c=c|0;var h=0;(a|0)>0?(h=Cr(a,4)|0,u[A>>2]=h,h||qe(23337,23360,40,23374)):u[A>>2]=0,u[A+4>>2]=a,u[A+8>>2]=0,u[A+12>>2]=c}function ka(A){A=A|0;var a=0,c=0,h=0,d=0,_=0,m=0,w=0;d=A+4|0,_=A+12|0,m=A+8|0;e:for(;;){for(c=u[d>>2]|0,a=0;;){if((a|0)>=(c|0))break e;if(h=u[A>>2]|0,w=u[h+(a<<2)>>2]|0,!w)a=a+1|0;else break}a=h+(~~(+yt(+(+jr(10,+ +(15-(u[_>>2]|0)|0))*(+B[w>>3]+ +B[w+8>>3])))%+(c|0))>>>0<<2)|0,c=u[a>>2]|0;t:do if(c|0){if(h=w+32|0,(c|0)==(w|0))u[a>>2]=u[h>>2];else{if(c=c+32|0,a=u[c>>2]|0,!a)break;for(;(a|0)!=(w|0);)if(c=a+32|0,a=u[c>>2]|0,!a)break t;u[c>>2]=u[h>>2]}ht(w),u[m>>2]=(u[m>>2]|0)+-1}while(!1)}ht(u[A>>2]|0)}function Ou(A){A=A|0;var a=0,c=0,h=0;for(h=u[A+4>>2]|0,c=0;;){if((c|0)>=(h|0)){a=0,c=4;break}if(a=u[(u[A>>2]|0)+(c<<2)>>2]|0,!a)c=c+1|0;else{c=4;break}}return(c|0)==4?a|0:0}function rl(A,a){A=A|0,a=a|0;var c=0,h=0,d=0,_=0;if(c=~~(+yt(+(+jr(10,+ +(15-(u[A+12>>2]|0)|0))*(+B[a>>3]+ +B[a+8>>3])))%+(u[A+4>>2]|0))>>>0,c=(u[A>>2]|0)+(c<<2)|0,h=u[c>>2]|0,!h)return _=1,_|0;_=a+32|0;do if((h|0)!=(a|0)){if(c=u[h+32>>2]|0,!c)return _=1,_|0;for(d=c;;){if((d|0)==(a|0)){d=8;break}if(c=u[d+32>>2]|0,c)h=d,d=c;else{c=1,d=10;break}}if((d|0)==8){u[h+32>>2]=u[_>>2];break}else if((d|0)==10)return c|0}else u[c>>2]=u[_>>2];while(!1);return ht(a),_=A+8|0,u[_>>2]=(u[_>>2]|0)+-1,_=0,_|0}function d0(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0,_=0,m=0;_=Tr(40)|0,_||qe(23390,23360,98,23403),u[_>>2]=u[a>>2],u[_+4>>2]=u[a+4>>2],u[_+8>>2]=u[a+8>>2],u[_+12>>2]=u[a+12>>2],d=_+16|0,u[d>>2]=u[c>>2],u[d+4>>2]=u[c+4>>2],u[d+8>>2]=u[c+8>>2],u[d+12>>2]=u[c+12>>2],u[_+32>>2]=0,d=~~(+yt(+(+jr(10,+ +(15-(u[A+12>>2]|0)|0))*(+B[a>>3]+ +B[a+8>>3])))%+(u[A+4>>2]|0))>>>0,d=(u[A>>2]|0)+(d<<2)|0,h=u[d>>2]|0;do if(!h)u[d>>2]=_;else{for(;!(Ts(h,a)|0&&Ts(h+16|0,c)|0);)if(d=u[h+32>>2]|0,h=d|0?d:h,!(u[h+32>>2]|0)){m=10;break}if((m|0)==10){u[h+32>>2]=_;break}return ht(_),m=h,m|0}while(!1);return m=A+8|0,u[m>>2]=(u[m>>2]|0)+1,m=_,m|0}function g0(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0;if(d=~~(+yt(+(+jr(10,+ +(15-(u[A+12>>2]|0)|0))*(+B[a>>3]+ +B[a+8>>3])))%+(u[A+4>>2]|0))>>>0,d=u[(u[A>>2]|0)+(d<<2)>>2]|0,!d)return c=0,c|0;if(!c){for(A=d;;){if(Ts(A,a)|0){h=10;break}if(A=u[A+32>>2]|0,!A){A=0,h=10;break}}if((h|0)==10)return A|0}for(A=d;;){if(Ts(A,a)|0&&Ts(A+16|0,c)|0){h=10;break}if(A=u[A+32>>2]|0,!A){A=0,h=10;break}}return(h|0)==10?A|0:0}function nl(A,a){A=A|0,a=a|0;var c=0;if(c=~~(+yt(+(+jr(10,+ +(15-(u[A+12>>2]|0)|0))*(+B[a>>3]+ +B[a+8>>3])))%+(u[A+4>>2]|0))>>>0,A=u[(u[A>>2]|0)+(c<<2)>>2]|0,!A)return c=0,c|0;for(;;){if(Ts(A,a)|0){a=5;break}if(A=u[A+32>>2]|0,!A){A=0,a=5;break}}return(a|0)==5?A|0:0}function Ri(){return 23424}function Du(A){return A=+A,+ +Qr(+A)}function hn(A){return A=+A,~~+Du(A)|0}function Tr(A){A=A|0;var a=0,c=0,h=0,d=0,_=0,m=0,w=0,S=0,k=0,N=0,V=0,Z=0,J=0,$=0,ne=0,Se=0,Te=0,fe=0,_e=0,le=0,We=0;We=L,L=L+16|0,Z=We;do if(A>>>0<245){if(k=A>>>0<11?16:A+11&-8,A=k>>>3,V=u[5857]|0,c=V>>>A,c&3|0)return a=(c&1^1)+A|0,A=23468+(a<<1<<2)|0,c=A+8|0,h=u[c>>2]|0,d=h+8|0,_=u[d>>2]|0,(_|0)==(A|0)?u[5857]=V&~(1<<a):(u[_+12>>2]=A,u[c>>2]=_),le=a<<3,u[h+4>>2]=le|3,le=h+le+4|0,u[le>>2]=u[le>>2]|1,le=d,L=We,le|0;if(N=u[5859]|0,k>>>0>N>>>0){if(c|0)return a=2<<A,a=c<<A&(a|0-a),a=(a&0-a)+-1|0,w=a>>>12&16,a=a>>>w,c=a>>>5&8,a=a>>>c,_=a>>>2&4,a=a>>>_,A=a>>>1&2,a=a>>>A,h=a>>>1&1,h=(c|w|_|A|h)+(a>>>h)|0,a=23468+(h<<1<<2)|0,A=a+8|0,_=u[A>>2]|0,w=_+8|0,c=u[w>>2]|0,(c|0)==(a|0)?(A=V&~(1<<h),u[5857]=A):(u[c+12>>2]=a,u[A>>2]=c,A=V),le=h<<3,m=le-k|0,u[_+4>>2]=k|3,d=_+k|0,u[d+4>>2]=m|1,u[_+le>>2]=m,N|0&&(h=u[5862]|0,a=N>>>3,c=23468+(a<<1<<2)|0,a=1<<a,A&a?(A=c+8|0,a=u[A>>2]|0):(u[5857]=A|a,a=c,A=c+8|0),u[A>>2]=h,u[a+12>>2]=h,u[h+8>>2]=a,u[h+12>>2]=c),u[5859]=m,u[5862]=d,le=w,L=We,le|0;if(_=u[5858]|0,_){for(c=(_&0-_)+-1|0,d=c>>>12&16,c=c>>>d,h=c>>>5&8,c=c>>>h,m=c>>>2&4,c=c>>>m,w=c>>>1&2,c=c>>>w,S=c>>>1&1,S=u[23732+((h|d|m|w|S)+(c>>>S)<<2)>>2]|0,c=S,w=S,S=(u[S+4>>2]&-8)-k|0;A=u[c+16>>2]|0,!(!A&&(A=u[c+20>>2]|0,!A));)m=(u[A+4>>2]&-8)-k|0,d=m>>>0<S>>>0,c=A,w=d?A:w,S=d?m:S;if(m=w+k|0,m>>>0>w>>>0){d=u[w+24>>2]|0,a=u[w+12>>2]|0;do if((a|0)==(w|0)){if(A=w+20|0,a=u[A>>2]|0,!a&&(A=w+16|0,a=u[A>>2]|0,!a)){c=0;break}for(;;)if(h=a+20|0,c=u[h>>2]|0,c)a=c,A=h;else if(h=a+16|0,c=u[h>>2]|0,c)a=c,A=h;else break;u[A>>2]=0,c=a}else c=u[w+8>>2]|0,u[c+12>>2]=a,u[a+8>>2]=c,c=a;while(!1);do if(d|0){if(a=u[w+28>>2]|0,A=23732+(a<<2)|0,(w|0)==(u[A>>2]|0)){if(u[A>>2]=c,!c){u[5858]=_&~(1<<a);break}}else if(le=d+16|0,u[((u[le>>2]|0)==(w|0)?le:d+20|0)>>2]=c,!c)break;u[c+24>>2]=d,a=u[w+16>>2]|0,a|0&&(u[c+16>>2]=a,u[a+24>>2]=c),a=u[w+20>>2]|0,a|0&&(u[c+20>>2]=a,u[a+24>>2]=c)}while(!1);return S>>>0<16?(le=S+k|0,u[w+4>>2]=le|3,le=w+le+4|0,u[le>>2]=u[le>>2]|1):(u[w+4>>2]=k|3,u[m+4>>2]=S|1,u[m+S>>2]=S,N|0&&(h=u[5862]|0,a=N>>>3,c=23468+(a<<1<<2)|0,a=1<<a,a&V?(A=c+8|0,a=u[A>>2]|0):(u[5857]=a|V,a=c,A=c+8|0),u[A>>2]=h,u[a+12>>2]=h,u[h+8>>2]=a,u[h+12>>2]=c),u[5859]=S,u[5862]=m),le=w+8|0,L=We,le|0}else V=k}else V=k}else V=k}else if(A>>>0<=4294967231)if(A=A+11|0,k=A&-8,h=u[5858]|0,h){d=0-k|0,A=A>>>8,A?k>>>0>16777215?S=31:(V=(A+1048320|0)>>>16&8,ne=A<<V,w=(ne+520192|0)>>>16&4,ne=ne<<w,S=(ne+245760|0)>>>16&2,S=14-(w|V|S)+(ne<<S>>>15)|0,S=k>>>(S+7|0)&1|S<<1):S=0,c=u[23732+(S<<2)>>2]|0;e:do if(!c)c=0,A=0,ne=61;else for(A=0,w=k<<((S|0)==31?0:25-(S>>>1)|0),_=0;;){if(m=(u[c+4>>2]&-8)-k|0,m>>>0<d>>>0)if(m)A=c,d=m;else{A=c,d=0,ne=65;break e}if(ne=u[c+20>>2]|0,c=u[c+16+(w>>>31<<2)>>2]|0,_=(ne|0)==0|(ne|0)==(c|0)?_:ne,c)w=w<<1;else{c=_,ne=61;break}}while(!1);if((ne|0)==61){if((c|0)==0&(A|0)==0){if(A=2<<S,A=(A|0-A)&h,!A){V=k;break}V=(A&0-A)+-1|0,m=V>>>12&16,V=V>>>m,_=V>>>5&8,V=V>>>_,w=V>>>2&4,V=V>>>w,S=V>>>1&2,V=V>>>S,c=V>>>1&1,A=0,c=u[23732+((_|m|w|S|c)+(V>>>c)<<2)>>2]|0}c?ne=65:(w=A,m=d)}if((ne|0)==65)for(_=c;;)if(V=(u[_+4>>2]&-8)-k|0,c=V>>>0<d>>>0,d=c?V:d,A=c?_:A,c=u[_+16>>2]|0,c||(c=u[_+20>>2]|0),c)_=c;else{w=A,m=d;break}if(w|0&&m>>>0<((u[5859]|0)-k|0)>>>0&&(N=w+k|0,N>>>0>w>>>0)){_=u[w+24>>2]|0,a=u[w+12>>2]|0;do if((a|0)==(w|0)){if(A=w+20|0,a=u[A>>2]|0,!a&&(A=w+16|0,a=u[A>>2]|0,!a)){a=0;break}for(;;)if(d=a+20|0,c=u[d>>2]|0,c)a=c,A=d;else if(d=a+16|0,c=u[d>>2]|0,c)a=c,A=d;else break;u[A>>2]=0}else le=u[w+8>>2]|0,u[le+12>>2]=a,u[a+8>>2]=le;while(!1);do if(_){if(A=u[w+28>>2]|0,c=23732+(A<<2)|0,(w|0)==(u[c>>2]|0)){if(u[c>>2]=a,!a){h=h&~(1<<A),u[5858]=h;break}}else if(le=_+16|0,u[((u[le>>2]|0)==(w|0)?le:_+20|0)>>2]=a,!a)break;u[a+24>>2]=_,A=u[w+16>>2]|0,A|0&&(u[a+16>>2]=A,u[A+24>>2]=a),A=u[w+20>>2]|0,A&&(u[a+20>>2]=A,u[A+24>>2]=a)}while(!1);e:do if(m>>>0<16)le=m+k|0,u[w+4>>2]=le|3,le=w+le+4|0,u[le>>2]=u[le>>2]|1;else{if(u[w+4>>2]=k|3,u[N+4>>2]=m|1,u[N+m>>2]=m,a=m>>>3,m>>>0<256){c=23468+(a<<1<<2)|0,A=u[5857]|0,a=1<<a,A&a?(A=c+8|0,a=u[A>>2]|0):(u[5857]=A|a,a=c,A=c+8|0),u[A>>2]=N,u[a+12>>2]=N,u[N+8>>2]=a,u[N+12>>2]=c;break}if(a=m>>>8,a?m>>>0>16777215?c=31:(_e=(a+1048320|0)>>>16&8,le=a<<_e,fe=(le+520192|0)>>>16&4,le=le<<fe,c=(le+245760|0)>>>16&2,c=14-(fe|_e|c)+(le<<c>>>15)|0,c=m>>>(c+7|0)&1|c<<1):c=0,a=23732+(c<<2)|0,u[N+28>>2]=c,A=N+16|0,u[A+4>>2]=0,u[A>>2]=0,A=1<<c,!(h&A)){u[5858]=h|A,u[a>>2]=N,u[N+24>>2]=a,u[N+12>>2]=N,u[N+8>>2]=N;break}a=u[a>>2]|0;t:do if((u[a+4>>2]&-8|0)!=(m|0)){for(h=m<<((c|0)==31?0:25-(c>>>1)|0);c=a+16+(h>>>31<<2)|0,A=u[c>>2]|0,!!A;)if((u[A+4>>2]&-8|0)==(m|0)){a=A;break t}else h=h<<1,a=A;u[c>>2]=N,u[N+24>>2]=a,u[N+12>>2]=N,u[N+8>>2]=N;break e}while(!1);_e=a+8|0,le=u[_e>>2]|0,u[le+12>>2]=N,u[_e>>2]=N,u[N+8>>2]=le,u[N+12>>2]=a,u[N+24>>2]=0}while(!1);return le=w+8|0,L=We,le|0}else V=k}else V=k;else V=-1;while(!1);if(c=u[5859]|0,c>>>0>=V>>>0)return a=c-V|0,A=u[5862]|0,a>>>0>15?(le=A+V|0,u[5862]=le,u[5859]=a,u[le+4>>2]=a|1,u[A+c>>2]=a,u[A+4>>2]=V|3):(u[5859]=0,u[5862]=0,u[A+4>>2]=c|3,le=A+c+4|0,u[le>>2]=u[le>>2]|1),le=A+8|0,L=We,le|0;if(m=u[5860]|0,m>>>0>V>>>0)return fe=m-V|0,u[5860]=fe,le=u[5863]|0,_e=le+V|0,u[5863]=_e,u[_e+4>>2]=fe|1,u[le+4>>2]=V|3,le=le+8|0,L=We,le|0;if(u[5975]|0?A=u[5977]|0:(u[5977]=4096,u[5976]=4096,u[5978]=-1,u[5979]=-1,u[5980]=0,u[5968]=0,u[5975]=Z&-16^1431655768,A=4096),w=V+48|0,S=V+47|0,_=A+S|0,d=0-A|0,k=_&d,k>>>0<=V>>>0||(A=u[5967]|0,A|0&&(N=u[5965]|0,Z=N+k|0,Z>>>0<=N>>>0|Z>>>0>A>>>0)))return le=0,L=We,le|0;e:do if(u[5968]&4)a=0,ne=143;else{c=u[5863]|0;t:do if(c){for(h=23876;Z=u[h>>2]|0,!(Z>>>0<=c>>>0&&(Z+(u[h+4>>2]|0)|0)>>>0>c>>>0);)if(A=u[h+8>>2]|0,A)h=A;else{ne=128;break t}if(a=_-m&d,a>>>0<2147483647)if(A=Pn(a|0)|0,(A|0)==((u[h>>2]|0)+(u[h+4>>2]|0)|0)){if((A|0)!=-1){m=a,_=A,ne=145;break e}}else h=A,ne=136;else a=0}else ne=128;while(!1);do if((ne|0)==128)if(c=Pn(0)|0,(c|0)!=-1&&(a=c,J=u[5976]|0,$=J+-1|0,a=($&a|0?($+a&0-J)-a|0:0)+k|0,J=u[5965]|0,$=a+J|0,a>>>0>V>>>0&a>>>0<2147483647)){if(Z=u[5967]|0,Z|0&&$>>>0<=J>>>0|$>>>0>Z>>>0){a=0;break}if(A=Pn(a|0)|0,(A|0)==(c|0)){m=a,_=c,ne=145;break e}else h=A,ne=136}else a=0;while(!1);do if((ne|0)==136){if(c=0-a|0,!(w>>>0>a>>>0&(a>>>0<2147483647&(h|0)!=-1)))if((h|0)==-1){a=0;break}else{m=a,_=h,ne=145;break e}if(A=u[5977]|0,A=S-a+A&0-A,A>>>0>=2147483647){m=a,_=h,ne=145;break e}if((Pn(A|0)|0)==-1){Pn(c|0)|0,a=0;break}else{m=A+a|0,_=h,ne=145;break e}}while(!1);u[5968]=u[5968]|4,ne=143}while(!1);if((ne|0)==143&&k>>>0<2147483647&&(fe=Pn(k|0)|0,$=Pn(0)|0,Se=$-fe|0,Te=Se>>>0>(V+40|0)>>>0,!((fe|0)==-1|Te^1|fe>>>0<$>>>0&((fe|0)!=-1&($|0)!=-1)^1))&&(m=Te?Se:a,_=fe,ne=145),(ne|0)==145){a=(u[5965]|0)+m|0,u[5965]=a,a>>>0>(u[5966]|0)>>>0&&(u[5966]=a),S=u[5863]|0;e:do if(S){for(a=23876;;){if(A=u[a>>2]|0,c=u[a+4>>2]|0,(_|0)==(A+c|0)){ne=154;break}if(h=u[a+8>>2]|0,h)a=h;else break}if((ne|0)==154&&(_e=a+4|0,(u[a+12>>2]&8|0)==0)&&_>>>0>S>>>0&A>>>0<=S>>>0){u[_e>>2]=c+m,le=(u[5860]|0)+m|0,fe=S+8|0,fe=fe&7|0?0-fe&7:0,_e=S+fe|0,fe=le-fe|0,u[5863]=_e,u[5860]=fe,u[_e+4>>2]=fe|1,u[S+le+4>>2]=40,u[5864]=u[5979];break}for(_>>>0<(u[5861]|0)>>>0&&(u[5861]=_),c=_+m|0,a=23876;;){if((u[a>>2]|0)==(c|0)){ne=162;break}if(A=u[a+8>>2]|0,A)a=A;else break}if((ne|0)==162&&!(u[a+12>>2]&8|0)){u[a>>2]=_,N=a+4|0,u[N>>2]=(u[N>>2]|0)+m,N=_+8|0,N=_+(N&7|0?0-N&7:0)|0,a=c+8|0,a=c+(a&7|0?0-a&7:0)|0,k=N+V|0,w=a-N-V|0,u[N+4>>2]=V|3;t:do if((S|0)==(a|0))le=(u[5860]|0)+w|0,u[5860]=le,u[5863]=k,u[k+4>>2]=le|1;else{if((u[5862]|0)==(a|0)){le=(u[5859]|0)+w|0,u[5859]=le,u[5862]=k,u[k+4>>2]=le|1,u[k+le>>2]=le;break}if(A=u[a+4>>2]|0,(A&3|0)==1){m=A&-8,h=A>>>3;r:do if(A>>>0<256)if(A=u[a+8>>2]|0,c=u[a+12>>2]|0,(c|0)==(A|0)){u[5857]=u[5857]&~(1<<h);break}else{u[A+12>>2]=c,u[c+8>>2]=A;break}else{_=u[a+24>>2]|0,A=u[a+12>>2]|0;do if((A|0)==(a|0)){if(c=a+16|0,h=c+4|0,A=u[h>>2]|0,A)c=h;else if(A=u[c>>2]|0,!A){A=0;break}for(;;)if(d=A+20|0,h=u[d>>2]|0,h)A=h,c=d;else if(d=A+16|0,h=u[d>>2]|0,h)A=h,c=d;else break;u[c>>2]=0}else le=u[a+8>>2]|0,u[le+12>>2]=A,u[A+8>>2]=le;while(!1);if(!_)break;c=u[a+28>>2]|0,h=23732+(c<<2)|0;do if((u[h>>2]|0)!=(a|0)){if(le=_+16|0,u[((u[le>>2]|0)==(a|0)?le:_+20|0)>>2]=A,!A)break r}else{if(u[h>>2]=A,A|0)break;u[5858]=u[5858]&~(1<<c);break r}while(!1);if(u[A+24>>2]=_,c=a+16|0,h=u[c>>2]|0,h|0&&(u[A+16>>2]=h,u[h+24>>2]=A),c=u[c+4>>2]|0,!c)break;u[A+20>>2]=c,u[c+24>>2]=A}while(!1);a=a+m|0,d=m+w|0}else d=w;if(a=a+4|0,u[a>>2]=u[a>>2]&-2,u[k+4>>2]=d|1,u[k+d>>2]=d,a=d>>>3,d>>>0<256){c=23468+(a<<1<<2)|0,A=u[5857]|0,a=1<<a,A&a?(A=c+8|0,a=u[A>>2]|0):(u[5857]=A|a,a=c,A=c+8|0),u[A>>2]=k,u[a+12>>2]=k,u[k+8>>2]=a,u[k+12>>2]=c;break}a=d>>>8;do if(!a)h=0;else{if(d>>>0>16777215){h=31;break}_e=(a+1048320|0)>>>16&8,le=a<<_e,fe=(le+520192|0)>>>16&4,le=le<<fe,h=(le+245760|0)>>>16&2,h=14-(fe|_e|h)+(le<<h>>>15)|0,h=d>>>(h+7|0)&1|h<<1}while(!1);if(a=23732+(h<<2)|0,u[k+28>>2]=h,A=k+16|0,u[A+4>>2]=0,u[A>>2]=0,A=u[5858]|0,c=1<<h,!(A&c)){u[5858]=A|c,u[a>>2]=k,u[k+24>>2]=a,u[k+12>>2]=k,u[k+8>>2]=k;break}a=u[a>>2]|0;r:do if((u[a+4>>2]&-8|0)!=(d|0)){for(h=d<<((h|0)==31?0:25-(h>>>1)|0);c=a+16+(h>>>31<<2)|0,A=u[c>>2]|0,!!A;)if((u[A+4>>2]&-8|0)==(d|0)){a=A;break r}else h=h<<1,a=A;u[c>>2]=k,u[k+24>>2]=a,u[k+12>>2]=k,u[k+8>>2]=k;break t}while(!1);_e=a+8|0,le=u[_e>>2]|0,u[le+12>>2]=k,u[_e>>2]=k,u[k+8>>2]=le,u[k+12>>2]=a,u[k+24>>2]=0}while(!1);return le=N+8|0,L=We,le|0}for(a=23876;A=u[a>>2]|0,!(A>>>0<=S>>>0&&(le=A+(u[a+4>>2]|0)|0,le>>>0>S>>>0));)a=u[a+8>>2]|0;d=le+-47|0,A=d+8|0,A=d+(A&7|0?0-A&7:0)|0,d=S+16|0,A=A>>>0<d>>>0?S:A,a=A+8|0,c=m+-40|0,fe=_+8|0,fe=fe&7|0?0-fe&7:0,_e=_+fe|0,fe=c-fe|0,u[5863]=_e,u[5860]=fe,u[_e+4>>2]=fe|1,u[_+c+4>>2]=40,u[5864]=u[5979],c=A+4|0,u[c>>2]=27,u[a>>2]=u[5969],u[a+4>>2]=u[5970],u[a+8>>2]=u[5971],u[a+12>>2]=u[5972],u[5969]=_,u[5970]=m,u[5972]=0,u[5971]=a,a=A+24|0;do _e=a,a=a+4|0,u[a>>2]=7;while((_e+8|0)>>>0<le>>>0);if((A|0)!=(S|0)){if(_=A-S|0,u[c>>2]=u[c>>2]&-2,u[S+4>>2]=_|1,u[A>>2]=_,a=_>>>3,_>>>0<256){c=23468+(a<<1<<2)|0,A=u[5857]|0,a=1<<a,A&a?(A=c+8|0,a=u[A>>2]|0):(u[5857]=A|a,a=c,A=c+8|0),u[A>>2]=S,u[a+12>>2]=S,u[S+8>>2]=a,u[S+12>>2]=c;break}if(a=_>>>8,a?_>>>0>16777215?h=31:(_e=(a+1048320|0)>>>16&8,le=a<<_e,fe=(le+520192|0)>>>16&4,le=le<<fe,h=(le+245760|0)>>>16&2,h=14-(fe|_e|h)+(le<<h>>>15)|0,h=_>>>(h+7|0)&1|h<<1):h=0,c=23732+(h<<2)|0,u[S+28>>2]=h,u[S+20>>2]=0,u[d>>2]=0,a=u[5858]|0,A=1<<h,!(a&A)){u[5858]=a|A,u[c>>2]=S,u[S+24>>2]=c,u[S+12>>2]=S,u[S+8>>2]=S;break}a=u[c>>2]|0;t:do if((u[a+4>>2]&-8|0)!=(_|0)){for(h=_<<((h|0)==31?0:25-(h>>>1)|0);c=a+16+(h>>>31<<2)|0,A=u[c>>2]|0,!!A;)if((u[A+4>>2]&-8|0)==(_|0)){a=A;break t}else h=h<<1,a=A;u[c>>2]=S,u[S+24>>2]=a,u[S+12>>2]=S,u[S+8>>2]=S;break e}while(!1);_e=a+8|0,le=u[_e>>2]|0,u[le+12>>2]=S,u[_e>>2]=S,u[S+8>>2]=le,u[S+12>>2]=a,u[S+24>>2]=0}}else le=u[5861]|0,(le|0)==0|_>>>0<le>>>0&&(u[5861]=_),u[5969]=_,u[5970]=m,u[5972]=0,u[5866]=u[5975],u[5865]=-1,u[5870]=23468,u[5869]=23468,u[5872]=23476,u[5871]=23476,u[5874]=23484,u[5873]=23484,u[5876]=23492,u[5875]=23492,u[5878]=23500,u[5877]=23500,u[5880]=23508,u[5879]=23508,u[5882]=23516,u[5881]=23516,u[5884]=23524,u[5883]=23524,u[5886]=23532,u[5885]=23532,u[5888]=23540,u[5887]=23540,u[5890]=23548,u[5889]=23548,u[5892]=23556,u[5891]=23556,u[5894]=23564,u[5893]=23564,u[5896]=23572,u[5895]=23572,u[5898]=23580,u[5897]=23580,u[5900]=23588,u[5899]=23588,u[5902]=23596,u[5901]=23596,u[5904]=23604,u[5903]=23604,u[5906]=23612,u[5905]=23612,u[5908]=23620,u[5907]=23620,u[5910]=23628,u[5909]=23628,u[5912]=23636,u[5911]=23636,u[5914]=23644,u[5913]=23644,u[5916]=23652,u[5915]=23652,u[5918]=23660,u[5917]=23660,u[5920]=23668,u[5919]=23668,u[5922]=23676,u[5921]=23676,u[5924]=23684,u[5923]=23684,u[5926]=23692,u[5925]=23692,u[5928]=23700,u[5927]=23700,u[5930]=23708,u[5929]=23708,u[5932]=23716,u[5931]=23716,le=m+-40|0,fe=_+8|0,fe=fe&7|0?0-fe&7:0,_e=_+fe|0,fe=le-fe|0,u[5863]=_e,u[5860]=fe,u[_e+4>>2]=fe|1,u[_+le+4>>2]=40,u[5864]=u[5979];while(!1);if(a=u[5860]|0,a>>>0>V>>>0)return fe=a-V|0,u[5860]=fe,le=u[5863]|0,_e=le+V|0,u[5863]=_e,u[_e+4>>2]=fe|1,u[le+4>>2]=V|3,le=le+8|0,L=We,le|0}return le=Ri()|0,u[le>>2]=12,le=0,L=We,le|0}function ht(A){A=A|0;var a=0,c=0,h=0,d=0,_=0,m=0,w=0,S=0;if(A){c=A+-8|0,d=u[5861]|0,A=u[A+-4>>2]|0,a=A&-8,S=c+a|0;do if(A&1)w=c,m=c;else{if(h=u[c>>2]|0,!(A&3)||(m=c+(0-h)|0,_=h+a|0,m>>>0<d>>>0))return;if((u[5862]|0)==(m|0)){if(A=S+4|0,a=u[A>>2]|0,(a&3|0)!=3){w=m,a=_;break}u[5859]=_,u[A>>2]=a&-2,u[m+4>>2]=_|1,u[m+_>>2]=_;return}if(c=h>>>3,h>>>0<256)if(A=u[m+8>>2]|0,a=u[m+12>>2]|0,(a|0)==(A|0)){u[5857]=u[5857]&~(1<<c),w=m,a=_;break}else{u[A+12>>2]=a,u[a+8>>2]=A,w=m,a=_;break}d=u[m+24>>2]|0,A=u[m+12>>2]|0;do if((A|0)==(m|0)){if(a=m+16|0,c=a+4|0,A=u[c>>2]|0,A)a=c;else if(A=u[a>>2]|0,!A){A=0;break}for(;;)if(h=A+20|0,c=u[h>>2]|0,c)A=c,a=h;else if(h=A+16|0,c=u[h>>2]|0,c)A=c,a=h;else break;u[a>>2]=0}else w=u[m+8>>2]|0,u[w+12>>2]=A,u[A+8>>2]=w;while(!1);if(d){if(a=u[m+28>>2]|0,c=23732+(a<<2)|0,(u[c>>2]|0)==(m|0)){if(u[c>>2]=A,!A){u[5858]=u[5858]&~(1<<a),w=m,a=_;break}}else if(w=d+16|0,u[((u[w>>2]|0)==(m|0)?w:d+20|0)>>2]=A,!A){w=m,a=_;break}u[A+24>>2]=d,a=m+16|0,c=u[a>>2]|0,c|0&&(u[A+16>>2]=c,u[c+24>>2]=A),a=u[a+4>>2]|0,a?(u[A+20>>2]=a,u[a+24>>2]=A,w=m,a=_):(w=m,a=_)}else w=m,a=_}while(!1);if(!(m>>>0>=S>>>0)&&(A=S+4|0,h=u[A>>2]|0,!!(h&1))){if(h&2)u[A>>2]=h&-2,u[w+4>>2]=a|1,u[m+a>>2]=a,d=a;else{if((u[5863]|0)==(S|0)){if(S=(u[5860]|0)+a|0,u[5860]=S,u[5863]=w,u[w+4>>2]=S|1,(w|0)!=(u[5862]|0))return;u[5862]=0,u[5859]=0;return}if((u[5862]|0)==(S|0)){S=(u[5859]|0)+a|0,u[5859]=S,u[5862]=m,u[w+4>>2]=S|1,u[m+S>>2]=S;return}d=(h&-8)+a|0,c=h>>>3;do if(h>>>0<256)if(a=u[S+8>>2]|0,A=u[S+12>>2]|0,(A|0)==(a|0)){u[5857]=u[5857]&~(1<<c);break}else{u[a+12>>2]=A,u[A+8>>2]=a;break}else{_=u[S+24>>2]|0,A=u[S+12>>2]|0;do if((A|0)==(S|0)){if(a=S+16|0,c=a+4|0,A=u[c>>2]|0,A)a=c;else if(A=u[a>>2]|0,!A){c=0;break}for(;;)if(h=A+20|0,c=u[h>>2]|0,c)A=c,a=h;else if(h=A+16|0,c=u[h>>2]|0,c)A=c,a=h;else break;u[a>>2]=0,c=A}else c=u[S+8>>2]|0,u[c+12>>2]=A,u[A+8>>2]=c,c=A;while(!1);if(_|0){if(A=u[S+28>>2]|0,a=23732+(A<<2)|0,(u[a>>2]|0)==(S|0)){if(u[a>>2]=c,!c){u[5858]=u[5858]&~(1<<A);break}}else if(h=_+16|0,u[((u[h>>2]|0)==(S|0)?h:_+20|0)>>2]=c,!c)break;u[c+24>>2]=_,A=S+16|0,a=u[A>>2]|0,a|0&&(u[c+16>>2]=a,u[a+24>>2]=c),A=u[A+4>>2]|0,A|0&&(u[c+20>>2]=A,u[A+24>>2]=c)}}while(!1);if(u[w+4>>2]=d|1,u[m+d>>2]=d,(w|0)==(u[5862]|0)){u[5859]=d;return}}if(A=d>>>3,d>>>0<256){c=23468+(A<<1<<2)|0,a=u[5857]|0,A=1<<A,a&A?(a=c+8|0,A=u[a>>2]|0):(u[5857]=a|A,A=c,a=c+8|0),u[a>>2]=w,u[A+12>>2]=w,u[w+8>>2]=A,u[w+12>>2]=c;return}A=d>>>8,A?d>>>0>16777215?h=31:(m=(A+1048320|0)>>>16&8,S=A<<m,_=(S+520192|0)>>>16&4,S=S<<_,h=(S+245760|0)>>>16&2,h=14-(_|m|h)+(S<<h>>>15)|0,h=d>>>(h+7|0)&1|h<<1):h=0,A=23732+(h<<2)|0,u[w+28>>2]=h,u[w+20>>2]=0,u[w+16>>2]=0,a=u[5858]|0,c=1<<h;e:do if(!(a&c))u[5858]=a|c,u[A>>2]=w,u[w+24>>2]=A,u[w+12>>2]=w,u[w+8>>2]=w;else{A=u[A>>2]|0;t:do if((u[A+4>>2]&-8|0)!=(d|0)){for(h=d<<((h|0)==31?0:25-(h>>>1)|0);c=A+16+(h>>>31<<2)|0,a=u[c>>2]|0,!!a;)if((u[a+4>>2]&-8|0)==(d|0)){A=a;break t}else h=h<<1,A=a;u[c>>2]=w,u[w+24>>2]=A,u[w+12>>2]=w,u[w+8>>2]=w;break e}while(!1);m=A+8|0,S=u[m>>2]|0,u[S+12>>2]=w,u[m>>2]=w,u[w+8>>2]=S,u[w+12>>2]=A,u[w+24>>2]=0}while(!1);if(S=(u[5865]|0)+-1|0,u[5865]=S,!(S|0)){for(A=23884;A=u[A>>2]|0,A;)A=A+8|0;u[5865]=-1}}}}function Cr(A,a){A=A|0,a=a|0;var c=0;return A?(c=or(a,A)|0,(a|A)>>>0>65535&&(c=((c>>>0)/(A>>>0)|0|0)==(a|0)?c:-1)):c=0,A=Tr(c)|0,!A||!(u[A+-4>>2]&3)||yn(A|0,0,c|0)|0,A|0}function Dt(A,a,c,h){return A=A|0,a=a|0,c=c|0,h=h|0,c=A+c>>>0,lt(a+h+(c>>>0<A>>>0|0)>>>0|0),c|0|0}function Lr(A,a,c,h){return A=A|0,a=a|0,c=c|0,h=h|0,h=a-h-(c>>>0>A>>>0|0)>>>0,lt(h|0),A-c>>>0|0|0}function Iu(A){return A=A|0,(A?31-(pr(A^A-1)|0)|0:32)|0}function ii(A,a,c,h,d){A=A|0,a=a|0,c=c|0,h=h|0,d=d|0;var _=0,m=0,w=0,S=0,k=0,N=0,V=0,Z=0,J=0,$=0;if(N=A,S=a,k=S,m=c,Z=h,w=Z,!k)return _=(d|0)!=0,w?_?(u[d>>2]=A|0,u[d+4>>2]=a&0,Z=0,d=0,lt(Z|0),d|0):(Z=0,d=0,lt(Z|0),d|0):(_&&(u[d>>2]=(N>>>0)%(m>>>0),u[d+4>>2]=0),Z=0,d=(N>>>0)/(m>>>0)>>>0,lt(Z|0),d|0);_=(w|0)==0;do if(m){if(!_){if(_=(pr(w|0)|0)-(pr(k|0)|0)|0,_>>>0<=31){V=_+1|0,w=31-_|0,a=_-31>>31,m=V,A=N>>>(V>>>0)&a|k<<w,a=k>>>(V>>>0)&a,_=0,w=N<<w;break}return d?(u[d>>2]=A|0,u[d+4>>2]=S|a&0,Z=0,d=0,lt(Z|0),d|0):(Z=0,d=0,lt(Z|0),d|0)}if(_=m-1|0,_&m|0){w=(pr(m|0)|0)+33-(pr(k|0)|0)|0,$=64-w|0,V=32-w|0,S=V>>31,J=w-32|0,a=J>>31,m=w,A=V-1>>31&k>>>(J>>>0)|(k<<V|N>>>(w>>>0))&a,a=a&k>>>(w>>>0),_=N<<$&S,w=(k<<$|N>>>(J>>>0))&S|N<<V&w-33>>31;break}return d|0&&(u[d>>2]=_&N,u[d+4>>2]=0),(m|0)==1?(J=S|a&0,$=A|0|0,lt(J|0),$|0):($=Iu(m|0)|0,J=k>>>($>>>0)|0,$=k<<32-$|N>>>($>>>0)|0,lt(J|0),$|0)}else{if(_)return d|0&&(u[d>>2]=(k>>>0)%(m>>>0),u[d+4>>2]=0),J=0,$=(k>>>0)/(m>>>0)>>>0,lt(J|0),$|0;if(!N)return d|0&&(u[d>>2]=0,u[d+4>>2]=(k>>>0)%(w>>>0)),J=0,$=(k>>>0)/(w>>>0)>>>0,lt(J|0),$|0;if(_=w-1|0,!(_&w))return d|0&&(u[d>>2]=A|0,u[d+4>>2]=_&k|a&0),J=0,$=k>>>((Iu(w|0)|0)>>>0),lt(J|0),$|0;if(_=(pr(w|0)|0)-(pr(k|0)|0)|0,_>>>0<=30){a=_+1|0,w=31-_|0,m=a,A=k<<w|N>>>(a>>>0),a=k>>>(a>>>0),_=0,w=N<<w;break}return d?(u[d>>2]=A|0,u[d+4>>2]=S|a&0,J=0,$=0,lt(J|0),$|0):(J=0,$=0,lt(J|0),$|0)}while(!1);if(!m)k=w,S=0,w=0;else{V=c|0|0,N=Z|h&0,k=Dt(V|0,N|0,-1,-1)|0,c=z()|0,S=w,w=0;do h=S,S=_>>>31|S<<1,_=w|_<<1,h=A<<1|h>>>31|0,Z=A>>>31|a<<1|0,Lr(k|0,c|0,h|0,Z|0)|0,$=z()|0,J=$>>31|(($|0)<0?-1:0)<<1,w=J&1,A=Lr(h|0,Z|0,J&V|0,((($|0)<0?-1:0)>>31|(($|0)<0?-1:0)<<1)&N|0)|0,a=z()|0,m=m-1|0;while(m|0);k=S,S=0}return m=0,d|0&&(u[d>>2]=A,u[d+4>>2]=a),J=(_|0)>>>31|(k|m)<<1|(m<<1|_>>>31)&0|S,$=(_<<1|0)&-2|w,lt(J|0),$|0}function Cn(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var d=0,_=0,m=0,w=0,S=0,k=0;return k=a>>31|((a|0)<0?-1:0)<<1,S=((a|0)<0?-1:0)>>31|((a|0)<0?-1:0)<<1,_=h>>31|((h|0)<0?-1:0)<<1,d=((h|0)<0?-1:0)>>31|((h|0)<0?-1:0)<<1,w=Lr(k^A|0,S^a|0,k|0,S|0)|0,m=z()|0,A=_^k,a=d^S,Lr((ii(w,m,Lr(_^c|0,d^h|0,_|0,d|0)|0,z()|0,0)|0)^A|0,(z()|0)^a|0,A|0,a|0)|0}function bs(A,a){A=A|0,a=a|0;var c=0,h=0,d=0,_=0;return _=A&65535,d=a&65535,c=or(d,_)|0,h=A>>>16,A=(c>>>16)+(or(d,h)|0)|0,d=a>>>16,a=or(d,_)|0,lt((A>>>16)+(or(d,h)|0)+(((A&65535)+a|0)>>>16)|0),A+a<<16|c&65535|0|0}function Er(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var d=0,_=0;return d=A,_=c,c=bs(d,_)|0,A=z()|0,lt((or(a,_)|0)+(or(h,d)|0)+A|A&0|0),c|0|0|0}function Cs(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var d=0,_=0,m=0,w=0,S=0,k=0;return d=L,L=L+16|0,w=d|0,m=a>>31|((a|0)<0?-1:0)<<1,_=((a|0)<0?-1:0)>>31|((a|0)<0?-1:0)<<1,k=h>>31|((h|0)<0?-1:0)<<1,S=((h|0)<0?-1:0)>>31|((h|0)<0?-1:0)<<1,A=Lr(m^A|0,_^a|0,m|0,_|0)|0,a=z()|0,ii(A,a,Lr(k^c|0,S^h|0,k|0,S|0)|0,z()|0,w)|0,h=Lr(u[w>>2]^m|0,u[w+4>>2]^_|0,m|0,_|0)|0,c=z()|0,L=d,lt(c|0),h|0}function Rn(A,a,c,h){A=A|0,a=a|0,c=c|0,h=h|0;var d=0,_=0;return _=L,L=L+16|0,d=_|0,ii(A,a,c,h,d)|0,L=_,lt(u[d+4>>2]|0),u[d>>2]|0|0}function si(A,a,c){return A=A|0,a=a|0,c=c|0,(c|0)<32?(lt(a>>c|0),A>>>c|(a&(1<<c)-1)<<32-c):(lt(((a|0)<0?-1:0)|0),a>>c-32|0)}function Ce(A,a,c){return A=A|0,a=a|0,c=c|0,(c|0)<32?(lt(a>>>c|0),A>>>c|(a&(1<<c)-1)<<32-c):(lt(0),a>>>c-32|0)}function xe(A,a,c){return A=A|0,a=a|0,c=c|0,(c|0)<32?(lt(a<<c|(A&(1<<c)-1<<32-c)>>>32-c|0),A<<c):(lt(A<<c-32|0),0)}function oi(A,a){return A=+A,a=+a,A!=A?+a:a!=a?+A:+cn(+A,+a)}function Rr(A,a){return A=+A,a=+a,A!=A?+a:a!=a?+A:+ti(+A,+a)}function Mr(A){return A=+A,A>=0?+sr(A+.5):+Ir(A-.5)}function Hn(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0,_=0;if((c|0)>=8192)return Ao(A|0,a|0,c|0)|0,A|0;if(_=A|0,d=A+c|0,(A&3)==(a&3)){for(;A&3;){if(!c)return _|0;ft[A>>0]=ft[a>>0]|0,A=A+1|0,a=a+1|0,c=c-1|0}for(c=d&-4|0,h=c-64|0;(A|0)<=(h|0);)u[A>>2]=u[a>>2],u[A+4>>2]=u[a+4>>2],u[A+8>>2]=u[a+8>>2],u[A+12>>2]=u[a+12>>2],u[A+16>>2]=u[a+16>>2],u[A+20>>2]=u[a+20>>2],u[A+24>>2]=u[a+24>>2],u[A+28>>2]=u[a+28>>2],u[A+32>>2]=u[a+32>>2],u[A+36>>2]=u[a+36>>2],u[A+40>>2]=u[a+40>>2],u[A+44>>2]=u[a+44>>2],u[A+48>>2]=u[a+48>>2],u[A+52>>2]=u[a+52>>2],u[A+56>>2]=u[a+56>>2],u[A+60>>2]=u[a+60>>2],A=A+64|0,a=a+64|0;for(;(A|0)<(c|0);)u[A>>2]=u[a>>2],A=A+4|0,a=a+4|0}else for(c=d-4|0;(A|0)<(c|0);)ft[A>>0]=ft[a>>0]|0,ft[A+1>>0]=ft[a+1>>0]|0,ft[A+2>>0]=ft[a+2>>0]|0,ft[A+3>>0]=ft[a+3>>0]|0,A=A+4|0,a=a+4|0;for(;(A|0)<(d|0);)ft[A>>0]=ft[a>>0]|0,A=A+1|0,a=a+1|0;return _|0}function yn(A,a,c){A=A|0,a=a|0,c=c|0;var h=0,d=0,_=0,m=0;if(_=A+c|0,a=a&255,(c|0)>=67){for(;A&3;)ft[A>>0]=a,A=A+1|0;for(h=_&-4|0,m=a|a<<8|a<<16|a<<24,d=h-64|0;(A|0)<=(d|0);)u[A>>2]=m,u[A+4>>2]=m,u[A+8>>2]=m,u[A+12>>2]=m,u[A+16>>2]=m,u[A+20>>2]=m,u[A+24>>2]=m,u[A+28>>2]=m,u[A+32>>2]=m,u[A+36>>2]=m,u[A+40>>2]=m,u[A+44>>2]=m,u[A+48>>2]=m,u[A+52>>2]=m,u[A+56>>2]=m,u[A+60>>2]=m,A=A+64|0;for(;(A|0)<(h|0);)u[A>>2]=m,A=A+4|0}for(;(A|0)<(_|0);)ft[A>>0]=a,A=A+1|0;return _-c|0}function Qr(A){return A=+A,A>=0?+sr(A+.5):+Ir(A-.5)}function Pn(A){A=A|0;var a=0,c=0,h=0;return h=ds()|0,c=u[jt>>2]|0,a=c+A|0,(A|0)>0&(a|0)<(c|0)|(a|0)<0?(vi(a|0)|0,rn(12),-1):(a|0)>(h|0)&&!(yi(a|0)|0)?(rn(12),-1):(u[jt>>2]=a,c|0)}return{___divdi3:Cn,___muldi3:Er,___remdi3:Cs,___uremdi3:Rn,_areNeighborCells:Yf,_bitshift64Ashr:si,_bitshift64Lshr:Ce,_bitshift64Shl:xe,_calloc:Cr,_cellAreaKm2:XA,_cellAreaM2:xo,_cellAreaRads2:bi,_cellToBoundary:Si,_cellToCenterChild:So,_cellToChildPos:pu,_cellToChildren:s0,_cellToChildrenSize:Ta,_cellToLatLng:bo,_cellToLocalIj:bu,_cellToParent:FA,_cellToVertex:$r,_cellToVertexes:Ra,_cellsToDirectedEdge:Kf,_cellsToLinkedMultiPolygon:_r,_childPosToCell:_u,_compactCells:o0,_destroyLinkedMultiPolygon:YA,_directedEdgeToBoundary:va,_directedEdgeToCells:Gf,_edgeLengthKm:Su,_edgeLengthM:Sa,_edgeLengthRads:$A,_emscripten_replace_memory:ri,_free:ht,_getBaseCellNumber:fu,_getDirectedEdgeDestination:MA,_getDirectedEdgeOrigin:Zf,_getHexagonAreaAvgKm2:vu,_getHexagonAreaAvgM2:wu,_getHexagonEdgeLengthAvgKm:Tu,_getHexagonEdgeLengthAvgM:jA,_getIcosahedronFaces:VA,_getNumCells:WA,_getPentagons:Co,_getRes0Cells:ou,_getResolution:i0,_greatCircleDistanceKm:Po,_greatCircleDistanceM:bn,_greatCircleDistanceRads:u0,_gridDisk:wi,_gridDiskDistances:ma,_gridDistance:Ru,_gridPathCells:qA,_gridPathCellsSize:Ci,_gridRingUnsafe:Me,_i64Add:Dt,_i64Subtract:Lr,_isPentagon:Gt,_isResClassIII:gu,_isValidCell:IA,_isValidDirectedEdge:qf,_isValidVertex:tl,_latLngToCell:BA,_llvm_maxnum_f64:oi,_llvm_minnum_f64:Rr,_llvm_round_f64:Mr,_localIjToCell:Cu,_malloc:Tr,_maxFaceCount:l0,_maxGridDiskSize:_s,_maxPolygonToCellsSize:Qe,_memcpy:Hn,_memset:yn,_originToDirectedEdges:Jf,_pentagonCount:zA,_polygonToCells:cr,_readInt64AsDoubleFromPointer:JA,_res0CellCount:Qf,_round:Qr,_sbrk:Pn,_sizeOfCellBoundary:nr,_sizeOfCoordIJ:Nu,_sizeOfGeoLoop:GA,_sizeOfGeoPolygon:Ca,_sizeOfH3Index:xu,_sizeOfLatLng:Mu,_sizeOfLinkedGeoPolygon:No,_uncompactCells:hu,_uncompactCellsSize:du,_vertexToLatLng:el,establishStackSpace:ps,stackAlloc:In,stackRestore:gs,stackSave:CA}}(Gn,Jn,it);e.___divdi3=Oe.___divdi3,e.___muldi3=Oe.___muldi3,e.___remdi3=Oe.___remdi3,e.___uremdi3=Oe.___uremdi3,e._areNeighborCells=Oe._areNeighborCells,e._bitshift64Ashr=Oe._bitshift64Ashr,e._bitshift64Lshr=Oe._bitshift64Lshr,e._bitshift64Shl=Oe._bitshift64Shl,e._calloc=Oe._calloc,e._cellAreaKm2=Oe._cellAreaKm2,e._cellAreaM2=Oe._cellAreaM2,e._cellAreaRads2=Oe._cellAreaRads2,e._cellToBoundary=Oe._cellToBoundary,e._cellToCenterChild=Oe._cellToCenterChild,e._cellToChildPos=Oe._cellToChildPos,e._cellToChildren=Oe._cellToChildren,e._cellToChildrenSize=Oe._cellToChildrenSize,e._cellToLatLng=Oe._cellToLatLng,e._cellToLocalIj=Oe._cellToLocalIj,e._cellToParent=Oe._cellToParent,e._cellToVertex=Oe._cellToVertex,e._cellToVertexes=Oe._cellToVertexes,e._cellsToDirectedEdge=Oe._cellsToDirectedEdge,e._cellsToLinkedMultiPolygon=Oe._cellsToLinkedMultiPolygon,e._childPosToCell=Oe._childPosToCell,e._compactCells=Oe._compactCells,e._destroyLinkedMultiPolygon=Oe._destroyLinkedMultiPolygon,e._directedEdgeToBoundary=Oe._directedEdgeToBoundary,e._directedEdgeToCells=Oe._directedEdgeToCells,e._edgeLengthKm=Oe._edgeLengthKm,e._edgeLengthM=Oe._edgeLengthM,e._edgeLengthRads=Oe._edgeLengthRads;var pa=e._emscripten_replace_memory=Oe._emscripten_replace_memory;e._free=Oe._free,e._getBaseCellNumber=Oe._getBaseCellNumber,e._getDirectedEdgeDestination=Oe._getDirectedEdgeDestination,e._getDirectedEdgeOrigin=Oe._getDirectedEdgeOrigin,e._getHexagonAreaAvgKm2=Oe._getHexagonAreaAvgKm2,e._getHexagonAreaAvgM2=Oe._getHexagonAreaAvgM2,e._getHexagonEdgeLengthAvgKm=Oe._getHexagonEdgeLengthAvgKm,e._getHexagonEdgeLengthAvgM=Oe._getHexagonEdgeLengthAvgM,e._getIcosahedronFaces=Oe._getIcosahedronFaces,e._getNumCells=Oe._getNumCells,e._getPentagons=Oe._getPentagons,e._getRes0Cells=Oe._getRes0Cells,e._getResolution=Oe._getResolution,e._greatCircleDistanceKm=Oe._greatCircleDistanceKm,e._greatCircleDistanceM=Oe._greatCircleDistanceM,e._greatCircleDistanceRads=Oe._greatCircleDistanceRads,e._gridDisk=Oe._gridDisk,e._gridDiskDistances=Oe._gridDiskDistances,e._gridDistance=Oe._gridDistance,e._gridPathCells=Oe._gridPathCells,e._gridPathCellsSize=Oe._gridPathCellsSize,e._gridRingUnsafe=Oe._gridRingUnsafe,e._i64Add=Oe._i64Add,e._i64Subtract=Oe._i64Subtract,e._isPentagon=Oe._isPentagon,e._isResClassIII=Oe._isResClassIII,e._isValidCell=Oe._isValidCell,e._isValidDirectedEdge=Oe._isValidDirectedEdge,e._isValidVertex=Oe._isValidVertex,e._latLngToCell=Oe._latLngToCell,e._llvm_maxnum_f64=Oe._llvm_maxnum_f64,e._llvm_minnum_f64=Oe._llvm_minnum_f64,e._llvm_round_f64=Oe._llvm_round_f64,e._localIjToCell=Oe._localIjToCell,e._malloc=Oe._malloc,e._maxFaceCount=Oe._maxFaceCount,e._maxGridDiskSize=Oe._maxGridDiskSize,e._maxPolygonToCellsSize=Oe._maxPolygonToCellsSize,e._memcpy=Oe._memcpy,e._memset=Oe._memset,e._originToDirectedEdges=Oe._originToDirectedEdges,e._pentagonCount=Oe._pentagonCount,e._polygonToCells=Oe._polygonToCells,e._readInt64AsDoubleFromPointer=Oe._readInt64AsDoubleFromPointer,e._res0CellCount=Oe._res0CellCount,e._round=Oe._round,e._sbrk=Oe._sbrk,e._sizeOfCellBoundary=Oe._sizeOfCellBoundary,e._sizeOfCoordIJ=Oe._sizeOfCoordIJ,e._sizeOfGeoLoop=Oe._sizeOfGeoLoop,e._sizeOfGeoPolygon=Oe._sizeOfGeoPolygon,e._sizeOfH3Index=Oe._sizeOfH3Index,e._sizeOfLatLng=Oe._sizeOfLatLng,e._sizeOfLinkedGeoPolygon=Oe._sizeOfLinkedGeoPolygon,e._uncompactCells=Oe._uncompactCells,e._uncompactCellsSize=Oe._uncompactCellsSize,e._vertexToLatLng=Oe._vertexToLatLng,e.establishStackSpace=Oe.establishStackSpace;var io=e.stackAlloc=Oe.stackAlloc,_a=e.stackRestore=Oe.stackRestore,so=e.stackSave=Oe.stackSave;if(e.asm=Oe,e.cwrap=ce,e.setValue=U,e.getValue=W,Kt){to(Kt)||(Kt=o(Kt));{as();var Qi=function(he){he.byteLength&&(he=new Uint8Array(he)),_t.set(he,M),e.memoryInitializerRequest&&delete e.memoryInitializerRequest.response,Nn()},oo=function(){f(Kt,Qi,function(){throw"could not load memory initializer "+Kt})},mi=$i(Kt);if(mi)Qi(mi.buffer);else if(e.memoryInitializerRequest){var ei=function(){var he=e.memoryInitializerRequest,Re=he.response;if(he.status!==200&&he.status!==0){var He=$i(e.memoryInitializerRequestURL);if(He)Re=He.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+he.status+", retrying "+Kt),oo();return}}Qi(Re)};e.memoryInitializerRequest.response?setTimeout(ei,0):e.memoryInitializerRequest.addEventListener("load",ei)}else oo()}}var Dn;Zn=function he(){Dn||ao(),Dn||(Zn=he)};function ao(he){if(xr>0||(Ye(),xr>0))return;function Re(){Dn||(Dn=!0,!j&&(Ke(),et(),e.onRuntimeInitialized&&e.onRuntimeInitialized(),At()))}e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),Re()},1)):Re()}e.run=ao;function en(he){throw e.onAbort&&e.onAbort(he),he+="",p(he),y(he),j=!0,"abort("+he+"). Build with -s ASSERTIONS=1 for more info."}if(e.abort=en,e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return ao(),t}(typeof Lt=="object"?Lt:{}),It="number",Tt=It,Cl=It,Ct=It,Rt=It,An=It,rt=It,$8=[["sizeOfH3Index",It],["sizeOfLatLng",It],["sizeOfCellBoundary",It],["sizeOfGeoLoop",It],["sizeOfGeoPolygon",It],["sizeOfLinkedGeoPolygon",It],["sizeOfCoordIJ",It],["readInt64AsDoubleFromPointer",It],["isValidCell",Cl,[Ct,Rt]],["latLngToCell",Tt,[It,It,An,rt]],["cellToLatLng",Tt,[Ct,Rt,rt]],["cellToBoundary",Tt,[Ct,Rt,rt]],["maxGridDiskSize",Tt,[It,rt]],["gridDisk",Tt,[Ct,Rt,It,rt]],["gridDiskDistances",Tt,[Ct,Rt,It,rt,rt]],["gridRingUnsafe",Tt,[Ct,Rt,It,rt]],["maxPolygonToCellsSize",Tt,[rt,An,It,rt]],["polygonToCells",Tt,[rt,An,It,rt]],["cellsToLinkedMultiPolygon",Tt,[rt,It,rt]],["destroyLinkedMultiPolygon",null,[rt]],["compactCells",Tt,[rt,rt,It,It]],["uncompactCells",Tt,[rt,It,It,rt,It,An]],["uncompactCellsSize",Tt,[rt,It,It,An,rt]],["isPentagon",Cl,[Ct,Rt]],["isResClassIII",Cl,[Ct,Rt]],["getBaseCellNumber",It,[Ct,Rt]],["getResolution",It,[Ct,Rt]],["maxFaceCount",Tt,[Ct,Rt,rt]],["getIcosahedronFaces",Tt,[Ct,Rt,rt]],["cellToParent",Tt,[Ct,Rt,An,rt]],["cellToChildren",Tt,[Ct,Rt,An,rt]],["cellToCenterChild",Tt,[Ct,Rt,An,rt]],["cellToChildrenSize",Tt,[Ct,Rt,An,rt]],["cellToChildPos",Tt,[Ct,Rt,An,rt]],["childPosToCell",Tt,[It,It,Ct,Rt,An,rt]],["areNeighborCells",Tt,[Ct,Rt,Ct,Rt,rt]],["cellsToDirectedEdge",Tt,[Ct,Rt,Ct,Rt,rt]],["getDirectedEdgeOrigin",Tt,[Ct,Rt,rt]],["getDirectedEdgeDestination",Tt,[Ct,Rt,rt]],["isValidDirectedEdge",Cl,[Ct,Rt]],["directedEdgeToCells",Tt,[Ct,Rt,rt]],["originToDirectedEdges",Tt,[Ct,Rt,rt]],["directedEdgeToBoundary",Tt,[Ct,Rt,rt]],["gridDistance",Tt,[Ct,Rt,Ct,Rt,rt]],["gridPathCells",Tt,[Ct,Rt,Ct,Rt,rt]],["gridPathCellsSize",Tt,[Ct,Rt,Ct,Rt,rt]],["cellToLocalIj",Tt,[Ct,Rt,Ct,Rt,It,rt]],["localIjToCell",Tt,[Ct,Rt,rt,It,rt]],["getHexagonAreaAvgM2",Tt,[An,rt]],["getHexagonAreaAvgKm2",Tt,[An,rt]],["getHexagonEdgeLengthAvgM",Tt,[An,rt]],["getHexagonEdgeLengthAvgKm",Tt,[An,rt]],["greatCircleDistanceM",It,[rt,rt]],["greatCircleDistanceKm",It,[rt,rt]],["greatCircleDistanceRads",It,[rt,rt]],["cellAreaM2",Tt,[Ct,Rt,rt]],["cellAreaKm2",Tt,[Ct,Rt,rt]],["cellAreaRads2",Tt,[Ct,Rt,rt]],["edgeLengthM",Tt,[Ct,Rt,rt]],["edgeLengthKm",Tt,[Ct,Rt,rt]],["edgeLengthRads",Tt,[Ct,Rt,rt]],["getNumCells",Tt,[An,rt]],["getRes0Cells",Tt,[rt]],["res0CellCount",It],["getPentagons",Tt,[It,rt]],["pentagonCount",It],["cellToVertex",Tt,[Ct,Rt,It,rt]],["cellToVertexes",Tt,[Ct,Rt,rt]],["vertexToLatLng",Tt,[Ct,Rt,rt]],["isValidVertex",Cl,[Ct,Rt]]],Q8=0,Y8=1,K8=2,Z8=3,Cv=4,q8=5,G8=6,J8=7,eN=8,tN=9,rN=10,nN=11,iN=12,sN=13,oN=14,aN=15,Gr={};Gr[Q8]="Success";Gr[Y8]="The operation failed but a more specific error is not available";Gr[K8]="Argument was outside of acceptable range";Gr[Z8]="Latitude or longitude arguments were outside of acceptable range";Gr[Cv]="Resolution argument was outside of acceptable range";Gr[q8]="Cell argument was not valid";Gr[G8]="Directed edge argument was not valid";Gr[J8]="Undirected edge argument was not valid";Gr[eN]="Vertex argument was not valid";Gr[tN]="Pentagon distortion was encountered";Gr[rN]="Duplicate input";Gr[nN]="Cell arguments were not neighbors";Gr[iN]="Cell arguments had incompatible resolutions";Gr[sN]="Memory allocation failed";Gr[oN]="Bounds of provided memory were insufficient";Gr[aN]="Mode or flags argument was not valid";var Rv=1e3,Pv=1001,kv=1002,Wf={};Wf[Rv]="Unknown unit";Wf[Pv]="Array length out of bounds";Wf[kv]="Got unexpected null value for H3 index";var AN="Unknown error";function xv(t,e,r){var n=r&&"value"in r,i=new Error((t[e]||AN)+" (code: "+e+(n?", value: "+r.value:"")+")");return i.code=e,i}function Mv(t,e){var r=arguments.length===2?{value:e}:{};return xv(Gr,t,r)}function Fg(t,e){var r=arguments.length===2?{value:e}:{};return xv(Wf,t,r)}function Gs(t){if(t!==0)throw Mv(t)}var br={};$8.forEach(function(e){br[e[0]]=Lt.cwrap.apply(Lt,e)});var iA=16,Kl=4,Js=8,Nv=8,gf=br.sizeOfH3Index(),Lg=br.sizeOfLatLng(),lN=br.sizeOfCellBoundary(),uN=br.sizeOfGeoPolygon(),Ul=br.sizeOfGeoLoop();br.sizeOfLinkedGeoPolygon();br.sizeOfCoordIJ();var Lm={m:"m",m2:"m2",km:"km",km2:"km2",rads:"rads",rads2:"rads2"};function Ov(t){if(typeof t!="number"||t<0||t>15||Math.floor(t)!==t)throw Mv(Cv,t);return t}function cN(t){if(!t)throw Fg(kv);return t}var fN=Math.pow(2,32)-1;function hN(t){if(t>fN)throw Fg(Pv,t);return t}var dN=/[^0-9a-fA-F]/;function sa(t){if(Array.isArray(t)&&t.length===2&&Number.isInteger(t[0])&&Number.isInteger(t[1]))return t;if(typeof t!="string"||dN.test(t))return[0,0];var e=parseInt(t.substring(0,t.length-8),iA),r=parseInt(t.substring(t.length-8),iA);return[r,e]}function Um(t){if(t>=0)return t.toString(iA);t=t&2147483647;var e=Dv(8,t.toString(iA)),r=(parseInt(e[0],iA)+8).toString(iA);return e=r+e.substring(1),e}function gN(t,e){return Um(e)+Dv(8,Um(t))}function Dv(t,e){for(var r=t-e.length,n="",i=0;i<r;i++)n+="0";return n=n+e,n}function Bm(t,e,r){for(var n=t.length,i=Lt._calloc(n,Lg),o=r?1:0,f=r?0:1,p=0;p<n*2;p+=2)Lt.HEAPF64.set([t[p/2][o],t[p/2][f]].map(Uv),i/Js+p);return Lt.HEAPU32.set([n,i],e/Kl),e}function pN(t,e){var r=t.length-1,n=Lt._calloc(uN),i=0,o=i+Ul,f=o+Kl;Bm(t[0],n+i,e);var p;if(r>0){p=Lt._calloc(r,Ul);for(var y=0;y<r;y++)Bm(t[y+1],p+Ul*y,e)}return Lt.setValue(n+o,r,"i32"),Lt.setValue(n+f,p,"i32"),n}function _N(t){var e=0,r=e+Ul,n=r+Kl,i=Kl;Lt._free(Lt.getValue(t+e+i,"i8*"));var o=Lt.getValue(t+r,"i32");if(o>0){for(var f=Lt.getValue(t+n,"i32"),p=0;p<o;p++)Lt._free(Lt.getValue(f+Ul*p+i,"i8*"));Lt._free(f)}Lt._free(t)}function Iv(t,e){e===void 0&&(e=0);var r=Lt.getValue(t+gf*e,"i32"),n=Lt.getValue(t+gf*e+Kl,"i32");return n?gN(r,n):null}function mN(t,e){return e===void 0&&(e=0),Lt.getValue(t+Js*e,"double")}function Fv(t){return br.readInt64AsDoubleFromPointer(t)}function yN(t,e){for(var r=[],n=0;n<e;n++){var i=Iv(t,n);i!==null&&r.push(i)}return r}function pf(t){return xN(Lt.getValue(t,"double"))}function vN(t){return[pf(t),pf(t+Js)]}function wN(t){return[pf(t+Js),pf(t)]}function TN(t,e,r){for(var n=Lt.getValue(t,"i32"),i=t+Js,o=[],f=wN,p=0;p<n*2;p+=2)o.push(f(i+Js*p));return o.push(o[0]),o}function EN(t){var e=sa(t),r=e[0],n=e[1];return!!br.isValidCell(r,n)}function SN(t){var e=sa(t),r=e[0],n=e[1];return!!br.isPentagon(r,n)}function Lv(t){var e=sa(t),r=e[0],n=e[1];return br.isValidCell(r,n)?br.getResolution(r,n):-1}function bN(t,e,r){var n=Lt._malloc(Lg);Lt.HEAPF64.set([t,e].map(Uv),n/Js);var i=Lt._malloc(gf);try{return Gs(br.latLngToCell(n,r,i)),cN(Iv(i))}finally{Lt._free(i),Lt._free(n)}}function Xf(t){var e=Lt._malloc(Lg),r=sa(t),n=r[0],i=r[1];try{return Gs(br.cellToLatLng(n,i,e)),vN(e)}finally{Lt._free(e)}}function CN(t,e){var r=Lt._malloc(lN),n=sa(t),i=n[0],o=n[1];try{return Gs(br.cellToBoundary(i,o,r)),TN(r,e,e)}finally{Lt._free(r)}}function RN(t,e,r){if(Ov(e),r=!!r,t.length===0||t[0].length===0)return[];var n=typeof t[0][0]=="number"?[t]:t,i=pN(n,r),o=Lt._malloc(Nv);try{Gs(br.maxPolygonToCellsSize(i,e,0,o));var f=hN(Fv(o)),p=Lt._calloc(f,gf);try{return Gs(br.polygonToCells(i,e,0,p)),yN(p,f)}finally{Lt._free(p)}}finally{Lt._free(o),_N(i)}}function PN(t,e){var r=sa(t),n=r[0],i=r[1],o=sa(e),f=o[0],p=o[1],y=Lt._malloc(Nv);try{return Gs(br.gridDistance(n,i,f,p,y)),Fv(y)}finally{Lt._free(y)}}function kN(t,e){Ov(t);var r=Lt._malloc(Js);try{switch(e){case Lm.m:Gs(br.getHexagonEdgeLengthAvgM(t,r));break;case Lm.km:Gs(br.getHexagonEdgeLengthAvgKm(t,r));break;default:throw Fg(Rv,e)}return mN(r)}finally{Lt._free(r)}}function Uv(t){return t*Math.PI/180}function xN(t){return t*180/Math.PI}function Bv(t,e){e=e===void 0?t[0][0]:e;for(const r of t){const n=r[0]-e;n>180?r[0]-=360:n<-180&&(r[0]+=360)}}function MN(t,e,r){const[n,i]=Xf(t),o=e.length;Bv(e,i);const f=e[0]===e[o-1]?o-1:o;for(let p=0;p<f;p++)e[p][0]=dA(i,e[p][0],r),e[p][1]=dA(n,e[p][1],r)}function NN(t,e,r){const n=t(e,r),[i,o]=Xf(n);return[o,i]}function Vm(t,e=1){const r=CN(t,!0);return e!==1?MN(t,r,e):Bv(r),r}function ON(t){const e=new Float64Array(t.length*2);let r=0;for(const n of t)e[r++]=n[0],e[r++]=n[1];return e}const DN=10;function IN(t,e){let r;return t==null?r=e:typeof t=="object"?r={...t,coverage:e}:r={getHexagon:t,coverage:e},r}const FN={...jf.defaultProps,highPrecision:"auto",coverage:{type:"number",min:0,max:1,value:1},centerHexagon:null,getHexagon:{type:"accessor",value:t=>t.hexagon},extruded:!0};class SA extends xg{initializeState(){SA._checkH3Lib(),this.state={edgeLengthKM:0,resolution:-1}}shouldUpdateState({changeFlags:e}){return this._shouldUseHighPrecision()?e.propsOrDataChanged:e.somethingChanged}updateState({props:e,changeFlags:r}){if(e.highPrecision!==!0&&(r.dataChanged||r.updateTriggersChanged&&r.updateTriggersChanged.getHexagon)){const n=this._calculateH3DataProps();this.setState(n)}this._updateVertices(this.context.viewport)}_calculateH3DataProps(){let e=-1,r=!1,n=!1;const{iterable:i,objectInfo:o}=Vf(this.props.data);for(const f of i){o.index++;const p=this.props.getHexagon(f,o),y=Lv(p);if(e<0){if(e=y,!this.props.highPrecision)break}else if(e!==y){n=!0;break}if(SN(p)){r=!0;break}}return{resolution:e,edgeLengthKM:e>=0?kN(e,"km"):0,hasMultipleRes:n,hasPentagon:r}}_shouldUseHighPrecision(){if(this.props.highPrecision==="auto"){const{resolution:e,hasPentagon:r,hasMultipleRes:n}=this.state,{viewport:i}=this.context;return!!(i!=null&&i.resolution)||n||r||e>=0&&e<=5}return this.props.highPrecision}_updateVertices(e){if(this._shouldUseHighPrecision())return;const{resolution:r,edgeLengthKM:n,centerHex:i}=this.state;if(r<0)return;const o=this.props.centerHexagon||bN(e.latitude,e.longitude,r);if(i===o)return;if(i)try{if(PN(i,o)*n<DN)return}catch{}const{unitsPerMeter:f}=e.distanceScales;let p=Vm(o);const[y,T]=Xf(o),[R,x]=e.projectFlat([T,y]);p=p.map(M=>{const U=e.projectFlat(M);return[(U[0]-R)/f[0],(U[1]-x)/f[1]]}),this.setState({centerHex:o,vertices:p})}renderLayers(){return this._shouldUseHighPrecision()?this._renderPolygonLayer():this._renderColumnLayer()}_getForwardProps(){const{elevationScale:e,material:r,coverage:n,extruded:i,wireframe:o,stroked:f,filled:p,lineWidthUnits:y,lineWidthScale:T,lineWidthMinPixels:R,lineWidthMaxPixels:x,getFillColor:M,getElevation:U,getLineColor:W,getLineWidth:j,transitions:G,updateTriggers:re}=this.props;return{elevationScale:e,extruded:i,coverage:n,wireframe:o,stroked:f,filled:p,lineWidthUnits:y,lineWidthScale:T,lineWidthMinPixels:R,lineWidthMaxPixels:x,material:r,getElevation:U,getFillColor:M,getLineColor:W,getLineWidth:j,transitions:G,updateTriggers:{getFillColor:re.getFillColor,getElevation:re.getElevation,getLineColor:re.getLineColor,getLineWidth:re.getLineWidth}}}_renderPolygonLayer(){const{data:e,getHexagon:r,updateTriggers:n,coverage:i}=this.props,o=this.getSubLayerClass("hexagon-cell-hifi",jf),f=this._getForwardProps();return f.updateTriggers.getPolygon=IN(n.getHexagon,i),new o(f,this.getSubLayerProps({id:"hexagon-cell-hifi",updateTriggers:f.updateTriggers}),{data:e,_normalize:!1,_windingOrder:"CCW",positionFormat:"XY",getPolygon:(p,y)=>{const T=r(p,y);return ON(Vm(T,i))}})}_renderColumnLayer(){const{data:e,getHexagon:r,updateTriggers:n}=this.props,i=this.getSubLayerClass("hexagon-cell",Og),o=this._getForwardProps();return o.updateTriggers.getPosition=n.getHexagon,new i(o,this.getSubLayerProps({id:"hexagon-cell",flatShading:!0,updateTriggers:o.updateTriggers}),{data:e,diskResolution:6,radius:1,vertices:this.state.vertices,getPosition:NN.bind(null,r)})}}SA.defaultProps=FN;SA.layerName="H3HexagonLayer";SA._checkH3Lib=()=>{};const LN=ye.createContext(null);function UN(t,e){const r=Array.isArray(t)?t[0]:t?t.x:0,n=Array.isArray(t)?t[1]:t?t.y:0,i=Array.isArray(e)?e[0]:e?e.x:0,o=Array.isArray(e)?e[1]:e?e.y:0;return r===i&&n===o}function ns(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!ns(t[r],e[r]))return!1;return!0}else if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const i of r)if(!e.hasOwnProperty(i)||!ns(t[i],e[i]))return!1;return!0}return!1}function BN(t){const e=t.clone();return e.pixelsToGLUnits=t.pixelsToGLUnits,e}function zm(t,e){if(!t.getProjection)return;const r=t.getProjection(),n=e.getProjection();ns(r,n)||e.setProjection(r)}function Hm(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function jm(t,e){const r=e.viewState||e;let n=!1;if("zoom"in r){const i=t.zoom;t.zoom=r.zoom,n=n||i!==t.zoom}if("bearing"in r){const i=t.bearing;t.bearing=r.bearing,n=n||i!==t.bearing}if("pitch"in r){const i=t.pitch;t.pitch=r.pitch,n=n||i!==t.pitch}if(r.padding&&!t.isPaddingEqual(r.padding)&&(n=!0,t.padding=r.padding),"longitude"in r&&"latitude"in r){const i=t.center;t.center=new i.constructor(r.longitude,r.latitude),n=n||i!==t.center}return n}const VN=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Wm(t){if(!t)return null;if(typeof t=="string"||("toJS"in t&&(t=t.toJS()),!t.layers))return t;const e={};for(const n of t.layers)e[n.id]=n;const r=t.layers.map(n=>{let i=null;"interactive"in n&&(i=Object.assign({},n),delete i.interactive);const o=e[n.ref];if(o){i=i||Object.assign({},n),delete i.ref;for(const f of VN)f in o&&(i[f]=o[f])}return i||n});return{...t,layers:r}}var Xm={};const $m={version:8,sources:{},layers:[]},Qm={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},Jh={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},Ym={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},zN=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],HN=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class vA{constructor(e,r,n){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=i=>{const o=this.props[Ym[i.type]];o?o(i):i.type==="error"&&console.error(i.error)},this._onPointerEvent=i=>{(i.type==="mousemove"||i.type==="mouseout")&&this._updateHover(i);const o=this.props[Qm[i.type]];o&&(this.props.interactiveLayerIds&&i.type!=="mouseover"&&i.type!=="mouseout"&&(i.features=this._hoveredFeatures||this._queryRenderedFeatures(i.point)),o(i),delete i.features)},this._onCameraEvent=i=>{if(!this._internalUpdate){const o=this.props[Jh[i.type]];o&&o(i)}i.type in this._deferredEvents&&(this._deferredEvents[i.type]=!1)},this._MapClass=e,this.props=r,this._initialize(n)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const r=this.props;this.props=e;const n=this._updateSettings(e,r);n&&this._createShadowTransform(this._map);const i=this._updateSize(e),o=this._updateViewState(e,!0);this._updateStyle(e,r),this._updateStyleComponents(e,r),this._updateHandlers(e,r),(n||i||o&&!this._map.isMoving())&&this.redraw()}static reuse(e,r){const n=vA.savedMaps.pop();if(!n)return null;const i=n.map,o=i.getContainer();for(r.className=o.className;o.childNodes.length>0;)r.appendChild(o.childNodes[0]);i._container=r;const f=i._resizeObserver;f&&(f.disconnect(),f.observe(r)),n.setProps({...e,styleDiffing:!1}),i.resize();const{initialViewState:p}=e;return p&&(p.bounds?i.fitBounds(p.bounds,{...p.fitBoundsOptions,duration:0}):n._updateViewState(p,!1)),i.isStyleLoaded()?i.fire("load"):i.once("styledata",()=>i.fire("load")),i._update(),n}_initialize(e){const{props:r}=this,{mapStyle:n=$m}=r,i={...r,...r.initialViewState,accessToken:r.mapboxAccessToken||jN()||null,container:e,style:Wm(n)},o=i.initialViewState||i.viewState||i;if(Object.assign(i,{center:[o.longitude||0,o.latitude||0],zoom:o.zoom||0,pitch:o.pitch||0,bearing:o.bearing||0}),r.gl){const R=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=R,r.gl)}const f=new this._MapClass(i);o.padding&&f.setPadding(o.padding),r.cursor&&(f.getCanvas().style.cursor=r.cursor),this._createShadowTransform(f);const p=f._render;f._render=R=>{this._inRender=!0,p.call(f,R),this._inRender=!1};const y=f._renderTaskQueue.run;f._renderTaskQueue.run=R=>{y.call(f._renderTaskQueue,R),this._onBeforeRepaint()},f.on("render",()=>this._onAfterRepaint());const T=f.fire;f.fire=this._fireEvent.bind(this,T),f.on("resize",()=>{this._renderTransform.resize(f.transform.width,f.transform.height)}),f.on("styledata",()=>{this._updateStyleComponents(this.props,{}),zm(f.transform,this._renderTransform)}),f.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const R in Qm)f.on(R,this._onPointerEvent);for(const R in Jh)f.on(R,this._onCameraEvent);for(const R in Ym)f.on(R,this._onEvent);this._map=f}recycle(){const r=this.map.getContainer().querySelector("[mapboxgl-children]");r==null||r.remove(),vA.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const r=BN(e.transform);e.painter.transform=r,this._renderTransform=r}_updateSize(e){const{viewState:r}=e;if(r){const n=this._map;if(r.width!==n.transform.width||r.height!==n.transform.height)return n.resize(),!0}return!1}_updateViewState(e,r){if(this._internalUpdate)return!1;const n=this._map,i=this._renderTransform,{zoom:o,pitch:f,bearing:p}=i,y=n.isMoving();y&&(i.cameraElevationReference="sea");const T=jm(i,{...Hm(n.transform),...e});if(y&&(i.cameraElevationReference="ground"),T&&r){const R=this._deferredEvents;R.move=!0,R.zoom||(R.zoom=o!==i.zoom),R.rotate||(R.rotate=p!==i.bearing),R.pitch||(R.pitch=f!==i.pitch)}return y||jm(n.transform,e),T}_updateSettings(e,r){const n=this._map;let i=!1;for(const o of zN)if(o in e&&!ns(e[o],r[o])){i=!0;const f=n[`set${o[0].toUpperCase()}${o.slice(1)}`];f==null||f.call(n,e[o])}return i}_updateStyle(e,r){if(e.cursor!==r.cursor&&(this._map.getCanvas().style.cursor=e.cursor||""),e.mapStyle!==r.mapStyle){const{mapStyle:n=$m,styleDiffing:i=!0}=e,o={diff:i};return"localIdeographFontFamily"in e&&(o.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(Wm(n),o),!0}return!1}_updateStyleComponents(e,r){const n=this._map;let i=!1;return n.isStyleLoaded()&&("light"in e&&n.setLight&&!ns(e.light,r.light)&&(i=!0,n.setLight(e.light)),"fog"in e&&n.setFog&&!ns(e.fog,r.fog)&&(i=!0,n.setFog(e.fog)),"terrain"in e&&n.setTerrain&&!ns(e.terrain,r.terrain)&&(!e.terrain||n.getSource(e.terrain.source))&&(i=!0,n.setTerrain(e.terrain))),i}_updateHandlers(e,r){var n,i;const o=this._map;let f=!1;for(const p of HN){const y=(n=e[p])!==null&&n!==void 0?n:!0,T=(i=r[p])!==null&&i!==void 0?i:!0;ns(y,T)||(f=!0,y?o[p].enable(y):o[p].disable())}return f}_queryRenderedFeatures(e){const r=this._map,n=r.transform,{interactiveLayerIds:i=[]}=this.props;try{return r.transform=this._renderTransform,r.queryRenderedFeatures(e,{layers:i.filter(r.getLayer.bind(r))})}catch{return[]}finally{r.transform=n}}_updateHover(e){var r;const{props:n}=this;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){const o=e.type,f=((r=this._hoveredFeatures)===null||r===void 0?void 0:r.length)>0,p=this._queryRenderedFeatures(e.point),y=p.length>0;!y&&f&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=p,y&&!f&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=o}else this._hoveredFeatures=null}_fireEvent(e,r,n){const i=this._map,o=i.transform,f=typeof r=="string"?r:r.type;return f==="move"&&this._updateViewState(this.props,!1),f in Jh&&(typeof r=="object"&&(r.viewState=Hm(o)),this._map.isMoving())?(i.transform=this._renderTransform,e.call(i,r,n),i.transform=o,i):(e.call(i,r,n),i)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const n in this._deferredEvents)this._deferredEvents[n]&&e.fire(n);this._internalUpdate=!1;const r=this._map.transform;e.transform=this._renderTransform,this._onAfterRepaint=()=>{zm(this._renderTransform,r),e.transform=r}}}vA.savedMaps=[];function jN(){let t=null;if(typeof location<"u"){const e=/access_token=([^&\/]*)/.exec(location.search);t=e&&e[1]}try{t=t||Xm.MapboxAccessToken}catch{}try{t=t||Xm.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return t}const WN=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function XN(t){if(!t)return null;const e=t.map,r={getMap:()=>e,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:n=>{const i=e.transform;e.transform=t.transform;const o=e.project(n);return e.transform=i,o},unproject:n=>{const i=e.transform;e.transform=t.transform;const o=e.unproject(n);return e.transform=i,o},queryTerrainElevation:(n,i)=>{const o=e.transform;e.transform=t.transform;const f=e.queryTerrainElevation(n,i);return e.transform=o,f},queryRenderedFeatures:(n,i)=>{const o=e.transform;e.transform=t.transform;const f=e.queryRenderedFeatures(n,i);return e.transform=o,f}};for(const n of $N(e))!(n in r)&&!WN.includes(n)&&(r[n]=e[n].bind(e));return r}function $N(t){const e=new Set;let r=t;for(;r;){for(const n of Object.getOwnPropertyNames(r))n[0]!=="_"&&typeof t[n]=="function"&&n!=="fire"&&n!=="setEventedParent"&&e.add(n);r=Object.getPrototypeOf(r)}return Array.from(e)}const QN=typeof document<"u"?ye.useLayoutEffect:ye.useEffect,YN=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function KN(t,e){for(const n of YN)n in e&&(t[n]=e[n]);const{RTLTextPlugin:r="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=e;r&&t.getRTLTextPluginStatus&&t.getRTLTextPluginStatus()==="unavailable"&&t.setRTLTextPlugin(r,n=>{n&&console.error(n)},!0)}const $f=ye.createContext(null);function ZN(t,e,r){const n=ye.useContext(LN),[i,o]=ye.useState(null),f=ye.useRef(),{current:p}=ye.useRef({mapLib:null,map:null});ye.useEffect(()=>{const R=t.mapLib;let x=!0,M;return Promise.resolve(R||r).then(U=>{if(!x)return;if(!U)throw new Error("Invalid mapLib");const W="Map"in U?U:U.default;if(!W.Map)throw new Error("Invalid mapLib");if(KN(W,t),!W.supported||W.supported(t))t.reuseMaps&&(M=vA.reuse(t,f.current)),M||(M=new vA(W.Map,t,f.current)),p.map=XN(M),p.mapLib=W,o(M),n==null||n.onMapMount(p.map,t.id);else throw new Error("Map is not supported by this browser")}).catch(U=>{const{onError:W}=t;W?W({type:"error",target:null,originalEvent:null,error:U}):console.error(U)}),()=>{x=!1,M&&(n==null||n.onMapUnmount(t.id),t.reuseMaps?M.recycle():M.destroy())}},[]),QN(()=>{i&&i.setProps(t)}),ye.useImperativeHandle(e,()=>p.map,[i]);const y=ye.useMemo(()=>({position:"relative",width:"100%",height:"100%",...t.style}),[t.style]),T={height:"100%"};return ye.createElement("div",{id:t.id,ref:f,style:y},i&&ye.createElement($f.Provider,{value:p},ye.createElement("div",{"mapboxgl-children":"",style:T},t.children)))}const qN=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function fa(t,e){if(!t||!e)return;const r=t.style;for(const n in e){const i=e[n];Number.isFinite(i)&&!qN.test(n)?r[n]=`${i}px`:r[n]=i}}function GN(t,e){const{map:r,mapLib:n}=ye.useContext($f),i=ye.useRef({props:t});i.current.props=t;const o=ye.useMemo(()=>{let j=!1;ye.Children.forEach(t.children,se=>{se&&(j=!0)});const G={...t,element:j?document.createElement("div"):null},re=new n.Marker(G);return re.setLngLat([t.longitude,t.latitude]),re.getElement().addEventListener("click",se=>{var ce,we;(we=(ce=i.current.props).onClick)===null||we===void 0||we.call(ce,{type:"click",target:re,originalEvent:se})}),re.on("dragstart",se=>{var ce,we;const be=se;be.lngLat=o.getLngLat(),(we=(ce=i.current.props).onDragStart)===null||we===void 0||we.call(ce,be)}),re.on("drag",se=>{var ce,we;const be=se;be.lngLat=o.getLngLat(),(we=(ce=i.current.props).onDrag)===null||we===void 0||we.call(ce,be)}),re.on("dragend",se=>{var ce,we;const be=se;be.lngLat=o.getLngLat(),(we=(ce=i.current.props).onDragEnd)===null||we===void 0||we.call(ce,be)}),re},[]);ye.useEffect(()=>(o.addTo(r.getMap()),()=>{o.remove()}),[]);const{longitude:f,latitude:p,offset:y,style:T,draggable:R=!1,popup:x=null,rotation:M=0,rotationAlignment:U="auto",pitchAlignment:W="auto"}=t;return ye.useEffect(()=>{fa(o.getElement(),T)},[T]),ye.useImperativeHandle(e,()=>o,[]),(o.getLngLat().lng!==f||o.getLngLat().lat!==p)&&o.setLngLat([f,p]),y&&!UN(o.getOffset(),y)&&o.setOffset(y),o.isDraggable()!==R&&o.setDraggable(R),o.getRotation()!==M&&o.setRotation(M),o.getRotationAlignment()!==U&&o.setRotationAlignment(U),o.getPitchAlignment()!==W&&o.setPitchAlignment(W),o.getPopup()!==x&&o.setPopup(x),f1.createPortal(t.children,o.getElement())}ye.memo(ye.forwardRef(GN));function Km(t){return new Set(t?t.trim().split(/\s+/):[])}function JN(t,e){const{map:r,mapLib:n}=ye.useContext($f),i=ye.useMemo(()=>document.createElement("div"),[]),o=ye.useRef({props:t});o.current.props=t;const f=ye.useMemo(()=>{const p={...t},y=new n.Popup(p);return y.setLngLat([t.longitude,t.latitude]),y.once("open",T=>{var R,x;(x=(R=o.current.props).onOpen)===null||x===void 0||x.call(R,T)}),y},[]);if(ye.useEffect(()=>{const p=y=>{var T,R;(R=(T=o.current.props).onClose)===null||R===void 0||R.call(T,y)};return f.on("close",p),f.setDOMContent(i).addTo(r.getMap()),()=>{f.off("close",p),f.isOpen()&&f.remove()}},[]),ye.useEffect(()=>{fa(f.getElement(),t.style)},[t.style]),ye.useImperativeHandle(e,()=>f,[]),f.isOpen()&&((f.getLngLat().lng!==t.longitude||f.getLngLat().lat!==t.latitude)&&f.setLngLat([t.longitude,t.latitude]),t.offset&&!ns(f.options.offset,t.offset)&&f.setOffset(t.offset),(f.options.anchor!==t.anchor||f.options.maxWidth!==t.maxWidth)&&(f.options.anchor=t.anchor,f.setMaxWidth(t.maxWidth)),f.options.className!==t.className)){const p=Km(f.options.className),y=Km(t.className);for(const T of p)y.has(T)||f.removeClassName(T);for(const T of y)p.has(T)||f.addClassName(T);f.options.className=t.className}return f1.createPortal(t.children,i)}ye.memo(ye.forwardRef(JN));function iu(t,e,r,n){const i=ye.useContext($f),o=ye.useMemo(()=>t(i),[]);return ye.useEffect(()=>{const f=e,p=typeof e=="function"?e:null,{map:y}=i;return y.hasControl(o)||y.addControl(o,f==null?void 0:f.position),()=>{p&&p(i),y.hasControl(o)&&y.removeControl(o)}},[]),o}function eO(t){const e=iu(({mapLib:r})=>new r.AttributionControl(t),{position:t.position});return ye.useEffect(()=>{fa(e._container,t.style)},[t.style]),null}ye.memo(eO);function tO(t){const e=iu(({mapLib:r})=>new r.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)}),{position:t.position});return ye.useEffect(()=>{fa(e._controlContainer,t.style)},[t.style]),null}ye.memo(tO);function rO(t,e){const r=ye.useRef({props:t}),n=iu(({mapLib:i})=>{const o=new i.GeolocateControl(t),f=o._setupUI;return o._setupUI=p=>{o._container.hasChildNodes()||f(p)},o.on("geolocate",p=>{var y,T;(T=(y=r.current.props).onGeolocate)===null||T===void 0||T.call(y,p)}),o.on("error",p=>{var y,T;(T=(y=r.current.props).onError)===null||T===void 0||T.call(y,p)}),o.on("outofmaxbounds",p=>{var y,T;(T=(y=r.current.props).onOutOfMaxBounds)===null||T===void 0||T.call(y,p)}),o.on("trackuserlocationstart",p=>{var y,T;(T=(y=r.current.props).onTrackUserLocationStart)===null||T===void 0||T.call(y,p)}),o.on("trackuserlocationend",p=>{var y,T;(T=(y=r.current.props).onTrackUserLocationEnd)===null||T===void 0||T.call(y,p)}),o},{position:t.position});return r.current.props=t,ye.useImperativeHandle(e,()=>n,[]),ye.useEffect(()=>{fa(n._container,t.style)},[t.style]),null}ye.memo(ye.forwardRef(rO));function nO(t){const e=iu(({mapLib:r})=>new r.NavigationControl(t),{position:t.position});return ye.useEffect(()=>{fa(e._container,t.style)},[t.style]),null}ye.memo(nO);function iO(t){const e=iu(({mapLib:o})=>new o.ScaleControl(t),{position:t.position}),r=ye.useRef(t),n=r.current;r.current=t;const{style:i}=t;return t.maxWidth!==void 0&&t.maxWidth!==n.maxWidth&&(e.options.maxWidth=t.maxWidth),t.unit!==void 0&&t.unit!==n.unit&&e.setUnit(t.unit),ye.useEffect(()=>{fa(e._container,i)},[i]),null}ye.memo(iO);const sO=nd(()=>import("./mapbox-gl-7MH5B4xR.js").then(t=>t.m),[]),oO=ye.forwardRef(function(e,r){return ZN(e,r,sO)}),Vv=t=>t!==null,aO=(t,e=300)=>{let r,n,i;return function(...o){const f=this;r?(clearTimeout(n),n=setTimeout(()=>{Date.now()-i>=e&&(t.apply(f,o),i=Date.now())},Math.max(e-(Date.now()-i),0))):(t.apply(f,o),i=Date.now(),r=!0)}};function AO(t,e,r){const n=r-e;return((t-e)%n+n)%n+e}function Zm(t){return AO(t,-180,180)}const lO=t=>{const e=new ra(t),{width:r,height:n}=t,i=e.unproject([0,0]),o=e.unproject([r,n]),f=o[1],p=i[0],y=i[1],T=o[0];return{minLat:f,minLon:p,maxLat:y,maxLon:T}},uO=({minLat:t,minLon:e,maxLat:r,maxLon:n})=>cO(e,n).map(([i,o])=>({minLat:t,minLon:i,maxLat:r,maxLon:o}));function cO(t,e){const r=[];let n=t,i=Zm(e);for(;n<e;){let o=Zm(n),f=o<0?0:180;n=n+f-o,n>e?r.push([o,i]):r.push([o,f])}return r}const fO=({minLat:t,minLon:e,maxLat:r,maxLon:n})=>[[e,t],[n,t],[n,r],[e,r],[e,t]],zv={0:0,1:0,2:1,3:2,4:2,5:3,6:4,7:5,8:5,9:6,10:6,11:7,12:8,13:9,14:10,15:11,16:11,17:12,18:12,19:13,20:14},hO=Object.entries(zv).reduce((t,[e,r])=>({...t,[r]:+e}),{}),dO=(t,e)=>{const n=uO(t).map(fO);return[...new Set(n.flatMap(o=>RN(o,e,!0)))]},gO=()=>{const[t,e]=ye.useState(new Set),[r,n]=ye.useState([]),[i,o]=ye.useState(0),[f,p]=ye.useState(null);return ye.useEffect(()=>{p(new SA({id:"H3HexagonLayer",extruded:!1,getHexagon:T=>T,getFillColor:T=>t.has(T)?[255,100,100,150]:[0,0,0,1],getLineColor:[150,150,150,100],getLineWidth:2,lineWidthUnits:"pixels",elevationScale:20,pickable:!0,data:r,wrapLongitude:!0,updateTriggers:{getFillColor:[t]},onClick:(T,R)=>{e(x=>new Set([T.object,...R.srcEvent.shiftKey?x:[]].filter(Vv)))}}))},[t,e,r]),{handleResize:ye.useCallback(aO(T=>{const R=T.zoom,x=zv[Math.round(R)];o(x);const M=lO(T),U=dO(M,x);n(U)},300),[p,t,e,o]),hexLayer:f,selectedHexes:t,setSelectedHexes:e,resolution:i}},pO=t=>{const e=t.map(Xf),r=e.map(([f,p])=>f),n=e.map(([f,p])=>p),i=r.reduce((f,p)=>f+p,0)/r.length,o=n.reduce((f,p)=>f+p,0)/n.length;return[i,o]},_O=t=>{const e=t.map(Lv);return Math.floor(e.reduce((r,n)=>r+n,0)/e.length)};function mO(){const[t,e]=ye.useState({width:1734,height:1318,latitude:37.635849802603865,longitude:-35.383059547989724,zoom:2.415529236018404,bearing:0,pitch:0,maxZoom:20,minZoom:0,maxPitch:60,minPitch:0,position:[0,0,0]}),{handleResize:r,hexLayer:n,selectedHexes:i,setSelectedHexes:o,resolution:f}=gO(),p=ye.useCallback(y=>{const T=new Set(y.filter(Vv).map(M=>M.toString()).filter(EN));if(o(T),T.size===0)return;const[R,x]=pO([...T]);e(M=>({...M,longitude:x,latitude:R,zoom:hO[_O([...T])]}))},[o,e]);return ye.useEffect(()=>{r(t)},[t,r]),Fi.jsxs("div",{className:"root",children:[Fi.jsx(s8,{onViewStateChange:({viewState:y})=>e(y),viewState:t,controller:!0,views:new Tg({repeat:!0}),layers:[n],children:Fi.jsx(oO,{mapStyle:"mapbox://styles/mapbox/light-v9",mapboxAccessToken:"pk.eyJ1IjoicGFsYW50aXItZW50ZXJwcmlzZSIsImEiOiJjazlzcjB2aHgwMWdoM2VtdTR3eHhxd3hzIn0.pHSdjsyiukVMVnWqQeUGaw"})}),Fi.jsxs("div",{className:"overlay",children:[Fi.jsx(R_,{label:"H3 Resolution",children:Fi.jsx(H3,{min:0,max:15,stepSize:1,value:f,disabled:!0})}),Fi.jsx(R_,{helperText:"Select the H3 cells you want to display.",label:"Selected H3 Cells",children:Fi.jsx(j3,{onChange:p,placeholder:"Separate values with commas...",values:[...i]})})]})]})}Mw.createRoot(document.getElementById("root")).render(Fi.jsx(ye.StrictMode,{children:Fi.jsx(mO,{})}));export{ar as I,Ka as _,Za as a,nd as b,$d as g,C3 as p};
